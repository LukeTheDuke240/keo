<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Krunker Editor</title>
<script async="" src="gtag\js.js?id=UA-69264675-5"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-69264675-5');
    </script>
<link rel='shortcut icon' type="image/png" href="img\favicon.png">
<link rel="stylesheet" href="css\editor.css">
<link rel="stylesheet" title="dark" href="css\editor_dark.css">
<link rel="stylesheet" href="/css/editor_custom.css?build=7FQDg">
<link rel="stylesheet" href="css\pickr.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta property="og:title" content="Krunker Editor">
<meta property="og:image" content="https://assets.krunker.io/promo/og.png">
</head>
<body oncontextmenu="return false;">
<link href="icon.css?family=Material+Icons" rel="stylesheet">

<div id="vignette"></div>

<div id="uiBase">

<div id="popupHolder">
<div id="popupBack" onclick="clearPops()"></div>
<div id="popupContent"></div>
<div id="alertPop"></div>
</div>

<div id="menuHolder">

<div id="menuHider" style="display: none;">

<div id="windowHolder" style="display:none">
<div id="windowHeader"></div>
<div id="menuWindow"></div>
</div>
</div>
</div>

<div id="hotbar">

<div id="_toolbar"></div>

<div id="playbar">
<div class="playbarItemL" onclick="KE.testMap()"><i class="material-icons" style="color: #202020; font-size: 25px">play_arrow</i></div>
<div class="playbarItemR" onclick="KE.testMap(true)"><i class="material-icons" style="color: #202020; font-size: 25px">publish</i></div>
</div>

<div id="rightMenu">
<div id="versionTxt"></div>
</div>
</div>

<div id="view">

<div class="left restore" style="left: 0" onclick="KE.resizable.restore(this)"><i class="material-icons">keyboard_arrow_right</i></div>
<div class="left panel" onscroll="GUI.update.color.pickr.hide()">
<div class="resize" style="left: calc(100% - 5px)"></div>
<div class="list"></div>
</div>

<div id="center">

<div id="container"></div>

<div id="canvasUI">

<div id="transform">
<div id="translateOption" class="button"><i class="material-icons" style="transform: rotate(45deg);font-size: 20px;margin: -1px">zoom_out_map</i></div>
<div id="rotateOption" class="button"><i class="material-icons">loop</i></div>
<div id="scaleOption" class="button"><i class="material-icons">zoom_out_map</i></div>
</div>

<div id="spaceOption" class="button">World</div>

<div id="faceOption" class="button">Face Selection: OFF</div>

<div id="groupOption" class="button">Group Selection: OFF</div>

<div id="wireframeOption" class="button">Wireframe: OFF</div>

<div id="chatHolder">
<div id="chatList"></div>
</div>
</div>

<div id="canvasInfo">
<div class="statTitle">Spawn Points</div><div id="spawnCount" class="stat">0 / 20</div>
<div class="statTitle">Collidable Objects</div><div id="objectColCount" class="stat">0</div>
<div class="statTitle">Non-Collidable Objects</div><div id="objectNoColCount" class="stat">0</div>
<div class="statTitle">Total Objects</div><div id="objectCount" class="stat">0</div>
</div>

<div id="canvasAdd"><div>+</div></div>

<div id="canvasObjEdit">
<div id="deleteOption" class="button">Delete</div>
<div id="duplicateOption" class="button">Duplicate</div>
</div>
</div>

<div class="right restore" onclick="KE.resizable.restore(this)"><i class="material-icons">keyboard_arrow_left</i></div>
<div class="right panel" onscroll="GUI.update.color.pickr.hide()">
<div class="resize"></div>
<div class="list"></div>
</div>
</div>

<div id="editorUI">
<div id="progress"></div>
<div id="instructionHolder" onclick="closeWindow()"></div>
</div>
</div>

<script>
        if (!localStorage.dev) {
            window.onbeforeunload = function() {
                return 'You have unsaved changes!';
            }
        }
    </script>
<script src="libs\howler.min.js?build=7FQDg"></script>
<script src="libs\quicksettings.js"></script>
<script src="libs\pickr.min.js"></script>
<script src="libs\jszip.min.js?build=7FQDg"></script>
<script type="text/javascript">/*!
 * Copyright (C) Yendis Entertainment Pty Ltd - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Yendis Entertainment <sidney@yendis.ch>
 */!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=145)}([function(e,t,i){var n=t.global=i(35),r=t.hasBuffer=n&&!!n.isBuffer,a=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=t.isArray=i(5);t.isArrayBuffer=a?function(e){return e instanceof ArrayBuffer||f(e)}:y;var o=t.isBuffer=r?n.isBuffer:y,l=t.isView=a?ArrayBuffer.isView||v("ArrayBuffer","buffer"):y;t.alloc=u,t.concat=function(e,i){i||(i=0,Array.prototype.forEach.call(e,(function(e){i+=e.length})));var n=this!==t&&this||e[0],r=u.call(n,i),a=0;return Array.prototype.forEach.call(e,(function(e){a+=h.copy.call(e,r,a)})),r},t.from=function(e){return"string"==typeof e?m.call(this,e):g(this).from(e)};var c=t.Array=i(37),d=t.Buffer=i(38),p=t.Uint8Array=i(39),h=t.prototype=i(10);function u(e){return g(this).alloc(e)}var f=v("ArrayBuffer");function m(e){var t=3*e.length,i=u.call(this,t),n=h.write.call(i,e);return t!==n&&(i=h.slice.call(i,0,n)),i}function g(e){return o(e)?d:l(e)?p:s(e)?c:r?d:a?p:c}function y(){return!1}function v(e,t){return e="[object "+e+"]",function(i){return null!=i&&{}.toString.call(t?i[t]:i)===e}}},function(e,t,i){(function(t){e.exports.gameVersion="3.3.7",e.exports.editorVersion="0.9",e.exports.isNode=void 0!==t&&void 0!==t.release&&-1!==t.release.name.search(/node|io.js/),e.exports.isProd=e.exports.isNode?!!t.env.IS_PROD:"127.0.0.1"!==location.hostname&&"localhost"!==location.hostname&&!location.hostname.startsWith("192.168."),e.exports.prodSchemes=["krunker_prod","krunker_comp","krunker_social","krunker_api","krunker_matchmaker","krunker_file_server"],e.exports.compSchemes=["krunker_comp","krunker_comp_beta"],e.exports.socialBetaSchemes=["krunker_social_beta"],e.exports.prodURLs=["krunker.io","comp.krunker.io"],e.exports.compURLs=["comp.krunker.io","comp_beta.krunker.io"],e.exports.socialBetaURLs=["social_beta.krunker.io"],e.exports.isNode?(e.exports.isProdScheme=-1!=e.exports.prodSchemes.indexOf(t.env.VULTR_SCHEME),e.exports.isComp=-1!=e.exports.compSchemes.indexOf(t.env.VULTR_SCHEME),e.exports.isSocialBeta=-1!=e.exports.socialBetaSchemes.indexOf(t.env.VULTR_SCHEME)):(e.exports.isProdScheme=-1!=e.exports.prodURLs.indexOf(location.hostname),e.exports.isComp=-1!=e.exports.compURLs.indexOf(location.hostname),e.exports.isSocialBeta=-1!=e.exports.socialBetaURLs.indexOf(location.hostname));var i=e.exports.isComp;e.exports.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.exports.enableHttps=e.exports.isProd||!e.exports.isNode&&"true"==localStorage.__FORCE_HTTPS__,e.exports.serverTickFrequency=30,e.exports.serverTickRate=1e3/e.exports.serverTickFrequency,e.exports.clientSendRate=1e3/30,e.exports.dltMx=Math.round(1e3/30),e.exports.streamUpdate=1e4,e.exports.maxPlayers=8,e.exports.serverSpread=3,e.exports.gamesPerServer=i?1:2,e.exports.serverBrowserRate=1e4,e.exports.maxPlayersTotal=e.exports.maxPlayers*e.exports.gamesPerServer+40,e.exports.kickTimer=9e4,e.exports.maxPayloadLength=75e4,e.exports.useLooseClient=!1,e.exports.raidsInPubs=!1,e.exports.raidMapId=12,e.exports.movDirs=[];for(var n=0;8>n;++n)e.exports.movDirs.push(-Math.PI+(n+1)*Math.PI/4);e.exports.interpolation=i?1.5:1.1,e.exports.stateHistory=500,e.exports.syncFrequency=1,e.exports.syncRate=1e3/e.exports.syncFrequency,e.exports.recaptchaKey="6LdvBrQUAAAAAL6gtEpVNzii_3nQkbOyx912nvlm",e.exports.pingCount=10,e.exports.maxObfPing=100,e.exports.maxObfPad=55,e.exports.minObfPad=20,e.exports.minKDFLvl=50,e.exports.minKDFCall=25,e.exports.maxKPDCalls=10,e.exports.kpdCallTime=10,e.exports.isProd?e.exports.isProdScheme?(e.exports.matchmakerURL="https://matchmaker.krunker.io",e.exports.apiURL="https://api.krunker.io",e.exports.socialURL="https://social.krunker.io"):(e.exports.matchmakerURL="https://matchmaker_beta.krunker.io",e.exports.apiURL="https://api_beta.krunker.io",e.exports.socialURL="https://social_beta.krunker.io"):(e.exports.matchmakerURL="http://127.0.0.1:5050",e.exports.apiURL="http://127.0.0.1:5080",e.exports.socialURL="http://127.0.0.1:5070"),e.exports.availableRegions=e.exports.isProd?e.exports.isComp?["sgp","de-fra","us-nj"]:["de-fra","us-ca-sv","au-syd","jb-hnd","us-fl","sgp","us-nj","blr","us-tx","brz","me-bhn","af-ct","as-seoul"]:["local"],e.exports.partnerPReq=15e4,e.exports.regionIND={sgp:2,"jb-hnd":2,"us-nj":4,"us-fl":4,"us-ca-sv":4,brz:4,"us-tx":4,"au-syd":1,"de-fra":3,"gb-lon":3,blr:2,"me-bhn":2,"as-seoul":2,"af-ct":3},e.exports.shopTabs=["Prize Wheels","Premium","Purchase KR","Redeem","Marketplace"],e.exports.currentSeason=4,e.exports.easterEggs=150,e.exports.eggReward=5e3,e.exports.angels=[],e.exports.bannedUsers=["selaphiel","uriel","jophiel","michael","tabellarium","purgatory"],e.exports.tradeMinLvl=20,e.exports.tradeCost=10,e.exports.tradeMaxOut=5,e.exports.tradeMaxOutP=15,e.exports.interactTradeTimer=3e3,e.exports.rewardTime=36e5,e.exports.rewardMinLvl=1,e.exports.rewardUpdate=12e5,e.exports.chalVar=.03,e.exports.maxChal=30,e.exports.minChalLevel=30,e.exports.rankVar=.03,e.exports.eloPer=120,e.exports.eloK=32,e.exports.queues=[{id:"r1v1",name:"windows.ranked.mode.r1v1",maxPartySize:1,key:"elo"},{id:"r2v2",name:"windows.ranked.mode.r2v2",defaultQueue:!0,maxPartySize:2,key:"elo2"},{id:"r4v4",name:"windows.ranked.mode.r4v4",maxPartySize:4,key:"elo4"}],e.exports.minRankedLevel=15,e.exports.rankedCooldown=72e5,e.exports.rankedDeduction=30,e.exports.endTimer=25e3,e.exports.endAnim=5e3,e.exports.voteKickReq=4,e.exports.voteKickMaxLvl=20,e.exports.voteKickTimer=35e3,e.exports.inpDirGran=30,e.exports.inpBackTim=3e3,e.exports.thrdPZ=14,e.exports.thrdPX=5,e.exports.thrdPY=2,e.exports.serverUpg=[{name:"40 Player Server",varN:"maxPS",cost:1e3},{name:"Promote Server",varN:"promServ",cost:2500}],e.exports.serverConfig=[{name:"Players",varN:"maxPlayers",def:2,max:10,maxP:16,maxF:20,maxG:6,min:1,step:1},{name:"Min Players",varN:"minPlayers",def:0,max:10,maxP:16,maxF:20,maxG:6,min:0,step:1},{name:"Minutes",varN:"gameTime",def:4,max:60,min:0,step:1},{name:"Warmup",varN:"warmupTime",def:0,max:4,min:0,step:.1},{name:"Auto Respawn",varN:"forceSpawn",def:0,max:15,min:0,step:1},{name:"Lives",varN:"lives",def:0,max:10,min:0,step:1},{name:"Score Limit",varN:"scoreLimit",def:0,max:1e4,min:0,step:100},{name:"Gravity",head:"Physics",varN:"gravMlt",dontChange:!0,def:1,max:2,min:0,step:.1},{name:"Jump Force",varN:"jumpMlt",dontChange:!0,def:1,max:3,min:.1,step:.1},{name:"Time Scale",varN:"deltaMlt",dontChange:!0,def:1,max:1.5,min:.1,step:.1},{name:"Slide Time",varN:"slidTime",dontChange:!0,def:1,max:5,min:1,step:.1},{name:"Weapon Impulse",varN:"impulseMlt",dontChange:!0,def:1,max:3,min:0,step:.1},{name:"Wall Jump Power",varN:"wallJP",def:1,max:2,min:0,step:1},{name:"Strafe Speed",varN:"strafeSpd",dontChange:!0,def:1.2,max:2,min:1,step:.1},{name:"Sliding",varN:"canSlide",def:!0,bool:!0},{name:"Air Strafe",varN:"airStrf",dontChange:!0,def:!1,bool:!0},{name:"Auto Jump",varN:"autoJump",def:!1,bool:!0},{name:"Bullet Drop",varN:"bDrop",def:!1,bool:!0},{name:"Health Multiplier",head:"Game Logic",varN:"healthMlt",dontChange:!0,def:1,max:3,min:.1,step:.1},{name:"Fire Rate",varN:"fiRat",dontChange:!0,def:1,max:2,min:.5,step:.1},{name:"Reload Speed",varN:"reSpd",dontChange:!0,def:1,max:2,min:.5,step:.1},{name:"Health Regen",varN:"hpRegen",def:!0,bool:!0},{name:"Kill Rewards",varN:"killRewards",dontChange:!0,def:!0,bool:!0},{name:"Headshots Only",varN:"headshotOnly",dontChange:!0,def:!1,bool:!0},{name:"No Secondaries",varN:"noSecondary",dontChange:!0,def:!1,bool:!0},{name:"Disable Streaks",varN:"noStreaks",dontChange:!0,def:!1,bool:!0},{name:"Disable Borders",varN:"disableB",def:!1,bool:!0},{name:"Throwable Melees",varN:"throwMel",def:!0,bool:!0},{name:"Select Team",head:"Teams",varN:"selTeam",def:!1,bool:!0},{name:"Team 1 Name",varN:"nameTeam1",def:"Team 1",hideE:!0,input:!0},{name:"Team 2 Name",varN:"nameTeam2",def:"Team 2",hideE:!0,input:!0},{name:"Team 1 Damage",varN:"t1Dmg",def:1,max:2,min:0,step:.1},{name:"Team 2 Damage",varN:"t2Dmg",def:1,max:2,min:0,step:.1},{name:"Spectating",head:"Other",varN:"allowSpect",def:!0,bool:!0},{name:"3rd Person",varN:"thirdPerson",def:!1,bool:!0},{name:"Require Captcha",varN:"requireCaptcha",def:!1,bool:!0},{name:"Hide Nametags",varN:"nameTags",def:!1,bool:!0}],e.exports.objectLimit=5e3,e.exports.objectLimitF=7500,e.exports.objectColLimit=4500,e.exports.objectColLimitF=6e3,e.exports.spawnLimit=20,e.exports.signFontMax=120,e.exports.billboardCnt=6,e.exports.aiLimit=20,e.exports.signLimit=30,e.exports.signTextLimit=1500,e.exports.signFontMin=10,e.exports.triggerLimit=20,e.exports.interfaceLimit=20,e.exports.interfaceIDMax=1e3,e.exports.gameConfig=[{name:"Type",varN:"camType",cat:0,def:0,options:["FPS","3rd Person","Platformer (X)","Platformer (Z)"],select:!0},{name:"X Offset",varN:"camOffX",cat:0,def:0,max:500,min:0,step:1},{name:"Y Offset",varN:"camOffY",cat:0,def:0,max:500,min:0,step:1},{name:"Z Offset",varN:"camOffZ",cat:0,def:0,max:500,min:0,step:1},{name:"Enable Rotation",varN:"camRot",cat:0,def:!0,bool:!0},{name:"Move Scheme",varN:"movSch",cat:1,def:0,options:["Default","Follow Mouse","Move Right","Fly","Dir Only"],select:!0},{name:"Player Type",varN:"mdl",cat:1,def:0,options:["Default","Sprite","Model"],select:!0},{name:"Custom Asset",varN:"aID",cat:1,def:"",input:!0},{name:"Custom Asset Scale",varN:"mdlS",cat:1,def:1,max:100,min:.1,step:.1},{name:"Speed X",varN:"speedX",cat:1,def:1,max:10,min:-10,step:.1},{name:"Speed Y",varN:"speedY",cat:1,def:1,max:10,min:-10,step:.1},{name:"Speed Z",varN:"speedZ",cat:1,def:1,max:10,min:-10,step:.1},{name:"Move Dir",varN:"movDrP",cat:1,def:0,max:1,min:-1,step:.1},{name:"Turn Speed",varN:"trnSp",cat:1,def:1,max:3,min:0,step:.1},{name:"Ladder Accel",varN:"ldA",cat:1,def:1,max:5,min:.1,step:.1},{name:"Air Accel",varN:"arA",cat:1,def:1,max:3,min:.1,step:.1},{name:"Slide Time",varN:"slT",cat:1,def:1,max:3,min:.1,step:.1},{name:"Slide Accel",varN:"slA",cat:1,def:1,max:1.5,min:.1,step:.1},{name:"Jump Cooldown",varN:"jpC",cat:1,def:1,max:3,min:.1,step:.1},{name:"Infinite Jump",varN:"infJ",cat:1,def:!1,bool:!0},{name:"Override Jump",varN:"ovrJump",cat:1,def:!1,bool:!0}],e.exports.fetMapsH=[{}],e.exports.weaponConfig=[{name:"Damage",varN:"dmg",max:200,min:1,step:1,decs:0},{name:"Headshot Mlt",varN:"hsMlt",max:3,min:.5,step:1e-4,decs:4},{name:"Ammo",varN:"ammo",max:100,min:1,step:1,decs:0},{name:"Rate",varN:"rate",max:1e3,min:70,step:10,decs:0},{name:"Reload Time",varN:"reload",max:5e3,min:500,step:25,decs:0},{name:"Swap Time",varN:"swapTime",max:1e3,min:100,step:10,decs:0},{name:"Aim Speed",varN:"aimSpd",max:500,min:100,step:10,decs:0},{name:"Move Speed",varN:"spdMlt",max:3,min:.5,step:.01,decs:2},{name:"Pierce",varN:"pierce",max:1,min:0,step:.05,decs:2},{name:"Range",varN:"range",max:2e3,min:5,step:1,decs:0},{name:"Damage Drop",varN:"dmgDrop",max:100,min:0,step:1,decs:0},{name:"Spread",varN:"spread",max:500,min:10,step:10,decs:0},{name:"Min Spread",varN:"minSpread",max:100,min:5,step:1,decs:0},{name:"Zoom",varN:"zoom",max:3,min:1,step:.01,decs:2},{name:"Recoil",varN:"recoil",max:.05,min:0,step:1e-4,decs:4},{name:"Recoil Y",varN:"recoilYM",max:1,min:0,step:.01,decs:2},{name:"Recoil Z",varN:"recoilZ",max:10,min:0,step:.1,decs:2},{name:"Recoil Z Aim",varN:"recoilZM",max:1,min:-1,step:.01,decs:2},{name:"Jump Power",varN:"jumpYM",max:1,min:.1,step:.01,decs:2},{name:"Impulse Range",varN:"physRang",max:100,min:0,step:1,decs:0},{name:"Impulse Power",varN:"physPow",max:2,min:0,step:.001,decs:3},{name:"Secondary",varN:"secondary",bool:!0},{name:"Akimbo",varN:"akimbo",bool:!0},{name:"Single Fire",varN:"nAuto",bool:!0},{name:"No Spread",varN:"noSpread",bool:!0},{name:"Disable ADS",varN:"noAim",bool:!0}],e.exports.followInd=52,e.exports.followURLS=["https://www.youtube.com/channel/UCAK96GBHaNtazd_fYveaNPA"],e.exports.recVids=["https://www.youtube.com/embed/KU4UOD802pM","https://www.youtube.com/embed/_2YzOlRJ1lU","https://www.youtube.com/embed/eyotedXeW8Y","https://www.youtube.com/embed/kuTCye_s_D4","https://www.youtube.com/embed/tkqPBqm4JRw"],e.exports.whoToFol=[{name:"Sidney",tag:"Developer",id:201211},{name:"Vince",tag:"Developer",id:105683},{name:"Tehchy",tag:"Developer",id:289362},{name:"MoonJuiceAlt",alias:"MoonJuice",tag:"Streamer",id:2968503},{name:"ImWaspy",tag:"Streamer",id:2593871},{name:"hey_im_zed",alias:"HeyImZed",tag:"Streamer",id:177694},{name:"cimota",tag:"Skin Maker",id:7516049},{name:"Kilfy",tag:"Skin Maker",id:8871318},{name:"iSpy",tag:"Skin Maker",id:177694},{name:"Nxbulah",tag:"Skin Maker",id:5739887},{name:"Skriller33",tag:"Skin Maker",id:5068654},{name:"Andrii",tag:"Map Maker",id:163429},{name:"JavieBhop",tag:"Map Maker",id:1517556},{name:"Andrii",tag:"Map Maker",id:163429},{name:"Keybi",tag:"Map Maker",id:310968},{name:"thejavi99",tag:"Map Maker",id:1498591},{name:"owOmar",tag:"Mod Maker",id:5461278},{name:"siktis",tag:"Mod Maker",id:5746131},{name:"DukeV",tag:"Map Maker",id:943615},{name:"Chwoubaka",tag:"Mod Maker",id:4927907},{name:"PhilZ",tag:"Youtuber",id:2378875},{name:"JamemesG",tag:"E-Sports",id:3524e3},{name:"jcStani",tag:"E-Sports",id:6895308},{name:"COLOR",tag:"E-Sports",id:164485},{name:"roadman",tag:"E-Sports",id:241773},{name:"revzi",tag:"E-Sports",id:8345163},{name:"Mosswi",tag:"Staff",id:2768744},{name:"wingmangod69",alias:"Wingman",tag:"E-Sports",id:2449631},{name:"Swixie",tag:"Streamer",id:5720620},{name:"QuackyTTV",alias:"Quacky",tag:"Streamer",id:3742667},{name:"Highnoon",tag:"Support",id:361086},{name:"StremZ",tag:"Streamer",id:5045705}],e.exports.minBid=100,e.exports.billbHours=2,e.exports.billbTime=36e5*e.exports.billbHours,e.exports.billbUpdtI=6e5,e.exports.impresstimate=2e5,e.exports.bidMinLvl=20,e.exports.bidEnabled=!0,e.exports.gravity=15e-5,e.exports.deathY=-100,e.exports.skyScale=18e3,e.exports.shadowDst=1200,e.exports.shadowRes=1024,e.exports.shadowOff=.004,e.exports.lightDistance=500,e.exports.lightIntensity=1.3,e.exports.ambIntensity=1,e.exports.cornerScl=2.5,e.exports.cornerH=7,e.exports.wallH=5,e.exports.wallW=.8,e.exports.sunAngleX=90,e.exports.sunAngleY=54,e.exports.cornerPad=1,e.exports.diskSpin=2e-4,e.exports.ladderWidth=3.2,e.exports.ladderScale=.5,e.exports.terrainGrid=8,e.exports.maxTerrainS=4e3,e.exports.buildMax=1200,e.exports.otherSoundMlt=.55,e.exports.networkSounds=["spray","taunt_0","taunt_1","taunt_2","taunt_3","weapon_1","weapon_1_0","weapon_2","weapon_3","weapon_4","weapon_5","weapon_6","weapon_7","weapon_8","weapon_9","weapon_10","weapon_11","weapon_12","weapon_13","weapon_14","weapon_15","weapon_16","weapon_17","weapon_18","weapon_6_0","weapon_1_2","weapon_3_0","weapon_3_2","taunt_4","weapon_2_0","weapon_1_4","weapon_1_3","weapon_17","weapon_8_0","weapon_10_0","collect_1","melee_12","headshot_0","weapon_4_0","melee_14","beep_0","bo_plant","bo_diff","weapon_1_5","weapon_19","melee_19","jump_0","jump_1","step_0","step_1","step_2","weapon_11_0","weapon_4_1","weapon_4_2","weapon_4_3","weapon_7_0","melee_25","melee_25_1","weapon_1_6","shoe_2","shoe_1","weapon_7_1","weapon_2_1","weapon_1_7","weapon_2_2","build_0"],e.exports.particleIDS=["default","grass","fog","ember"],e.exports.maxParticles=100,e.exports.explosionRange=200,e.exports.particleDist=40,e.exports.particleBlending=["None","Normal","Additive","Subtractive","Multiply"],e.exports.throwCharge=800,e.exports.projSpreads=[.1,-.8,.3,1,.1,-.4,-.1,.3,.5,-.45,.2,-.2],e.exports.minDrop=300,e.exports.dropR=.1,e.exports.chatMaxLength=70,e.exports.chatInterval=800,e.exports.voiceChatInterval=2e3,e.exports.chatListLength=35,e.exports.voiceChatMaxLength=.65,e.exports.voiceRate=500,e.exports.voiceDelay=200,e.exports.invisChar="&lrm;",e.exports.gbr=!1,e.exports.mouseSens=.0024,e.exports.camChaseTrn=.0022,e.exports.camChaseSpd=.0012,e.exports.camChaseSen=.2,e.exports.camChaseDst=24,e.exports.specMinD=10,e.exports.specMaxD=160,e.exports.menuCamDist=200,e.exports.menuCamAngle=-.5,e.exports.menuCamSpeed=.1,e.exports.idleAnimS=.0015,e.exports.animMult=1.2,e.exports.leanPull=.99,e.exports.leanSens=.05,e.exports.leanMax=.16,e.exports.leanPullZ=.99,e.exports.leanMltZ=.03,e.exports.bobMltY=.024,e.exports.bobPullY=.985,e.exports.bobPullZ=.99,e.exports.landPull=.994,e.exports.landPullV=.985,e.exports.bobMltZ=.02,e.exports.landOff=.15,e.exports.aimAnimMlt=.18,e.exports.aimSlow=.55,e.exports.aimJumpSlow=.85,e.exports.stepAnim=.075,e.exports.stepMlt=.25,e.exports.stepPull=.995,e.exports.collPad=1.1,e.exports.hpSegments=7,e.exports.maxHealth=100,e.exports.passiveInc=500,e.exports.cameraHeight=1.5,e.exports.playerSpeed=42e-5,e.exports.slippingSpeed=3e-4,e.exports.ladderSpeed=.035,e.exports.ladderDecel=.97,e.exports.slideDecel=.999,e.exports.slideTime=350,e.exports.terrainSlideDecel=.9996,e.exports.groundDecel=.99,e.exports.terrainDecel=.99,e.exports.terrainSlipDecel=.99,e.exports.airSpeed=47e-6,e.exports.airDecel=.9996,e.exports.jumpVel=.072,e.exports.jumpPush=.1,e.exports.decelMin=1e-4,e.exports.climbHeight=3,e.exports.cornerGlide=4,e.exports.wpnSpin=.018,e.exports.terrainSlideThreshold=1.9,e.exports.terrainGravityMlt=1.85,e.exports.playerSlideVelMlt=1.2,e.exports.playerTerrainSlideVelMlt=.4,e.exports.playerSlippingJumpCooldown=500,e.exports.materialDens={flesh:.2,default:.5},e.exports.nameOffset=.6,e.exports.nameOffsetHat=.8,e.exports.maxNameLength=14,e.exports.maxPassLength=20,e.exports.minPassLength=6,e.exports.playerHeight=11,e.exports.chestWidth=2.6,e.exports.chestScale=1.3,e.exports.armScale=1.2,e.exports.legScale=1.3,e.exports.uArmLength=2.7,e.exports.armInset=-.1,e.exports.lArmLength=2.7,e.exports.headScale=2,e.exports.armOff=-.8,e.exports.legHeight=4.2,e.exports.playerScale=(2*e.exports.armScale+e.exports.chestWidth+e.exports.armInset)/2,e.exports.hitBoxPad=1,e.exports.tracerMinDst=20,e.exports.tracerMaxDst=500,e.exports.tracerChance=1,e.exports.crouchLean=-.1*Math.PI,e.exports.crouchDst=3,e.exports.crouchSlow=.3,e.exports.crouchSpd=.007,e.exports.crouchJump=.25,e.exports.crouchSpread=.55,e.exports.crouchAnim=8e-4,e.exports.crouchAnimMlt=.5,e.exports.spreadMove=25,e.exports.spreadFall=30,e.exports.spreadRecover=.985,e.exports.spreadAdj=63e-5,e.exports.spreadMlt=240,e.exports.recoilMlt=.3,e.exports.flagMsg="You have the Flag",e.exports.flagMsgE="Enemy has your Flag",e.exports.flagMsgRC="Enemy has your Flag",e.exports.flagZoneS=24,e.exports.flagZoneH=36,e.exports.flagScale=12,e.exports.flagOff=6,e.exports.flagHOff=15,e.exports.flagUpdate=2500,e.exports.interactTimer=100,e.exports.pickupTimer=1e3,e.exports.pickupZoneX=12,e.exports.pickupZoneZ=4,e.exports.pickupZoneH=2,e.exports.pickupScale=6,e.exports.pickupOff=1,e.exports.maxLevel=102,e.exports.maxELOLevel=8,e.exports.assistTime=5e3,e.exports.assistScore=25,e.exports.assistMin=20,e.exports.scoreStreak=2e3,e.exports.medalAnim=1e3,e.exports.medalDelay=900,e.exports.feedTimer=2e3,e.exports.spinTimer=1800,e.exports.endStats=["sid","name","score","kills","deaths","reward"],e.exports.endForm={reward:function(e){return e?"<span style='color:#F8C55C'>+"+e+"</span> KR":"NONE"},MMR:function(e,t,i){var n=i.account&&i.account[t.queueConfig.accountKey]||0;return"<span style='color:#F8C55C'><span style='color:rgba(255, 255, 255, 0.7);'>"+(0>(n=0<=i.ELO?n-i.ELO:n+Math.abs(i.ELO))?0:n).round(1)+"</span> "+(0<=i.ELO?"+":"-")+Math.abs(i.ELO.round(1))+"</span>"},time:function(e,t,i){return i.timer||"DNF"},infected:function(e,t,i){return i.convs},found:function(e,t,i){return i.convs},weapon:function(e,t,i){return i.weaponTier},objective:function(e,t,i){return i.objectiveScore||0},confirms:function(e,t,i){return i.confirms||0},denies:function(e,t,i){return i.denies||0},dmg:function(e,t,i){return Math.round(i.dmgDealt||0)}},e.exports.hitLife=2e3,e.exports.regenDelay=5e3,e.exports.regenVal=.1,e.exports.sprayRange=25,e.exports.sprayTimer=1e3,e.exports.sprayScale=15,e.exports.deathDelay=2800,e.exports.deathFollowD=100,e.exports.suicides=["uninstall life","toaster bath","alt f4","not alive","neck rope","scooter ankle","death.exe"],e.exports.taunts=[{nm:"taunt_0",id:1,tm:500},{nm:"taunt_1",id:2,tm:1e3},{nm:"taunt_2",id:3,tm:2300},{nm:"taunt_3",id:4,tm:3200},{nm:"taunt_4",id:28,tm:3200}],e.exports.fov=80,e.exports.viewDist=2e3,e.exports.nameVisRate=200,e.exports.worldUV=60,e.exports.ambientVal=.5,e.exports.ambD=2,e.exports.ambMlt=15,e.exports.ambOff=.09,e.exports.ambScale=8,e.exports.ambDiv=20,e.exports.ambSFactor=1,e.exports.ambBleed=0,e.exports.boosterSpd=.002,e.exports.boostRange=100,e.exports.minMountainMlt=0,e.exports.maxTerrainSize=8e3,e.exports.minTerrainSize=0,e.exports.maxMountainMlt=5,e.exports.minZoneSize=0,e.exports.maxZoneSize=1e4,e.exports.minZoneHeight=100,e.exports.maxZoneHeight=1e4,e.exports.maxShrinkSpeed=10,e.exports.minShrinkSpeed=1,e.exports.positionRange=5e5,e.exports.quadSize=100,e.exports.emitterVolMin=.05,e.exports.emitterVolMax=2,e.exports.emitterRateMin=.5,e.exports.emitterRollMin=0,e.exports.emitterRollMax=1,e.exports.emitterRateMax=4,e.exports.emitterDistMin=0,e.exports.emitterDistMax=5e3,e.exports.emitterSounds=["nuke_0","siren_0","explosion","fart_0","taunt_0","taunt_1","taunt_2","taunt_3","buy_0","buy_1","case_0","case_1","cheer_0","reward","store","tick_0","scare_0","cough_1","cough_2","taunt_4","ambient_1","ambient_2","ambient_3","ambient_4","ambient_5","ambient_6","ambient_7","ambient_8","beep_0","bo_plant","bo_diff","collect_1","bounce_0","headshot_0","hit_0","impact_0","jump_0","jump_1","land_0","punch_0","punch_1","slide_0","spray","step_0","step_1","step_2","whizz_0","whizz_1","gclick_0","pick_0","pick_1","build_0","break_wood"],e.exports.maxThumb=100,e.exports.maxThumbP=200,e.exports.maxPfp=100,e.exports.aiSyncT=5,e.exports.aiBehavs=["Idle","Chase"],e.exports.assetLvl=20,e.exports.assetCost=.05,e.exports.assetCostP=0,e.exports.assetUploads=200,e.exports.assetUploadsF=400,e.exports.assetUploadsP=500,e.exports.assetSize=100,e.exports.assetSizeP=250,e.exports.assetThumb=100,e.exports.assetData=55,e.exports.assetTexture=200,e.exports.assetSound=100,e.exports.assetCat=["Clutter","Decoration","Trees & Vegetation","Vehicles","Buildings","Furniture","Stones & Rubble","Technology","Weapons","Random & Strange","Tools","Food & Drink","Characters & Creatures","Fashion & Clothes","Game Map","Walls & Blocks","Textures","Sounds","Triggers"],e.exports.illumTesel=10,e.exports.maxSegs=40,e.exports.illumMO={1:.9,4:.8,7:.9,13:.9,10:.85},e.exports.mapCats=["Other","Parkour","Puzzle","Trading","Training","Social","Horror","Adventure","Battle Royale","Realism","Roleplay","Rotation","Racing","Raid","Remake","NCR","Zombies","Simulation","Relaxation","Action"],e.exports.mapInfos={burg:{year:"2018",version:"3.2"},littletown:{year:"2018",version:"1.0"},sandstorm:{year:"2019",creator:"CrispyCrust",version:"2.3"},subzero:{year:"2019",creator:"CrispyCrust",version:"0.9"},undergrowth:{year:"2019",creator:"CrispyCrust",version:"1.2"},shipyard:{year:"2019",creator:"Chwoubaka",version:"1.0"},freight:{year:"2019",version:"2.1"},lostworld:{year:"2020",creator:"DasIstWalter",version:"1.2"},citadel:{year:"2020",version:"2.4"},oasis:{year:"2020",creator:"DasIstWalter",version:"0.2"},kanji:{year:"2020",creator:"Arbiter",version:"5.2"},newtown:{year:"2020",creator:"Arbiter",version:"0.1"},industry:{year:"2020",creator:"CrispyCrust",version:"1.0"},evacuation:{year:"2020",creator:"Creationfier",version:"1.0"}},e.exports.borderH=250,e.exports.soundScapes={Default:1,City:2,Desert:3,Market:4,Scary:5,Storm:6,Purgatory:7,"Black Market":8,Tomb:11},e.exports.amvVols={6:.3,7:.4},e.exports.mapTabs=[{n:"Popular",cache:!0,c:44,t:"recent"},{n:"Featured",noPages:!0,cache:!0,c:44,t:"featured"},{n:"New",cache:!0,c:44,t:"initialdate"},{n:"KR",cache:!0,c:44,t:"funds"},{n:"Favorites",c:44,sendID:!0,fav:!0},{n:"My Games",c:44,sendID:!0,t:"votes"},{n:"Search",search:!0,t:"votes"}],e.exports.modSize=25,e.exports.modSizeP=50,e.exports.modTabs=[{n:"Popular",cache:!0,c:44,t:"recent"},{n:"Featured",noPages:!0,cache:!0,c:44,t:"featured"},{n:"New",cache:!0,c:44,t:"initialdate"},{n:"Favorites",c:44,sendID:!0,fav:!0},{n:"My Mods",c:44,sendID:!0,t:"votes"},{n:"Search",search:!0,t:"votes"}],e.exports.mailTabs=[{n:"Followers"},{n:"Clan"},{n:"Hub"},{n:"Inbox"},{n:"Archive"}],e.exports.esportNews=["We are Partnering with FaceIT to create a more rewarding and fair ranked experience.The ranked rework will start rolling out over the coming weeks","Weekly Sponsored Tournaments will return early next year. We are making efforts to get sponsors in each Region"],e.exports.scrimServs=[{n:"NA",url:"https://discord.gg/D9ewATs"},{n:"EU",url:"https://discord.gg/k6TR9hT"},{n:"OCE",url:"https://discord.gg/sW53t46"},{n:"Asia",url:"https://discord.gg/dZfwd4x"}],e.exports.esportsTabs=[{n:"News"},{n:"Ranked"},{n:"Scrim Servers"}],e.exports.assetTabs=[{n:"New"},{n:"My Assets",sendUser:!0},{n:"Search",search:!0}],e.exports.giftMax=1e7,e.exports.giftMin=10,e.exports.giftMinLVl=30,e.exports.saleMax=1e7,e.exports.saleGrace=3e5,e.exports.marketMinLVl=20,e.exports.marketFeeBypass=0,e.exports.priceUpdate=432e5,e.exports.streamRotation=1e4,e.exports.creatorReset=6048e5,e.exports.dropsEnabled=!1,e.exports.redeemDrops=!1,e.exports.dropsClientId="b7kkb27v7p3q6eh4u0ijx1dp26s8m3",e.exports.clanRegions=[{name:"North America",pos:[140,180],endSize:1e3,endPos:[-20,-70]},{name:"South America",pos:[230,285],endSize:950,endPos:[-130,-210]},{name:"Western Europe",pos:[380,170],endSize:1300,endPos:[-510,-120]},{name:"Africa",pos:[380,250],endSize:900,endPos:[-300,-130]},{name:"Middle East",pos:[430,210],endSize:1700,endPos:[-830,-280]},{name:"Asia",pos:[530,210],endSize:1100,endPos:[-640,-140]},{name:"Oceania",pos:[600,310],endSize:1500,endPos:[-1060,-430]},{name:"Eastern Europe",pos:[476,165],endSize:900,endPos:[-460,-30]}],e.exports.clanTabs=["Members","Stats","Requests","Clan War"],e.exports.maxClanContr=30,e.exports.maxContrsT=50,e.exports.clanWarLives=100,e.exports.clanRoles=[{name:"Recruit"},{name:"Soldier",earn:!0,max:25},{name:"Captain",earn:!0,max:5,perms:1},{name:"Commander",earn:!0,max:1,perms:2}],e.exports.accAnnounceId=0,e.exports.accAnnounce=["Make sure to use a secure password.","Update your password frequently and keep it in a secure place.","Instead of using a password like pass123,","please use something more secure like x&fyUyp92fH2sXf"],e.exports.newDataInterval=12e4,e.exports.profileTabs=["Stats","Partner","Settings","Twitch"],e.exports.socials=["leaders","profile","maps","market","itemsales","clan","map","virus","search","mods","clanwars","mod","feed","post"],e.exports.marketQueries={market:{btn:"Info",checkItem:function(e){return!!e.funds}},inventory:{btn:"List to Sell",checkItem:function(e){return!e.funds&&e.c}},sales:{btn:"Unlist",checkItem:function(e){return!!e.funds}},stats:{},trades:{},blackm:{}},e.exports.leaderQueries=["player_score","player_elo","player_elo2","player_elo4","player_kills","player_wins","player_timeplayed","player_funds","player_clan","player_chal","player_followed","player_eventtime"],e.exports.leaderCal={player_score:function(t){var i=Math.max(1,Math.floor(e.exports.rankVar*Math.sqrt(t)));return"<span class='floatR'><img src='./img/levels/"+Math.max(Math.min(e.exports.maxLevel-1,i.roundToNearest(2)-1),0)+".png' class='rnkIcon'>"+i+"</span>"},player_elo:function(t){return"<span class='floatR'><img src='./img/ranks/icon_"+(Math.max(Math.min(e.exports.maxELOLevel,Math.floor((t||0)/e.exports.eloPer)),1)-1)+".png' class='rnkIconR'></span>"},player_elo2:function(t){return"<span class='floatR'><img src='./img/ranks/icon_"+(Math.max(Math.min(e.exports.maxELOLevel,Math.floor((t||0)/e.exports.eloPer)),1)-1)+".png' class='rnkIconR'></span>"},player_elo4:function(t){return"<span class='floatR'><img src='./img/ranks/icon_"+(Math.max(Math.min(e.exports.maxELOLevel,Math.floor((t||0)/e.exports.eloPer)),1)-1)+".png' class='rnkIconR'></span>"},player_kills:function(e){return e+"<span class='lName'> kills</span>"},player_wins:function(e){return e+"<span class='lName'> wins</span>"},player_funds:function(e){return"<span style='color:rgba(0,0,0,0.4)'>"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</span> KR"},player_timeplayed:function(e){return e=1.2*(e||0),"<span style='color:rgba(0,0,0,0.5)'>"+(Math.floor(e/36e5)||0)+"</span> Hours"},player_chal:function(t){return Math.min(e.exports.maxChal,t+1)},player_followed:function(e){return(e||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" <span class='lName'>followers</span>"},player_eventcount:function(t){return"<span class='lName'>found</span> "+t+"/"+e.exports.easterEggs},player_eventtime:function(e){if("inf"==e)return"Infinite";parseInt(e%1e3/100);var t=parseInt(e/1e3%60),i=parseInt(e/6e4%60);return(i=10>i?"0"+i:i)+":"+(t=10>t?"0"+t:t)}},e.exports.socialRegions=["All Regions","Oceania","Asia","Europe","Americas"],e.exports.regionNames={local:"Local","us-nj":"New York","us-il":"Chicago","us-tx":"Dallas","us-wa":"Seattle","us-ca-la":"Los Angeles","us-ga":"Atlanta","nl-ams":"Amsterdam","gb-lon":"London","de-fra":"Frankfurt","us-ca-sv":"Silicon Valley","au-syd":"Sydney","fr-par":"Paris","jb-hnd":"Tokyo","us-fl":"Miami",sgp:"Singapore",blr:"India",brz:"Brazil","me-bhn":"Middle East","af-ct":"South Africa","as-seoul":"South Korea"},e.exports.langNames={en:"English",es:"Spanish",de:"German",kr:"Korean",pr:"Portuguese",jp:"Japanese"},e.exports.skinColors=[{id:0,col:8412234,name:"Bronze"},{id:1,col:10975328,name:"Sienna"},{id:2,col:13864303,name:"Rose"},{id:3,col:13408638,name:"Tan"},{id:4,col:15581094,name:"Pale"},{id:5,col:8492161,name:"Infected",req:function(e){return e&&e.virus}}],e.exports.reportOptions=["Hacking","Exploiting","Scamming","Harassment","Other","Boosting","Market Scripting"],e.exports.serverMessages=["$ joined the game","$ left the game","$ was kicked","$ was banned","$ was vote kicked","$ was arrested by the K.P.D"],e.exports.customRatios=["Native","800x600","1024x768","1280x960","1280x1024","1440x1080","1656x1080"],e.exports.unObtainCols=["Crimson","orange","yellow","lime","MediumBlue"],e.exports.killCardStats=[{name:"SPK",stat:function(e){return((e.account.score||0)/Math.max(e.account.kills||0,1)).toFixed(2)}},{name:"Kills",stat:function(e){return e.account.kills||0}},{name:"Deaths",stat:function(e){return e.account.deaths||0}},{name:"KDR",stat:function(e){return((e.account.kills||0)/Math.max(e.account.deaths||0,1)).toFixed(2)}},{name:"KPG",stat:function(e){return((e.account.kills||0)/Math.max(e.account.games||0,1)).toFixed(2)}},{name:"Games Played",stat:function(e){return e.account.games||0}},{name:"Wins",stat:function(e){return e.account.wins||0}},{name:"W/L",stat:function(e){return((e.account.wins||0)/Math.max((e.account.games||0)-(e.account.wins||0),1)).toFixed(2)}},{name:"Nukes",stat:function(e){return e.account.stats.n||0}},{name:"Melees",stat:function(e){return e.account.stats.mk||0}},{name:"Accuracy",stat:function(e){return(e.account.stats.s?(e.account.stats.h||0)/e.account.stats.s*100:0).round(1)+"%"}},{name:"KR",stat:function(e){return e.account.funds||0}},{name:"Challenge Level",stat:function(e){return(e.account.chal||0)+1}},{name:"Headshots",stat:function(e){return e.account.stats.hs||0}},{name:"Solo Ranked",stat:function(e){return e.account.elo||0}},{name:"Duo Ranked",stat:function(e){return e.account.elo2||0}},{name:"Quad Ranked",stat:function(e){return e.account.elo4||0}},{name:"Losses",stat:function(e){return Math.max((e.account.games||0)-(e.account.wins||0),0)}},{name:"Wallbangs",stat:function(e){return e.account.stats.wb||0}},{name:"Beatdowns",stat:function(e){return e.account.stats.fk||0}},{name:"Bullseyes",stat:function(e){return e.account.stats.tmk||0}}],e.exports.mapGenProps={manager:{props:{aoOpac:{},objects:{isGameObject:!0},objectives:{},flags:{isGameObject:!0},sites:{},pickups:{isGameObject:!0},gates:{isGameObject:!0},banks:{isGameObject:!0},terminals:{isGameObject:!0},interfaces:{},destObjs:{},timerObjs:{},playerObjs:{},teleporters:{isGameObject:!0},spectateCams:{isGameObject:!0},grids:{isGameObject:!0},pendingAIs:{}}},maps:{},spawns:{},lastGen:{},terrainConfig:{isTerrainConfig:!0},zoneConfig:{isZoneConfig:!0},config:{},deathY:{},mapHeight:{},mapDims:{}},e.exports.gameObjectReferenceProps=["flagObj"],e.exports.scriptSetts=["sensitivityX","sensitivityY","aimSensitivityX","aimSensitivityY","invertY","fov","fpsFOV","weaponBob","weaponLean","weaponOffX","weaponOffY","weaponOffZ","weaponADSOffY","aimAnim","hideADS","showHands","showWeapon","showWeaponSec","showWeaponMel","particles","particlesDist","renderDist","shadows","shadowsDynamic","ambientShading","scaleUI","oldScoreboard","weaponRot","saturationn","menuSaturation","bulletTracerCol","bulletTracers","weapReloadY","weapSwapY","weaponADSOffY","adsFovMlt","menuHue","hue"],e.exports.socialEmbeds=["imwaspy","chorooooo","swixiethinks","moonjuice","quacky","heyimzed","themeatman","teds","vadrastos","rainsong","stremz","ryanpu","checheg","hxllxw_","nns__kr","kaarson","syctis","itsabsent","mommys","bryaa","thatprestige","teamcrisis","therealhky","honestgamerguy","thiccchemist","navf","sorable","undercoverdudes","bigshiptv","lizswitch","andibops","wald0gaming","conspiire_","thebulelucu"],e.exports.blankMap='{"name":"Test","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"objects":[{"p":[0,-10,0],"s":[100,10,100]}],"spawns":[[0,0,0,0,0,0]]}',e.exports.mobileControlPositions={mobileJoystick:{left:.2,top:.69},mobileJump:{top:.5,right:.02},mobileCrouch:{top:.82,right:.15},mobileEsc:{left:.18,top:.01},mobileShoot:{left:.03,top:.28},mobileAimShoot:{top:.56,right:.13},mobileScope:{top:.35,right:.11},mobileReload:{top:.73,right:.27},mobileSwap:{left:0,top:.85,right:0}},e.exports.cssBypass=["DukeV","Sidney","Tehchy","Vince"]}).call(this,i(15))},function(e,t,i){const n=i(1),r=i(18);e.exports.keyboardMap=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","SHIFT","CONTROL","ALT","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9","COLON","SEMICOLON","LESS_THAN","EQUALS","GREATER_THAN","QUESTION_MARK","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","OS_KEY","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","CIRCUMFLEX","EXCLAMATION","DOUBLE_QUOTE","HASH","DOLLAR","PERCENT","AMPERSAND","UNDERSCORE","OPEN_PAREN","CLOSE_PAREN","ASTERISK","PLUS","PIPE","HYPHEN_MINUS","OPEN_CURLY_BRACKET","CLOSE_CURLY_BRACKET","TILDE","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","MINUS","PERIOD","SLASH","BACK_QUOTE","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","QUOTE","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""],e.exports.getB64Size=function(){},e.exports.compressNumArray=function(e){for(var t=null,i=!0,n=e.length-1;0<=n;--n)"number"==typeof e[n]?null===t?t=0:(t++,e[n]=t,e.splice(n+1)):(t=null,i=!1);return i?e[0]:e},e.exports.estKBytes=function(e){return.001*(encodeURI(e).split(/%..|./).length-1)},e.exports.precisionRound=function(t,i,n){t=e.exports.roundNumP(t,i);var r=Math.pow(10,i||1)/10;return t.countDecimals()!=i||e.exports.isMultiple(t,n)||(t+=5<100*t%r?n/2:-n/2),e.exports.roundNumP(t,i)},e.exports.roundNumP=function(e,t){return+(Math.round(e+"e+"+t)+"e-"+t)},e.exports.isMultiple=function(e,t){return Math.round(e/t)/(1/t)===e},Number.prototype.round=function(e){return Math.round(this*Math.pow(10,e||0))/Math.pow(10,e||0)},String.prototype.escape=function(){return(this+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},e.exports.escapeStr=function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},Number.prototype.ceilToNearest=function(e){return Math.ceil(this/e)*e},Number.prototype.floorToNearest=function(e){return Math.floor(this/e)*e},e.exports.findNearest=function(t,i,n){for(var r,a=t,s=i,o=null,l=0,c=0;c<n.length;c+=2)r=e.exports.getDistance(t,i,n[c],n[c+1]),(null==o||r<o)&&(o=r,a=n[c],s=n[c+1],l=c);return[a,s,l]},Number.prototype.roundToNearest=function(e){return 0<this?Math.ceil(this/e)*e:0>this?Math.floor(this/e)*e:this},Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0},e.exports.capFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports.isURL=function(e){try{return/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%@_.~+&:]*)*(\?[;&a-z\d%@_.,~+&:=-]*)?(\#[-a-z\d_]*)?$/i.test(e)}catch(e){}return!1},e.exports.arrayAverage=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i];return t/e.length},e.exports.countInArray=function(e,t){for(var i=0,n=0;n<e.length;n++)e[n]===t&&i++;return i},e.exports.formatNum=function(e,t=1){var i=Math.floor(Math.log(Math.abs(e))/Math.log(1e3)),n="kmb"[i-1];return n?(e/Math.pow(1e3,i)).toFixed(t)+n:""+e};var a=["","k","m","b","t"];e.exports.formatNumYT=function(e){var t=e;if(1e3<=e){for(var i=Math.floor((""+e).length/3),n="",r=2;1<=r;r--){if(2>=((n=parseFloat((0==i?e:e/Math.pow(1e3,i)).toPrecision(r)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length)break}0!=n%1&&(n=n.toFixed(1)),t=n+a[i]}return t},e.exports.convCoNum=function(e){return parseFloat(e.replace(/,/g,""))},e.exports.randFloat=function(e,t){return Math.random()*(t-e)+e},e.exports.randInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.exports.getPercentDiff=function(e,t){return Math.round((t-e)/e*100,1)},e.exports.calcPercent=function(e,t){return e/100*t},e.exports.getRandom=function(t){return t[e.exports.randInt(0,t.length-1)]},e.exports.getDistance=function(e,t,i,n){return Math.sqrt((i-=e)*i+(n-=t)*n)},e.exports.getD3D=function(e,t,i,n,r,a){var s=e-n,o=t-r,l=i-a;return Math.sqrt(s*s+o*o+l*l)},e.exports.getAnglesSSS=function(e,t,i){var n=Math.acos((t*t+i*i-e*e)/(2*t*i)),r=Math.acos((i*i+e*e-t*t)/(2*i*e)),a=Math.PI-n-r;return[-n-Math.PI/2,r,a]},e.exports.getAngleDst=function(e,t){return Math.atan2(Math.sin(t-e),Math.cos(e-t))},e.exports.getAngleDist2=function(e,t){var i=Math.abs(t-e)%(2*Math.PI);return i>Math.PI?2*Math.PI-i:i},e.exports.getXDire=function(t,i,n,r,a,s){var o=Math.abs(i-a),l=e.exports.getD3D(t,i,n,r,a,s);return Math.asin(o/l)*(i>a?-1:1)},e.exports.toRad=function(e){return e*(Math.PI/180)},e.exports.getDir=function(e,t,i,n){return Math.atan2(t-n,e-i)},e.exports.getDrs=function(e,t){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z,a=Math.sqrt(i*i+r*r),s=-Math.atan2(n,a);return[-Math.atan2(-i,r),s]},e.exports.lerp=function(e,t,i){return e+(t-e)*i},e.exports.orderByDst=function(e,t){return e.dst-t.dst},e.exports.orderByNum=function(e,t){return e-t},e.exports.orderByScore=function(e,t){return t.score-e.score},e.exports.orderByKills=function(e,t){return t.kills-e.kills},e.exports.capFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports.truncateText=function(e,t){return e.length>t?e.substring(0,t)+"...":e},e.exports.cleanseString=function(e){return e?e.replace(/['"]+/g,""):e},e.exports.randomString=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},e.exports.formatNumCash=function(e){return parseFloat(Math.round(100*e)/100).toFixed(2)},e.exports.formatConstName=function(e){return e.toLowerCase().split("_").map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")},e.exports.getKeyName=function(t){return 0>t?"UNBOUND":2e4==t?"SCROLL":1e4<t?"M"+(t-1e4):e.exports.keyboardMap[t]},e.exports.formatNumCash=function(e){return parseFloat(Math.round(100*e)/100).toFixed(2)};var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.exports.getDate=function(e){if(!e)return"None";e=e.split(/[-A-Z :\.]/i);var t=new Date(e[0],--e[1],e[2],e[3],e[4],e[5]),i=new Date(t.getTime());return i.getDate()+" "+s[i.getMonth()].slice(0,3)+" "+i.getFullYear()},e.exports.getGraphDate=function(e,t){return("0"+e).slice(-2)+" "+s[t].slice(0,3)},e.exports.getTime=function(e,t){if("inf"==e)return"Infinite";var i=parseInt(e%1e3/100),n=parseInt(e/1e3%60),r=parseInt(e/6e4%60);return(r=10>r?"0"+r:r)+":"+(n=10>n?"0"+n:n)+(t?"."+i:"")},e.exports.commaFormatNum=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.exports.commaNumber=function(e){return(e=e||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.exports.getReadableTime=function(e,t){var i=Math.floor(e/1e3),n=Math.floor(i/60);i%=60;var r=Math.floor(n/60);n%=60;var a=Math.floor(r/24);return(a?a+"d ":"")+((r%=24)?r+"h ":"")+(n||0)+"m "+(t?i+"s":"")},e.exports.getRoundTim=function(e){var t=0|e/1e3,i=0|t/60;t-=60*i;var n=0|i/60;i-=60*n;var r=0|n/24;return n-=24*r,r?r+" Day"+(1<r?"s ":" ")+n+" Hour"+(1<n?"s":""):n?n+" Hour"+(1<n?"s ":" ")+i+" Minute"+(1<i?"s":""):i+" Minute"+(1<i?"s":"")},e.exports.getReadableTime2=function(e){if(0>e)return"just now";var t=Math.floor(e/1e3),i=Math.floor(t/60),n=Math.floor(i/60);i%=60;var r=Math.floor(n/24);return n%=24,r?r+"d ago":n?n+"h ago":i?i+"m ago":"just now"},e.exports.getTimeH=function(e){parseInt(e%1e3/100);var t=Math.floor(e/1e3%60),i=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24);return(n=10>n?"0"+n:n)+":"+(i=10>i?"0"+i:i)+":"+(t=10>t?"0"+t:t)},e.exports.scrambleS=function(e){return e&&e.replace?e.replace(/.(.)?/g,"$1")+("d"+e).replace(/.(.)?/g,"$1"):e},e.exports.fixTo=function(e,t){return parseFloat(e.toFixed(t))},e.exports.fixFloat=function(e,t){return+parseFloat(e).toFixed(t)},e.exports.sanitizeStr=function(e){return e&&e.replace?e.replace(/<|>|&/g,"").replace(/[^\x00-\x7F]/g,""):e},e.exports.limit=function(e,t){return e<-t?-t:e>t?t:e},e.exports.limitMM=function(e,t,i){return e<t?t:e>i?i:e},e.exports.limitMMD=function(e,t,i,n){return e<t||e>i?n:e},e.exports.inRange=function(e,t,i){return e>=t&&e<=i},e.exports.cropVal=function(e,t){return e<=t&&e>=-t?0:e},e.exports.isNumber=function(e){return null!=e&&"number"==typeof e&&!isNaN(e)&&isFinite(e)},e.exports.arrayInts=function(t){for(var i=0;i<t.length;++i)if(!e.exports.isNumber(t[i]))return!1;return!0},e.exports.isArray=function(e){return!!e&&e.constructor===Array},e.exports.isString=function(e){return e&&"string"==typeof e},e.exports.isHexColor=function(e){return/^#([0-9A-F]{3}){1,2}$/i.test(e)},e.exports.emptyString=function(e){return!e||0===e.length||/^\s*$/.test(e)||!e.trim()},e.exports.compareString=function(e,t){return"string"==typeof e&&"string"==typeof t&&(0<=e.toLowerCase().indexOf(t.toLowerCase())||0<=t.toLowerCase().indexOf(e.toLowerCase()))},e.exports.shuffleArray=function(e){for(let t=e.length;t--;){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e};e.exports.lineInRect=function(e,t,i,n,r,a,s,o,l,c,d,p){var h=(s-e)*n,u=(c-e)*n,f=(l-i)*a,m=(p-i)*a,g=(o-t)*r,y=(d-t)*r,v=Math.max(Math.max(Math.min(h,u),Math.min(f,m)),Math.min(g,y)),w=Math.min(Math.min(Math.max(h,u),Math.max(f,m)),Math.max(g,y));return!(0>w)&&!(v>w)&&v},e.exports.similar=function(e,t,i){return i=i||0,Math.abs(e-t)<=i},e.exports.pointInBox3D=function(e,t,i,n,r){return r=r||0,e>=n.x-n.width-r&&e<=n.x+n.width+r&&t>=n.y-n.height-r&&t<=n.y+n.height+r&&i>=n.z-n.length-r&&i<=n.z+n.length+r},e.exports.pointInBox=function(e,t,i,n,r,a,s){return s?e>=i&&e<=r&&t>=n&&t<=a:e>i&&e<r&&t>n&&t<a},e.exports.sharePos=function(e,t,i){return i=i||0,Math.abs(e.x-t.x)<=i&&Math.abs(e.y-t.y)<=i&&Math.abs(e.z-t.z)<=i&&Math.abs(e.d-t.d)<=i},e.exports.cdv={x:"width",y:"height",z:"length"},e.exports.boxIntersection=function(t,i,n,r,a){var s=e.exports.cdv[n],o=e.exports.cdv[r],l=t[n]-t[s]-.1,c=i[n]-i[s]-.1,d=t[n]+t[s]+.1,p=i[n]+i[s]+.1,h=t[r]-t[o]-.1,u=i[r]-i[o]-.1,f=t[r]+t[o]+.1,m=i[r]+i[o]+.1,g=Math.max(l,c),y=Math.min(d,p);if(y>=g){var v=Math.max(h,u),w=Math.min(f,m);if(w>=v){for(var b=[{[n]:g,[r]:v,d:a[0]},{[n]:y,[r]:w,d:a[1]},{[n]:g,[r]:w,d:a[2]},{[n]:y,[r]:v,d:a[3]}],x=b.length-1;0<=x;--x)(b[x][n]==d&&b[x][n]==p||b[x][n]==l&&b[x][n]==c||b[x][r]==f&&b[x][r]==m||b[x][r]==h&&b[x][r]==u||e.exports.pointInBox(b[x][n],b[x][r],l,h,d,f)||e.exports.pointInBox(b[x][n],b[x][r],c,u,p,m))&&(b[x].dontUse=!0);return b}}return null},e.exports.boxCornerIntersection=function(t,i,n,r){for(var a=e.exports.cdv[n],s=e.exports.cdv[r],o=t[n]+t[a],l=i[n]+i[a],c=t[n]-t[a],d=i[n]-i[a],p=t[r]+t[s],h=i[r]+i[s],u=t[r]-t[s],f=i[r]-i[s],m=[{[n]:c,[r]:u,d:Math.PI/2},{[n]:c,[r]:p,d:Math.PI},{[n]:o,[r]:u,d:0},{[n]:o,[r]:p,d:-Math.PI/2}],g=m.length-1;0<=g;--g)m[g].i=g,e.exports.pointInBox(m[g][n],m[g][r],d,f,l,h,!0)||m.splice(g,1);return m.length?m:null},e.exports.getIntersection=function(t,i,n){var r=e.exports.cdv[n],a=i[n]-i[r],s=t[n]-t[r],o=t[n]+t[r],l=i[n]+i[r],c=Math.max(s,a),d=Math.min(o,l);if(d>=c){var p=(d-c)/2;return{[n]:c+p,[r]:p}}return null},e.exports.limitRectVal=function(t,i,n){var r=e.exports.cdv[n];if(t[n]-t[r]<i[n]-i[r]){var a=(i[n]-i[r]-(t[n]-t[r]))/2;t[r]-=a,t[n]+=a}if(t[n]+t[r]>i[n]+i[r]){a=(t[n]+t[r]-(i[n]+i[r]))/2;t[n]-=a,t[r]-=a}},e.exports.getMaxRect=function(t,i,n){for(var r,a,s,o,l=e.exports.cdv[i],c=e.exports.cdv[n],d=0;d<t.length;++d)r=null==r?t[d][i]-t[d][l]:Math.min(t[d][i]-t[d][l],r),s=null==s?t[d][i]+t[d][l]:Math.max(t[d][i]+t[d][l],s),a=null==a?t[d][n]-t[d][c]:Math.min(t[d][n]-t[d][c],a),o=null==o?t[d][n]+t[d][c]:Math.max(t[d][n]+t[d][c],o);return{[i]:(r+s)/2,[n]:(a+o)/2,[l]:Math.abs(s-r)/2,[c]:Math.abs(o-a)/2}},e.exports.limitRect=function(t,i,n,r,a,s,o,l){var c=e.exports.getMaxRect(s,o,l),d=e.exports.cdv[o],p=e.exports.cdv[l],h={};if(h[o]=t,h[l]=i,h[p]=r,h[d]=n,e.exports.limitRectVal(h,c,o),e.exports.limitRectVal(h,c,l),0==a||a==Math.PI){var u=h[d];h[d]=h[p],h[p]=u}return h},e.exports.progressOnLine=function(e,t,i,n,r,a){var s=i-e,o=n-t,l=Math.sqrt(s*s+o*o);return((s/=l)*(r-e)+(o/=l)*(a-t))/Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))},e.exports.generateSID=function(e){for(var t=0,i=!0;i;){i=!1,t++;for(var n=0;n<e.length;++n)if(e[n].sid==t){i=!0;break}}return t},e.exports.levelIconId=function(e){return Math.max(Math.min(n.maxLevel-1,e.roundToNearest(2)-1),0)},e.exports.xpBarText=function(e){var t=1<e.level?Math.pow(e.level/n.rankVar,2):0;return parseInt(e.score-t)+" / "+parseInt(Math.pow((e.level+1)/n.rankVar,2)-t)},e.exports.eloIconId=function(e){return Math.max(Math.min(n.maxELOLevel,Math.floor((e||0)/n.eloPer)),1)-1},e.exports.eloIconHTML=function(t,i){var n=e.exports.eloIconId(t);return 0<=n?"<img class='accountEloIcon' style='"+(i||"margin-bottom:-2px;")+"' src='./img/ranks/icon_"+n+".png'>":""},e.exports.getElo=function(e,t){return t?e[n.queues.filter(e=>e.id==t)[0].key]:null},e.exports.maxElo=function(e){var t=e.elo;return e.elo2>t?t=e.elo2:e.elo4>t&&(t=e.elo4),t},e.exports.copyToClipboard=function(e){const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const i=!!(0<document.getSelection().rangeCount)&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))};var o=function(e,t){return e.concat(t)};Array.prototype.flatMap=function(e){return function(e,t){return t.map(e).reduce(o,[])}(e,this)};var l=i(34);if(e.exports.serializeNetworkMessage=function(e,...t){return l.encode([e,...t])},e.exports.encodeNetworkMessage=function(t,i){let n=new Uint8Array(t.length+2);return n.set(e.exports.encodeShort(i),n.length-2),n.set(t,0),n},e.exports.decodeNetworkMessage=function(t){t=new Uint8Array(t);let i=e.exports.decodeShort(t[t.length-2],t[t.length-1]),n=t.slice(0,t.length-2),r=l.decode(n);if(!Array.isArray(r)||1>r.length)throw"Invalid message";return[i,r[0],r.slice(1)]},e.exports.rotateNumber=function(e,t){return 255&e+t},e.exports.encodeShort=function(e){return[15&e>>4,15&e]},e.exports.decodeShort=function(e,t){return(e<<4)+t},e.exports.thumbnailSize=function(e){return parseInt(.75*e.replace(/=/g,"").length)/1e3},e.exports.rgbToHex=function(e,t,i){for(var n=(e<<16|t<<8|i).toString(16);6>n.length;)n="0"+n;return"#"+n},e.exports.hexToRGB=e=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,n)=>"#"+t+t+i+i+n+n).substring(1).match(/.{2}/g).map(e=>parseInt(e,16)),e.exports.hexFromHue=function(t){var i=t/60,n=255*(1-Math.abs(i%2-1)),r=Math.floor(i);return e.exports.rgbToHex(1>r||4<r?255:1==r||4==r?n:0,0==r||3==r?n:1==r||2==r?255:0,0==r||1==r?0:3==r||4==r?255:n)},e.exports.versionifyUrl=function(e){return e+"?build="+r},e.exports.assetsUrl=function(e,t,i){return!t&&e.startsWith("/")&&(e=e.slice(1)),this.versionifyUrl(i?"/"+e:"https://assets.krunker.io/"+e)},e.exports.userAssetsUrl=function(e,t){return!t&&e.startsWith("/")&&(e=e.slice(1)),"https://user-assets.krunker.io/"+e},e.exports.getPreview=function(t,i){return e.exports.assetsUrl("/textures/"+(t.type&&4==t.type&&!t.is3D?"sprays/"+t.id:"previews/"+(t.type&&3!=t.type?"cosmetics/"+t.type+"_"+t.id+(t.tex?"_"+t.tex:""):i.types[t.type||0]+(t.type&&3==t.type?t.id+(null==t.pat?null==t.tex?"":"_"+t.tex:"_c"+t.pat):(t.weapon||0)+"_"+(null==t.mid?null==t.pat?t.tex?t.tex:t.id:"c"+t.pat:"m"+t.mid+(null==t.midT?"":"_"+t.midT)))))+".png",!1,t.local)},e.exports.getPreviewExport=function(t,i){return e.exports.getPreview(t,i).split("/").slice(-1).pop().split("?")[0]},e.exports.getReModel=function(e,t){return e.types[t.type||0]+(t.weapon||0)+"_"+(t.midT||t.mid)},e.exports.getFrameAnim=function(e,t){return e.frames?"animation: "+t+e.frames+" "+(1+e.frameT/1e3)+"s steps("+e.frames+") infinite;":""},e.exports.isDropbox=function(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(dropbox|dropboxusercontent|dl\.dropboxusercontent)\.com\//g.test(e)},e.exports.isUserAsset=function(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?(user-assets\.krunker)\.io\//g.test(e)},e.exports.toSocial=function(t){return"./social.html?p=profile&q="+e.exports.cleanseString(t)},e.exports.getFontSizeToFit=function(e,t,i){var n=document.createElement("canvas").getContext("2d");return n.font="1px "+t,i/n.measureText(e).width},e.exports.ctxText=function(e,t,i,n,r){e.save(1),e.translate(~~n,~~r),e.fillStyle=i,e.strokeStyle="rgba(0, 0, 0, 0.5)",e.lineWidth=1,e.strokeText(t,0,0),e.fillText(t,0,0),e.restore()},e.exports.getLines=function(e,t,i){for(var n=t.split(" "),r=[],a=n[0],s=1;s<n.length;s++){var o=n[s];e.measureText(a+" "+o).width<i?a+=" "+o:(r.push(a),a=o)}return r.push(a),r},e.exports.createCanvasText=function(t,i,r,a,s,o,l,c){var d=0,p=0;i>t?(d=1,p=t/i):i<t?(d=i/t,p=1):(d=1,p=1);var h=document.createElement("canvas"),u=h.getContext("2d");h.width=1024*p,h.height=1024*d,l||(u.fillStyle=o,u.fillRect(0,0,h.width,h.height));var f=a;u.font=f+"px GameFont",r=r.substring(0,n.signTextLimit-1),u.textAlign=2==c?"right":1==c?"center":"left";var m=2*f,g=u.measureText("M").width/2;g=2==c?h.width-g:1==c?h.width/2:g;for(var y=1.2*u.measureText("M").width,v=r.split("\\n"),w=null,b=0;b<v.length;++b){w=e.exports.getLines(u,v[b],h.width-f);for(var x=0;x<w.length&&(e.exports.ctxText(u,w[x],s,g,m),!((m+=y)>h.height));++x);}return h},e.exports.createCanvasAD=function(t,i,n){var r=document.createElement("canvas");r.width=2048,r.height=1024;var a=r.getContext("2d");return a.fillStyle=n||"#000000",a.fillRect(0,0,r.width,r.height),e.exports.drawMultilineText(a,t,i,r.width,r.height),r},e.exports.drawMultilineText=function(t,i,n,r,a){for(var s=(e.exports.isString(i)?i:"Your Ad Here").split(" "),o=[],l=0,c=15;c<=2e3;c++){g=1.4*c,t.font=c+"px GameFont";var d=(r-80)/2,p=g,h=[],u=s[0];if(t.measureText(u).width>r-80){l=c-1;break}for(var f=1;f<s.length;f++){var m=s[f];t.measureText(u+" "+m).width<r-80?u+=" "+m:(h.push(u),u=m,p+=g)}if(h.push(u),p>a-80){l=c-1;break}o=h,l=c}var g=1.4*c;d=r/2,p=a/2;1<o.length&&(p-=g*(o.length-1)/2),d+=40/o.length,p+=80/o.length,t.font=l+"px GameFont",t.fillStyle=n||"#e3e3e3",t.strokeStyle="rgba(0, 0, 0, 0.5)",t.lineWidth=1;for(f=0;f<o.length;f++)t.strokeText(o[f].trim(),d-t.measureText(o[f].trim()).width/2,p+c/2),t.fillText(o[f].trim(),d-t.measureText(o[f].trim()).width/2,p+c/2),p+=g;return c},e.exports.extractProperties=function(e,t){return t.reduce((function(t,i){return t[i]=e[i],t}),{})},e.exports.calcVoteNum=function(e){return 50<=e.level?1.5:1},e.exports.getChalProg=function(e,t){var i=e.stats.chgP,r=i.split(":")[0],a=parseInt(e.chal)||0;return a>=n.maxChal?"":(i.includes(":")&&parseInt(r)==a||(e.stats.chgP=a+":"+Array(t.challenges[a].list.length).fill(0).join()),e.stats.chgP.split(":")[1])},e.exports.getMsgType=function(e){return e.kicked?2:e.banned?3:e.kickedByVote?4:e.arrested?5:1},e.exports.getAccountType=function(e){return e&&e.featured?3:e&&e.premiumT?2:e?1:0},e.exports.sortItems=function(e,t){return e.sort((function(e,i){var n=t[i.i||i.ind]?t[i.i||i.ind].rarity:0,r=t[e.i||e.ind]?t[e.i||e.ind].rarity:0,a=t[i.i||i.ind]?t[i.i||i.ind].seas||1:0,s=t[e.i||e.ind]?t[e.i||e.ind].seas||1:0;return n>r?1:n<r?-1:a>s?1:a<s?-1:(i.i||i.ind||0)-(e.i||e.ind||0)}))},e.exports.splitIds=function(e){return e?e.split(",").filter(e=>e.length).map(Number):[]},e.exports.fixStr=function(e){return e?n.invisChar+e+n.invisChar:""},e.exports.cleanName=function(e){return e?e.replace("'","\\'").replace('"','\\"'):""},e.exports.compressKeys=function(e){return e},e.exports.decompressKeys=function(e){return e},e.exports.filterTwitch=function(e){return e?e.replace(/[^\w]/gim,"").substring(0,25):""},e.exports.filterYoutube=function(e){return e?e.replace(/[^\w_-]/gim,"").substring(0,11):""},e.exports.createEmbed=function(e,t){var i=document.createElement("div");i.style.width="480px",i.style.height="360px",i.style.backgroundColor="#000";var n=document.createElement("iframe");n.style.width="480px",n.style.height="360px",n.style.border="0px",n.src=e?"https://www.youtube.com/embed/"+t+"?rel=0":"https://player.twitch.tv/?channel="+t+"&parent=krunker.io",i.appendChild(n)},e.exports.convertFaces=function(e,t){return t?parseInt(e.join(""),2).toString(16):parseInt(e,16).toString(2).padStart(6,"0").split("").map(Number)},e.exports.parseColor=function(e){return parseInt(e.slice(1),16)},e.exports.stringifyColor=function(e){return"#"+("000000"+e.toString(16)).substr(-6)},e.exports.getObjKeys=function(t,i=[]){let n=Object.keys(t);if(!n.length)return[null];let r=n.filter(e=>!i.includes(e)).map(n=>e.exports.getObjKeys(t[n],i).map(e=>e?n+"|"+e:n));return r.length?r.reduce((e,t)=>[...e,...t]):[null]},e.exports.removePrivateKeys=function(e){let t={};return Object.keys(e).filter(e=>!e.startsWith("_")).forEach(i=>t[i]=e[i]),t},e.exports.loadImage=function(e){return new Promise(t=>{let i=new Image;i.onload=()=>{t(i)},i.src=e})},e.exports.easeinout=function(e){return-(Math.cos(Math.PI*e)-1)/2},e.exports.padArray=function(e,t,i){return[...e,...Array(i).fill(1).map(()=>t)].slice(0,i)},e.exports.getMeleeConfig=function(e,t,i){var n=t.skins[e];return n||(n={}),{local:n.local,localM:n.localM,src:"melee/melee_"+(n.id||0),texSrc:n.pat?n.tex:n.tex?"melee/melee_"+(n.id||0)+"_"+n.tex:"",sameGlow:n.sameGlow,glowText:n.glow||n.sameGlow,emissive:n.glow||n.sameGlow?"#ffffff":null,movT:n.movT,movD:n.movD,pulsT:n.pulsT,minGlo:n.minGlo,frameT:n.frameT,tFilter:i.LinearFilter,frames:n.frames,transparent:null!=n.opac,mat:i.MeshLambertMaterial,uv2:!0,specular:2697513,shininess:100,rgb:n.rgb,rgbS:n.rgbS,rgbT:n.rgbT,wireframe:n.wire,side:n.side||0,opacity:n.opac||1,alphaTest:n.alpha||0,shaderId:n.shaderId}},e.exports.getMeshGroupIndex=function(e,t){var i=t&&!e.forceTex?"default":e.src;return tmpIndx=(i+"-"+(e.shadowsR||"a")+(e.emissive||"e")+(e.opacity||"o")+(null==e.movT?"mt":e.movT)+(null==e.movD?"md":e.movD)+(e.showAd?"sad":"nd")+(e.texOffX||"tx")+(e.texOffY||"ty")+(e.texRot||"tr")+(e.normal||"n")+(e.specular||"spc")+(e.asset||"as")+(e.itemID||"id")).replace(/\./gm,"").toLowerCase()},e.exports.fixRotations=function(e){return e},e.exports.moveElement=function(e,t){var i=document.createDocumentFragment();i.appendChild(e),document.getElementById(t).appendChild(i)},!String.prototype.replaceAll){const e=(e,t,i)=>{if(null==i||null==e||null==t)throw TypeError("Input values must not be `null` or `undefined`")},t=(e,t)=>{if("string"!=typeof e&&!(e instanceof String))throw TypeError(`\`${t}\` must be a string`)},i=e=>{if(!("string"==typeof e||e instanceof String||e instanceof RegExp))throw TypeError("`searchValue` must be a string or an regexp")},n=(e,t,i)=>{if(""===e)return i.replace(/(?:)/g,t);if(e instanceof RegExp){if(-1===e.flags.indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");return i.replace(e,t)}return i.split(e).join(t)};String.prototype.replaceAll=function(r,a){var s=this;return e(r,a,s),t(s,"str"),t(a,"replaceValue"),i(r),n(r,a,s)}}},function(e,t,i){"use strict";i.r(t),i.d(t,"ACESFilmicToneMapping",(function(){return ie})),i.d(t,"AddEquation",(function(){return _})),i.d(t,"AddOperation",(function(){return J})),i.d(t,"AdditiveAnimationBlendMode",(function(){return Kt})),i.d(t,"AdditiveBlending",(function(){return x})),i.d(t,"AlphaFormat",(function(){return Be})),i.d(t,"AlwaysDepth",(function(){return G})),i.d(t,"AlwaysStencilFunc",(function(){return Mi})),i.d(t,"AmbientLight",(function(){return Ep})),i.d(t,"AmbientLightProbe",(function(){return Xp})),i.d(t,"AnimationClip",(function(){return Dd})),i.d(t,"AnimationLoader",(function(){return Ud})),i.d(t,"AnimationMixer",(function(){return Ch})),i.d(t,"AnimationObjectGroup",(function(){return _h})),i.d(t,"AnimationUtils",(function(){return Sd})),i.d(t,"ArcCurve",(function(){return Jd})),i.d(t,"ArrayCamera",(function(){return Ro})),i.d(t,"ArrowHelper",(function(){return gu})),i.d(t,"Audio",(function(){return oh})),i.d(t,"AudioAnalyser",(function(){return uh})),i.d(t,"AudioContext",(function(){return Yp})),i.d(t,"AudioListener",(function(){return sh})),i.d(t,"AudioLoader",(function(){return Zp})),i.d(t,"AxesHelper",(function(){return yu})),i.d(t,"AxisHelper",(function(){return yf})),i.d(t,"BackSide",(function(){return m})),i.d(t,"BasicDepthPacking",(function(){return ri})),i.d(t,"BasicShadowMap",(function(){return d})),i.d(t,"BinaryTextureLoader",(function(){return Sf})),i.d(t,"Bone",(function(){return cl})),i.d(t,"BooleanKeyframeTrack",(function(){return Ed})),i.d(t,"BoundingBoxHelper",(function(){return vf})),i.d(t,"Box2",(function(){return zh})),i.d(t,"Box3",(function(){return Qi})),i.d(t,"Box3Helper",(function(){return pu})),i.d(t,"BoxBufferGeometry",(function(){return fa})),i.d(t,"BoxGeometry",(function(){return Vl})),i.d(t,"BoxHelper",(function(){return du})),i.d(t,"BufferAttribute",(function(){return _r})),i.d(t,"BufferGeometry",(function(){return Yr})),i.d(t,"BufferGeometryLoader",(function(){return Bp})),i.d(t,"ByteType",(function(){return _e})),i.d(t,"Cache",(function(){return zd})),i.d(t,"Camera",(function(){return wa})),i.d(t,"CameraHelper",(function(){return ou})),i.d(t,"CanvasRenderer",(function(){return _f})),i.d(t,"CanvasTexture",(function(){return jl})),i.d(t,"CatmullRomCurve3",(function(){return np})),i.d(t,"CineonToneMapping",(function(){return te})),i.d(t,"CircleBufferGeometry",(function(){return Kl})),i.d(t,"CircleGeometry",(function(){return Yl})),i.d(t,"ClampToEdgeWrapping",(function(){return he})),i.d(t,"Clock",(function(){return eh})),i.d(t,"ClosedSplineCurve3",(function(){return ff})),i.d(t,"Color",(function(){return vr})),i.d(t,"ColorKeyframeTrack",(function(){return Ad})),i.d(t,"CompressedTexture",(function(){return zl})),i.d(t,"CompressedTextureLoader",(function(){return Wd})),i.d(t,"ConeBufferGeometry",(function(){return Jl})),i.d(t,"ConeGeometry",(function(){return Xl})),i.d(t,"CubeCamera",(function(){return xa})),i.d(t,"CubeGeometry",(function(){return Vl})),i.d(t,"CubeReflectionMapping",(function(){return ae})),i.d(t,"CubeRefractionMapping",(function(){return se})),i.d(t,"CubeTexture",(function(){return Sa})),i.d(t,"CubeTextureLoader",(function(){return Kd})),i.d(t,"CubeUVReflectionMapping",(function(){return ce})),i.d(t,"CubeUVRefractionMapping",(function(){return de})),i.d(t,"CubicBezierCurve",(function(){return op})),i.d(t,"CubicBezierCurve3",(function(){return lp})),i.d(t,"CubicInterpolant",(function(){return Td})),i.d(t,"CullFaceBack",(function(){return o})),i.d(t,"CullFaceFront",(function(){return l})),i.d(t,"CullFaceFrontBack",(function(){return c})),i.d(t,"CullFaceNone",(function(){return s})),i.d(t,"Curve",(function(){return qd})),i.d(t,"CurvePath",(function(){return mp})),i.d(t,"CustomBlending",(function(){return T})),i.d(t,"CustomToneMapping",(function(){return ne})),i.d(t,"CylinderBufferGeometry",(function(){return Zl})),i.d(t,"CylinderGeometry",(function(){return ql})),i.d(t,"Cylindrical",(function(){return Dh})),i.d(t,"DataTexture",(function(){return Ta})),i.d(t,"DataTexture2DArray",(function(){return Za})),i.d(t,"DataTexture3D",(function(){return qa})),i.d(t,"DataTextureLoader",(function(){return Yd})),i.d(t,"DataUtils",(function(){return bu})),i.d(t,"DecrementStencilOp",(function(){return hi})),i.d(t,"DecrementWrapStencilOp",(function(){return fi})),i.d(t,"DefaultLoadingManager",(function(){return Nd})),i.d(t,"DepthFormat",(function(){return Ge})),i.d(t,"DepthStencilFormat",(function(){return Ue})),i.d(t,"DepthTexture",(function(){return Nl})),i.d(t,"DirectionalLight",(function(){return Cp})),i.d(t,"DirectionalLightHelper",(function(){return ru})),i.d(t,"DiscreteInterpolant",(function(){return Od})),i.d(t,"DodecahedronBufferGeometry",(function(){return Ql})),i.d(t,"DodecahedronGeometry",(function(){return ec})),i.d(t,"DoubleSide",(function(){return g})),i.d(t,"DstAlphaFactor",(function(){return B})),i.d(t,"DstColorFactor",(function(){return j})),i.d(t,"DynamicBufferAttribute",(function(){return rf})),i.d(t,"DynamicCopyUsage",(function(){return ki})),i.d(t,"DynamicDrawUsage",(function(){return _i})),i.d(t,"DynamicReadUsage",(function(){return Ei})),i.d(t,"EdgesGeometry",(function(){return ac})),i.d(t,"EdgesHelper",(function(){return wf})),i.d(t,"EllipseCurve",(function(){return Xd})),i.d(t,"EqualDepth",(function(){return V})),i.d(t,"EqualStencilFunc",(function(){return vi})),i.d(t,"EquirectangularReflectionMapping",(function(){return oe})),i.d(t,"EquirectangularRefractionMapping",(function(){return le})),i.d(t,"Euler",(function(){return In})),i.d(t,"EventDispatcher",(function(){return Di})),i.d(t,"ExtrudeBufferGeometry",(function(){return Pc})),i.d(t,"ExtrudeGeometry",(function(){return Bc})),i.d(t,"Face3",(function(){return wr})),i.d(t,"Face4",(function(){return Gu})),i.d(t,"FaceColors",(function(){return Ku})),i.d(t,"FileLoader",(function(){return Gd})),i.d(t,"FlatShading",(function(){return y})),i.d(t,"Float16BufferAttribute",(function(){return Ir})),i.d(t,"Float32Attribute",(function(){return hf})),i.d(t,"Float32BufferAttribute",(function(){return Pr})),i.d(t,"Float64Attribute",(function(){return uf})),i.d(t,"Float64BufferAttribute",(function(){return Dr})),i.d(t,"FloatType",(function(){return Re})),i.d(t,"Fog",(function(){return jo})),i.d(t,"FogExp2",(function(){return zo})),i.d(t,"Font",(function(){return Up})),i.d(t,"FontLoader",(function(){return Vp})),i.d(t,"FrontSide",(function(){return f})),i.d(t,"Frustum",(function(){return Ca})),i.d(t,"GLBufferAttribute",(function(){return Rh})),i.d(t,"GLSL1",(function(){return Ii})),i.d(t,"GLSL3",(function(){return Pi})),i.d(t,"GammaEncoding",(function(){return $t})),i.d(t,"Geometry",(function(){return Wl})),i.d(t,"GeometryUtils",(function(){return Tf})),i.d(t,"GreaterDepth",(function(){return Y})),i.d(t,"GreaterEqualDepth",(function(){return K})),i.d(t,"GreaterEqualStencilFunc",(function(){return Si})),i.d(t,"GreaterStencilFunc",(function(){return bi})),i.d(t,"GridHelper",(function(){return Qh})),i.d(t,"Group",(function(){return ko})),i.d(t,"HalfFloatType",(function(){return ke})),i.d(t,"HemisphereLight",(function(){return wp})),i.d(t,"HemisphereLightHelper",(function(){return $h})),i.d(t,"HemisphereLightProbe",(function(){return qp})),i.d(t,"IcosahedronBufferGeometry",(function(){return zc})),i.d(t,"IcosahedronGeometry",(function(){return jc})),i.d(t,"ImageBitmapLoader",(function(){return Hp})),i.d(t,"ImageLoader",(function(){return Vd})),i.d(t,"ImageUtils",(function(){return Gi})),i.d(t,"ImmediateRenderObject",(function(){return Hh})),i.d(t,"IncrementStencilOp",(function(){return pi})),i.d(t,"IncrementWrapStencilOp",(function(){return ui})),i.d(t,"InstancedBufferAttribute",(function(){return Dp})),i.d(t,"InstancedBufferGeometry",(function(){return Pp})),i.d(t,"InstancedInterleavedBuffer",(function(){return Ah})),i.d(t,"InstancedMesh",(function(){return yl})),i.d(t,"Int16Attribute",(function(){return lf})),i.d(t,"Int16BufferAttribute",(function(){return Ar})),i.d(t,"Int32Attribute",(function(){return df})),i.d(t,"Int32BufferAttribute",(function(){return kr})),i.d(t,"Int8Attribute",(function(){return af})),i.d(t,"Int8BufferAttribute",(function(){return Or})),i.d(t,"IntType",(function(){return Ee})),i.d(t,"InterleavedBuffer",(function(){return Fo})),i.d(t,"InterleavedBufferAttribute",(function(){return Go})),i.d(t,"Interpolant",(function(){return Md})),i.d(t,"InterpolateDiscrete",(function(){return Nt})),i.d(t,"InterpolateLinear",(function(){return Ft})),i.d(t,"InterpolateSmooth",(function(){return Ht})),i.d(t,"InvertStencilOp",(function(){return mi})),i.d(t,"JSONLoader",(function(){return Of})),i.d(t,"KeepStencilOp",(function(){return ci})),i.d(t,"KeyframeTrack",(function(){return Cd})),i.d(t,"LOD",(function(){return ol})),i.d(t,"LatheBufferGeometry",(function(){return Nc})),i.d(t,"LatheGeometry",(function(){return Fc})),i.d(t,"Layers",(function(){return Bn})),i.d(t,"LensFlare",(function(){return Ef})),i.d(t,"LessDepth",(function(){return U})),i.d(t,"LessEqualDepth",(function(){return W})),i.d(t,"LessEqualStencilFunc",(function(){return wi})),i.d(t,"LessStencilFunc",(function(){return yi})),i.d(t,"Light",(function(){return vp})),i.d(t,"LightProbe",(function(){return kp})),i.d(t,"Line",(function(){return Tl})),i.d(t,"Line3",(function(){return Fh})),i.d(t,"LineBasicMaterial",(function(){return vl})),i.d(t,"LineCurve",(function(){return cp})),i.d(t,"LineCurve3",(function(){return dp})),i.d(t,"LineDashedMaterial",(function(){return bd})),i.d(t,"LineLoop",(function(){return El})),i.d(t,"LinePieces",(function(){return Wu})),i.d(t,"LineSegments",(function(){return Cl})),i.d(t,"LineStrip",(function(){return Uu})),i.d(t,"LinearEncoding",(function(){return Xt})),i.d(t,"LinearFilter",(function(){return we})),i.d(t,"LinearInterpolant",(function(){return _d})),i.d(t,"LinearMipMapLinearFilter",(function(){return Me})),i.d(t,"LinearMipMapNearestFilter",(function(){return xe})),i.d(t,"LinearMipmapLinearFilter",(function(){return Se})),i.d(t,"LinearMipmapNearestFilter",(function(){return be})),i.d(t,"LinearToneMapping",(function(){return Q})),i.d(t,"Loader",(function(){return Fd})),i.d(t,"LoaderUtils",(function(){return Ip})),i.d(t,"LoadingManager",(function(){return jd})),i.d(t,"LogLuvEncoding",(function(){return ei})),i.d(t,"LoopOnce",(function(){return Bt})),i.d(t,"LoopPingPong",(function(){return jt})),i.d(t,"LoopRepeat",(function(){return zt})),i.d(t,"LuminanceAlphaFormat",(function(){return Fe})),i.d(t,"LuminanceFormat",(function(){return Ne})),i.d(t,"MOUSE",(function(){return r})),i.d(t,"Material",(function(){return xr})),i.d(t,"MaterialLoader",(function(){return Lp})),i.d(t,"Math",(function(){return ji})),i.d(t,"MathUtils",(function(){return ji})),i.d(t,"Matrix3",(function(){return Fi})),i.d(t,"Matrix4",(function(){return _n})),i.d(t,"MaxEquation",(function(){return A})),i.d(t,"Mesh",(function(){return pa})),i.d(t,"MeshBasicMaterial",(function(){return Sr})),i.d(t,"MeshDepthMaterial",(function(){return To})),i.d(t,"MeshDistanceMaterial",(function(){return _o})),i.d(t,"MeshFaceMaterial",(function(){return Zu})),i.d(t,"MeshLambertMaterial",(function(){return vd})),i.d(t,"MeshMatcapMaterial",(function(){return wd})),i.d(t,"MeshNormalMaterial",(function(){return yd})),i.d(t,"MeshPhongMaterial",(function(){return md})),i.d(t,"MeshPhysicalMaterial",(function(){return fd})),i.d(t,"MeshStandardMaterial",(function(){return ud})),i.d(t,"MeshToonMaterial",(function(){return gd})),i.d(t,"MinEquation",(function(){return E})),i.d(t,"MirroredRepeatWrapping",(function(){return ue})),i.d(t,"MixOperation",(function(){return X})),i.d(t,"MultiMaterial",(function(){return qu})),i.d(t,"MultiplyBlending",(function(){return M})),i.d(t,"MultiplyOperation",(function(){return q})),i.d(t,"NearestFilter",(function(){return fe})),i.d(t,"NearestMipMapLinearFilter",(function(){return ve})),i.d(t,"NearestMipMapNearestFilter",(function(){return ge})),i.d(t,"NearestMipmapLinearFilter",(function(){return ye})),i.d(t,"NearestMipmapNearestFilter",(function(){return me})),i.d(t,"NeverDepth",(function(){return H})),i.d(t,"NeverStencilFunc",(function(){return gi})),i.d(t,"NoBlending",(function(){return w})),i.d(t,"NoColors",(function(){return Vu})),i.d(t,"NoToneMapping",(function(){return $})),i.d(t,"NormalAnimationBlendMode",(function(){return Vt})),i.d(t,"NormalBlending",(function(){return b})),i.d(t,"NotEqualDepth",(function(){return Z})),i.d(t,"NotEqualStencilFunc",(function(){return xi})),i.d(t,"NumberKeyframeTrack",(function(){return Rd})),i.d(t,"Object3D",(function(){return Xn})),i.d(t,"ObjectLoader",(function(){return zp})),i.d(t,"ObjectSpaceNormalMap",(function(){return oi})),i.d(t,"OctahedronBufferGeometry",(function(){return Hc})),i.d(t,"OctahedronGeometry",(function(){return Gc})),i.d(t,"OneFactor",(function(){return k})),i.d(t,"OneMinusDstAlphaFactor",(function(){return z})),i.d(t,"OneMinusDstColorFactor",(function(){return N})),i.d(t,"OneMinusSrcAlphaFactor",(function(){return D})),i.d(t,"OneMinusSrcColorFactor",(function(){return I})),i.d(t,"OrthographicCamera",(function(){return _p})),i.d(t,"PCFShadowMap",(function(){return p})),i.d(t,"PCFSoftShadowMap",(function(){return h})),i.d(t,"PMREMGenerator",(function(){return Iu})),i.d(t,"ParametricBufferGeometry",(function(){return Uc})),i.d(t,"ParametricGeometry",(function(){return Wc})),i.d(t,"Particle",(function(){return Ju})),i.d(t,"ParticleBasicMaterial",(function(){return ef})),i.d(t,"ParticleSystem",(function(){return $u})),i.d(t,"ParticleSystemMaterial",(function(){return tf})),i.d(t,"Path",(function(){return gp})),i.d(t,"PerspectiveCamera",(function(){return ba})),i.d(t,"Plane",(function(){return er})),i.d(t,"PlaneBufferGeometry",(function(){return Ra})),i.d(t,"PlaneGeometry",(function(){return Vc})),i.d(t,"PlaneHelper",(function(){return hu})),i.d(t,"PointCloud",(function(){return Xu})),i.d(t,"PointCloudMaterial",(function(){return Qu})),i.d(t,"PointLight",(function(){return Tp})),i.d(t,"PointLightHelper",(function(){return Zh})),i.d(t,"Points",(function(){return Pl})),i.d(t,"PointsMaterial",(function(){return Al})),i.d(t,"PolarGridHelper",(function(){return eu})),i.d(t,"PolyhedronBufferGeometry",(function(){return $l})),i.d(t,"PolyhedronGeometry",(function(){return Kc})),i.d(t,"PositionalAudio",(function(){return hh})),i.d(t,"PropertyBinding",(function(){return Th})),i.d(t,"PropertyMixer",(function(){return fh})),i.d(t,"QuadraticBezierCurve",(function(){return pp})),i.d(t,"QuadraticBezierCurve3",(function(){return hp})),i.d(t,"Quaternion",(function(){return qi})),i.d(t,"QuaternionKeyframeTrack",(function(){return Ld})),i.d(t,"QuaternionLinearInterpolant",(function(){return kd})),i.d(t,"REVISION",(function(){return n})),i.d(t,"RGBADepthPacking",(function(){return ai})),i.d(t,"RGBAFormat",(function(){return je})),i.d(t,"RGBAIntegerFormat",(function(){return qe})),i.d(t,"RGBA_ASTC_10x10_Format",(function(){return vt})),i.d(t,"RGBA_ASTC_10x5_Format",(function(){return mt})),i.d(t,"RGBA_ASTC_10x6_Format",(function(){return gt})),i.d(t,"RGBA_ASTC_10x8_Format",(function(){return yt})),i.d(t,"RGBA_ASTC_12x10_Format",(function(){return wt})),i.d(t,"RGBA_ASTC_12x12_Format",(function(){return bt})),i.d(t,"RGBA_ASTC_4x4_Format",(function(){return ot})),i.d(t,"RGBA_ASTC_5x4_Format",(function(){return lt})),i.d(t,"RGBA_ASTC_5x5_Format",(function(){return ct})),i.d(t,"RGBA_ASTC_6x5_Format",(function(){return dt})),i.d(t,"RGBA_ASTC_6x6_Format",(function(){return pt})),i.d(t,"RGBA_ASTC_8x5_Format",(function(){return ht})),i.d(t,"RGBA_ASTC_8x6_Format",(function(){return ut})),i.d(t,"RGBA_ASTC_8x8_Format",(function(){return ft})),i.d(t,"RGBA_BPTC_Format",(function(){return xt})),i.d(t,"RGBA_ETC2_EAC_Format",(function(){return st})),i.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return nt})),i.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return it})),i.d(t,"RGBA_S3TC_DXT1_Format",(function(){return Je})),i.d(t,"RGBA_S3TC_DXT3_Format",(function(){return $e})),i.d(t,"RGBA_S3TC_DXT5_Format",(function(){return Qe})),i.d(t,"RGBDEncoding",(function(){return ni})),i.d(t,"RGBEEncoding",(function(){return Qt})),i.d(t,"RGBEFormat",(function(){return He})),i.d(t,"RGBFormat",(function(){return ze})),i.d(t,"RGBIntegerFormat",(function(){return Ze})),i.d(t,"RGBM16Encoding",(function(){return ii})),i.d(t,"RGBM7Encoding",(function(){return ti})),i.d(t,"RGB_ETC1_Format",(function(){return rt})),i.d(t,"RGB_ETC2_Format",(function(){return at})),i.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return tt})),i.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return et})),i.d(t,"RGB_S3TC_DXT1_Format",(function(){return Xe})),i.d(t,"RGFormat",(function(){return Ke})),i.d(t,"RGIntegerFormat",(function(){return Ye})),i.d(t,"RawShaderMaterial",(function(){return hd})),i.d(t,"Ray",(function(){return Tn})),i.d(t,"Raycaster",(function(){return kh})),i.d(t,"RectAreaLight",(function(){return Ap})),i.d(t,"RedFormat",(function(){return We})),i.d(t,"RedIntegerFormat",(function(){return Ve})),i.d(t,"ReinhardToneMapping",(function(){return ee})),i.d(t,"RepeatWrapping",(function(){return pe})),i.d(t,"ReplaceStencilOp",(function(){return di})),i.d(t,"ReverseSubtractEquation",(function(){return C})),i.d(t,"RingBufferGeometry",(function(){return Yc})),i.d(t,"RingGeometry",(function(){return Zc})),i.d(t,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return It})),i.d(t,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return Rt})),i.d(t,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return kt})),i.d(t,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return Lt})),i.d(t,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Pt})),i.d(t,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return Dt})),i.d(t,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return St})),i.d(t,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return Mt})),i.d(t,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Tt})),i.d(t,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return _t})),i.d(t,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return Ot})),i.d(t,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return Ct})),i.d(t,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return Et})),i.d(t,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return At})),i.d(t,"Scene",(function(){return No})),i.d(t,"SceneUtils",(function(){return Cf})),i.d(t,"ShaderChunk",(function(){return ka})),i.d(t,"ShaderLib",(function(){return Ia})),i.d(t,"ShaderMaterial",(function(){return va})),i.d(t,"ShadowMaterial",(function(){return pd})),i.d(t,"Shape",(function(){return yp})),i.d(t,"ShapeBufferGeometry",(function(){return qc})),i.d(t,"ShapeGeometry",(function(){return Xc})),i.d(t,"ShapePath",(function(){return Gp})),i.d(t,"ShapeUtils",(function(){return kc})),i.d(t,"ShortType",(function(){return Oe})),i.d(t,"Skeleton",(function(){return hl})),i.d(t,"SkeletonHelper",(function(){return Yh})),i.d(t,"SkinnedMesh",(function(){return ll})),i.d(t,"SmoothShading",(function(){return v})),i.d(t,"Sphere",(function(){return gn})),i.d(t,"SphereBufferGeometry",(function(){return Jc})),i.d(t,"SphereGeometry",(function(){return $c})),i.d(t,"Spherical",(function(){return Ph})),i.d(t,"SphericalHarmonics3",(function(){return Rp})),i.d(t,"Spline",(function(){return gf})),i.d(t,"SplineCurve",(function(){return up})),i.d(t,"SplineCurve3",(function(){return mf})),i.d(t,"SpotLight",(function(){return Sp})),i.d(t,"SpotLightHelper",(function(){return Uh})),i.d(t,"Sprite",(function(){return nl})),i.d(t,"SpriteMaterial",(function(){return Uo})),i.d(t,"SrcAlphaFactor",(function(){return P})),i.d(t,"SrcAlphaSaturateFactor",(function(){return F})),i.d(t,"SrcColorFactor",(function(){return L})),i.d(t,"StaticCopyUsage",(function(){return Ri})),i.d(t,"StaticDrawUsage",(function(){return Ti})),i.d(t,"StaticReadUsage",(function(){return Ci})),i.d(t,"StereoCamera",(function(){return Qp})),i.d(t,"StreamCopyUsage",(function(){return Li})),i.d(t,"StreamDrawUsage",(function(){return Oi})),i.d(t,"StreamReadUsage",(function(){return Ai})),i.d(t,"StringKeyframeTrack",(function(){return Id})),i.d(t,"SubtractEquation",(function(){return O})),i.d(t,"SubtractiveBlending",(function(){return S})),i.d(t,"TOUCH",(function(){return a})),i.d(t,"TangentSpaceNormalMap",(function(){return si})),i.d(t,"TetrahedronBufferGeometry",(function(){return Qc})),i.d(t,"TetrahedronGeometry",(function(){return ed})),i.d(t,"TextBufferGeometry",(function(){return td})),i.d(t,"TextGeometry",(function(){return id})),i.d(t,"Texture",(function(){return Wi})),i.d(t,"TextureLoader",(function(){return Zd})),i.d(t,"TorusBufferGeometry",(function(){return nd})),i.d(t,"TorusGeometry",(function(){return rd})),i.d(t,"TorusKnotBufferGeometry",(function(){return ad})),i.d(t,"TorusKnotGeometry",(function(){return sd})),i.d(t,"Triangle",(function(){return pr})),i.d(t,"TriangleFanDrawMode",(function(){return qt})),i.d(t,"TriangleStripDrawMode",(function(){return Zt})),i.d(t,"TrianglesDrawMode",(function(){return Yt})),i.d(t,"TubeBufferGeometry",(function(){return od})),i.d(t,"TubeGeometry",(function(){return ld})),i.d(t,"UVMapping",(function(){return re})),i.d(t,"Uint16Attribute",(function(){return cf})),i.d(t,"Uint16BufferAttribute",(function(){return Rr})),i.d(t,"Uint32Attribute",(function(){return pf})),i.d(t,"Uint32BufferAttribute",(function(){return Lr})),i.d(t,"Uint8Attribute",(function(){return sf})),i.d(t,"Uint8BufferAttribute",(function(){return Cr})),i.d(t,"Uint8ClampedAttribute",(function(){return of})),i.d(t,"Uint8ClampedBufferAttribute",(function(){return Er})),i.d(t,"Uniform",(function(){return Eh})),i.d(t,"UniformsLib",(function(){return La})),i.d(t,"UniformsUtils",(function(){return ya})),i.d(t,"UnsignedByteType",(function(){return Te})),i.d(t,"UnsignedInt248Type",(function(){return De})),i.d(t,"UnsignedIntType",(function(){return Ae})),i.d(t,"UnsignedShort4444Type",(function(){return Le})),i.d(t,"UnsignedShort5551Type",(function(){return Ie})),i.d(t,"UnsignedShort565Type",(function(){return Pe})),i.d(t,"UnsignedShortType",(function(){return Ce})),i.d(t,"VSMShadowMap",(function(){return u})),i.d(t,"Vector2",(function(){return Ni})),i.d(t,"Vector3",(function(){return Xi})),i.d(t,"Vector4",(function(){return Ki})),i.d(t,"VectorKeyframeTrack",(function(){return Pd})),i.d(t,"Vertex",(function(){return nf})),i.d(t,"VertexColors",(function(){return Yu})),i.d(t,"VideoTexture",(function(){return Bl})),i.d(t,"WebGL1Renderer",(function(){return Bo})),i.d(t,"WebGLCubeRenderTarget",(function(){return Ma})),i.d(t,"WebGLMultisampleRenderTarget",(function(){return Zi})),i.d(t,"WebGLRenderTarget",(function(){return Yi})),i.d(t,"WebGLRenderTargetCube",(function(){return Mf})),i.d(t,"WebGLRenderer",(function(){return Do})),i.d(t,"WebGLUtils",(function(){return Ao})),i.d(t,"WireframeGeometry",(function(){return cd})),i.d(t,"WireframeHelper",(function(){return bf})),i.d(t,"WrapAroundEnding",(function(){return Wt})),i.d(t,"XHRLoader",(function(){return xf})),i.d(t,"ZeroCurvatureEnding",(function(){return Gt})),i.d(t,"ZeroFactor",(function(){return R})),i.d(t,"ZeroSlopeEnding",(function(){return Ut})),i.d(t,"ZeroStencilOp",(function(){return li})),i.d(t,"sRGBEncoding",(function(){return Jt}));const n="123",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,o=1,l=2,c=3,d=0,p=1,h=2,u=3,f=0,m=1,g=2,y=1,v=2,w=0,b=1,x=2,S=3,M=4,T=5,_=100,O=101,C=102,E=103,A=104,R=200,k=201,L=202,I=203,P=204,D=205,B=206,z=207,j=208,N=209,F=210,H=0,G=1,U=2,W=3,V=4,K=5,Y=6,Z=7,q=0,X=1,J=2,$=0,Q=1,ee=2,te=3,ie=4,ne=5,re=300,ae=301,se=302,oe=303,le=304,ce=306,de=307,pe=1e3,he=1001,ue=1002,fe=1003,me=1004,ge=1004,ye=1005,ve=1005,we=1006,be=1007,xe=1007,Se=1008,Me=1008,Te=1009,_e=1010,Oe=1011,Ce=1012,Ee=1013,Ae=1014,Re=1015,ke=1016,Le=1017,Ie=1018,Pe=1019,De=1020,Be=1021,ze=1022,je=1023,Ne=1024,Fe=1025,He=je,Ge=1026,Ue=1027,We=1028,Ve=1029,Ke=1030,Ye=1031,Ze=1032,qe=1033,Xe=33776,Je=33777,$e=33778,Qe=33779,et=35840,tt=35841,it=35842,nt=35843,rt=36196,at=37492,st=37496,ot=37808,lt=37809,ct=37810,dt=37811,pt=37812,ht=37813,ut=37814,ft=37815,mt=37816,gt=37817,yt=37818,vt=37819,wt=37820,bt=37821,xt=36492,St=37840,Mt=37841,Tt=37842,_t=37843,Ot=37844,Ct=37845,Et=37846,At=37847,Rt=37848,kt=37849,Lt=37850,It=37851,Pt=37852,Dt=37853,Bt=2200,zt=2201,jt=2202,Nt=2300,Ft=2301,Ht=2302,Gt=2400,Ut=2401,Wt=2402,Vt=2500,Kt=2501,Yt=0,Zt=1,qt=2,Xt=3e3,Jt=3001,$t=3007,Qt=3002,ei=3003,ti=3004,ii=3005,ni=3006,ri=3200,ai=3201,si=0,oi=1,li=0,ci=7680,di=7681,pi=7682,hi=7683,ui=34055,fi=34056,mi=5386,gi=512,yi=513,vi=514,wi=515,bi=516,xi=517,Si=518,Mi=519,Ti=35044,_i=35048,Oi=35040,Ci=35045,Ei=35049,Ai=35041,Ri=35046,ki=35050,Li=35042,Ii="100",Pi="300 es";function Di(){}Object.assign(Di.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e)}}});const Bi=[];for(let e=0;e<256;e++)Bi[e]=(e<16?"0":"")+e.toString(16);let zi=1234567;const ji={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Bi[255&e]+Bi[e>>8&255]+Bi[e>>16&255]+Bi[e>>24&255]+"-"+Bi[255&t]+Bi[t>>8&255]+"-"+Bi[t>>16&15|64]+Bi[t>>24&255]+"-"+Bi[63&i|128]+Bi[i>>8&255]+"-"+Bi[i>>16&255]+Bi[i>>24&255]+Bi[255&n]+Bi[n>>8&255]+Bi[n>>16&255]+Bi[n>>24&255]).toUpperCase()},clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(zi=e%2147483647),zi=16807*zi%2147483647,(zi-1)/2147483646},degToRad:function(e){return e*ji.DEG2RAD},radToDeg:function(e){return e*ji.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,i,n,r){const a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((t+n)/2),d=s((t+n)/2),p=a((t-n)/2),h=s((t-n)/2),u=a((n-t)/2),f=s((n-t)/2);switch(r){case"XYX":e.set(o*d,l*p,l*h,o*c);break;case"YZY":e.set(l*h,o*d,l*p,o*c);break;case"ZXZ":e.set(l*p,l*h,o*d,o*c);break;case"XZX":e.set(o*d,l*f,l*u,o*c);break;case"YXY":e.set(l*u,o*d,l*f,o*c);break;case"ZYZ":e.set(l*f,l*u,o*d,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class Ni{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*n+e.x,this.y=r*n+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Fi{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,n,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],d=i[7],p=i[2],h=i[5],u=i[8],f=n[0],m=n[3],g=n[6],y=n[1],v=n[4],w=n[7],b=n[2],x=n[5],S=n[8];return r[0]=a*f+s*y+o*b,r[3]=a*m+s*v+o*x,r[6]=a*g+s*w+o*S,r[1]=l*f+c*y+d*b,r[4]=l*m+c*v+d*x,r[7]=l*g+c*w+d*S,r[2]=p*f+h*y+u*b,r[5]=p*m+h*v+u*x,r[8]=p*g+h*w+u*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-i*r*c+i*s*o+n*r*l-n*a*o}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],d=c*a-s*l,p=s*o-c*r,h=l*r-a*o,u=t*d+i*p+n*h;if(0===u)return this.set(0,0,0,0,0,0,0,0,0);const f=1/u;return e[0]=d*f,e[1]=(n*l-c*i)*f,e[2]=(s*i-n*a)*f,e[3]=p*f,e[4]=(c*t-n*o)*f,e[5]=(n*r-s*t)*f,e[6]=h*f,e[7]=(i*o-l*t)*f,e[8]=(a*t-i*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,a,s){const o=Math.cos(r),l=Math.sin(r);this.set(i*o,i*l,-i*(o*a+l*s)+a+e,-n*l,n*o,-n*(-l*a+o*s)+s+t,0,0,1)}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),n=this.elements,r=n[0],a=n[3],s=n[6],o=n[1],l=n[4],c=n[7];return n[0]=t*r+i*o,n[3]=t*a+i*l,n[6]=t*s+i*c,n[1]=-i*r+t*o,n[4]=-i*a+t*l,n[7]=-i*s+t*c,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}}let Hi;const Gi={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Hi&&(Hi=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Hi.width=e.width,Hi.height=e.height;const i=Hi.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Hi}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Ui=0;function Wi(e=Wi.DEFAULT_IMAGE,t=Wi.DEFAULT_MAPPING,i=he,n=he,r=we,a=Se,s=je,o=Te,l=1,c=Xt){Object.defineProperty(this,"id",{value:Ui++}),this.uuid=ji.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Ni(0,0),this.repeat=new Ni(1,1),this.center=new Ni(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}function Vi(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Gi.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Wi.DEFAULT_IMAGE=void 0,Wi.DEFAULT_MAPPING=re,Wi.prototype=Object.assign(Object.create(Di.prototype),{constructor:Wi,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const n=this.image;if(void 0===n.uuid&&(n.uuid=ji.generateUUID()),!t&&void 0===e.images[n.uuid]){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(Vi(n[e].image)):t.push(Vi(n[e]))}else t=Vi(n);e.images[n.uuid]={uuid:n.uuid,url:t}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==re)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pe:e.x=e.x-Math.floor(e.x);break;case he:e.x=e.x<0?0:1;break;case ue:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case pe:e.y=e.y-Math.floor(e.y);break;case he:e.y=e.y<0?0:1;break;case ue:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Wi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class Ki{constructor(e=0,t=0,i=0,n=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const a=e.elements,s=a[0],o=a[4],l=a[8],c=a[1],d=a[5],p=a[9],h=a[2],u=a[6],f=a[10];if(Math.abs(o-c)<.01&&Math.abs(l-h)<.01&&Math.abs(p-u)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+h)<.1&&Math.abs(p+u)<.1&&Math.abs(s+d+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const e=(s+1)/2,a=(d+1)/2,m=(f+1)/2,g=(o+c)/4,y=(l+h)/4,v=(p+u)/4;return e>a&&e>m?e<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=g/i,r=y/i):a>m?a<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(a),i=g/n,r=v/n):m<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(m),i=y/r,n=v/r),this.set(i,n,r,t),this}let m=Math.sqrt((u-p)*(u-p)+(l-h)*(l-h)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(u-p)/m,this.y=(l-h)/m,this.z=(c-o)/m,this.w=Math.acos((s+d+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Yi(e,t,i){this.width=e,this.height=t,this.scissor=new Ki(0,0,e,t),this.scissorTest=!1,this.viewport=new Ki(0,0,e,t),i=i||{},this.texture=new Wi(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:we,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function Zi(e,t,i){Yi.call(this,e,t,i),this.samples=4}Yi.prototype=Object.assign(Object.create(Di.prototype),{constructor:Yi,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Zi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Zi,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Yi.prototype.copy.call(this,e),this.samples=e.samples,this}});class qi{constructor(e=0,t=0,i=0,n=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=i,this._w=n}static slerp(e,t,i,n){return i.copy(e).slerp(t,n)}static slerpFlat(e,t,i,n,r,a,s){let o=i[n+0],l=i[n+1],c=i[n+2],d=i[n+3];const p=r[a+0],h=r[a+1],u=r[a+2],f=r[a+3];if(d!==f||o!==p||l!==h||c!==u){let e=1-s;const t=o*p+l*h+c*u+d*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),a=Math.atan2(r,t*i);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*i;if(o=o*e+p*r,l=l*e+h*r,c=c*e+u*r,d=d*e+f*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+d*d);o*=e,l*=e,c*=e,d*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,n,r,a){const s=i[n],o=i[n+1],l=i[n+2],c=i[n+3],d=r[a],p=r[a+1],h=r[a+2],u=r[a+3];return e[t]=s*u+c*d+o*h-l*p,e[t+1]=o*u+c*p+l*d-s*h,e[t+2]=l*u+c*h+s*p-o*d,e[t+3]=c*u-s*d-o*p-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,n=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(i/2),c=s(n/2),d=s(r/2),p=o(i/2),h=o(n/2),u=o(r/2);switch(a){case"XYZ":this._x=p*c*d+l*h*u,this._y=l*h*d-p*c*u,this._z=l*c*u+p*h*d,this._w=l*c*d-p*h*u;break;case"YXZ":this._x=p*c*d+l*h*u,this._y=l*h*d-p*c*u,this._z=l*c*u-p*h*d,this._w=l*c*d+p*h*u;break;case"ZXY":this._x=p*c*d-l*h*u,this._y=l*h*d+p*c*u,this._z=l*c*u+p*h*d,this._w=l*c*d-p*h*u;break;case"ZYX":this._x=p*c*d-l*h*u,this._y=l*h*d+p*c*u,this._z=l*c*u-p*h*d,this._w=l*c*d+p*h*u;break;case"YZX":this._x=p*c*d+l*h*u,this._y=l*h*d+p*c*u,this._z=l*c*u-p*h*d,this._w=l*c*d-p*h*u;break;case"XZY":this._x=p*c*d-l*h*u,this._y=l*h*d-p*c*u,this._z=l*c*u+p*h*d,this._w=l*c*d+p*h*u;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],d=t[10],p=i+s+d;if(p>0){const e=.5/Math.sqrt(p+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-n)*e}else if(i>s&&i>d){const e=2*Math.sqrt(1+i-s-d);this._w=(c-o)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(r+l)/e}else if(s>d){const e=2*Math.sqrt(1+s-i-d);this._w=(r-l)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+d-i-s);this._w=(a-n)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-6?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ji.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+a*s+n*l-r*o,this._y=n*c+a*o+r*s-i*l,this._z=r*c+a*l+i*o-n*s,this._w=a*c-i*s-n*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,r=this._z,a=this._w;let s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),d=Math.sin((1-t)*c)/l,p=Math.sin(t*c)/l;return this._w=a*d+this._w*p,this._x=i*d+this._x*p,this._y=n*d+this._y*p,this._z=r*d+this._z*p,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Xi{constructor(e=0,t=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($i.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($i.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*n-s*i,c=o*i+s*t-r*n,d=o*n+r*i-a*t,p=-r*t-a*i-s*n;return this.x=l*o+p*-r+c*-s-d*-a,this.y=c*o+p*-a+d*-r-l*-s,this.z=d*o+p*-s+l*-a-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=n*o-r*s,this.y=r*a-i*o,this.z=i*s-n*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ji.copy(this).projectOnVector(e),this.sub(Ji)}reflect(e){return this.sub(Ji.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ji.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Ji=new Xi,$i=new qi;class Qi{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new Xi(1/0,1/0,1/0),this.max=void 0!==t?t:new Xi(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],d=e[o+2];l<t&&(t=l),c<i&&(i=c),d<n&&(n=d),l>r&&(r=l),c>a&&(a=c),d>s&&(s=d)}return this.min.set(t,i,n),this.max.set(r,a,s),this}setFromBufferAttribute(e){let t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),d=e.getZ(o);l<t&&(t=l),c<i&&(i=c),d<n&&(n=d),l>r&&(r=l),c>a&&(a=c),d>s&&(s=d)}return this.min.set(t,i,n),this.max.set(r,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=nn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Xi),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Xi),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),rn.copy(t.boundingBox),rn.applyMatrix4(e.matrixWorld),this.union(rn));const i=e.children;for(let e=0,t=i.length;e<t;e++)this.expandByObject(i[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Xi),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,nn),nn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pn),hn.subVectors(this.max,pn),an.subVectors(e.a,pn),sn.subVectors(e.b,pn),on.subVectors(e.c,pn),ln.subVectors(sn,an),cn.subVectors(on,sn),dn.subVectors(an,on);let t=[0,-ln.z,ln.y,0,-cn.z,cn.y,0,-dn.z,dn.y,ln.z,0,-ln.x,cn.z,0,-cn.x,dn.z,0,-dn.x,-ln.y,ln.x,0,-cn.y,cn.x,0,-dn.y,dn.x,0];return!!en(t,an,sn,on,hn)&&(t=[1,0,0,0,1,0,0,0,1],!!en(t,an,sn,on,hn)&&(un.crossVectors(ln,cn),t=[un.x,un.y,un.z],en(t,an,sn,on,hn)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Xi),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return nn.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(nn).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(tn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),tn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),tn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),tn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),tn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),tn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),tn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),tn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(tn)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function en(e,t,i,n,r){for(let a=0,s=e.length-3;a<=s;a+=3){fn.fromArray(e,a);const s=r.x*Math.abs(fn.x)+r.y*Math.abs(fn.y)+r.z*Math.abs(fn.z),o=t.dot(fn),l=i.dot(fn),c=n.dot(fn);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const tn=[new Xi,new Xi,new Xi,new Xi,new Xi,new Xi,new Xi,new Xi],nn=new Xi,rn=new Qi,an=new Xi,sn=new Xi,on=new Xi,ln=new Xi,cn=new Xi,dn=new Xi,pn=new Xi,hn=new Xi,un=new Xi,fn=new Xi,mn=new Qi;class gn{constructor(e,t){this.center=void 0!==e?e:new Xi,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):mn.setFromPoints(e).getCenter(i);let n=0;for(let t=0,r=e.length;t<r;t++)n=Math.max(n,i.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Xi),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Qi),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const yn=new Xi,vn=new Xi,wn=new Xi,bn=new Xi,xn=new Xi,Sn=new Xi,Mn=new Xi;class Tn{constructor(e,t){this.origin=void 0!==e?e:new Xi,this.direction=void 0!==t?t:new Xi(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Xi),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yn)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Xi),t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yn.copy(this.direction).multiplyScalar(t).add(this.origin),yn.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){vn.copy(e).add(t).multiplyScalar(.5),wn.copy(t).sub(e).normalize(),bn.copy(this.origin).sub(vn);const r=.5*e.distanceTo(t),a=-this.direction.dot(wn),s=bn.dot(this.direction),o=-bn.dot(wn),l=bn.lengthSq(),c=Math.abs(1-a*a);let d,p,h,u;if(c>0)if(d=a*o-s,p=a*s-o,u=r*c,d>=0)if(p>=-u)if(p<=u){const e=1/c;d*=e,p*=e,h=d*(d+a*p+2*s)+p*(a*d+p+2*o)+l}else p=r,d=Math.max(0,-(a*p+s)),h=-d*d+p*(p+2*o)+l;else p=-r,d=Math.max(0,-(a*p+s)),h=-d*d+p*(p+2*o)+l;else p<=-u?(d=Math.max(0,-(-a*r+s)),p=d>0?-r:Math.min(Math.max(-r,-o),r),h=-d*d+p*(p+2*o)+l):p<=u?(d=0,p=Math.min(Math.max(-r,-o),r),h=p*(p+2*o)+l):(d=Math.max(0,-(a*r+s)),p=d>0?r:Math.min(Math.max(-r,-o),r),h=-d*d+p*(p+2*o)+l);else p=a>0?-r:r,d=Math.max(0,-(a*p+s)),h=-d*d+p*(p+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),n&&n.copy(wn).multiplyScalar(p).add(vn),h}intersectSphere(e,t){yn.subVectors(e.center,this.origin);const i=yn.dot(this.direction),n=yn.dot(yn)-i*i,r=e.radius*e.radius;if(n>r)return null;const a=Math.sqrt(r-n),s=i-a,o=i+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,p=this.origin;return l>=0?(i=(e.min.x-p.x)*l,n=(e.max.x-p.x)*l):(i=(e.max.x-p.x)*l,n=(e.min.x-p.x)*l),c>=0?(r=(e.min.y-p.y)*c,a=(e.max.y-p.y)*c):(r=(e.max.y-p.y)*c,a=(e.min.y-p.y)*c),i>a||r>n?null:((r>i||i!=i)&&(i=r),(a<n||n!=n)&&(n=a),d>=0?(s=(e.min.z-p.z)*d,o=(e.max.z-p.z)*d):(s=(e.max.z-p.z)*d,o=(e.min.z-p.z)*d),i>o||s>n?null:((s>i||i!=i)&&(i=s),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,yn)}intersectTriangle(e,t,i,n,r){xn.subVectors(t,e),Sn.subVectors(i,e),Mn.crossVectors(xn,Sn);let a,s=this.direction.dot(Mn);if(s>0){if(n)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}bn.subVectors(this.origin,e);const o=a*this.direction.dot(Sn.crossVectors(bn,Sn));if(o<0)return null;const l=a*this.direction.dot(xn.cross(bn));if(l<0)return null;if(o+l>s)return null;const c=-a*bn.dot(Mn);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class _n{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,n,r,a,s,o,l,c,d,p,h,u,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=d,g[14]=p,g[3]=h,g[7]=u,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new _n).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/On.setFromMatrixColumn(e,0).length(),r=1/On.setFromMatrixColumn(e,1).length(),a=1/On.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),d=Math.sin(r);if("XYZ"===e.order){const e=a*c,i=a*d,n=s*c,r=s*d;t[0]=o*c,t[4]=-o*d,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=n+i*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,i=o*d,n=l*c,r=l*d;t[0]=e+r*s,t[4]=n*s-i,t[8]=a*l,t[1]=a*d,t[5]=a*c,t[9]=-s,t[2]=i*s-n,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,i=o*d,n=l*c,r=l*d;t[0]=e-r*s,t[4]=-a*d,t[8]=n+i*s,t[1]=i+n*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,i=a*d,n=s*c,r=s*d;t[0]=o*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=o*d,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,i=a*l,n=s*o,r=s*l;t[0]=o*c,t[4]=r-e*d,t[8]=n*d+i,t[1]=d,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=i*d+n,t[10]=e-r*d}else if("XZY"===e.order){const e=a*o,i=a*l,n=s*o,r=s*l;t[0]=o*c,t[4]=-d,t[8]=l*c,t[1]=e*d+r,t[5]=a*c,t[9]=i*d-n,t[2]=n*d-i,t[6]=s*c,t[10]=r*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(En,e,An)}lookAt(e,t,i){const n=this.elements;return Ln.subVectors(e,t),0===Ln.lengthSq()&&(Ln.z=1),Ln.normalize(),Rn.crossVectors(i,Ln),0===Rn.lengthSq()&&(1===Math.abs(i.z)?Ln.x+=1e-4:Ln.z+=1e-4,Ln.normalize(),Rn.crossVectors(i,Ln)),Rn.normalize(),kn.crossVectors(Ln,Rn),n[0]=Rn.x,n[4]=kn.x,n[8]=Ln.x,n[1]=Rn.y,n[5]=kn.y,n[9]=Ln.y,n[2]=Rn.z,n[6]=kn.z,n[10]=Ln.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],d=i[5],p=i[9],h=i[13],u=i[2],f=i[6],m=i[10],g=i[14],y=i[3],v=i[7],w=i[11],b=i[15],x=n[0],S=n[4],M=n[8],T=n[12],_=n[1],O=n[5],C=n[9],E=n[13],A=n[2],R=n[6],k=n[10],L=n[14],I=n[3],P=n[7],D=n[11],B=n[15];return r[0]=a*x+s*_+o*A+l*I,r[4]=a*S+s*O+o*R+l*P,r[8]=a*M+s*C+o*k+l*D,r[12]=a*T+s*E+o*L+l*B,r[1]=c*x+d*_+p*A+h*I,r[5]=c*S+d*O+p*R+h*P,r[9]=c*M+d*C+p*k+h*D,r[13]=c*T+d*E+p*L+h*B,r[2]=u*x+f*_+m*A+g*I,r[6]=u*S+f*O+m*R+g*P,r[10]=u*M+f*C+m*k+g*D,r[14]=u*T+f*E+m*L+g*B,r[3]=y*x+v*_+w*A+b*I,r[7]=y*S+v*O+w*R+b*P,r[11]=y*M+v*C+w*k+b*D,r[15]=y*T+v*E+w*L+b*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],d=e[6],p=e[10],h=e[14];return e[3]*(+r*o*d-n*l*d-r*s*p+i*l*p+n*s*h-i*o*h)+e[7]*(+t*o*h-t*l*p+r*a*p-n*a*h+n*l*c-r*o*c)+e[11]*(+t*l*d-t*s*h-r*a*d+i*a*h+r*s*c-i*l*c)+e[15]*(-n*s*c-t*o*d+t*s*p+n*a*d-i*a*p+i*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],d=e[9],p=e[10],h=e[11],u=e[12],f=e[13],m=e[14],g=e[15],y=d*m*l-f*p*l+f*o*h-s*m*h-d*o*g+s*p*g,v=u*p*l-c*m*l-u*o*h+a*m*h+c*o*g-a*p*g,w=c*f*l-u*d*l+u*s*h-a*f*h-c*s*g+a*d*g,b=u*d*o-c*f*o-u*s*p+a*f*p+c*s*m-a*d*m,x=t*y+i*v+n*w+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=y*S,e[1]=(f*p*r-d*m*r-f*n*h+i*m*h+d*n*g-i*p*g)*S,e[2]=(s*m*r-f*o*r+f*n*l-i*m*l-s*n*g+i*o*g)*S,e[3]=(d*o*r-s*p*r-d*n*l+i*p*l+s*n*h-i*o*h)*S,e[4]=v*S,e[5]=(c*m*r-u*p*r+u*n*h-t*m*h-c*n*g+t*p*g)*S,e[6]=(u*o*r-a*m*r-u*n*l+t*m*l+a*n*g-t*o*g)*S,e[7]=(a*p*r-c*o*r+c*n*l-t*p*l-a*n*h+t*o*h)*S,e[8]=w*S,e[9]=(u*d*r-c*f*r-u*i*h+t*f*h+c*i*g-t*d*g)*S,e[10]=(a*f*r-u*s*r+u*i*l-t*f*l-a*i*g+t*s*g)*S,e[11]=(c*s*r-a*d*r-c*i*l+t*d*l+a*i*h-t*s*h)*S,e[12]=b*S,e[13]=(c*f*n-u*d*n+u*i*p-t*f*p-c*i*m+t*d*m)*S,e[14]=(u*s*n-a*f*n-u*i*o+t*f*o+a*i*m-t*s*m)*S,e[15]=(a*d*n-c*s*n+c*i*o-t*d*o-a*i*p+t*s*p)*S,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+i,l*s-n*o,l*o+n*s,0,l*s+n*o,c*s+i,c*o-n*a,0,l*o-n*s,c*o+n*a,r*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,d=s+s,p=r*l,h=r*c,u=r*d,f=a*c,m=a*d,g=s*d,y=o*l,v=o*c,w=o*d,b=i.x,x=i.y,S=i.z;return n[0]=(1-(f+g))*b,n[1]=(h+w)*b,n[2]=(u-v)*b,n[3]=0,n[4]=(h-w)*x,n[5]=(1-(p+g))*x,n[6]=(m+y)*x,n[7]=0,n[8]=(u+v)*S,n[9]=(m-y)*S,n[10]=(1-(p+f))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=On.set(n[0],n[1],n[2]).length();const a=On.set(n[4],n[5],n[6]).length(),s=On.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],Cn.copy(this);const o=1/r,l=1/a,c=1/s;return Cn.elements[0]*=o,Cn.elements[1]*=o,Cn.elements[2]*=o,Cn.elements[4]*=l,Cn.elements[5]*=l,Cn.elements[6]*=l,Cn.elements[8]*=c,Cn.elements[9]*=c,Cn.elements[10]*=c,t.setFromRotationMatrix(Cn),i.x=r,i.y=a,i.z=s,this}makePerspective(e,t,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,o=2*r/(t-e),l=2*r/(i-n),c=(t+e)/(t-e),d=(i+n)/(i-n),p=-(a+r)/(a-r),h=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=p,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,n,r,a){const s=this.elements,o=1/(t-e),l=1/(i-n),c=1/(a-r),d=(t+e)*o,p=(i+n)*l,h=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-p,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const On=new Xi,Cn=new _n,En=new Xi(0,0,0),An=new Xi(1,1,1),Rn=new Xi,kn=new Xi,Ln=new Xi;class In{constructor(e=0,t=0,i=0,n=In.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,i){const n=ji.clamp,r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],c=r[5],d=r[9],p=r[2],h=r[6],u=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,u),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-n(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-p,u),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-n(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(h,u),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-d,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Pn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Pn,t,i)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Dn.setFromEuler(this),this.setFromQuaternion(Dn,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Xi(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}In.DefaultOrder="XYZ",In.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Pn=new _n,Dn=new qi;class Bn{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let zn=0;const jn=new Xi,Nn=new qi,Fn=new _n,Hn=new Xi,Gn=new Xi,Un=new Xi,Wn=new qi,Vn=new Xi(1,0,0),Kn=new Xi(0,1,0),Yn=new Xi(0,0,1),Zn={type:"added"},qn={type:"removed"};function Xn(){Object.defineProperty(this,"id",{value:zn++}),this.uuid=ji.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xn.DefaultUp.clone();const e=new Xi,t=new In,i=new qi,n=new Xi(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new _n},normalMatrix:{value:new Fi}}),this.matrix=new _n,this.matrixWorld=new _n,this.matrixAutoUpdate=Xn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Bn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Xn.DefaultUp=new Xi(0,1,0),Xn.DefaultMatrixAutoUpdate=!0,Xn.prototype=Object.assign(Object.create(Di.prototype),{constructor:Xn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Nn.setFromAxisAngle(e,t),this.quaternion.multiply(Nn),this},rotateOnWorldAxis:function(e,t){return Nn.setFromAxisAngle(e,t),this.quaternion.premultiply(Nn),this},rotateX:function(e){return this.rotateOnAxis(Vn,e)},rotateY:function(e){return this.rotateOnAxis(Kn,e)},rotateZ:function(e){return this.rotateOnAxis(Yn,e)},translateOnAxis:function(e,t){return jn.copy(e).applyQuaternion(this.quaternion),this.position.add(jn.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Vn,e)},translateY:function(e){return this.translateOnAxis(Kn,e)},translateZ:function(e){return this.translateOnAxis(Yn,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Fn.copy(this.matrixWorld).invert())},lookAt:function(e,t,i){e.isVector3?Hn.copy(e):Hn.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Gn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fn.lookAt(Gn,Hn,this.up):Fn.lookAt(Hn,Gn,this.up),this.quaternion.setFromRotationMatrix(Fn),n&&(Fn.extractRotation(n.matrixWorld),Nn.setFromRotationMatrix(Fn),this.quaternion.premultiply(Nn.invert()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Zn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qn)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(qn)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Fn.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fn.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fn),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Xi),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new qi),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gn,e,Un),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Xi),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gn,Wn,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Xi),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){const t=a(e.geometries),n=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c)}return i.object=n,i;function a(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const i=e.children[t];this.add(i.clone())}return this}});const Jn=new Xi,$n=new Xi,Qn=new Fi;class er{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new Xi(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=Jn.subVectors(i,t).cross($n.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Xi),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Xi);const i=e.delta(Jn),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?void 0:t.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Xi),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Qn.getNormalMatrix(e),n=this.coplanarPoint(Jn).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const tr=new Xi,ir=new Xi,nr=new Xi,rr=new Xi,ar=new Xi,sr=new Xi,or=new Xi,lr=new Xi,cr=new Xi,dr=new Xi;class pr{constructor(e,t,i){this.a=void 0!==e?e:new Xi,this.b=void 0!==t?t:new Xi,this.c=void 0!==i?i:new Xi}static getNormal(e,t,i,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Xi),n.subVectors(i,t),tr.subVectors(e,t),n.cross(tr);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){tr.subVectors(n,t),ir.subVectors(i,t),nr.subVectors(e,t);const a=tr.dot(tr),s=tr.dot(ir),o=tr.dot(nr),l=ir.dot(ir),c=ir.dot(nr),d=a*l-s*s;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Xi),0===d)return r.set(-2,-1,-1);const p=1/d,h=(l*o-s*c)*p,u=(a*c-s*o)*p;return r.set(1-h-u,u,h)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,rr),rr.x>=0&&rr.y>=0&&rr.x+rr.y<=1}static getUV(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,rr),o.set(0,0),o.addScaledVector(r,rr.x),o.addScaledVector(a,rr.y),o.addScaledVector(s,rr.z),o}static isFrontFacing(e,t,i,n){return tr.subVectors(i,t),ir.subVectors(e,t),tr.cross(ir).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return tr.subVectors(this.c,this.b),ir.subVectors(this.a,this.b),.5*tr.cross(ir).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Xi),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new er),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,r){return pr.getUV(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return pr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Xi);const i=this.a,n=this.b,r=this.c;let a,s;ar.subVectors(n,i),sr.subVectors(r,i),lr.subVectors(e,i);const o=ar.dot(lr),l=sr.dot(lr);if(o<=0&&l<=0)return t.copy(i);cr.subVectors(e,n);const c=ar.dot(cr),d=sr.dot(cr);if(c>=0&&d<=c)return t.copy(n);const p=o*d-c*l;if(p<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(i).addScaledVector(ar,a);dr.subVectors(e,r);const h=ar.dot(dr),u=sr.dot(dr);if(u>=0&&h<=u)return t.copy(r);const f=h*l-o*u;if(f<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(i).addScaledVector(sr,s);const m=c*u-h*d;if(m<=0&&d-c>=0&&h-u>=0)return or.subVectors(r,n),s=(d-c)/(d-c+(h-u)),t.copy(n).addScaledVector(or,s);const g=1/(m+f+p);return a=f*g,s=p*g,t.copy(i).addScaledVector(ar,a).addScaledVector(sr,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ur={h:0,s:0,l:0},fr={h:0,s:0,l:0};function mr(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}function gr(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function yr(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class vr{constructor(e,t,i){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=ji.euclideanModulo(e,1),t=ji.clamp(t,0,1),i=ji.clamp(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=mr(r,n,e+1/3),this.g=mr(r,n,e),this.b=mr(r,n,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const n=i[1],r=i[2];switch(n){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[5]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[5]),this;break;case"hsl":case"hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const i=parseFloat(e[1])/360,n=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[5]),this.setHSL(i,n,r)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){const e=i[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=hr[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=gr(e.r),this.g=gr(e.g),this.b=gr(e.b),this}copyLinearToSRGB(e){return this.r=yr(e.r),this.g=yr(e.g),this.b=yr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,i=this.g,n=this.b,r=Math.max(t,i,n),a=Math.min(t,i,n);let s,o;const l=(a+r)/2;if(a===r)s=0,o=0;else{const e=r-a;switch(o=l<=.5?e/(r+a):e/(2-r-a),r){case t:s=(i-n)/e+(i<n?6:0);break;case i:s=(n-t)/e+2;break;case n:s=(t-i)/e+4}s/=6}return e.h=s,e.s=o,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,i){return this.getHSL(ur),ur.h+=e,ur.s+=t,ur.l+=i,this.setHSL(ur.h,ur.s,ur.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(ur),e.getHSL(fr);const i=ji.lerp(ur.h,fr.h,t),n=ji.lerp(ur.s,fr.s,t),r=ji.lerp(ur.l,fr.l,t);return this.setHSL(i,n,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}vr.NAMES=hr,vr.prototype.r=1,vr.prototype.g=1,vr.prototype.b=1;class wr{constructor(e,t,i,n,r,a=0){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new Xi,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new vr,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=a}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let br=0;function xr(){Object.defineProperty(this,"id",{value:br++}),this.uuid=ji.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=b,this.side=f,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=P,this.blendDst=D,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mi,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ci,this.stencilZFail=ci,this.stencilZPass=ci,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Sr(e){xr.call(this),this.type="MeshBasicMaterial",this.color=new vr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}xr.prototype=Object.assign(Object.create(Di.prototype),{constructor:xr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===y;continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==f&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(xr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Sr.prototype=Object.create(xr.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isMeshBasicMaterial=!0,Sr.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const Mr=new Xi,Tr=new Ni;function _r(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=Ti,this.updateRange={offset:0,count:-1},this.version=0}function Or(e,t,i){_r.call(this,new Int8Array(e),t,i)}function Cr(e,t,i){_r.call(this,new Uint8Array(e),t,i)}function Er(e,t,i){_r.call(this,new Uint8ClampedArray(e),t,i)}function Ar(e,t,i){_r.call(this,new Int16Array(e),t,i)}function Rr(e,t,i){_r.call(this,new Uint16Array(e),t,i)}function kr(e,t,i){_r.call(this,new Int32Array(e),t,i)}function Lr(e,t,i){_r.call(this,new Uint32Array(e),t,i)}function Ir(e,t,i){_r.call(this,new Uint16Array(e),t,i)}function Pr(e,t,i){_r.call(this,new Float32Array(e),t,i)}function Dr(e,t,i){_r.call(this,new Float64Array(e),t,i)}Object.defineProperty(_r.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(_r.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new vr),t[i++]=r.r,t[i++]=r.g,t[i++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new Ni),t[i++]=r.x,t[i++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new Xi),t[i++]=r.x,t[i++]=r.y,t[i++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new Ki),t[i++]=r.x,t[i++]=r.y,t[i++]=r.z,t[i++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix3(e),this.setXY(t,Tr.x,Tr.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.applyMatrix3(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this},applyMatrix4:function(e){for(let t=0,i=this.count;t<i;t++)Mr.x=this.getX(t),Mr.y=this.getY(t),Mr.z=this.getZ(t),Mr.applyMatrix4(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this},applyNormalMatrix:function(e){for(let t=0,i=this.count;t<i;t++)Mr.x=this.getX(t),Mr.y=this.getY(t),Mr.z=this.getZ(t),Mr.applyNormalMatrix(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this},transformDirection:function(e){for(let t=0,i=this.count;t<i;t++)Mr.x=this.getX(t),Mr.y=this.getY(t),Mr.z=this.getZ(t),Mr.transformDirection(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Or.prototype=Object.create(_r.prototype),Or.prototype.constructor=Or,Cr.prototype=Object.create(_r.prototype),Cr.prototype.constructor=Cr,Er.prototype=Object.create(_r.prototype),Er.prototype.constructor=Er,Ar.prototype=Object.create(_r.prototype),Ar.prototype.constructor=Ar,Rr.prototype=Object.create(_r.prototype),Rr.prototype.constructor=Rr,kr.prototype=Object.create(_r.prototype),kr.prototype.constructor=kr,Lr.prototype=Object.create(_r.prototype),Lr.prototype.constructor=Lr,Ir.prototype=Object.create(_r.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isFloat16BufferAttribute=!0,Pr.prototype=Object.create(_r.prototype),Pr.prototype.constructor=Pr,Dr.prototype=Object.create(_r.prototype),Dr.prototype.constructor=Dr;class Br{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let i,n,r=void 0;const a=e.faces;for(n=0;n<a.length;n++){const e=a[n];e.materialIndex!==r&&(r=e.materialIndex,void 0!==i&&(i.count=3*n-i.start,t.push(i)),i={start:3*n,materialIndex:r})}void 0!==i&&(i.count=3*n-i.start,t.push(i)),this.groups=t}fromGeometry(e){const t=e.faces,i=e.vertices,n=e.faceVertexUvs,r=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,s=e.morphTargets,o=s.length;let l;if(o>0){l=[];for(let e=0;e<o;e++)l[e]={name:s[e].name,data:[]};this.morphTargets.position=l}const c=e.morphNormals,d=c.length;let p;if(d>0){p=[];for(let e=0;e<d;e++)p[e]={name:c[e].name,data:[]};this.morphTargets.normal=p}const h=e.skinIndices,u=e.skinWeights,f=h.length===i.length,m=u.length===i.length;i.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const g=t[e];this.vertices.push(i[g.a],i[g.b],i[g.c]);const y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{const e=g.normal;this.normals.push(e,e,e)}const v=g.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{const e=g.color;this.colors.push(e,e,e)}if(!0===r){const t=n[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new Ni,new Ni,new Ni))}if(!0===a){const t=n[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new Ni,new Ni,new Ni))}for(let e=0;e<o;e++){const t=s[e].vertices;l[e].data.push(t[g.a],t[g.b],t[g.c])}for(let t=0;t<d;t++){const i=c[t].vertexNormals[e];p[t].data.push(i.a,i.b,i.c)}f&&this.skinIndices.push(h[g.a],h[g.b],h[g.c]),m&&this.skinWeights.push(u[g.a],u[g.b],u[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}function zr(e){if(0===e.length)return-1/0;let t=e[0];for(let i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}const jr={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Nr(e,t){return new jr[e](t)}let Fr=1;const Hr=new _n,Gr=new Xn,Ur=new Xi,Wr=new Qi,Vr=new Qi,Kr=new Xi;function Yr(){Object.defineProperty(this,"id",{value:Fr+=2}),this.uuid=ji.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Yr.prototype=Object.assign(Object.create(Di.prototype),{constructor:Yr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(zr(e)>65535?Lr:Rr)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Fi).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Hr.makeRotationX(e),this.applyMatrix4(Hr),this},rotateY:function(e){return Hr.makeRotationY(e),this.applyMatrix4(Hr),this},rotateZ:function(e){return Hr.makeRotationZ(e),this.applyMatrix4(Hr),this},translate:function(e,t,i){return Hr.makeTranslation(e,t,i),this.applyMatrix4(Hr),this},scale:function(e,t,i){return Hr.makeScale(e,t,i),this.applyMatrix4(Hr),this},lookAt:function(e){return Gr.lookAt(e),Gr.updateMatrix(),this.applyMatrix4(Gr.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ur).negate(),this.translate(Ur.x,Ur.y,Ur.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new Pr(3*t.vertices.length,3),i=new Pr(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new Pr(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Pr(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Br).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new _r(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new _r(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new _r(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new _r(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new _r(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const t in e.morphTargets){const i=[],n=e.morphTargets[t];for(let e=0,t=n.length;e<t;e++){const t=n[e],r=new Pr(3*t.data.length,3);r.name=t.name,i.push(r.copyVector3sArray(t.data))}this.morphAttributes[t]=i}if(e.skinIndices.length>0){const t=new Pr(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new Pr(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Xi(-1/0,-1/0,-1/0),new Xi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Wr.setFromBufferAttribute(i),this.morphTargetsRelative?(Kr.addVectors(this.boundingBox.min,Wr.min),this.boundingBox.expandByPoint(Kr),Kr.addVectors(this.boundingBox.max,Wr.max),this.boundingBox.expandByPoint(Kr)):(this.boundingBox.expandByPoint(Wr.min),this.boundingBox.expandByPoint(Wr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Xi,1/0);if(e){const i=this.boundingSphere.center;if(Wr.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Vr.setFromBufferAttribute(i),this.morphTargetsRelative?(Kr.addVectors(Wr.min,Vr.min),Wr.expandByPoint(Kr),Kr.addVectors(Wr.max,Vr.max),Wr.expandByPoint(Kr)):(Wr.expandByPoint(Vr.min),Wr.expandByPoint(Vr.max))}Wr.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)Kr.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(Kr));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Kr.fromBufferAttribute(a,t),s&&(Ur.fromBufferAttribute(e,t),Kr.add(Ur)),n=Math.max(n,i.distanceToSquared(Kr))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new _r(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new Xi,r=new Xi,a=new Xi,s=new Xi,o=new Xi,l=new Xi,c=new Xi,d=new Xi;if(e)for(let p=0,h=e.count;p<h;p+=3){const h=e.getX(p+0),u=e.getX(p+1),f=e.getX(p+2);n.fromBufferAttribute(t,h),r.fromBufferAttribute(t,u),a.fromBufferAttribute(t,f),c.subVectors(a,r),d.subVectors(n,r),c.cross(d),s.fromBufferAttribute(i,h),o.fromBufferAttribute(i,u),l.fromBufferAttribute(i,f),s.add(c),o.add(c),l.add(c),i.setXYZ(h,s.x,s.y,s.z),i.setXYZ(u,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),d.subVectors(n,r),c.cross(d),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const n in i){if(void 0===e.attributes[n])continue;const r=i[n].array,a=e.attributes[n],s=a.array,o=a.itemSize*t,l=Math.min(s.length,r.length-o);for(let e=0,t=o;e<l;e++,t++)r[t]=s[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Kr.fromBufferAttribute(e,t),Kr.normalize(),e.setXYZ(t,Kr.x,Kr.y,Kr.z)},toNonIndexed:function(){function e(e,t){const i=e.array,n=e.itemSize,r=e.normalized,a=new i.constructor(t.length*n);let s=0,o=0;for(let e=0,r=t.length;e<r;e++){s=t[e]*n;for(let e=0;e<n;e++)a[o++]=i[s++]}return new _r(a,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Yr,i=this.index.array,n=this.attributes;for(const r in n){const a=e(n[r],i);t.setAttribute(r,a)}const r=this.morphAttributes;for(const n in r){const a=[],s=r[n];for(let t=0,n=s.length;t<n;t++){const n=e(s[t],i);a.push(n)}t.morphAttributes[n]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,i=a.length;e<i;e++){const i=a[e];t.addGroup(i.start,i.count,i.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const t in i){const n=i[t],r=n.toJSON(e.data);""!==n.name&&(r.name=n.name),e.data.attributes[t]=r}const n={};let r=!1;for(const t in this.morphAttributes){const i=this.morphAttributes[t],a=[];for(let t=0,n=i.length;t<n;t++){const n=i[t],r=n.toJSON(e.data);""!==n.name&&(r.name=n.name),a.push(r)}a.length>0&&(n[t]=a,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e},clone:function(){return(new Yr).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const e in n){const i=n[e];this.setAttribute(e,i.clone(t))}const r=e.morphAttributes;for(const e in r){const i=[],n=r[e];for(let e=0,r=n.length;e<r;e++)i.push(n[e].clone(t));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Zr=new _n,qr=new Tn,Xr=new gn,Jr=new Xi,$r=new Xi,Qr=new Xi,ea=new Xi,ta=new Xi,ia=new Xi,na=new Xi,ra=new Xi,aa=new Xi,sa=new Ni,oa=new Ni,la=new Ni,ca=new Xi,da=new Xi;function pa(e,t){Xn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Yr,this.material=void 0!==t?t:new Sr,this.updateMorphTargets()}function ha(e,t,i,n,r,a,s,o){let l;if(l=t.side===m?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,t.side!==g,o),null===l)return null;da.copy(o),da.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(da);return c<i.near||c>i.far?null:{distance:c,point:da.clone(),object:e}}function ua(e,t,i,n,r,a,s,o,l,c,d,p){Jr.fromBufferAttribute(r,c),$r.fromBufferAttribute(r,d),Qr.fromBufferAttribute(r,p);const h=e.morphTargetInfluences;if(t.morphTargets&&a&&h){na.set(0,0,0),ra.set(0,0,0),aa.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=h[e],i=a[e];0!==t&&(ea.fromBufferAttribute(i,c),ta.fromBufferAttribute(i,d),ia.fromBufferAttribute(i,p),s?(na.addScaledVector(ea,t),ra.addScaledVector(ta,t),aa.addScaledVector(ia,t)):(na.addScaledVector(ea.sub(Jr),t),ra.addScaledVector(ta.sub($r),t),aa.addScaledVector(ia.sub(Qr),t)))}Jr.add(na),$r.add(ra),Qr.add(aa)}e.isSkinnedMesh&&(e.boneTransform(c,Jr),e.boneTransform(d,$r),e.boneTransform(p,Qr));const u=ha(e,t,i,n,Jr,$r,Qr,ca);if(u){o&&(sa.fromBufferAttribute(o,c),oa.fromBufferAttribute(o,d),la.fromBufferAttribute(o,p),u.uv=pr.getUV(ca,Jr,$r,Qr,sa,oa,la,new Ni)),l&&(sa.fromBufferAttribute(l,c),oa.fromBufferAttribute(l,d),la.fromBufferAttribute(l,p),u.uv2=pr.getUV(ca,Jr,$r,Qr,sa,oa,la,new Ni));const e=new wr(c,d,p);pr.getNormal(Jr,$r,Qr,e.normal),u.face=e}return u}pa.prototype=Object.assign(Object.create(Xn.prototype),{constructor:pa,isMesh:!0,copy:function(e){return Xn.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const e=t[i[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=e.length;t<i;t++){const i=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),Xr.copy(i.boundingSphere),Xr.applyMatrix4(r),!1===e.ray.intersectsSphere(Xr))return;if(Zr.copy(r).invert(),qr.copy(e.ray).applyMatrix4(Zr),null!==i.boundingBox&&!1===qr.intersectsBox(i.boundingBox))return;let a;if(i.isBufferGeometry){const r=i.index,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative,c=i.attributes.uv,d=i.attributes.uv2,p=i.groups,h=i.drawRange;if(null!==r)if(Array.isArray(n))for(let i=0,u=p.length;i<u;i++){const u=p[i],f=n[u.materialIndex];for(let i=Math.max(u.start,h.start),n=Math.min(u.start+u.count,h.start+h.count);i<n;i+=3){const n=r.getX(i),p=r.getX(i+1),h=r.getX(i+2);a=ua(this,f,e,qr,s,o,l,c,d,n,p,h),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=u.materialIndex,t.push(a))}}else{for(let i=Math.max(0,h.start),p=Math.min(r.count,h.start+h.count);i<p;i+=3){const p=r.getX(i),h=r.getX(i+1),u=r.getX(i+2);a=ua(this,n,e,qr,s,o,l,c,d,p,h,u),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}else if(void 0!==s)if(Array.isArray(n))for(let i=0,r=p.length;i<r;i++){const r=p[i],u=n[r.materialIndex];for(let i=Math.max(r.start,h.start),n=Math.min(r.start+r.count,h.start+h.count);i<n;i+=3){a=ua(this,u,e,qr,s,o,l,c,d,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=r.materialIndex,t.push(a))}}else{for(let i=Math.max(0,h.start),r=Math.min(s.count,h.start+h.count);i<r;i+=3){a=ua(this,n,e,qr,s,o,l,c,d,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}}else if(i.isGeometry){const r=Array.isArray(n),s=i.vertices,o=i.faces;let l;const c=i.faceVertexUvs[0];c.length>0&&(l=c);for(let i=0,c=o.length;i<c;i++){const c=o[i],d=r?n[c.materialIndex]:n;if(void 0===d)continue;const p=s[c.a],h=s[c.b],u=s[c.c];if(a=ha(this,d,e,qr,p,h,u,ca),a){if(l&&l[i]){const e=l[i];sa.copy(e[0]),oa.copy(e[1]),la.copy(e[2]),a.uv=pr.getUV(ca,p,h,u,sa,oa,la,new Ni)}a.face=c,a.faceIndex=i,t.push(a)}}}}});class fa extends Yr{constructor(e=1,t=1,i=1,n=1,r=1,a=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};const s=this;n=Math.floor(n),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],d=[];let p=0,h=0;function u(e,t,i,n,r,a,u,f,m,g,y){const v=a/m,w=u/g,b=a/2,x=u/2,S=f/2,M=m+1,T=g+1;let _=0,O=0;const C=new Xi;for(let a=0;a<T;a++){const s=a*w-x;for(let o=0;o<M;o++){const p=o*v-b;C[e]=p*n,C[t]=s*r,C[i]=S,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[i]=f>0?1:-1,c.push(C.x,C.y,C.z),d.push(o/m),d.push(1-a/g),_+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const i=p+t+M*e,n=p+t+M*(e+1),r=p+(t+1)+M*(e+1),a=p+(t+1)+M*e;o.push(i,n,a),o.push(n,r,a),O+=6}s.addGroup(h,O,y),h+=O,p+=_}u("z","y","x",-1,-1,i,t,e,a,r,0),u("z","y","x",1,-1,i,t,-e,a,r,1),u("x","z","y",1,1,e,i,t,n,a,2),u("x","z","y",1,-1,e,i,-t,n,a,3),u("x","y","z",1,-1,e,t,i,n,r,4),u("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new Pr(l,3)),this.setAttribute("normal",new Pr(c,3)),this.setAttribute("uv",new Pr(d,2))}}function ma(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}function ga(e){const t={};for(let i=0;i<e.length;i++){const n=ma(e[i]);for(const e in n)t[e]=n[e]}return t}const ya={clone:ma,merge:ga};function va(e){xr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function wa(){Xn.call(this),this.type="Camera",this.matrixWorldInverse=new _n,this.projectionMatrix=new _n,this.projectionMatrixInverse=new _n}function ba(e=50,t=1,i=.1,n=2e3){wa.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}va.prototype=Object.create(xr.prototype),va.prototype.constructor=va,va.prototype.isShaderMaterial=!0,va.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ma(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},va.prototype.toJSON=function(e){const t=xr.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const e in this.extensions)!0===this.extensions[e]&&(i[e]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},wa.prototype=Object.assign(Object.create(Xn.prototype),{constructor:wa,isCamera:!0,copy:function(e,t){return Xn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Xi),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Xn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){Xn.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),ba.prototype=Object.assign(Object.create(wa.prototype),{constructor:ba,isPerspectiveCamera:!0,copy:function(e,t){return wa.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ji.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*ji.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ji.RAD2DEG*Math.atan(Math.tan(.5*ji.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*ji.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/e,t-=a.offsetY*i/s,n*=a.width/e,i*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=Xn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function xa(e,t,i){if(Xn.call(this),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const n=new ba(90,1,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new Xi(1,0,0)),this.add(n);const r=new ba(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Xi(-1,0,0)),this.add(r);const a=new ba(90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Xi(0,1,0)),this.add(a);const s=new ba(90,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Xi(0,-1,0)),this.add(s);const o=new ba(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Xi(0,0,1)),this.add(o);const l=new ba(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Xi(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const c=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,n),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=p,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(d),e.xr.enabled=c}}function Sa(e,t,i,n,r,a,s,o,l,c){e=void 0!==e?e:[],t=void 0!==t?t:ae,s=void 0!==s?s:ze,Wi.call(this,e,t,i,n,r,a,s,o,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}function Ma(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),Yi.call(this,e,e,t),t=t||{},this.texture=new Sa(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}function Ta(e,t,i,n,r,a,s,o,l,c,d,p){Wi.call(this,null,a,s,o,l,c,n,r,d,p),this.image={data:e||null,width:t||1,height:i||1},this.magFilter=void 0!==l?l:fe,this.minFilter=void 0!==c?c:fe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}xa.prototype=Object.create(Xn.prototype),xa.prototype.constructor=xa,Sa.prototype=Object.create(Wi.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isCubeTexture=!0,Object.defineProperty(Sa.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Ma.prototype=Object.create(Yi.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isWebGLCubeRenderTarget=!0,Ma.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=je,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},n=new fa(5,5,5),r=new va({name:"CubemapFromEquirect",uniforms:ma(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:m,blending:w});r.uniforms.tEquirect.value=t;const a=new pa(n,r),s=t.minFilter;t.minFilter===Se&&(t.minFilter=we);return new xa(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this},Ma.prototype.clear=function(e,t,i,n){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,i,n);e.setRenderTarget(r)},Ta.prototype=Object.create(Wi.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isDataTexture=!0;const _a=new gn,Oa=new Xi;class Ca{constructor(e,t,i,n,r,a){this.planes=[void 0!==e?e:new er,void 0!==t?t:new er,void 0!==i?i:new er,void 0!==n?n:new er,void 0!==r?r:new er,void 0!==a?a:new er]}set(e,t,i,n,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],d=i[7],p=i[8],h=i[9],u=i[10],f=i[11],m=i[12],g=i[13],y=i[14],v=i[15];return t[0].setComponents(s-n,d-o,f-p,v-m).normalize(),t[1].setComponents(s+n,d+o,f+p,v+m).normalize(),t[2].setComponents(s+r,d+l,f+h,v+g).normalize(),t[3].setComponents(s-r,d-l,f-h,v-g).normalize(),t[4].setComponents(s-a,d-c,f-u,v-y).normalize(),t[5].setComponents(s+a,d+c,f+u,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),_a.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_a)}intersectsSprite(e){return _a.center.set(0,0,0),_a.radius=.7071067811865476,_a.applyMatrix4(e.matrixWorld),this.intersectsSphere(_a)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(i)<n)return!1}return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(Oa.x=n.normal.x>0?e.max.x:e.min.x,Oa.y=n.normal.y>0?e.max.y:e.min.y,Oa.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(Oa)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}}function Ea(){let e=null,t=!1,i=null,n=null;function r(t,a){i(t,a),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function Aa(e,t){const i=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const i=n.get(t);i&&(e.deleteBuffer(i.buffer),n.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=n.get(t);void 0===a?n.set(t,function(t,n){const r=t.array,a=t.usage,s=e.createBuffer();e.bindBuffer(n,s),e.bufferData(n,r,a),t.onUploadCallback();let o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t.isFloat16BufferAttribute?i?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(!function(t,n,r){const a=n.array,s=n.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(i?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(a.buffer,t,r),a.version=t.version)}}}class Ra extends Yr{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,a=t/2,s=Math.floor(i),o=Math.floor(n),l=s+1,c=o+1,d=e/s,p=t/o,h=[],u=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*p-a;for(let i=0;i<l;i++){const n=i*d-r;u.push(n,-t,0),f.push(0,0,1),m.push(i/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const i=t+l*e,n=t+l*(e+1),r=t+1+l*(e+1),a=t+1+l*e;h.push(i,n,a),h.push(n,r,a)}this.setIndex(h),this.setAttribute("position",new Pr(u,3)),this.setAttribute("normal",new Pr(f,3)),this.setAttribute("uv",new Pr(m,2))}}const ka={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},La={common:{diffuse:{value:new vr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Fi},uv2Transform:{value:new Fi},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ni(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Fi}},sprite:{diffuse:{value:new vr(15658734)},opacity:{value:1},center:{value:new Ni(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Fi}}},Ia={basic:{uniforms:ga([La.common,La.specularmap,La.envmap,La.aomap,La.lightmap,La.fog]),vertexShader:ka.meshbasic_vert,fragmentShader:ka.meshbasic_frag},lambert:{uniforms:ga([La.common,La.specularmap,La.envmap,La.aomap,La.lightmap,La.emissivemap,La.fog,La.lights,{emissive:{value:new vr(0)}}]),vertexShader:ka.meshlambert_vert,fragmentShader:ka.meshlambert_frag},phong:{uniforms:ga([La.common,La.specularmap,La.envmap,La.aomap,La.lightmap,La.emissivemap,La.bumpmap,La.normalmap,La.displacementmap,La.fog,La.lights,{emissive:{value:new vr(0)},specular:{value:new vr(1118481)},shininess:{value:30}}]),vertexShader:ka.meshphong_vert,fragmentShader:ka.meshphong_frag},standard:{uniforms:ga([La.common,La.envmap,La.aomap,La.lightmap,La.emissivemap,La.bumpmap,La.normalmap,La.displacementmap,La.roughnessmap,La.metalnessmap,La.fog,La.lights,{emissive:{value:new vr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ka.meshphysical_vert,fragmentShader:ka.meshphysical_frag},toon:{uniforms:ga([La.common,La.aomap,La.lightmap,La.emissivemap,La.bumpmap,La.normalmap,La.displacementmap,La.gradientmap,La.fog,La.lights,{emissive:{value:new vr(0)}}]),vertexShader:ka.meshtoon_vert,fragmentShader:ka.meshtoon_frag},matcap:{uniforms:ga([La.common,La.bumpmap,La.normalmap,La.displacementmap,La.fog,{matcap:{value:null}}]),vertexShader:ka.meshmatcap_vert,fragmentShader:ka.meshmatcap_frag},points:{uniforms:ga([La.points,La.fog]),vertexShader:ka.points_vert,fragmentShader:ka.points_frag},dashed:{uniforms:ga([La.common,La.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ka.linedashed_vert,fragmentShader:ka.linedashed_frag},depth:{uniforms:ga([La.common,La.displacementmap]),vertexShader:ka.depth_vert,fragmentShader:ka.depth_frag},normal:{uniforms:ga([La.common,La.bumpmap,La.normalmap,La.displacementmap,{opacity:{value:1}}]),vertexShader:ka.normal_vert,fragmentShader:ka.normal_frag},sprite:{uniforms:ga([La.sprite,La.fog]),vertexShader:ka.sprite_vert,fragmentShader:ka.sprite_frag},background:{uniforms:{uvTransform:{value:new Fi},t2D:{value:null}},vertexShader:ka.background_vert,fragmentShader:ka.background_frag},cube:{uniforms:ga([La.envmap,{opacity:{value:1}}]),vertexShader:ka.cube_vert,fragmentShader:ka.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ka.equirect_vert,fragmentShader:ka.equirect_frag},distanceRGBA:{uniforms:ga([La.common,La.displacementmap,{referencePosition:{value:new Xi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ka.distanceRGBA_vert,fragmentShader:ka.distanceRGBA_frag},shadow:{uniforms:ga([La.lights,La.fog,{color:{value:new vr(0)},opacity:{value:1}}]),vertexShader:ka.shadow_vert,fragmentShader:ka.shadow_frag}};function Pa(e,t,i,n,r){const a=new vr(0);let s,o,l=0,c=null,d=0,p=null;function h(e,t){i.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),l=t,h(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,h(a,l)},render:function(i,r,u,g){let y=!0===r.isScene?r.background:null;y&&y.isTexture&&(y=t.get(y));const v=e.xr,w=v.getSession&&v.getSession();w&&"additive"===w.environmentBlendMode&&(y=null),null===y?h(a,l):y&&y.isColor&&(h(y,1),g=!0),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.mapping===ce)?(void 0===o&&(o=new pa(new fa(1,1,1),new va({name:"BackgroundCubeMaterial",uniforms:ma(Ia.cube.uniforms),vertexShader:Ia.cube.vertexShader,fragmentShader:Ia.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o)),y.isWebGLCubeRenderTarget&&(y=y.texture),o.material.uniforms.envMap.value=y,o.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y._needsFlipEnvMap?-1:1,c===y&&d===y.version&&p===e.toneMapping||(o.material.needsUpdate=!0,c=y,d=y.version,p=e.toneMapping),i.unshift(o,o.geometry,o.material,0,0,null)):y&&y.isTexture&&(void 0===s&&(s=new pa(new Ra(2,2),new va({name:"BackgroundMaterial",uniforms:ma(Ia.background.uniforms),vertexShader:Ia.background.vertexShader,fragmentShader:Ia.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(s)),s.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),s.material.uniforms.uvTransform.value.copy(y.matrix),c===y&&d===y.version&&p===e.toneMapping||(s.material.needsUpdate=!0,c=y,d=y.version,p=e.toneMapping),i.unshift(s,s.geometry,s.material,0,0,null))}}}function Da(e,t,i,n){const r=e.getParameter(34921),a=n.isWebGL2?null:t.get("OES_vertex_array_object"),s=n.isWebGL2||null!==a,o={},l=h(null);let c=l;function d(t){return n.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function p(t){return n.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){const t=[],i=[],n=[];for(let e=0;e<r;e++)t[e]=0,i[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function u(){const e=c.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function f(e){m(e,0)}function m(i,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[i]=1,0===s[i]&&(e.enableVertexAttribArray(i),s[i]=1),o[i]!==r){(n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),o[i]=r}}function g(){const t=c.newAttributes,i=c.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function y(t,i,r,a,s,o){!0!==n.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,i,r,a,s,o):e.vertexAttribIPointer(t,i,r,s,o)}function v(){w(),c!==l&&(c=l,d(c.object))}function w(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,p,v,w){let b=!1;if(s){const t=function(t,i,r){const s=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let d=c[s];void 0===d&&(d=h(n.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=d);return d}(v,p,l);c!==t&&(c=t,d(c.object)),b=function(e,t){const i=c.attributes,n=e.attributes;let r=0;for(const e in n){const t=i[e],a=n[e];if(void 0===t)return!0;if(t.attribute!==a)return!0;if(t.data!==a.data)return!0;r++}return c.attributesNum!==r||c.index!==t}(v,w),b&&function(e,t){const i={},n=e.attributes;let r=0;for(const e in n){const t=n[e],a={};a.attribute=t,t.data&&(a.data=t.data),i[e]=a,r++}c.attributes=i,c.attributesNum=r,c.index=t}(v,w)}else{const e=!0===l.wireframe;c.geometry===v.id&&c.program===p.id&&c.wireframe===e||(c.geometry=v.id,c.program=p.id,c.wireframe=e,b=!0)}!0===r.isInstancedMesh&&(b=!0),null!==w&&i.update(w,34963),b&&(!function(r,a,s,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;u();const l=o.attributes,c=s.getAttributes(),d=a.defaultAttributeValues;for(const t in c){const n=c[t];if(n>=0){const a=l[t];if(void 0!==a){const t=a.normalized,r=a.itemSize,s=i.get(a);if(void 0===s)continue;const l=s.buffer,c=s.type,d=s.bytesPerElement;if(a.isInterleavedBufferAttribute){const i=a.data,s=i.stride,p=a.offset;i&&i.isInstancedInterleavedBuffer?(m(n,i.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)):f(n),e.bindBuffer(34962,l),y(n,r,c,t,s*d,p*d)}else a.isInstancedBufferAttribute?(m(n,a.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)):f(n),e.bindBuffer(34962,l),y(n,r,c,t,0,0)}else if("instanceMatrix"===t){const t=i.get(r.instanceMatrix);if(void 0===t)continue;const a=t.buffer,s=t.type;m(n+0,1),m(n+1,1),m(n+2,1),m(n+3,1),e.bindBuffer(34962,a),e.vertexAttribPointer(n+0,4,s,!1,64,0),e.vertexAttribPointer(n+1,4,s,!1,64,16),e.vertexAttribPointer(n+2,4,s,!1,64,32),e.vertexAttribPointer(n+3,4,s,!1,64,48)}else if("instanceColor"===t){const t=i.get(r.instanceColor);if(void 0===t)continue;const a=t.buffer,s=t.type;m(n,1),e.bindBuffer(34962,a),e.vertexAttribPointer(n,3,s,!1,12,0)}else if(void 0!==d){const i=d[t];if(void 0!==i)switch(i.length){case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:e.vertexAttrib1fv(n,i)}}}}g()}(r,l,p,v),null!==w&&e.bindBuffer(34963,i.get(w).buffer))},reset:v,resetDefaultState:w,dispose:function(){v();for(const e in o){const t=o[e];for(const e in t){const i=t[e];for(const e in i)p(i[e].object),delete i[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const i=t[e];for(const e in i)p(i[e].object),delete i[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const i=o[t];if(void 0===i[e.id])continue;const n=i[e.id];for(const e in n)p(n[e].object),delete n[e];delete i[e.id]}},initAttributes:u,enableAttribute:f,disableUnusedAttributes:g}}function Ba(e,t,i,n){const r=n.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,n){e.drawArrays(a,t,n),i.update(n,a,1)},this.renderInstances=function(n,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,n,s,o),i.update(s,a,o)}}function za(e,t,i){let n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==i.precision?i.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=!0===i.logarithmicDepthBuffer,c=e.getParameter(34930),d=e.getParameter(35660),p=e.getParameter(3379),h=e.getParameter(34076),u=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=d>0,v=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==n)return n;const i=t.get("EXT_texture_filter_anisotropic");return n=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:y&&v,maxSamples:a?e.getParameter(36183):0}}function ja(e){const t=this;let i=null,n=0,r=!1,a=!1;const s=new er,o=new Fi,l={value:null,needsUpdate:!1};function c(){l.value!==i&&(l.value=i,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(e,i,n,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=n+4*a,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,i=n;t!==a;++t,i+=4)s.copy(e[t]).applyMatrix4(r,o),s.normal.toArray(c,i),c[i+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const s=0!==e.length||t||0!==n||r;return r=t,i=d(e,a,0),n=e.length,s},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,s,o){const p=t.clippingPlanes,h=t.clipIntersection,u=t.clipShadows,f=e.get(t);if(!r||null===p||0===p.length||a&&!u)a?d(null):c();else{const e=a?0:n,t=4*e;let r=f.clippingState||null;l.value=r,r=d(p,s,t,o);for(let e=0;e!==t;++e)r[e]=i[e];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Na(e){let t=new WeakMap;function i(e,t){return t===oe?e.mapping=ae:t===le&&(e.mapping=se),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(a===oe||a===le){if(t.has(r)){return i(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const s=e.getRenderList(),o=e.getRenderTarget(),l=e.getRenderState(),c=new Ma(a.height/2);return c.fromEquirectangularTexture(e,r),t.set(r,c),e.setRenderTarget(o),e.setRenderList(s),e.setRenderState(l),r.addEventListener("dispose",n),i(c.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}function Fa(e){const t={};return{has:function(i){if(void 0!==t[i])return null!==t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,null!==n},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function Ha(e,t,i,n){const r=new WeakMap,a=new WeakMap;function s(e){const o=e.target,l=r.get(o);null!==l.index&&t.remove(l.index);for(const e in l.attributes)t.remove(l.attributes[e]);o.removeEventListener("dispose",s),r.delete(o);const c=a.get(l);c&&(t.remove(c),a.delete(l)),n.releaseStatesOfGeometry(l),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){const i=[],n=e.index,r=e.attributes.position;let s=0;if(null!==n){const e=n.array;s=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],r=e[t+1],a=e[t+2];i.push(n,r,r,a,a,n)}}else{const e=r.array;s=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}const o=new(zr(i)>65535?Lr:Rr)(i,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){let n=r.get(t);return n||(t.addEventListener("dispose",s),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Yr).setFromObject(e)),n=t._bufferGeometry),r.set(t,n),i.memory.geometries++,n)},update:function(e){const i=e.attributes;for(const e in i)t.update(i[e],34962);const n=e.morphAttributes;for(const e in n){const i=n[e];for(let e=0,n=i.length;e<n;e++)t.update(i[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return a.get(e)}}}function Ga(e,t,i,n){const r=n.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(a,n,s,t*o),i.update(n,a,1)},this.renderInstances=function(n,l,c){if(0===c)return;let d,p;if(r)d=e,p="drawElementsInstanced";else if(d=t.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",null===d)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[p](a,l,s,n*o,c),i.update(l,a,c)}}function Ua(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,i,n){switch(t.calls++,i){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Wa(e,t){return e[0]-t[0]}function Va(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ka(e){const t={},i=new Float32Array(8),n=[];for(let e=0;e<8;e++)n[e]=[e,0];return{update:function(r,a,s,o){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let d=t[a.id];if(void 0===d){d=[];for(let e=0;e<c;e++)d[e]=[e,0];t[a.id]=d}for(let e=0;e<c;e++){const t=d[e];t[0]=e,t[1]=l[e]}d.sort(Va);for(let e=0;e<8;e++)e<c&&d[e][1]?(n[e][0]=d[e][0],n[e][1]=d[e][1]):(n[e][0]=Number.MAX_SAFE_INTEGER,n[e][1]=0);n.sort(Wa);const p=s.morphTargets&&a.morphAttributes.position,h=s.morphNormals&&a.morphAttributes.normal;let u=0;for(let e=0;e<8;e++){const t=n[e],r=t[0],s=t[1];r!==Number.MAX_SAFE_INTEGER&&s?(p&&a.getAttribute("morphTarget"+e)!==p[r]&&a.setAttribute("morphTarget"+e,p[r]),h&&a.getAttribute("morphNormal"+e)!==h[r]&&a.setAttribute("morphNormal"+e,h[r]),i[e]=s,u+=s):(p&&!0===a.hasAttribute("morphTarget"+e)&&a.deleteAttribute("morphTarget"+e),h&&!0===a.hasAttribute("morphNormal"+e)&&a.deleteAttribute("morphNormal"+e),i[e]=0)}const f=a.morphTargetsRelative?1:1-u;o.getUniforms().setValue(e,"morphTargetBaseInfluence",f),o.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function Ya(e,t,i,n){let r=new WeakMap;return{update:function(e){const a=n.render.frame,s=e.geometry,o=t.get(e,s);return r.get(o)!==a&&(s.isGeometry&&o.updateFromObject(e),t.update(o),r.set(o,a)),e.isInstancedMesh&&(i.update(e.instanceMatrix,34962),null!==e.instanceColor&&i.update(e.instanceColor,34962)),o},dispose:function(){r=new WeakMap}}}function Za(e=null,t=1,i=1,n=1){Wi.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.magFilter=fe,this.minFilter=fe,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function qa(e=null,t=1,i=1,n=1){Wi.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.magFilter=fe,this.minFilter=fe,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ia.physical={uniforms:ga([Ia.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ni(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new vr(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ka.meshphysical_vert,fragmentShader:ka.meshphysical_frag},Za.prototype=Object.create(Wi.prototype),Za.prototype.constructor=Za,Za.prototype.isDataTexture2DArray=!0,qa.prototype=Object.create(Wi.prototype),qa.prototype.constructor=qa,qa.prototype.isDataTexture3D=!0;const Xa=new Wi,Ja=new Za,$a=new qa,Qa=new Sa,es=[],ts=[],is=new Float32Array(16),ns=new Float32Array(9),rs=new Float32Array(4);function as(e,t,i){const n=e[0];if(n<=0||n>0)return e;const r=t*i;let a=es[r];if(void 0===a&&(a=new Float32Array(r),es[r]=a),0!==t){n.toArray(a,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(a,r)}return a}function ss(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function os(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function ls(e,t){let i=ts[t];void 0===i&&(i=new Int32Array(t),ts[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function cs(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function ds(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ss(i,t))return;e.uniform2fv(this.addr,t),os(i,t)}}function ps(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(ss(i,t))return;e.uniform3fv(this.addr,t),os(i,t)}}function hs(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ss(i,t))return;e.uniform4fv(this.addr,t),os(i,t)}}function us(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(ss(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),os(i,t)}else{if(ss(i,n))return;rs.set(n),e.uniformMatrix2fv(this.addr,!1,rs),os(i,n)}}function fs(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(ss(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),os(i,t)}else{if(ss(i,n))return;ns.set(n),e.uniformMatrix3fv(this.addr,!1,ns),os(i,n)}}function ms(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(ss(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),os(i,t)}else{if(ss(i,n))return;is.set(n),e.uniformMatrix4fv(this.addr,!1,is),os(i,n)}}function gs(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(t||Xa,r)}function ys(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||Ja,r)}function vs(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||$a,r)}function ws(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(t||Qa,r)}function bs(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function xs(e,t){const i=this.cache;ss(i,t)||(e.uniform2iv(this.addr,t),os(i,t))}function Ss(e,t){const i=this.cache;ss(i,t)||(e.uniform3iv(this.addr,t),os(i,t))}function Ms(e,t){const i=this.cache;ss(i,t)||(e.uniform4iv(this.addr,t),os(i,t))}function Ts(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function _s(e,t){e.uniform1fv(this.addr,t)}function Os(e,t){e.uniform1iv(this.addr,t)}function Cs(e,t){e.uniform2iv(this.addr,t)}function Es(e,t){e.uniform3iv(this.addr,t)}function As(e,t){e.uniform4iv(this.addr,t)}function Rs(e,t){const i=as(t,this.size,2);e.uniform2fv(this.addr,i)}function ks(e,t){const i=as(t,this.size,3);e.uniform3fv(this.addr,i)}function Ls(e,t){const i=as(t,this.size,4);e.uniform4fv(this.addr,i)}function Is(e,t){const i=as(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Ps(e,t){const i=as(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Ds(e,t){const i=as(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function Bs(e,t,i){const n=t.length,r=ls(i,n);e.uniform1iv(this.addr,r);for(let e=0;e!==n;++e)i.safeSetTexture2D(t[e]||Xa,r[e])}function zs(e,t,i){const n=t.length,r=ls(i,n);e.uniform1iv(this.addr,r);for(let e=0;e!==n;++e)i.safeSetTextureCube(t[e]||Qa,r[e])}function js(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return cs;case 35664:return ds;case 35665:return ps;case 35666:return hs;case 35674:return us;case 35675:return fs;case 35676:return ms;case 5124:case 35670:return bs;case 35667:case 35671:return xs;case 35668:case 35672:return Ss;case 35669:case 35673:return Ms;case 5125:return Ts;case 35678:case 36198:case 36298:case 36306:case 35682:return gs;case 35679:case 36299:case 36307:return vs;case 35680:case 36300:case 36308:case 36293:return ws;case 36289:case 36303:case 36311:case 36292:return ys}}(t.type)}function Ns(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return _s;case 35664:return Rs;case 35665:return ks;case 35666:return Ls;case 35674:return Is;case 35675:return Ps;case 35676:return Ds;case 5124:case 35670:return Os;case 35667:case 35671:return Cs;case 35668:case 35672:return Es;case 35669:case 35673:return As;case 35678:case 36198:case 36298:case 36306:case 35682:return Bs;case 35680:case 36300:case 36308:case 36293:return zs}}(t.type)}function Fs(e){this.id=e,this.seq=[],this.map={}}Ns.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),os(t,e)},Fs.prototype.setValue=function(e,t,i){const n=this.seq;for(let r=0,a=n.length;r!==a;++r){const a=n[r];a.setValue(e,t[a.id],i)}};const Hs=/([\w\d_]+)(\])?(\[|\.)?/g;function Gs(e,t){e.seq.push(t),e.map[t.id]=t}function Us(e,t,i){const n=e.name,r=n.length;for(Hs.lastIndex=0;;){const a=Hs.exec(n),s=Hs.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){Gs(i,void 0===c?new js(o,e,t):new Ns(o,e,t));break}{let e=i.map[o];void 0===e&&(e=new Fs(o),Gs(i,e)),i=e}}}function Ws(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);Us(i,e.getUniformLocation(t,i.name),this)}}function Vs(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}Ws.prototype.setValue=function(e,t,i,n){const r=this.map[t];void 0!==r&&r.setValue(e,i,n)},Ws.prototype.setOptional=function(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)},Ws.upload=function(e,t,i,n){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},Ws.seqWithValue=function(e,t){const i=[];for(let n=0,r=e.length;n!==r;++n){const r=e[n];r.id in t&&i.push(r)}return i};let Ks=0;function Ys(e){switch(e){case Xt:return["Linear","( value )"];case Jt:return["sRGB","( value )"];case Qt:return["RGBE","( value )"];case ti:return["RGBM","( value, 7.0 )"];case ii:return["RGBM","( value, 16.0 )"];case ni:return["RGBD","( value, 256.0 )"];case $t:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ei:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Zs(e,t,i){const n=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(n&&""===r)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+r+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function qs(e,t){const i=Ys(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Xs(e,t){const i=Ys(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Js(e,t){let i;switch(t){case Q:i="Linear";break;case ee:i="Reinhard";break;case te:i="OptimizedCineon";break;case ie:i="ACESFilmic";break;case ne:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function $s(e){return""!==e}function Qs(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function eo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const to=/^[ \t]*#include +<([\w\d./]+)>/gm;function io(e){return e.replace(to,no)}function no(e,t){const i=ka[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return io(i)}const ro=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ao=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function so(e){return e.replace(ao,lo).replace(ro,oo)}function oo(e,t,i,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),lo(e,t,i,n)}function lo(e,t,i,n){let r="";for(let e=parseInt(t);e<parseInt(i);e++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function co(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function po(e,t,i,n){const r=e.getContext(),a=i.defines;let s=i.vertexShader,o=i.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===p?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===u&&(t="SHADOWMAP_TYPE_VSM"),t}(i),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ae:case se:t="ENVMAP_TYPE_CUBE";break;case ce:case de:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),d=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case se:case de:t="ENVMAP_MODE_REFRACTION"}return t}(i),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case q:t="ENVMAP_BLENDING_MULTIPLY";break;case X:t="ENVMAP_BLENDING_MIX";break;case J:t="ENVMAP_BLENDING_ADD"}return t}(i),m=e.gammaFactor>0?e.gammaFactor:1,g=i.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($s).join("\n")}(i),y=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(a),v=r.createProgram();let w,b,x=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(w=[y].filter($s).join("\n"),w.length>0&&(w+="\n"),b=[g,y].filter($s).join("\n"),b.length>0&&(b+="\n")):(w=[co(i),"#define SHADER_NAME "+i.shaderName,y,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($s).join("\n"),b=[g,co(i),"#define SHADER_NAME "+i.shaderName,y,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+d:"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==$?"#define TONE_MAPPING":"",i.toneMapping!==$?ka.tonemapping_pars_fragment:"",i.toneMapping!==$?Js("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",ka.encodings_pars_fragment,i.map?qs("mapTexelToLinear",i.mapEncoding):"",i.matcap?qs("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?qs("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?qs("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?qs("lightMapTexelToLinear",i.lightMapEncoding):"",Xs("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter($s).join("\n")),s=io(s),s=Qs(s,i),s=eo(s,i),o=io(o),o=Qs(o,i),o=eo(o,i),s=so(s),o=so(o),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(x="#version 300 es\n",w=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,b=["#define varying in",i.glslVersion===Pi?"":"out highp vec4 pc_fragColor;",i.glslVersion===Pi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const S=x+b+o,M=Vs(r,35633,x+w+s),T=Vs(r,35632,S);if(r.attachShader(v,M),r.attachShader(v,T),void 0!==i.index0AttributeName?r.bindAttribLocation(v,0,i.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(v).trim(),t=r.getShaderInfoLog(M).trim(),i=r.getShaderInfoLog(T).trim();let n=!0,a=!0;if(!1===r.getProgramParameter(v,35714)){n=!1;const t=Zs(r,M,"vertex"),i=Zs(r,T,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(v,35715),"gl.getProgramInfoLog",e,t,i)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==i||(a=!1);a&&(this.diagnostics={runnable:n,programLog:e,vertexShader:{log:t,prefix:w},fragmentShader:{log:i,prefix:b}})}let _,O;return r.deleteShader(M),r.deleteShader(T),this.getUniforms=function(){return void 0===_&&(_=new Ws(r,v)),_},this.getAttributes=function(){return void 0===O&&(O=function(e,t){const i={},n=e.getProgramParameter(t,35721);for(let r=0;r<n;r++){const n=e.getActiveAttrib(t,r).name;i[n]=e.getAttribLocation(t,n)}return i}(r,v)),O},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=Ks++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=T,this}function ho(e,t,i,n,r,a){const s=[],o=n.isWebGL2,l=n.logarithmicDepthBuffer,c=n.floatVertexTextures,d=n.maxVertexUniforms,p=n.vertexTextures;let h=n.precision;const u={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function y(e){let t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Xt,t}return{getParameters:function(r,s,f,v,w){const b=v.fog,x=r.isMeshStandardMaterial?v.environment:null,S=t.get(r.envMap||x),M=u[r.type],T=w.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=d,i=Math.floor((e-20)/4),n=Math.min(i,t.length);return n<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+n+"."),0):n}}(w):0;let _,O;if(null!==r.precision&&(h=n.getMaxPrecision(r.precision),h!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",h,"instead.")),M){const e=Ia[M];_=e.vertexShader,O=e.fragmentShader}else _=r.vertexShader,O=r.fragmentShader;const C=e.getRenderTarget();return{isWebGL2:o,shaderID:M,shaderName:r.type,vertexShader:_,fragmentShader:O,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:h,instancing:!0===w.isInstancedMesh,instancingColor:!0===w.isInstancedMesh&&null!==w.instanceColor,supportsVertexTextures:p,outputEncoding:null!==C?y(C.texture):e.outputEncoding,map:!!r.map,mapEncoding:y(r.map),matcap:!!r.matcap,matcapEncoding:y(r.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:y(S),envMapCubeUV:!!S&&(S.mapping===ce||S.mapping===de),lightMap:!!r.lightMap,lightMapEncoding:y(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:y(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===oi,tangentSpaceNormalMap:r.normalMapType===si,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!b,useFog:r.fog,fogExp2:b&&b.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&T>0,maxBones:T,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:$,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===g,flipSided:r.side===m,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||i.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<f.length;e++)i.push(t[f[e]]);i.push(e.outputEncoding),i.push(e.gammaFactor)}return i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=u[e.type];let i;if(t){const e=Ia[t];i=ya.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new po(e,i,t,r),s.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function uo(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function fo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function mo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function go(e){const t=[];let i=0;const n=[],r=[],a={id:-1};function s(n,r,s,o,l,c){let d=t[i];const p=e.get(s);return void 0===d?(d={id:n.id,object:n,geometry:r,material:s,program:p.program||a,groupOrder:o,renderOrder:n.renderOrder,z:l,group:c},t[i]=d):(d.id=n.id,d.object=n,d.geometry=r,d.material=s,d.program=p.program||a,d.groupOrder=o,d.renderOrder=n.renderOrder,d.z=l,d.group=c),i++,d}return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(e,t,i,a,o,l){const c=s(e,t,i,a,o,l);(!0===i.transparent?r:n).push(c)},unshift:function(e,t,i,a,o,l){const c=s(e,t,i,a,o,l);(!0===i.transparent?r:n).unshift(c)},finish:function(){for(let e=i,n=t.length;e<n;e++){const i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||fo),r.length>1&&r.sort(t||mo)}}}function yo(e){let t=new WeakMap;return{get:function(i,n){const r=t.get(i);let a;return void 0===r?(a=new go(e),t.set(i,new WeakMap),t.get(i).set(n,a)):(a=r.get(n),void 0===a&&(a=new go(e),r.set(n,a))),a},dispose:function(){t=new WeakMap}}}function vo(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Xi,color:new vr};break;case"SpotLight":i={position:new Xi,direction:new Xi,color:new vr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Xi,color:new vr,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Xi,skyColor:new vr,groundColor:new vr};break;case"RectAreaLight":i={color:new vr,position:new Xi,halfWidth:new Xi,halfHeight:new Xi}}return e[t.id]=i,i}}}let wo=0;function bo(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function xo(e,t){const i=new vo,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ni};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ni,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new Xi);const a=new Xi,s=new _n,o=new _n;return{setup:function(l,c,d){let p=0,h=0,u=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let f=0,m=0,g=0,y=0,v=0,w=0,b=0,x=0;const S=d.matrixWorldInverse;l.sort(bo);for(let e=0,t=l.length;e<t;e++){const t=l[e],c=t.color,d=t.intensity,M=t.distance,T=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)p+=c.r*d,h+=c.g*d,u+=c.b*d;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],d);else if(t.isDirectionalLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(S),t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,r.directionalShadow[f]=i,r.directionalShadowMap[f]=T,r.directionalShadowMatrix[f]=t.shadow.matrix,w++}r.directional[f]=e,f++}else if(t.isSpotLight){const e=i.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(S),e.color.copy(c).multiplyScalar(d),e.distance=M,e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(S),e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,r.spotShadow[g]=i,r.spotShadowMap[g]=T,r.spotShadowMatrix[g]=t.shadow.matrix,x++}r.spot[g]=e,g++}else if(t.isRectAreaLight){const e=i.get(t);e.color.copy(c).multiplyScalar(d),e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(S),o.identity(),s.copy(t.matrixWorld),s.premultiply(S),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),r.rectArea[y]=e,y++}else if(t.isPointLight){const e=i.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(S),e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,r.pointShadow[m]=i,r.pointShadowMap[m]=T,r.pointShadowMatrix[m]=t.shadow.matrix,b++}r.point[m]=e,m++}else if(t.isHemisphereLight){const e=i.get(t);e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(S),e.direction.normalize(),e.skyColor.copy(t.color).multiplyScalar(d),e.groundColor.copy(t.groundColor).multiplyScalar(d),r.hemi[v]=e,v++}}y>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=La.LTC_FLOAT_1,r.rectAreaLTC2=La.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=La.LTC_HALF_1,r.rectAreaLTC2=La.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=h,r.ambient[2]=u;const M=r.hash;M.directionalLength===f&&M.pointLength===m&&M.spotLength===g&&M.rectAreaLength===y&&M.hemiLength===v&&M.numDirectionalShadows===w&&M.numPointShadows===b&&M.numSpotShadows===x||(r.directional.length=f,r.spot.length=g,r.rectArea.length=y,r.point.length=m,r.hemi.length=v,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=b,r.spotShadowMatrix.length=x,M.directionalLength=f,M.pointLength=m,M.spotLength=g,M.rectAreaLength=y,M.hemiLength=v,M.numDirectionalShadows=w,M.numPointShadows=b,M.numSpotShadows=x,r.version=wo++)},state:r}}function So(e,t){const i=new xo(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(e){i.setup(n,r,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Mo(e,t){let i=new WeakMap;return{get:function(n,r){let a;return!1===i.has(n)?(a=new So(e,t),i.set(n,new WeakMap),i.get(n).set(r,a)):!1===i.get(n).has(r)?(a=new So(e,t),i.get(n).set(r,a)):a=i.get(n).get(r),a},dispose:function(){i=new WeakMap}}}function To(e){xr.call(this),this.type="MeshDepthMaterial",this.depthPacking=ri,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function _o(e){xr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Xi,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}To.prototype=Object.create(xr.prototype),To.prototype.constructor=To,To.prototype.isMeshDepthMaterial=!0,To.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},_o.prototype=Object.create(xr.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshDistanceMaterial=!0,_o.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Oo(e,t,i){let n=new Ca;const r=new Ni,a=new Ni,s=new Ki,o=[],l=[],c={},d={0:m,1:f,2:g},h=new va({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ni},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=h.clone();y.defines.HORIZONAL_PASS=1;const v=new Yr;v.setAttribute("position",new _r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new pa(v,h),x=this;function S(i,n){const r=t.update(b);h.uniforms.shadow_pass.value=i.map.texture,h.uniforms.resolution.value=i.mapSize,h.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,r,h,b,null),y.uniforms.shadow_pass.value=i.mapPass.texture,y.uniforms.resolution.value=i.mapSize,y.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,r,y,b,null)}function M(e,t,i){const n=e<<0|t<<1|i<<2;let r=o[n];return void 0===r&&(r=new To({depthPacking:ai,morphTargets:e,skinning:t}),o[n]=r),r}function T(e,t,i){const n=e<<0|t<<1|i<<2;let r=l[n];return void 0===r&&(r=new _o({morphTargets:e,skinning:t}),l[n]=r),r}function _(t,i,n,r,a,s,o){let l=null,p=M,h=t.customDepthMaterial;if(!0===r.isPointLight&&(p=T,h=t.customDistanceMaterial),void 0===h){let e=!1;!0===n.morphTargets&&(e=i.morphAttributes&&i.morphAttributes.position&&i.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));l=p(e,r,!0===t.isInstancedMesh)}else l=h;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){const e=l.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=l.clone(),i[t]=r),l=r}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=o===u?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=s),l}function O(i,r,a,s,o){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&o===u)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);const n=t.update(i),r=i.material;if(Array.isArray(r)){const t=n.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],d=r[c.materialIndex];if(d&&d.visible){const t=_(i,n,d,s,a.near,a.far,o);e.renderBufferDirect(a,null,n,t,i,c)}}}else if(r.visible){const t=_(i,n,r,s,a.near,a.far,o);e.renderBufferDirect(a,null,n,t,i,null)}}const l=i.children;for(let e=0,t=l.length;e<t;e++)O(l[e],r,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(t,o,l){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),h=e.state;h.setBlending(w),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let c=0,d=t.length;c<d;c++){const d=t[c],p=d.shadow;if(void 0===p){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===p.autoUpdate&&!1===p.needsUpdate)continue;r.copy(p.mapSize);const f=p.getFrameExtents();if(r.multiply(f),a.copy(p.mapSize),(r.x>i||r.y>i)&&(r.x>i&&(a.x=Math.floor(i/f.x),r.x=a.x*f.x,p.mapSize.x=a.x),r.y>i&&(a.y=Math.floor(i/f.y),r.y=a.y*f.y,p.mapSize.y=a.y)),null===p.map&&!p.isPointLightShadow&&this.type===u){const e={minFilter:we,magFilter:we,format:je};p.map=new Yi(r.x,r.y,e),p.map.texture.name=d.name+".shadowMap",p.mapPass=new Yi(r.x,r.y,e),p.camera.updateProjectionMatrix()}if(null===p.map){const e={minFilter:fe,magFilter:fe,format:je};p.map=new Yi(r.x,r.y,e),p.map.texture.name=d.name+".shadowMap",p.camera.updateProjectionMatrix()}e.setRenderTarget(p.map),e.clear();const m=p.getViewportCount();for(let e=0;e<m;e++){const t=p.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),p.updateMatrices(d,e),n=p.getFrustum(),O(o,l,p.camera,d,this.type)}p.isPointLightShadow||this.type!==u||S(p,l),p.needsUpdate=!1}x.needsUpdate=!1,e.setRenderTarget(c,d,p)}}function Co(e,t,i){const n=i.isWebGL2;const r=new function(){let t=!1;const i=new Ki;let n=null;const r=new Ki(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,a,s,o){!0===o&&(t*=s,n*=s,a*=s),i.set(t,n,a,s),!1===r.equals(i)&&(e.clearColor(t,n,a,s),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,i=null,n=null,r=null;return{setTest:function(e){e?fe(2929):me(2929)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case H:e.depthFunc(512);break;case G:e.depthFunc(519);break;case U:e.depthFunc(513);break;case W:e.depthFunc(515);break;case V:e.depthFunc(514);break;case K:e.depthFunc(518);break;case Y:e.depthFunc(516);break;case Z:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},c=new function(){let t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?fe(2960):me(2960))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,s){n===t&&r===i&&a===s||(e.stencilFunc(t,i,s),n=t,r=i,a=s)},setOp:function(t,i,n){s===t&&o===i&&l===n||(e.stencilOp(t,i,n),s=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null}}};let d={},p=null,h=null,u=null,f=null,y=null,v=null,q=null,X=null,J=null,$=!1,Q=null,ee=null,te=null,ie=null,ne=null;const re=e.getParameter(35661);let ae=!1,se=0;const oe=e.getParameter(7938);-1!==oe.indexOf("WebGL")?(se=parseFloat(/^WebGL\ ([0-9])/.exec(oe)[1]),ae=se>=1):-1!==oe.indexOf("OpenGL ES")&&(se=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(oe)[1]),ae=se>=2);let le=null,ce={};const de=new Ki,pe=new Ki;function he(t,i,n){const r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<n;t++)e.texImage2D(i+t,0,6408,1,1,0,6408,5121,r);return a}const ue={};function fe(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function me(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}ue[3553]=he(3553,3553,1),ue[34067]=he(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),c.setClear(0),fe(2929),a.setFunc(W),we(!1),be(o),fe(2884),ve(w);const ge={[_]:32774,[O]:32778,[C]:32779};if(n)ge[E]=32775,ge[A]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(ge[E]=e.MIN_EXT,ge[A]=e.MAX_EXT)}const ye={[R]:0,[k]:1,[L]:768,[P]:770,[F]:776,[j]:774,[B]:772,[I]:769,[D]:771,[N]:775,[z]:773};function ve(t,i,n,r,a,s,o,l){if(t!==w){if(h||(fe(3042),h=!0),t===T)a=a||i,s=s||n,o=o||r,i===f&&a===q||(e.blendEquationSeparate(ge[i],ge[a]),f=i,q=a),n===y&&r===v&&s===X&&o===J||(e.blendFuncSeparate(ye[n],ye[r],ye[s],ye[o]),y=n,v=r,X=s,J=o),u=t,$=null;else if(t!==u||l!==$){if(f===_&&q===_||(e.blendEquation(32774),f=_,q=_),l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case S:e.blendFuncSeparate(0,0,769,771);break;case M:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case S:e.blendFunc(0,769);break;case M:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,v=null,X=null,J=null,u=t,$=l}}else h&&(me(3042),h=!1)}function we(t){Q!==t&&(t?e.frontFace(2304):e.frontFace(2305),Q=t)}function be(t){t!==s?(fe(2884),t!==ee&&(t===o?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):me(2884),ee=t}function xe(t,i,n){t?(fe(32823),ie===i&&ne===n||(e.polygonOffset(i,n),ie=i,ne=n)):me(32823)}function Se(t){void 0===t&&(t=33984+re-1),le!==t&&(e.activeTexture(t),le=t)}return{buffers:{color:r,depth:a,stencil:c},enable:fe,disable:me,useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:ve,setMaterial:function(e,t){e.side===g?me(2884):fe(2884);let i=e.side===m;t&&(i=!i),we(i),e.blending===b&&!1===e.transparent?ve(w):ve(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);const n=e.stencilWrite;c.setTest(n),n&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),xe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:we,setCullFace:be,setLineWidth:function(t){t!==te&&(ae&&e.lineWidth(t),te=t)},setPolygonOffset:xe,setScissorTest:function(e){e?fe(3089):me(3089)},activeTexture:Se,bindTexture:function(t,i){null===le&&Se();let n=ce[le];void 0===n&&(n={type:void 0,texture:void 0},ce[le]=n),n.type===t&&n.texture===i||(e.bindTexture(t,i||ue[t]),n.type=t,n.texture=i)},unbindTexture:function(){const t=ce[le];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===de.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),de.copy(t))},viewport:function(t){!1===pe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),pe.copy(t))},reset:function(){d={},le=null,ce={},p=null,h=null,u=null,f=null,y=null,v=null,q=null,X=null,J=null,$=!1,Q=null,ee=null,te=null,ie=null,ne=null,r.reset(),a.reset(),c.reset()}}}function Eo(e,t,i,n,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,p=r.maxSamples,h=new WeakMap;let u,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,i,n){let r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const n=t?ji.floorPowerOfTwo:Math.floor,a=n(r*e.width),s=n(r*e.height);void 0===u&&(u=m(a,s));const o=i?m(a,s):u;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return ji.isPowerOfTwo(e.width)&&ji.isPowerOfTwo(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==fe&&e.minFilter!==we}function w(t,i,r,a){e.generateMipmap(t);n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function b(i,n,r){if(!1===o)return n;if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let a=n;return 6403===n&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===n&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===n&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function x(e){return e===fe||e===me||e===ye?9728:9729}function S(t){const i=t.target;i.removeEventListener("dispose",S),function(t){const i=n.get(t);if(void 0===i.__webglInit)return;e.deleteTexture(i.__webglTexture),n.remove(t)}(i),i.isVideoTexture&&h.delete(i),s.memory.textures--}function M(t){const i=t.target;i.removeEventListener("dispose",M),function(t){const i=n.get(t),r=n.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);n.remove(t.texture),n.remove(t)}(i),s.memory.textures--}let T=0;function _(e,t){const r=n.get(e);if(e.isVideoTexture&&function(e){const t=s.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void k(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(33984+t),i.bindTexture(3553,r.__webglTexture)}function O(t,r){const s=n.get(t);t.version>0&&s.__version!==t.version?function(t,n,r){if(6!==n.image.length)return;R(t,n),i.activeTexture(33984+r),i.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,n.flipY);const s=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),l=n.image[0]&&n.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=s||l?l?n.image[e].image:n.image[e]:g(n.image[e],!1,!0,c);const p=d[0],h=y(p)||o,u=a.convert(n.format),f=a.convert(n.type),m=b(n.internalFormat,u,f);let x;if(A(34067,n,h),s){for(let e=0;e<6;e++){x=d[e].mipmaps;for(let t=0;t<x.length;t++){const r=x[t];n.format!==je&&n.format!==ze?null!==u?i.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+e,t,m,r.width,r.height,0,u,f,r.data)}}t.__maxMipLevel=x.length-1}else{x=n.mipmaps;for(let e=0;e<6;e++)if(l){i.texImage2D(34069+e,0,m,d[e].width,d[e].height,0,u,f,d[e].data);for(let t=0;t<x.length;t++){const n=x[t].image[e].image;i.texImage2D(34069+e,t+1,m,n.width,n.height,0,u,f,n.data)}}else{i.texImage2D(34069+e,0,m,u,f,d[e]);for(let t=0;t<x.length;t++){const n=x[t];i.texImage2D(34069+e,t+1,m,u,f,n.image[e])}}t.__maxMipLevel=x.length}v(n,h)&&w(34067,n,p.width,p.height);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(s,t,r):(i.activeTexture(33984+r),i.bindTexture(34067,s.__webglTexture))}const C={[pe]:10497,[he]:33071,[ue]:33648},E={[fe]:9728,[me]:9984,[ye]:9986,[we]:9729,[be]:9985,[Se]:9987};function A(i,a,s){s?(e.texParameteri(i,10242,C[a.wrapS]),e.texParameteri(i,10243,C[a.wrapT]),32879!==i&&35866!==i||e.texParameteri(i,32882,C[a.wrapR]),e.texParameteri(i,10240,E[a.magFilter]),e.texParameteri(i,10241,E[a.minFilter])):(e.texParameteri(i,10242,33071),e.texParameteri(i,10243,33071),32879!==i&&35866!==i||e.texParameteri(i,32882,33071),a.wrapS===he&&a.wrapT===he||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,10240,x(a.magFilter)),e.texParameteri(i,10241,x(a.minFilter)),a.minFilter!==fe&&a.minFilter!==we&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=t.get("EXT_texture_filter_anisotropic");if(l){if(a.type===Re&&null===t.get("OES_texture_float_linear"))return;if(a.type===ke&&null===(o||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,i){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),s.memory.textures++)}function k(t,n,r){let s=3553;n.isDataTexture2DArray&&(s=35866),n.isDataTexture3D&&(s=32879),R(t,n),i.activeTexture(33984+r),i.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);const l=function(e){return!o&&(e.wrapS!==he||e.wrapT!==he||e.minFilter!==fe&&e.minFilter!==we)}(n)&&!1===y(n.image),c=g(n.image,l,!1,d),p=y(c)||o,h=a.convert(n.format);let u,f=a.convert(n.type),m=b(n.internalFormat,h,f);A(s,n,p);const x=n.mipmaps;if(n.isDepthTexture)m=6402,o?m=n.type===Re?36012:n.type===Ae?33190:n.type===De?35056:33189:n.type===Re&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===Ge&&6402===m&&n.type!==Ce&&n.type!==Ae&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Ce,f=a.convert(n.type)),n.format===Ue&&6402===m&&(m=34041,n.type!==De&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=De,f=a.convert(n.type))),i.texImage2D(3553,0,m,c.width,c.height,0,h,f,null);else if(n.isDataTexture)if(x.length>0&&p){for(let e=0,t=x.length;e<t;e++)u=x[e],i.texImage2D(3553,e,m,u.width,u.height,0,h,f,u.data);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else i.texImage2D(3553,0,m,c.width,c.height,0,h,f,c.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)u=x[e],n.format!==je&&n.format!==ze?null!==h?i.compressedTexImage2D(3553,e,m,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,e,m,u.width,u.height,0,h,f,u.data);t.__maxMipLevel=x.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,m,c.width,c.height,c.depth,0,h,f,c.data),t.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,m,c.width,c.height,c.depth,0,h,f,c.data),t.__maxMipLevel=0;else if(x.length>0&&p){for(let e=0,t=x.length;e<t;e++)u=x[e],i.texImage2D(3553,e,m,h,f,u);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else i.texImage2D(3553,0,m,h,f,c),t.__maxMipLevel=0;v(n,p)&&w(s,n,c.width,c.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function L(t,r,s,o){const l=a.convert(r.texture.format),c=a.convert(r.texture.type),d=b(r.texture.internalFormat,l,c);i.texImage2D(o,0,d,r.width,r.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,o,n.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function I(t,i,n){if(e.bindRenderbuffer(36161,t),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n){const t=i.depthTexture;t&&t.isDepthTexture&&(t.type===Re?r=36012:t.type===Ae&&(r=33190));const n=D(i);e.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else e.renderbufferStorage(36161,r,i.width,i.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(i.depthBuffer&&i.stencilBuffer){if(n){const t=D(i);e.renderbufferStorageMultisample(36161,t,35056,i.width,i.height)}else e.renderbufferStorage(36161,34041,i.width,i.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=a.convert(i.texture.format),r=a.convert(i.texture.type),s=b(i.texture.internalFormat,t,r);if(n){const t=D(i);e.renderbufferStorageMultisample(36161,t,s,i.width,i.height)}else e.renderbufferStorage(36161,s,i.width,i.height)}e.bindRenderbuffer(36161,null)}function P(t){const i=n.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),_(i.depthTexture,0);const r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Ge)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(i.depthTexture.format!==Ue)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(i.__webglFramebuffer,t)}else if(r){i.__webglDepthbuffer=[];for(let n=0;n<6;n++)e.bindFramebuffer(36160,i.__webglFramebuffer[n]),i.__webglDepthbuffer[n]=e.createRenderbuffer(),I(i.__webglDepthbuffer[n],t,!1)}else e.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function D(e){return o&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0}let B=!1,z=!1;this.allocateTextureUnit=function(){const e=T;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=_,this.setTexture2DArray=function(e,t){const r=n.get(e);e.version>0&&r.__version!==e.version?k(r,e,t):(i.activeTexture(33984+t),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=n.get(e);e.version>0&&r.__version!==e.version?k(r,e,t):(i.activeTexture(33984+t),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=O,this.setupRenderTarget=function(t){const r=n.get(t),l=n.get(t.texture);t.addEventListener("dispose",M),l.__webglTexture=e.createTexture(),s.memory.textures++;const c=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultisampleRenderTarget,p=y(t)||o;if(!o||t.texture.format!==ze||t.texture.type!==Re&&t.texture.type!==ke||(t.texture.format=je,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){r.__webglFramebuffer=[];for(let t=0;t<6;t++)r.__webglFramebuffer[t]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),d)if(o){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const i=a.convert(t.texture.format),n=a.convert(t.texture.type),s=b(t.texture.internalFormat,i,n),o=D(t);e.renderbufferStorageMultisample(36161,o,s,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),I(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){i.bindTexture(34067,l.__webglTexture),A(34067,t.texture,p);for(let e=0;e<6;e++)L(r.__webglFramebuffer[e],t,36064,34069+e);v(t.texture,p)&&w(34067,t.texture,t.width,t.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),A(3553,t.texture,p),L(r.__webglFramebuffer,t,36064,3553),v(t.texture,p)&&w(3553,t.texture,t.width,t.height),i.bindTexture(3553,null);t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(v(t,y(e)||o)){const r=e.isWebGLCubeRenderTarget?34067:3553,a=n.get(t).__webglTexture;i.bindTexture(r,a),w(r,t,e.width,e.height),i.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(o){const i=n.get(t);e.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,i.__webglFramebuffer);const r=t.width,a=t.height;let s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,r,a,0,0,r,a,s,9728),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),_(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),O(e,t)}}function Ao(e,t,i){const n=i.isWebGL2;return{convert:function(e){let i;if(e===Te)return 5121;if(e===Le)return 32819;if(e===Ie)return 32820;if(e===Pe)return 33635;if(e===_e)return 5120;if(e===Oe)return 5122;if(e===Ce)return 5123;if(e===Ee)return 5124;if(e===Ae)return 5125;if(e===Re)return 5126;if(e===ke)return n?5131:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(e===Be)return 6406;if(e===ze)return 6407;if(e===je)return 6408;if(e===Ne)return 6409;if(e===Fe)return 6410;if(e===Ge)return 6402;if(e===Ue)return 34041;if(e===We)return 6403;if(e===Ve)return 36244;if(e===Ke)return 33319;if(e===Ye)return 33320;if(e===Ze)return 36248;if(e===qe)return 36249;if(e===Xe||e===Je||e===$e||e===Qe){if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(e===Xe)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Je)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===$e)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Qe)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===it||e===nt){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(e===et)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===it)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===nt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===rt)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===at||e===st)&&(i=t.get("WEBGL_compressed_texture_etc"),null!==i)){if(e===at)return i.COMPRESSED_RGB8_ETC2;if(e===st)return i.COMPRESSED_RGBA8_ETC2_EAC}return e===ot||e===lt||e===ct||e===dt||e===pt||e===ht||e===ut||e===ft||e===mt||e===gt||e===yt||e===vt||e===wt||e===bt||e===St||e===Mt||e===Tt||e===_t||e===Ot||e===Ct||e===Et||e===At||e===Rt||e===kt||e===Lt||e===It||e===Pt||e===Dt?(i=t.get("WEBGL_compressed_texture_astc"),null!==i?e:null):e===xt?(i=t.get("EXT_texture_compression_bptc"),null!==i?e:null):e===De?n?34042:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ro(e=[]){ba.call(this),this.cameras=e}function ko(){Xn.call(this),this.type="Group"}function Lo(){this._targetRay=null,this._grip=null,this._hand=null}function Io(e,t){const i=this;let n=null,r=1,a=null,s="local-floor",o=null;const l=[],c=new Map,d=new ba;d.layers.enable(1),d.viewport=new Ki;const p=new ba;p.layers.enable(2),p.viewport=new Ki;const h=[d,p],u=new Ro;u.layers.enable(1),u.layers.enable(2);let f=null,m=null;function g(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function y(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),T.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function v(e){a=e,T.setContext(n),T.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}function w(e){const t=n.inputSources;for(let e=0;e<l.length;e++)c.set(t[e],l[e]);for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=c.get(i);n&&(n.dispatchEvent({type:"disconnected",data:i}),c.delete(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t],n=c.get(i);n&&n.dispatchEvent({type:"connected",data:i})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new Lo,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new Lo,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new Lo,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return n},this.setSession=function(e){if(n=e,null!==n){n.addEventListener("select",g),n.addEventListener("selectstart",g),n.addEventListener("selectend",g),n.addEventListener("squeeze",g),n.addEventListener("squeezestart",g),n.addEventListener("squeezeend",g),n.addEventListener("end",y);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const i={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r},a=new XRWebGLLayer(n,t,i);n.updateRenderState({baseLayer:a}),n.requestReferenceSpace(s).then(v),n.addEventListener("inputsourceschange",w)}};const b=new Xi,x=new Xi;function S(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.getCamera=function(e){u.near=p.near=d.near=e.near,u.far=p.far=d.far=e.far,f===u.near&&m===u.far||(n.updateRenderState({depthNear:u.near,depthFar:u.far}),f=u.near,m=u.far);const t=e.parent,i=u.cameras;S(u,t);for(let e=0;e<i.length;e++)S(i[e],t);e.matrixWorld.copy(u.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);return 2===i.length?function(e,t,i){b.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(i.matrixWorld);const n=b.distanceTo(x),r=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],d=(r[8]-1)/r[0],p=(a[8]+1)/a[0],h=s*d,u=s*p,f=n/(-d+p),m=f*-d;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,y=o+f,v=h-m,w=u+(n-m),S=l*o/y*g,M=c*o/y*g;e.projectionMatrix.makePerspective(v,w,S,M,g,y)}(u,d,p):u.projectionMatrix.copy(d.projectionMatrix),u};let M=null;const T=new Ea;T.setAnimationLoop((function(t,i){if(o=i.getViewerPose(a),null!==o){const t=o.views,i=n.renderState.baseLayer;e.setFramebuffer(i.framebuffer);let r=!1;t.length!==u.cameras.length&&(u.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const n=t[e],a=i.getViewport(n),s=h[e];s.matrix.fromArray(n.transform.matrix),s.projectionMatrix.fromArray(n.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===e&&u.matrix.copy(s.matrix),!0===r&&u.cameras.push(s)}}const r=n.inputSources;for(let e=0;e<l.length;e++){const t=l[e],n=r[e];t.update(n,i,a)}M&&M(t,i)})),this.setAnimationLoop=function(e){M=e},this.dispose=function(){}}function Po(e){function t(t,i){t.opacity.value=i.opacity,i.color&&t.diffuse.value.copy(i.color),i.emissive&&t.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(t.map.value=i.map),i.alphaMap&&(t.alphaMap.value=i.alphaMap),i.specularMap&&(t.specularMap.value=i.specularMap);const n=e.get(i).envMap;if(n){t.envMap.value=n,t.flipEnvMap.value=n.isCubeTexture&&n._needsFlipEnvMap?-1:1,t.reflectivity.value=i.reflectivity,t.refractionRatio.value=i.refractionRatio;const r=e.get(n).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,a;i.lightMap&&(t.lightMap.value=i.lightMap,t.lightMapIntensity.value=i.lightMapIntensity),i.aoMap&&(t.aoMap.value=i.aoMap,t.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap&&(r=i.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function i(t,i){t.roughness.value=i.roughness,t.metalness.value=i.metalness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,i.side===m&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),i.side===m&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);e.get(i).envMap&&(t.envMapIntensity.value=i.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,r,a){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n),n.isMeshPhysicalMaterial?function(e,t){i(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,n):i(e,n)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,i,n){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*n,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,n,r,a):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function Do(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),i=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",d=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let p=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Xt,this.physicallyCorrectLights=!1,this.toneMapping=$,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const u=this;let f=!1,m=null,g=0,y=0,v=null,w=null,b=-1,x=null,S=null;const M=new Ki,T=new Ki;let _=null,O=t.width,C=t.height,E=1,A=null,R=null;const k=new Ki(0,0,O,C),L=new Ki(0,0,O,C);let I=!1;const P=new Ca;let D=!1,B=!1;const z=new _n,j=new Xi,N={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return null===v?E:1}let H,G,U,W,V,K,Y,Z,q,X,J,Q,ee,te,ie,ne,re,ae,se,oe,le,ce=i;function de(e,i){for(let n=0;n<e.length;n++){const r=e[n],a=t.getContext(r,i);if(null!==a)return a}return null}try{const e={alpha:n,depth:r,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",me,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===u.isWebGL1Renderer&&t.shift(),ce=de(t,e),null===ce)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function pe(){H=new Fa(ce),G=new za(ce,H,e),!1===G.isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),oe=new Ao(ce,H,G),U=new Co(ce,H,G),U.scissor(T.copy(L).multiplyScalar(E).floor()),U.viewport(M.copy(k).multiplyScalar(E).floor()),W=new Ua(ce),V=new uo,K=new Eo(ce,H,U,V,G,oe,W),Y=new Na(u),Z=new Aa(ce,G),le=new Da(ce,H,Z,G),q=new Ha(ce,Z,W,le),X=new Ya(ce,q,Z,W),re=new Ka(ce),ie=new ja(V),J=new ho(u,Y,H,G,le,ie),Q=new Po(V),ee=new yo(V),te=new Mo(H,G),ne=new Pa(u,Y,U,X,o),ae=new Ba(ce,H,W,G),se=new Ga(ce,H,W,G),W.programs=J.programs,u.capabilities=G,u.extensions=H,u.properties=V,u.renderLists=ee,u.state=U,u.info=W}pe();const he=new Io(u,ce);this.xr=he;const ue=new Oo(u,X,G.maxTextureSize);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,pe()}function ge(e){const t=e.target;t.removeEventListener("dispose",ge),function(e){ye(e),V.remove(e)}(t)}function ye(e){const t=V.get(e).program;void 0!==t&&J.releaseProgram(t)}this.shadowMap=ue,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(O,C,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Ni),e.set(O,C)},this.setSize=function(e,i,n){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=e,C=i,t.width=Math.floor(e*E),t.height=Math.floor(i*E),!1!==n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Ni),e.set(O*E,C*E).floor()},this.setDrawingBufferSize=function(e,i,n){O=e,C=i,E=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Ki),e.copy(M)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,i,n){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,i,n),U.viewport(M.copy(k).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,i,n){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,i,n),U.scissor(T.copy(L).multiplyScalar(E).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(e){U.setScissorTest(I=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(){return ne.getClearColor()},this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)},this.getClearAlpha=function(){return ne.getClearAlpha()},this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)},this.clear=function(e,t,i){let n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===i||i)&&(n|=1024),ce.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),V.dispose(),Y.dispose(),X.dispose(),le.dispose(),he.dispose(),we.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();const i=V.get(e);e.hasPositions&&!i.position&&(i.position=ce.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=ce.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=ce.createBuffer()),e.hasColors&&!i.color&&(i.color=ce.createBuffer());const n=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,i.position),ce.bufferData(34962,e.positionArray,35048),le.enableAttribute(n.position),ce.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,i.normal),ce.bufferData(34962,e.normalArray,35048),le.enableAttribute(n.normal),ce.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,i.uv),ce.bufferData(34962,e.uvArray,35048),le.enableAttribute(n.uv),ce.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,i.color),ce.bufferData(34962,e.colorArray,35048),le.enableAttribute(n.color),ce.vertexAttribPointer(n.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,a){null===t&&(t=N);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=_e(e,t,n,r);U.setMaterial(n,s);let l=i.index;const c=i.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let d,p=1;!0===n.wireframe&&(l=q.getWireframeAttribute(i),p=2),(n.morphTargets||n.morphNormals)&&re.update(r,i,n,o),le.setup(r,n,o,i,l);let h=ae;null!==l&&(d=Z.get(l),h=se,h.setIndex(d));const u=null!==l?l.count:c.count,f=i.drawRange.start*p,m=i.drawRange.count*p,g=null!==a?a.start*p:0,y=null!==a?a.count*p:1/0,v=Math.max(f,g),w=Math.min(u,f+m,g+y)-1,b=Math.max(0,w-v+1);if(0!==b){if(r.isMesh)!0===n.wireframe?(U.setLineWidth(n.wireframeLinewidth*F()),h.setMode(1)):h.setMode(4);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),U.setLineWidth(e*F()),r.isLineSegments?h.setMode(1):r.isLineLoop?h.setMode(2):h.setMode(3)}else r.isPoints?h.setMode(0):r.isSprite&&h.setMode(4);if(r.isInstancedMesh)h.renderInstances(v,b,r.count);else if(i.isInstancedBufferGeometry){const e=Math.min(i.instanceCount,i._maxInstanceCount);h.renderInstances(v,b,e)}else h.render(v,b)}},this.compile=function(e,t){h=te.get(e,t),h.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t);const i=new WeakMap;e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];!1===i.has(a)&&(Me(a,e,t),i.set(a))}else!1===i.has(n)&&(Me(n,e,t),i.set(n))}))};let ve=null;const we=new Ea;function be(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||P.intersectsSprite(e)){n&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=X.update(e),r=e.material;r.visible&&p.push(e,t,r,i,j.z,null)}}else if(e.isImmediateRenderObject)n&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),p.push(e,null,e.material,i,j.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||P.intersectsObject(e))){n&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=X.update(e),r=e.material;if(Array.isArray(r)){const n=t.groups;for(let a=0,s=n.length;a<s;a++){const s=n[a],o=r[s.materialIndex];o&&o.visible&&p.push(e,t,o,i,j.z,s)}}else r.visible&&p.push(e,t,r,i,j.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)be(r[e],t,i,n)}function xe(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===n?a.material:n,c=a.group;if(i.isArrayCamera){S=i;const e=i.cameras;for(let i=0,n=e.length;i<n;i++){const n=e[i];s.layers.test(n.layers)&&(U.viewport(M.copy(n.viewport)),h.setupLights(n),Se(s,t,n,o,l,c))}}else S=null,Se(s,t,i,o,l,c)}}function Se(e,t,i,n,r,a){if(e.onBeforeRender(u,t,i,n,r,a),h=te.get(t,S||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const n=_e(i,t,r,e);U.setMaterial(r),le.reset(),function(e,t){e.render((function(e){u.renderBufferImmediate(e,t)}))}(e,n)}else u.renderBufferDirect(i,t,n,r,e,a);e.onAfterRender(u,t,i,n,r,a),h=te.get(t,S||i)}function Me(e,t,i){!0!==t.isScene&&(t=N);const n=V.get(e),r=h.state.lights,a=h.state.shadowsArray,s=r.state.version,o=J.getParameters(e,r.state,a,t,i),l=J.getProgramCacheKey(o);let c=n.program,d=!0;if(void 0===c)e.addEventListener("dispose",ge);else if(c.cacheKey!==l)ye(e);else if(n.lightsStateVersion!==s)d=!1;else{if(void 0!==o.shaderID){const i=e.isMeshStandardMaterial?t.environment:null;return void(n.envMap=Y.get(e.envMap||i))}d=!1}d&&(o.uniforms=J.getUniforms(e),e.onBeforeCompile(o,u),c=J.acquireProgram(o,l),n.program=c,n.uniforms=o.uniforms,n.outputEncoding=o.outputEncoding);const p=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=ie.numPlanes,n.numIntersection=ie.numIntersection,p.clippingPlanes=ie.uniform),n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=Y.get(e.envMap||n.environment),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=s,n.needsLights&&(p.ambientLightColor.value=r.state.ambient,p.lightProbe.value=r.state.probe,p.directionalLights.value=r.state.directional,p.directionalLightShadows.value=r.state.directionalShadow,p.spotLights.value=r.state.spot,p.spotLightShadows.value=r.state.spotShadow,p.rectAreaLights.value=r.state.rectArea,p.ltc_1.value=r.state.rectAreaLTC1,p.ltc_2.value=r.state.rectAreaLTC2,p.pointLights.value=r.state.point,p.pointLightShadows.value=r.state.pointShadow,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);const f=n.program.getUniforms(),m=Ws.seqWithValue(f.seq,p);n.uniformsList=m}function _e(e,t,i,n){!0!==t.isScene&&(t=N),K.resetTextureUnits();const r=t.fog,a=i.isMeshStandardMaterial?t.environment:null,s=null===v?u.outputEncoding:v.texture.encoding,o=Y.get(i.envMap||a),l=V.get(i),c=h.state.lights;if(!0===D&&(!0===B||e!==x)){const t=e===x&&i.id===b;ie.setState(i,e,t)}i.version===l.__version?i.fog&&l.fog!==r||l.environment!==a||l.needsLights&&l.lightsStateVersion!==c.state.version?Me(i,t,n):void 0===l.numClippingPlanes||l.numClippingPlanes===ie.numPlanes&&l.numIntersection===ie.numIntersection?(l.outputEncoding!==s||l.envMap!==o)&&Me(i,t,n):Me(i,t,n):(Me(i,t,n),l.__version=i.version);let d=!1,p=!1,f=!1;const m=l.program,g=m.getUniforms(),y=l.uniforms;if(U.useProgram(m.program)&&(d=!0,p=!0,f=!0),i.id!==b&&(b=i.id,p=!0),d||x!==e){if(g.setValue(ce,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&g.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,p=!0,f=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=g.map.cameraPosition;void 0!==t&&t.setValue(ce,j.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&g.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||i.skinning)&&g.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(i.skinning){g.setOptional(ce,n,"bindMatrix"),g.setOptional(ce,n,"bindMatrixInverse");const e=n.skeleton;if(e){const t=e.bones;if(G.floatVertexTextures){if(null===e.boneTexture){let i=Math.sqrt(4*t.length);i=ji.ceilPowerOfTwo(i),i=Math.max(i,4);const n=new Float32Array(i*i*4);n.set(e.boneMatrices);const r=new Ta(n,i,i,je,Re);e.boneMatrices=n,e.boneTexture=r,e.boneTextureSize=i}g.setValue(ce,"boneTexture",e.boneTexture,K),g.setValue(ce,"boneTextureSize",e.boneTextureSize)}else g.setOptional(ce,e,"boneMatrices")}}var w,S;return(p||l.receiveShadow!==n.receiveShadow)&&(l.receiveShadow=n.receiveShadow,g.setValue(ce,"receiveShadow",n.receiveShadow)),p&&(g.setValue(ce,"toneMappingExposure",u.toneMappingExposure),l.needsLights&&(S=f,(w=y).ambientLightColor.needsUpdate=S,w.lightProbe.needsUpdate=S,w.directionalLights.needsUpdate=S,w.directionalLightShadows.needsUpdate=S,w.pointLights.needsUpdate=S,w.pointLightShadows.needsUpdate=S,w.spotLights.needsUpdate=S,w.spotLightShadows.needsUpdate=S,w.rectAreaLights.needsUpdate=S,w.hemisphereLights.needsUpdate=S),r&&i.fog&&Q.refreshFogUniforms(y,r),Q.refreshMaterialUniforms(y,i,E,C),Ws.upload(ce,l.uniformsList,y,K)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Ws.upload(ce,l.uniformsList,y,K),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&g.setValue(ce,"center",n.center),g.setValue(ce,"modelViewMatrix",n.modelViewMatrix),g.setValue(ce,"normalMatrix",n.normalMatrix),g.setValue(ce,"modelMatrix",n.matrixWorld),m}we.setAnimationLoop((function(e){he.isPresenting||ve&&ve(e)})),"undefined"!=typeof window&&we.setContext(window),this.setAnimationLoop=function(e){ve=e,he.setAnimationLoop(e),null===e?we.stop():we.start()},this.render=function(e,t){let i,n;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),i=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===f)return;le.resetDefaultState(),b=-1,x=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===he.enabled&&!0===he.isPresenting&&(t=he.getCamera(t)),!0===e.isScene&&e.onBeforeRender(u,e,t,i||v),h=te.get(e,t),h.init(),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),P.setFromProjectionMatrix(z),B=this.localClippingEnabled,D=ie.init(this.clippingPlanes,B,t),p=ee.get(e,t),p.init(),be(e,t,0,u.sortObjects),p.finish(),!0===u.sortObjects&&p.sort(A,R),!0===D&&ie.beginShadows();const r=h.state.shadowsArray;ue.render(r,e,t),h.setupLights(t),!0===D&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),ne.render(p,e,t,n);const a=p.opaque,s=p.transparent;a.length>0&&xe(a,e,t),s.length>0&&xe(s,e,t),!0===e.isScene&&e.onAfterRender(u,e,t),null!==v&&(K.updateRenderTargetMipmap(v),K.updateMultisampleRenderTarget(v)),U.buffers.depth.setTest(!0),U.buffers.depth.setMask(!0),U.buffers.color.setMask(!0),U.setPolygonOffset(!1),p=null,h=null},this.setFramebuffer=function(e){m!==e&&null===v&&ce.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderList=function(){return p},this.setRenderList=function(e){p=e},this.getRenderState=function(){return h},this.setRenderState=function(e){h=e},this.getRenderTarget=function(){return v},this.setRenderTarget=function(e,t=0,i=0){v=e,g=t,y=i,e&&void 0===V.get(e).__webglFramebuffer&&K.setupRenderTarget(e);let n=m,r=!1;if(e){const i=V.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=i[t],r=!0):n=e.isWebGLMultisampleRenderTarget?V.get(e).__webglMultisampledFramebuffer:i,M.copy(e.viewport),T.copy(e.scissor),_=e.scissorTest}else M.copy(k).multiplyScalar(E).floor(),T.copy(L).multiplyScalar(E).floor(),_=I;if(w!==n&&(ce.bindFramebuffer(36160,n),w=n),U.viewport(M),U.scissor(T),U.setScissorTest(_),r){const n=V.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,n.__webglTexture,i)}},this.readRenderTargetPixels=function(e,t,i,n,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=V.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){let s=!1;o!==w&&(ce.bindFramebuffer(36160,o),s=!0);try{const o=e.texture,l=o.format,c=o.type;if(l!==je&&oe.convert(l)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Te||oe.convert(c)===ce.getParameter(35738)||c===Re&&(G.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float"))||c===ke&&(G.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&ce.readPixels(t,i,n,r,oe.convert(l),oe.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&ce.bindFramebuffer(36160,w)}}},this.copyFramebufferToTexture=function(e,t,i=0){const n=Math.pow(2,-i),r=Math.floor(t.image.width*n),a=Math.floor(t.image.height*n),s=oe.convert(t.format);K.setTexture2D(t,0),ce.copyTexImage2D(3553,i,s,e.x,e.y,r,a,0),U.unbindTexture()},this.copyTextureToTexture=function(e,t,i,n=0){const r=t.image.width,a=t.image.height,s=oe.convert(i.format),o=oe.convert(i.type);K.setTexture2D(i,0),ce.pixelStorei(37440,i.flipY),ce.pixelStorei(37441,i.premultiplyAlpha),ce.pixelStorei(3317,i.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,n,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ce.texSubImage2D(3553,n,e.x,e.y,s,o,t.image),0===n&&i.generateMipmaps&&ce.generateMipmap(3553),U.unbindTexture()},this.initTexture=function(e){K.setTexture2D(e,0),U.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Bo(e){Do.call(this,e)}Ro.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ro,isArrayCamera:!0}),ko.prototype=Object.assign(Object.create(Xn.prototype),{constructor:ko,isGroup:!0}),Object.assign(Lo.prototype,{constructor:Lo,getHandSpace:function(){if(null===this._hand&&(this._hand=new ko,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const e=new ko;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new ko,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new ko,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,i){let n=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(l&&e.hand){a=!0;for(let n=0;n<=window.XRHand.LITTLE_PHALANX_TIP;n++)if(e.hand[n]){const r=t.getJointPose(e.hand[n],i),a=l.joints[n];null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=r.radius),a.visible=null!==r;const s=l.joints[window.XRHand.INDEX_PHALANX_TIP],o=l.joints[window.XRHand.THUMB_PHALANX_TIP],c=s.position.distanceTo(o.position),d=.02,p=.005;l.inputState.pinching&&c>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&c<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==s&&(n=t.getPose(e.targetRaySpace,i),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale))),null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)));return null!==s&&(s.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}}),Object.assign(Io.prototype,Di.prototype),Bo.prototype=Object.assign(Object.create(Do.prototype),{constructor:Bo,isWebGL1Renderer:!0});class zo{constructor(e,t){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new vr(e),this.density=void 0!==t?t:25e-5}clone(){return new zo(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class jo{constructor(e,t,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new vr(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}clone(){return new jo(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class No extends Xn{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function Fo(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Ti,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ji.generateUUID()}Object.defineProperty(Fo.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Fo.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ji.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new Fo(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ji.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ho=new Xi;function Go(e,t,i,n){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}function Uo(e){xr.call(this),this.type="SpriteMaterial",this.color=new vr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Wo;Object.defineProperties(Go.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Go.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,i=this.data.count;t<i;t++)Ho.x=this.getX(t),Ho.y=this.getY(t),Ho.z=this.getZ(t),Ho.applyMatrix4(e),this.setXYZ(t,Ho.x,Ho.y,Ho.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new _r(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Go(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Uo.prototype=Object.create(xr.prototype),Uo.prototype.constructor=Uo,Uo.prototype.isSpriteMaterial=!0,Uo.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const Vo=new Xi,Ko=new Xi,Yo=new Xi,Zo=new Ni,qo=new Ni,Xo=new _n,Jo=new Xi,$o=new Xi,Qo=new Xi,el=new Ni,tl=new Ni,il=new Ni;function nl(e){if(Xn.call(this),this.type="Sprite",void 0===Wo){Wo=new Yr;const e=new Fo(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Wo.setIndex([0,1,2,0,2,3]),Wo.setAttribute("position",new Go(e,3,0,!1)),Wo.setAttribute("uv",new Go(e,2,3,!1))}this.geometry=Wo,this.material=void 0!==e?e:new Uo,this.center=new Ni(.5,.5)}function rl(e,t,i,n,r,a){Zo.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(qo.x=a*Zo.x-r*Zo.y,qo.y=r*Zo.x+a*Zo.y):qo.copy(Zo),e.copy(t),e.x+=qo.x,e.y+=qo.y,e.applyMatrix4(Xo)}nl.prototype=Object.assign(Object.create(Xn.prototype),{constructor:nl,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ko.setFromMatrixScale(this.matrixWorld),Xo.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Yo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ko.multiplyScalar(-Yo.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const a=this.center;rl(Jo.set(-.5,-.5,0),Yo,a,Ko,n,r),rl($o.set(.5,-.5,0),Yo,a,Ko,n,r),rl(Qo.set(.5,.5,0),Yo,a,Ko,n,r),el.set(0,0),tl.set(1,0),il.set(1,1);let s=e.ray.intersectTriangle(Jo,$o,Qo,!1,Vo);if(null===s&&(rl($o.set(-.5,.5,0),Yo,a,Ko,n,r),tl.set(0,1),s=e.ray.intersectTriangle(Jo,Qo,$o,!1,Vo),null===s))return;const o=e.ray.origin.distanceTo(Vo);o<e.near||o>e.far||t.push({distance:o,point:Vo.clone(),uv:pr.getUV(Vo,Jo,$o,Qo,el,tl,il,new Ni),face:null,object:this})},copy:function(e){return Xn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const al=new Xi,sl=new Xi;function ol(){Xn.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function ll(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),pa.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new _n,this.bindMatrixInverse=new _n}function cl(){Xn.call(this),this.type="Bone"}ol.prototype=Object.assign(Object.create(Xn.prototype),{constructor:ol,isLOD:!0,copy:function(e){Xn.prototype.copy.call(this,e,!1);const t=e.levels;for(let e=0,i=t.length;e<i;e++){const i=t[e];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t=0){t=Math.abs(t);const i=this.levels;let n;for(n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let i,n;for(i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object}return null},raycast:function(e,t){if(this.levels.length>0){al.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(al);this.getObjectForDistance(i).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){al.setFromMatrixPosition(e.matrixWorld),sl.setFromMatrixPosition(this.matrixWorld);const i=al.distanceTo(sl)/e.zoom;let n,r;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}},toJSON:function(e){const t=Xn.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let e=0,n=i.length;e<n;e++){const n=i[e];t.object.levels.push({object:n.object.uuid,distance:n.distance})}return t}}),ll.prototype=Object.assign(Object.create(pa.prototype),{constructor:ll,isSkinnedMesh:!0,copy:function(e){return pa.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Ki,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){pa.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new Xi,t=new Ki,i=new Ki,n=new Xi,r=new _n;return function(a,s){const o=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,a),i.fromBufferAttribute(l.attributes.skinWeight,a),e.fromBufferAttribute(l.attributes.position,a).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let a=0;a<4;a++){const l=i.getComponent(a);if(0!==l){const i=t.getComponent(a);r.multiplyMatrices(o.bones[i].matrixWorld,o.boneInverses[i]),s.addScaledVector(n.copy(e).applyMatrix4(r),l)}}return s.applyMatrix4(this.bindMatrixInverse)}}()}),cl.prototype=Object.assign(Object.create(Xn.prototype),{constructor:cl,isBone:!0});const dl=new _n,pl=new _n;function hl(e=[],t=[]){this.uuid=ji.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(hl.prototype,{init:function(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new _n)}},calculateInverses:function(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new _n;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let n=0,r=e.length;n<r;n++){const r=e[n]?e[n].matrixWorld:pl;dl.multiplyMatrices(r,t[n]),dl.toArray(i,16*n)}null!==n&&(n.needsUpdate=!0)},clone:function(){return new hl(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const n=e.bones[i];let r=t[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new cl),this.bones.push(r),this.boneInverses.push((new _n).fromArray(e.boneInverses[i]))}return this.init(),this},toJSON:function(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.bones.push(r.uuid);const a=i[n];e.boneInverses.push(a.toArray())}return e}});const ul=new _n,fl=new _n,ml=[],gl=new pa;function yl(e,t,i){pa.call(this,e,t),this.instanceMatrix=new _r(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}function vl(e){xr.call(this),this.type="LineBasicMaterial",this.color=new vr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}yl.prototype=Object.assign(Object.create(pa.prototype),{constructor:yl,isInstancedMesh:!0,copy:function(e){return pa.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const i=this.matrixWorld,n=this.count;if(gl.geometry=this.geometry,gl.material=this.material,void 0!==gl.material)for(let r=0;r<n;r++){this.getMatrixAt(r,ul),fl.multiplyMatrices(i,ul),gl.matrixWorld=fl,gl.raycast(e,ml);for(let e=0,i=ml.length;e<i;e++){const i=ml[e];i.instanceId=r,i.object=this,t.push(i)}ml.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new _r(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),vl.prototype=Object.create(xr.prototype),vl.prototype.constructor=vl,vl.prototype.isLineBasicMaterial=!0,vl.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const wl=new Xi,bl=new Xi,xl=new _n,Sl=new Tn,Ml=new gn;function Tl(e,t,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Xn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Yr,this.material=void 0!==t?t:new vl,this.updateMorphTargets()}Tl.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Tl,isLine:!0,copy:function(e){return Xn.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)wl.fromBufferAttribute(t,e-1),bl.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=wl.distanceTo(bl);e.setAttribute("lineDistance",new Pr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,i=e.lineDistances;i[0]=0;for(let e=1,n=t.length;e<n;e++)i[e]=i[e-1],i[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ml.copy(i.boundingSphere),Ml.applyMatrix4(n),Ml.radius+=r,!1===e.ray.intersectsSphere(Ml))return;xl.copy(n).invert(),Sl.copy(e.ray).applyMatrix4(xl);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,o=new Xi,l=new Xi,c=new Xi,d=new Xi,p=this.isLineSegments?2:1;if(i.isBufferGeometry){const n=i.index,r=i.attributes.position;if(null!==n){const i=n.array;for(let n=0,a=i.length-1;n<a;n+=p){const a=i[n],p=i[n+1];o.fromBufferAttribute(r,a),l.fromBufferAttribute(r,p);if(Sl.distanceSqToSegment(o,l,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(d);h<e.near||h>e.far||t.push({distance:h,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else for(let i=0,n=r.count-1;i<n;i+=p){o.fromBufferAttribute(r,i),l.fromBufferAttribute(r,i+1);if(Sl.distanceSqToSegment(o,l,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(d);n<e.near||n>e.far||t.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){const n=i.vertices,r=n.length;for(let i=0;i<r-1;i+=p){if(Sl.distanceSqToSegment(n[i],n[i+1],d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const e=t[i[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=e.length;t<i;t++){const i=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const _l=new Xi,Ol=new Xi;function Cl(e,t){Tl.call(this,e,t),this.type="LineSegments"}function El(e,t){Tl.call(this,e,t),this.type="LineLoop"}function Al(e){xr.call(this),this.type="PointsMaterial",this.color=new vr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Cl.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Cl,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)_l.fromBufferAttribute(t,e),Ol.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+_l.distanceTo(Ol);e.setAttribute("lineDistance",new Pr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,i=e.lineDistances;for(let e=0,n=t.length;e<n;e+=2)_l.copy(t[e]),Ol.copy(t[e+1]),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+_l.distanceTo(Ol)}return this}}),El.prototype=Object.assign(Object.create(Tl.prototype),{constructor:El,isLineLoop:!0}),Al.prototype=Object.create(xr.prototype),Al.prototype.constructor=Al,Al.prototype.isPointsMaterial=!0,Al.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const Rl=new _n,kl=new Tn,Ll=new gn,Il=new Xi;function Pl(e,t){Xn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Yr,this.material=void 0!==t?t:new Al,this.updateMorphTargets()}function Dl(e,t,i,n,r,a,s){const o=kl.distanceSqToPoint(e);if(o<i){const i=new Xi;kl.closestPointToPoint(e,i),i.applyMatrix4(n);const l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:t,face:null,object:s})}}function Bl(e,t,i,n,r,a,s,o,l){Wi.call(this,e,t,i,n,r,a,s,o,l),this.format=void 0!==s?s:ze,this.minFilter=void 0!==a?a:we,this.magFilter=void 0!==r?r:we,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function zl(e,t,i,n,r,a,s,o,l,c,d,p){Wi.call(this,null,a,s,o,l,c,n,r,d,p),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function jl(e,t,i,n,r,a,s,o,l){Wi.call(this,e,t,i,n,r,a,s,o,l),this.needsUpdate=!0}function Nl(e,t,i,n,r,a,s,o,l,c){if((c=void 0!==c?c:Ge)!==Ge&&c!==Ue)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Ge&&(i=Ce),void 0===i&&c===Ue&&(i=De),Wi.call(this,null,n,r,a,s,o,c,i,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:fe,this.minFilter=void 0!==o?o:fe,this.flipY=!1,this.generateMipmaps=!1}Pl.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Pl,isPoints:!0,copy:function(e){return Xn.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ll.copy(i.boundingSphere),Ll.applyMatrix4(n),Ll.radius+=r,!1===e.ray.intersectsSphere(Ll))return;Rl.copy(n).invert(),kl.copy(e.ray).applyMatrix4(Rl);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(i.isBufferGeometry){const r=i.index,a=i.attributes.position;if(null!==r){const i=r.array;for(let r=0,o=i.length;r<o;r++){const o=i[r];Il.fromBufferAttribute(a,o),Dl(Il,o,s,n,e,t,this)}}else for(let i=0,r=a.count;i<r;i++)Il.fromBufferAttribute(a,i),Dl(Il,i,s,n,e,t,this)}else{const r=i.vertices;for(let i=0,a=r.length;i<a;i++)Dl(r[i],i,s,n,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const e=t[i[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=e.length;t<i;t++){const i=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Bl.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Bl,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),zl.prototype=Object.create(Wi.prototype),zl.prototype.constructor=zl,zl.prototype.isCompressedTexture=!0,jl.prototype=Object.create(Wi.prototype),jl.prototype.constructor=jl,jl.prototype.isCanvasTexture=!0,Nl.prototype=Object.create(Wi.prototype),Nl.prototype.constructor=Nl,Nl.prototype.isDepthTexture=!0;let Fl=0;const Hl=new _n,Gl=new Xn,Ul=new Xi;function Wl(){Object.defineProperty(this,"id",{value:Fl+=2}),this.uuid=ji.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Wl.prototype=Object.assign(Object.create(Di.prototype),{constructor:Wl,isGeometry:!0,applyMatrix4:function(e){const t=(new Fi).getNormalMatrix(e);for(let t=0,i=this.vertices.length;t<i;t++){this.vertices[t].applyMatrix4(e)}for(let e=0,i=this.faces.length;e<i;e++){const i=this.faces[e];i.normal.applyMatrix3(t).normalize();for(let e=0,n=i.vertexNormals.length;e<n;e++)i.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Hl.makeRotationX(e),this.applyMatrix4(Hl),this},rotateY:function(e){return Hl.makeRotationY(e),this.applyMatrix4(Hl),this},rotateZ:function(e){return Hl.makeRotationZ(e),this.applyMatrix4(Hl),this},translate:function(e,t,i){return Hl.makeTranslation(e,t,i),this.applyMatrix4(Hl),this},scale:function(e,t,i){return Hl.makeScale(e,t,i),this.applyMatrix4(Hl),this},lookAt:function(e){return Gl.lookAt(e),Gl.updateMatrix(),this.applyMatrix4(Gl.matrix),this},fromBufferGeometry:function(e){const t=this,i=null!==e.index?e.index:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=n.position,a=n.normal,s=n.color,o=n.uv,l=n.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let e=0;e<r.count;e++)t.vertices.push((new Xi).fromBufferAttribute(r,e)),void 0!==s&&t.colors.push((new vr).fromBufferAttribute(s,e));function c(e,i,n,r){const c=void 0===s?[]:[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()],d=void 0===a?[]:[(new Xi).fromBufferAttribute(a,e),(new Xi).fromBufferAttribute(a,i),(new Xi).fromBufferAttribute(a,n)],p=new wr(e,i,n,d,c,r);t.faces.push(p),void 0!==o&&t.faceVertexUvs[0].push([(new Ni).fromBufferAttribute(o,e),(new Ni).fromBufferAttribute(o,i),(new Ni).fromBufferAttribute(o,n)]),void 0!==l&&t.faceVertexUvs[1].push([(new Ni).fromBufferAttribute(l,e),(new Ni).fromBufferAttribute(l,i),(new Ni).fromBufferAttribute(l,n)])}const d=e.groups;if(d.length>0)for(let e=0;e<d.length;e++){const t=d[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)void 0!==i?c(i.getX(e),i.getX(e+1),i.getX(e+2),t.materialIndex):c(e,e+1,e+2,t.materialIndex)}else if(void 0!==i)for(let e=0;e<i.count;e+=3)c(i.getX(e),i.getX(e+1),i.getX(e+2));else for(let e=0;e<r.count;e+=3)c(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ul).negate(),this.translate(Ul.x,Ul.y,Ul.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,n=new _n;return n.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){const e=new Xi,t=new Xi;for(let i=0,n=this.faces.length;i<n;i++){const n=this.faces[i],r=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(r,a),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e=!0){const t=new Array(this.vertices.length);for(let e=0,i=this.vertices.length;e<i;e++)t[e]=new Xi;if(e){const e=new Xi,i=new Xi;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],a=this.vertices[r.a],s=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,s),i.subVectors(a,s),e.cross(i),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,i=this.faces.length;e<i;e++){const i=this.faces[e];t[i.a].add(i.normal),t[i.b].add(i.normal),t[i.c].add(i.normal)}}for(let e=0,i=this.vertices.length;e<i;e++)t[e].normalize();for(let e=0,i=this.faces.length;e<i;e++){const i=this.faces[e],n=i.vertexNormals;3===n.length?(n[0].copy(t[i.a]),n[1].copy(t[i.b]),n[2].copy(t[i.c])):(n[0]=t[i.a].clone(),n[1]=t[i.b].clone(),n[2]=t[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],i=t.vertexNormals;3===i.length?(i[0].copy(t.normal),i[1].copy(t.normal),i[2].copy(t.normal)):(i[0]=t.normal.clone(),i[1]=t.normal.clone(),i[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,i=t.vertexNormals.length;e<i;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const e=new Wl;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,i=this.morphNormals[t].vertexNormals;for(let t=0,n=this.faces.length;t<n;t++){const t=new Xi,n={a:new Xi,b:new Xi,c:new Xi};e.push(t),i.push(n)}}const i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=i.faceNormals[e],r=i.vertexNormals[e];n.copy(t.normal),r.a.copy(t.vertexNormals[0]),r.b.copy(t.vertexNormals[1]),r.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Qi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i=0){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let n;const r=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,c=this.colors,d=e.colors;void 0!==t&&(n=(new Fi).getNormalMatrix(t));for(let e=0,i=s.length;e<i;e++){const i=s[e].clone();void 0!==t&&i.applyMatrix4(t),a.push(i)}for(let e=0,t=d.length;e<t;e++)c.push(d[e].clone());for(let e=0,t=l.length;e<t;e++){const t=l[e];let a,s;const c=t.vertexNormals,d=t.vertexColors,p=new wr(t.a+r,t.b+r,t.c+r);p.normal.copy(t.normal),void 0!==n&&p.normal.applyMatrix3(n).normalize();for(let e=0,t=c.length;e<t;e++)a=c[e].clone(),void 0!==n&&a.applyMatrix3(n).normalize(),p.vertexNormals.push(a);p.color.copy(t.color);for(let e=0,t=d.length;e<t;e++)s=d[e],p.vertexColors.push(s.clone());p.materialIndex=t.materialIndex+i,o.push(p)}for(let t=0,i=e.faceVertexUvs.length;t<i;t++){const i=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,n=i.length;e<n;e++){const n=i[e],r=[];for(let e=0,t=n.length;e<t;e++)r.push(n[e].clone());this.faceVertexUvs[t].push(r)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(e=4){const t={},i=[],n=[],r=Math.pow(10,e);for(let e=0,a=this.vertices.length;e<a;e++){const a=this.vertices[e],s=Math.round(a.x*r)+"_"+Math.round(a.y*r)+"_"+Math.round(a.z*r);void 0===t[s]?(t[s]=e,i.push(this.vertices[e]),n[e]=i.length-1):n[e]=n[t[s]]}const a=[];for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];const i=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(i[t]===i[(t+1)%3]){a.push(e);break}}for(let e=a.length-1;e>=0;e--){const t=a[e];this.faces.splice(t,1);for(let e=0,i=this.faceVertexUvs.length;e<i;e++)this.faceVertexUvs[e].splice(t,1)}const s=this.vertices.length-i.length;return this.vertices=i,s},setFromPoints:function(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){const i=e[t];this.vertices.push(new Xi(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let i=0;i<t;i++)e[i]._id=i;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const i=this.faceVertexUvs[0],n=this.faceVertexUvs[1];let r,a;i&&i.length===t&&(r=[]),n&&n.length===t&&(a=[]);for(let s=0;s<t;s++){const t=e[s]._id;r&&r.push(i[t]),a&&a.push(n[t])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}const t=[];for(let e=0;e<this.vertices.length;e++){const i=this.vertices[e];t.push(i.x,i.y,i.z)}const i=[],n=[],r={},a=[],s={},o=[],l={};for(let e=0;e<this.faces.length;e++){const t=this.faces[e],n=!0,r=!1,a=void 0!==this.faceVertexUvs[0][e],s=t.normal.length()>0,o=t.vertexNormals.length>0,l=1!==t.color.r||1!==t.color.g||1!==t.color.b,u=t.vertexColors.length>0;let f=0;if(f=c(f,0,0),f=c(f,1,n),f=c(f,2,r),f=c(f,3,a),f=c(f,4,s),f=c(f,5,o),f=c(f,6,l),f=c(f,7,u),i.push(f),i.push(t.a,t.b,t.c),i.push(t.materialIndex),a){const t=this.faceVertexUvs[0][e];i.push(h(t[0]),h(t[1]),h(t[2]))}if(s&&i.push(d(t.normal)),o){const e=t.vertexNormals;i.push(d(e[0]),d(e[1]),d(e[2]))}if(l&&i.push(p(t.color)),u){const e=t.vertexColors;i.push(p(e[0]),p(e[1]),p(e[2]))}}function c(e,t,i){return i?e|1<<t:e&~(1<<t)}function d(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=n.length/3,n.push(e.x,e.y,e.z)),r[t]}function p(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==s[t]||(s[t]=a.length,a.push(e.getHex())),s[t]}function h(e){const t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=o.length/2,o.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=n,a.length>0&&(e.data.colors=a),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e},clone:function(){return(new Wl).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let e=0,i=t.length;e<i;e++)this.vertices.push(t[e].clone());const i=e.colors;for(let e=0,t=i.length;e<t;e++)this.colors.push(i[e].clone());const n=e.faces;for(let e=0,t=n.length;e<t;e++)this.faces.push(n[e].clone());for(let t=0,i=e.faceVertexUvs.length;t<i;t++){const i=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,n=i.length;e<n;e++){const n=i[e],r=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];r.push(t.clone())}this.faceVertexUvs[t].push(r)}}const r=e.morphTargets;for(let e=0,t=r.length;e<t;e++){const t={};if(t.name=r[e].name,void 0!==r[e].vertices){t.vertices=[];for(let i=0,n=r[e].vertices.length;i<n;i++)t.vertices.push(r[e].vertices[i].clone())}if(void 0!==r[e].normals){t.normals=[];for(let i=0,n=r[e].normals.length;i<n;i++)t.normals.push(r[e].normals[i].clone())}this.morphTargets.push(t)}const a=e.morphNormals;for(let e=0,t=a.length;e<t;e++){const t={};if(void 0!==a[e].vertexNormals){t.vertexNormals=[];for(let i=0,n=a[e].vertexNormals.length;i<n;i++){const n=a[e].vertexNormals[i],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),t.vertexNormals.push(r)}}if(void 0!==a[e].faceNormals){t.faceNormals=[];for(let i=0,n=a[e].faceNormals.length;i<n;i++)t.faceNormals.push(a[e].faceNormals[i].clone())}this.morphNormals.push(t)}const s=e.skinWeights;for(let e=0,t=s.length;e<t;e++)this.skinWeights.push(s[e].clone());const o=e.skinIndices;for(let e=0,t=o.length;e<t;e++)this.skinIndices.push(o[e].clone());const l=e.lineDistances;for(let e=0,t=l.length;e<t;e++)this.lineDistances.push(l[e]);const c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());const d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Vl extends Wl{constructor(e,t,i,n,r,a){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new fa(e,t,i,n,r,a)),this.mergeVertices()}}class Kl extends Yr{constructor(e=1,t=8,i=0,n=2*Math.PI){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const r=[],a=[],s=[],o=[],l=new Xi,c=new Ni;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let r=0,d=3;r<=t;r++,d+=3){const p=i+r/t*n;l.x=e*Math.cos(p),l.y=e*Math.sin(p),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,o.push(c.x,c.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new Pr(a,3)),this.setAttribute("normal",new Pr(s,3)),this.setAttribute("uv",new Pr(o,2))}}class Yl extends Wl{constructor(e,t,i,n){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Kl(e,t,i,n)),this.mergeVertices()}}class Zl extends Yr{constructor(e=1,t=1,i=1,n=8,r=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;n=Math.floor(n),r=Math.floor(r);const c=[],d=[],p=[],h=[];let u=0;const f=[],m=i/2;let g=0;function y(i){const r=u,a=new Ni,f=new Xi;let y=0;const v=!0===i?e:t,w=!0===i?1:-1;for(let e=1;e<=n;e++)d.push(0,m*w,0),p.push(0,w,0),h.push(.5,.5),u++;const b=u;for(let e=0;e<=n;e++){const t=e/n*o+s,i=Math.cos(t),r=Math.sin(t);f.x=v*r,f.y=m*w,f.z=v*i,d.push(f.x,f.y,f.z),p.push(0,w,0),a.x=.5*i+.5,a.y=.5*r*w+.5,h.push(a.x,a.y),u++}for(let e=0;e<n;e++){const t=r+e,n=b+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),y+=3}l.addGroup(g,y,!0===i?1:2),g+=y}!function(){const a=new Xi,y=new Xi;let v=0;const w=(t-e)/i;for(let l=0;l<=r;l++){const c=[],g=l/r,v=g*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,r=t*o+s,l=Math.sin(r),f=Math.cos(r);y.x=v*l,y.y=-g*i+m,y.z=v*f,d.push(y.x,y.y,y.z),a.set(l,w,f).normalize(),p.push(a.x,a.y,a.z),h.push(t,1-g),c.push(u++)}f.push(c)}for(let e=0;e<n;e++)for(let t=0;t<r;t++){const i=f[t][e],n=f[t+1][e],r=f[t+1][e+1],a=f[t][e+1];c.push(i,n,a),c.push(n,r,a),v+=6}l.addGroup(g,v,0),g+=v}(),!1===a&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Pr(d,3)),this.setAttribute("normal",new Pr(p,3)),this.setAttribute("uv",new Pr(h,2))}}class ql extends Wl{constructor(e,t,i,n,r,a,s,o){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Zl(e,t,i,n,r,a,s,o)),this.mergeVertices()}}class Xl extends ql{constructor(e,t,i,n,r,a,s){super(0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}}class Jl extends Zl{constructor(e=1,t=1,i=8,n=1,r=!1,a=0,s=2*Math.PI){super(0,e,t,i,n,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}}class $l extends Yr{constructor(e,t,i=1,n=0){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const r=[],a=[];function s(e,t,i,n){const r=n+1,a=[];for(let n=0;n<=r;n++){a[n]=[];const s=e.clone().lerp(i,n/r),o=t.clone().lerp(i,n/r),l=r-n;for(let e=0;e<=l;e++)a[n][e]=0===e&&n===r?s:s.clone().lerp(o,e/l)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){const i=Math.floor(t/2);t%2==0?(o(a[e][i+1]),o(a[e+1][i]),o(a[e][i])):(o(a[e][i+1]),o(a[e+1][i+1]),o(a[e+1][i]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,i){const n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=n/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}!function(e){const i=new Xi,n=new Xi,r=new Xi;for(let a=0;a<t.length;a+=3)l(t[a+0],i),l(t[a+1],n),l(t[a+2],r),s(i,n,r,e)}(n),function(e){const t=new Xi;for(let i=0;i<r.length;i+=3)t.x=r[i+0],t.y=r[i+1],t.z=r[i+2],t.normalize().multiplyScalar(e),r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z}(i),function(){const e=new Xi;for(let i=0;i<r.length;i+=3){e.x=r[i+0],e.y=r[i+1],e.z=r[i+2];const n=d(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(n,1-s)}var t;(function(){const e=new Xi,t=new Xi,i=new Xi,n=new Xi,s=new Ni,o=new Ni,l=new Ni;for(let p=0,h=0;p<r.length;p+=9,h+=6){e.set(r[p+0],r[p+1],r[p+2]),t.set(r[p+3],r[p+4],r[p+5]),i.set(r[p+6],r[p+7],r[p+8]),s.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),n.copy(e).add(t).add(i).divideScalar(3);const u=d(n);c(s,h+0,e,u),c(o,h+2,t,u),c(l,h+4,i,u)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],i=a[e+2],n=a[e+4],r=Math.max(t,i,n),s=Math.min(t,i,n);r>.9&&s<.1&&(t<.2&&(a[e+0]+=1),i<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Pr(r,3)),this.setAttribute("normal",new Pr(r.slice(),3)),this.setAttribute("uv",new Pr(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}}class Ql extends $l{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class ec extends Wl{constructor(e,t){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ql(e,t)),this.mergeVertices()}}const tc=new Xi,ic=new Xi,nc=new Xi,rc=new pr;class ac extends Yr{constructor(e,t){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,e.isGeometry&&(e=(new Yr).fromGeometry(e));const i=Math.pow(10,4),n=Math.cos(ji.DEG2RAD*t),r=e.getIndex(),a=e.getAttribute("position"),s=r?r.count:a.count,o=[0,0,0],l=["a","b","c"],c=new Array(3),d={},p=[];for(let e=0;e<s;e+=3){r?(o[0]=r.getX(e),o[1]=r.getX(e+1),o[2]=r.getX(e+2)):(o[0]=e,o[1]=e+1,o[2]=e+2);const{a:t,b:s,c:h}=rc;if(t.fromBufferAttribute(a,o[0]),s.fromBufferAttribute(a,o[1]),h.fromBufferAttribute(a,o[2]),rc.getNormal(nc),c[0]=`${Math.round(t.x*i)},${Math.round(t.y*i)},${Math.round(t.z*i)}`,c[1]=`${Math.round(s.x*i)},${Math.round(s.y*i)},${Math.round(s.z*i)}`,c[2]=`${Math.round(h.x*i)},${Math.round(h.y*i)},${Math.round(h.z*i)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=c[e],r=c[t],a=rc[l[e]],s=rc[l[t]],h=`${i}_${r}`,u=`${r}_${i}`;u in d&&d[u]?(nc.dot(d[u].normal)<=n&&(p.push(a.x,a.y,a.z),p.push(s.x,s.y,s.z)),d[u]=null):h in d||(d[h]={index0:o[e],index1:o[t],normal:nc.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:i}=d[e];tc.fromBufferAttribute(a,t),ic.fromBufferAttribute(a,i),p.push(tc.x,tc.y,tc.z),p.push(ic.x,ic.y,ic.z)}this.setAttribute("position",new Pr(p,3))}}const sc=function(e,t,i){i=i||2;const n=t&&t.length,r=n?t[0]*i:e.length;let a=oc(e,0,r,i,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,d,p,h,u;if(n&&(a=function(e,t,i,n){const r=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*n,l=a<s-1?t[a+1]*n:e.length,c=oc(e,o,l,n,!1),c===c.next&&(c.steiner=!0),r.push(vc(c));for(r.sort(fc),a=0;a<r.length;a++)mc(r[a],i),i=lc(i,i.next);return i}(e,t,a,i)),e.length>80*i){o=c=e[0],l=d=e[1];for(let t=i;t<r;t+=i)p=e[t],h=e[t+1],p<o&&(o=p),h<l&&(l=h),p>c&&(c=p),h>d&&(d=h);u=Math.max(c-o,d-l),u=0!==u?1/u:0}return cc(a,s,i,o,l,u),s};function oc(e,t,i,n,r){let a,s;if(r===function(e,t,i,n){let r=0;for(let a=t,s=i-n;a<i;a+=n)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,i,n)>0)for(a=t;a<i;a+=n)s=Ec(a,e[a],e[a+1],s);else for(a=i-n;a>=t;a-=n)s=Ec(a,e[a],e[a+1],s);return s&&Sc(s,s.next)&&(Ac(s),s=s.next),s}function lc(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!Sc(n,n.next)&&0!==xc(n.prev,n,n.next))n=n.next;else{if(Ac(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function cc(e,t,i,n,r,a,s){if(!e)return;!s&&a&&function(e,t,i,n){let r=e;do{null===r.z&&(r.z=yc(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,i,n,r,a,s,o,l,c=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,n=i,o=0,t=0;t<c&&(o++,n=n.nextZ,n);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=n}a.nextZ=null,c*=2}while(s>1)}(r)}(e,n,r,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?pc(e,n,r,a):dc(e))t.push(o.i/i),t.push(e.i/i),t.push(l.i/i),Ac(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?cc(e=hc(lc(e),t,i),t,i,n,r,a,2):2===s&&uc(e,t,i,n,r,a):cc(lc(e),t,i,n,r,a,1);break}}function dc(e){const t=e.prev,i=e,n=e.next;if(xc(t,i,n)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(wc(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&xc(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function pc(e,t,i,n){const r=e.prev,a=e,s=e.next;if(xc(r,a,s)>=0)return!1;const o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,l=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,c=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,d=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,p=yc(o,l,t,i,n),h=yc(c,d,t,i,n);let u=e.prevZ,f=e.nextZ;for(;u&&u.z>=p&&f&&f.z<=h;){if(u!==e.prev&&u!==e.next&&wc(r.x,r.y,a.x,a.y,s.x,s.y,u.x,u.y)&&xc(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,f!==e.prev&&f!==e.next&&wc(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&xc(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;u&&u.z>=p;){if(u!==e.prev&&u!==e.next&&wc(r.x,r.y,a.x,a.y,s.x,s.y,u.x,u.y)&&xc(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&wc(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&xc(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function hc(e,t,i){let n=e;do{const r=n.prev,a=n.next.next;!Sc(r,a)&&Mc(r,n,n.next,a)&&Oc(r,a)&&Oc(a,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(a.i/i),Ac(n),Ac(n.next),n=e=a),n=n.next}while(n!==e);return lc(n)}function uc(e,t,i,n,r,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&bc(s,e)){let o=Cc(s,e);return s=lc(s,s.next),o=lc(o,o.next),cc(s,t,i,n,r,a),void cc(o,t,i,n,r,a)}e=e.next}s=s.next}while(s!==e)}function fc(e,t){return e.x-t.x}function mc(e,t){if(t=function(e,t){let i=t;const n=e.x,r=e.y;let a,s=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const e=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=n&&e>s){if(s=e,e===n){if(r===i.y)return i;if(r===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(n===s)return a;const o=a,l=a.x,c=a.y;let d,p=1/0;i=a;do{n>=i.x&&i.x>=l&&n!==i.x&&wc(r<c?n:s,r,l,c,r<c?s:n,r,i.x,i.y)&&(d=Math.abs(r-i.y)/(n-i.x),Oc(i,e)&&(d<p||d===p&&(i.x>a.x||i.x===a.x&&gc(a,i)))&&(a=i,p=d)),i=i.next}while(i!==o);return a}(e,t)){const i=Cc(t,e);lc(t,t.next),lc(i,i.next)}}function gc(e,t){return xc(e.prev,e,t.prev)<0&&xc(t.next,e,e.next)<0}function yc(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vc(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function wc(e,t,i,n,r,a,s,o){return(r-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(n-o)-(i-s)*(t-o)>=0&&(i-s)*(a-o)-(r-s)*(n-o)>=0}function bc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Mc(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Oc(e,t)&&Oc(t,e)&&function(e,t){let i=e,n=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(xc(e.prev,e,t.prev)||xc(e,t.prev,t))||Sc(e,t)&&xc(e.prev,e,e.next)>0&&xc(t.prev,t,t.next)>0)}function xc(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Sc(e,t){return e.x===t.x&&e.y===t.y}function Mc(e,t,i,n){const r=_c(xc(e,t,i)),a=_c(xc(e,t,n)),s=_c(xc(i,n,e)),o=_c(xc(i,n,t));return r!==a&&s!==o||(!(0!==r||!Tc(e,i,t))||(!(0!==a||!Tc(e,n,t))||(!(0!==s||!Tc(i,e,n))||!(0!==o||!Tc(i,t,n)))))}function Tc(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function _c(e){return e>0?1:e<0?-1:0}function Oc(e,t){return xc(e.prev,e,e.next)<0?xc(e,t,e.next)>=0&&xc(e,e.prev,t)>=0:xc(e,t,e.prev)<0||xc(e,e.next,t)<0}function Cc(e,t){const i=new Rc(e.i,e.x,e.y),n=new Rc(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Ec(e,t,i,n){const r=new Rc(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Ac(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Rc(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const kc={area:function(e){const t=e.length;let i=0;for(let n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},isClockWise:function(e){return kc.area(e)<0},triangulateShape:function(e,t){const i=[],n=[],r=[];Lc(e),Ic(i,e);let a=e.length;t.forEach(Lc);for(let e=0;e<t.length;e++)n.push(a),a+=t[e].length,Ic(i,t[e]);const s=sc(i,n);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}};function Lc(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ic(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class Pc extends Yr{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],r=[];for(let t=0,i=e.length;t<i;t++){a(e[t])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:d-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,u=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Dc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,y,v,w,b,x=!1;f&&(g=f.getSpacedPoints(o),x=!0,c=!1,y=f.computeFrenetFrames(o,!1),v=new Xi,w=new Xi,b=new Xi),c||(u=0,d=0,p=0,h=0);const S=e.extractPoints(s);let M=S.shape;const T=S.holes;if(!kc.isClockWise(M)){M=M.reverse();for(let e=0,t=T.length;e<t;e++){const t=T[e];kc.isClockWise(t)&&(T[e]=t.reverse())}}const _=kc.triangulateShape(M,T),O=M;for(let e=0,t=T.length;e<t;e++){const t=T[e];M=M.concat(t)}function C(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}const E=M.length,A=_.length;function R(e,t,i){let n,r,a;const s=e.x-t.x,o=e.y-t.y,l=i.x-e.x,c=i.y-e.y,d=s*s+o*o,p=s*c-o*l;if(Math.abs(p)>Number.EPSILON){const p=Math.sqrt(d),h=Math.sqrt(l*l+c*c),u=t.x-o/p,f=t.y+s/p,m=((i.x-c/h-u)*c-(i.y+l/h-f)*l)/(s*c-o*l);n=u+s*m-e.x,r=f+o*m-e.y;const g=n*n+r*r;if(g<=2)return new Ni(n,r);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(n=-o,r=s,a=Math.sqrt(d)):(n=s,r=o,a=Math.sqrt(d/2))}return new Ni(n/a,r/a)}const k=[];for(let e=0,t=O.length,i=t-1,n=e+1;e<t;e++,i++,n++)i===t&&(i=0),n===t&&(n=0),k[e]=R(O[e],O[i],O[n]);const L=[];let I,P=k.concat();for(let e=0,t=T.length;e<t;e++){const t=T[e];I=[];for(let e=0,i=t.length,n=i-1,r=e+1;e<i;e++,n++,r++)n===i&&(n=0),r===i&&(r=0),I[e]=R(t[e],t[n],t[r]);L.push(I),P=P.concat(I)}for(let e=0;e<u;e++){const t=e/u,i=d*Math.cos(t*Math.PI/2),n=p*Math.sin(t*Math.PI/2)+h;for(let e=0,t=O.length;e<t;e++){const t=C(O[e],k[e],n);z(t.x,t.y,-i)}for(let e=0,t=T.length;e<t;e++){const t=T[e];I=L[e];for(let e=0,r=t.length;e<r;e++){const r=C(t[e],I[e],n);z(r.x,r.y,-i)}}}const D=p+h;for(let e=0;e<E;e++){const t=c?C(M[e],P[e],D):M[e];x?(w.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(w).add(v),z(b.x,b.y,b.z)):z(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<E;t++){const i=c?C(M[t],P[t],D):M[t];x?(w.copy(y.normals[e]).multiplyScalar(i.x),v.copy(y.binormals[e]).multiplyScalar(i.y),b.copy(g[e]).add(w).add(v),z(b.x,b.y,b.z)):z(i.x,i.y,l/o*e)}for(let e=u-1;e>=0;e--){const t=e/u,i=d*Math.cos(t*Math.PI/2),n=p*Math.sin(t*Math.PI/2)+h;for(let e=0,t=O.length;e<t;e++){const t=C(O[e],k[e],n);z(t.x,t.y,l+i)}for(let e=0,t=T.length;e<t;e++){const t=T[e];I=L[e];for(let e=0,r=t.length;e<r;e++){const r=C(t[e],I[e],n);x?z(r.x,r.y+g[o-1].y,g[o-1].x+i):z(r.x,r.y,l+i)}}}function B(e,t){let i=e.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=e.length-1);for(let e=0,i=o+2*u;e<i;e++){const i=E*e,a=E*(e+1);N(t+n+i,t+r+i,t+r+a,t+n+a)}}}function z(e,t,i){a.push(e),a.push(t),a.push(i)}function j(e,t,r){F(e),F(t),F(r);const a=n.length/3,s=m.generateTopUV(i,n,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[2])}function N(e,t,r,a){F(e),F(t),F(a),F(t),F(r),F(a);const s=n.length/3,o=m.generateSideWallUV(i,n,s-6,s-3,s-2,s-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function F(e){n.push(a[3*e+0]),n.push(a[3*e+1]),n.push(a[3*e+2])}function H(e){r.push(e.x),r.push(e.y)}!function(){const e=n.length/3;if(c){let e=0,t=E*e;for(let e=0;e<A;e++){const i=_[e];j(i[2]+t,i[1]+t,i[0]+t)}e=o+2*u,t=E*e;for(let e=0;e<A;e++){const i=_[e];j(i[0]+t,i[1]+t,i[2]+t)}}else{for(let e=0;e<A;e++){const t=_[e];j(t[2],t[1],t[0])}for(let e=0;e<A;e++){const t=_[e];j(t[0]+E*o,t[1]+E*o,t[2]+E*o)}}i.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;B(O,t),t+=O.length;for(let e=0,i=T.length;e<i;e++){const i=T[e];B(i,t),t+=i.length}i.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Pr(n,3)),this.setAttribute("uv",new Pr(r,2)),this.computeVertexNormals()}toJSON(){const e=Yr.prototype.toJSON.call(this);return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];i.shapes.push(n.uuid)}else i.shapes.push(e.uuid);void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,e)}}const Dc={generateTopUV:function(e,t,i,n,r){const a=t[3*i],s=t[3*i+1],o=t[3*n],l=t[3*n+1],c=t[3*r],d=t[3*r+1];return[new Ni(a,s),new Ni(o,l),new Ni(c,d)]},generateSideWallUV:function(e,t,i,n,r,a){const s=t[3*i],o=t[3*i+1],l=t[3*i+2],c=t[3*n],d=t[3*n+1],p=t[3*n+2],h=t[3*r],u=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],y=t[3*a+2];return Math.abs(o-d)<.01?[new Ni(s,1-l),new Ni(c,1-p),new Ni(h,1-f),new Ni(m,1-y)]:[new Ni(o,1-l),new Ni(d,1-p),new Ni(u,1-f),new Ni(g,1-y)]}};class Bc extends Wl{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Pc(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];i.shapes.push(n.uuid)}else i.shapes.push(e.uuid);void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,e)}}class zc extends $l{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class jc extends Wl{constructor(e,t){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zc(e,t)),this.mergeVertices()}}class Nc extends Yr{constructor(e,t=12,i=0,n=2*Math.PI){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=ji.clamp(n,0,2*Math.PI);const r=[],a=[],s=[],o=1/t,l=new Xi,c=new Ni;for(let r=0;r<=t;r++){const d=i+r*o*n,p=Math.sin(d),h=Math.cos(d);for(let i=0;i<=e.length-1;i++)l.x=e[i].x*p,l.y=e[i].y,l.z=e[i].x*h,a.push(l.x,l.y,l.z),c.x=r/t,c.y=i/(e.length-1),s.push(c.x,c.y)}for(let i=0;i<t;i++)for(let t=0;t<e.length-1;t++){const n=t+i*e.length,a=n,s=n+e.length,o=n+e.length+1,l=n+1;r.push(a,s,l),r.push(s,o,l)}if(this.setIndex(r),this.setAttribute("position",new Pr(a,3)),this.setAttribute("uv",new Pr(s,2)),this.computeVertexNormals(),n===2*Math.PI){const i=this.attributes.normal.array,n=new Xi,r=new Xi,a=new Xi,s=t*e.length*3;for(let t=0,o=0;t<e.length;t++,o+=3)n.x=i[o+0],n.y=i[o+1],n.z=i[o+2],r.x=i[s+o+0],r.y=i[s+o+1],r.z=i[s+o+2],a.addVectors(n,r).normalize(),i[o+0]=i[s+o+0]=a.x,i[o+1]=i[s+o+1]=a.y,i[o+2]=i[s+o+2]=a.z}}}class Fc extends Wl{constructor(e,t,i,n){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new Nc(e,t,i,n)),this.mergeVertices()}}class Hc extends $l{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class Gc extends Wl{constructor(e,t){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Hc(e,t)),this.mergeVertices()}}function Uc(e,t,i){Yr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};const n=[],r=[],a=[],s=[],o=1e-5,l=new Xi,c=new Xi,d=new Xi,p=new Xi,h=new Xi;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const u=t+1;for(let n=0;n<=i;n++){const u=n/i;for(let i=0;i<=t;i++){const n=i/t;e(n,u,c),r.push(c.x,c.y,c.z),n-o>=0?(e(n-o,u,d),p.subVectors(c,d)):(e(n+o,u,d),p.subVectors(d,c)),u-o>=0?(e(n,u-o,d),h.subVectors(c,d)):(e(n,u+o,d),h.subVectors(d,c)),l.crossVectors(p,h).normalize(),a.push(l.x,l.y,l.z),s.push(n,u)}}for(let e=0;e<i;e++)for(let i=0;i<t;i++){const t=e*u+i,r=e*u+i+1,a=(e+1)*u+i+1,s=(e+1)*u+i;n.push(t,r,s),n.push(r,a,s)}this.setIndex(n),this.setAttribute("position",new Pr(r,3)),this.setAttribute("normal",new Pr(a,3)),this.setAttribute("uv",new Pr(s,2))}function Wc(e,t,i){Wl.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Uc(e,t,i)),this.mergeVertices()}Uc.prototype=Object.create(Yr.prototype),Uc.prototype.constructor=Uc,Wc.prototype=Object.create(Wl.prototype),Wc.prototype.constructor=Wc;class Vc extends Wl{constructor(e,t,i,n){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Ra(e,t,i,n)),this.mergeVertices()}}class Kc extends Wl{constructor(e,t,i,n){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new $l(e,t,i,n)),this.mergeVertices()}}class Yc extends Yr{constructor(e=.5,t=1,i=8,n=1,r=0,a=2*Math.PI){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},i=Math.max(3,i);const s=[],o=[],l=[],c=[];let d=e;const p=(t-e)/(n=Math.max(1,n)),h=new Xi,u=new Ni;for(let e=0;e<=n;e++){for(let e=0;e<=i;e++){const n=r+e/i*a;h.x=d*Math.cos(n),h.y=d*Math.sin(n),o.push(h.x,h.y,h.z),l.push(0,0,1),u.x=(h.x/t+1)/2,u.y=(h.y/t+1)/2,c.push(u.x,u.y)}d+=p}for(let e=0;e<n;e++){const t=e*(i+1);for(let e=0;e<i;e++){const n=e+t,r=n,a=n+i+1,o=n+i+2,l=n+1;s.push(r,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new Pr(o,3)),this.setAttribute("normal",new Pr(l,3)),this.setAttribute("uv",new Pr(c,2))}}class Zc extends Wl{constructor(e,t,i,n,r,a){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Yc(e,t,i,n,r,a)),this.mergeVertices()}}class qc extends Yr{constructor(e,t=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){const s=n.length/3,l=e.extractPoints(t);let c=l.shape;const d=l.holes;!1===kc.isClockWise(c)&&(c=c.reverse());for(let e=0,t=d.length;e<t;e++){const t=d[e];!0===kc.isClockWise(t)&&(d[e]=t.reverse())}const p=kc.triangulateShape(c,d);for(let e=0,t=d.length;e<t;e++){const t=d[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];n.push(t.x,t.y,0),r.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=p.length;e<t;e++){const t=p[e],n=t[0]+s,r=t[1]+s,a=t[2]+s;i.push(n,r,a),o+=3}}this.setIndex(i),this.setAttribute("position",new Pr(n,3)),this.setAttribute("normal",new Pr(r,3)),this.setAttribute("uv",new Pr(a,2))}toJSON(){const e=Yr.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class Xc extends Wl{constructor(e,t){super(),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new qc(e,t)),this.mergeVertices()}toJSON(){const e=Wl.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class Jc extends Yr{constructor(e=1,t=8,i=6,n=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const o=Math.min(a+s,Math.PI);let l=0;const c=[],d=new Xi,p=new Xi,h=[],u=[],f=[],m=[];for(let h=0;h<=i;h++){const g=[],y=h/i;let v=0;0==h&&0==a?v=.5/t:h==i&&o==Math.PI&&(v=-.5/t);for(let i=0;i<=t;i++){const o=i/t;d.x=-e*Math.cos(n+o*r)*Math.sin(a+y*s),d.y=e*Math.cos(a+y*s),d.z=e*Math.sin(n+o*r)*Math.sin(a+y*s),u.push(d.x,d.y,d.z),p.copy(d).normalize(),f.push(p.x,p.y,p.z),m.push(o+v,1-y),g.push(l++)}c.push(g)}for(let e=0;e<i;e++)for(let n=0;n<t;n++){const t=c[e][n+1],r=c[e][n],s=c[e+1][n],l=c[e+1][n+1];(0!==e||a>0)&&h.push(t,r,l),(e!==i-1||o<Math.PI)&&h.push(r,s,l)}this.setIndex(h),this.setAttribute("position",new Pr(u,3)),this.setAttribute("normal",new Pr(f,3)),this.setAttribute("uv",new Pr(m,2))}}class $c extends Wl{constructor(e,t,i,n,r,a,s){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Jc(e,t,i,n,r,a,s)),this.mergeVertices()}}class Qc extends $l{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class ed extends Wl{constructor(e,t){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qc(e,t)),this.mergeVertices()}}class td extends Pc{constructor(e,t={}){const i=t.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Yr;const n=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(n,t),this.type="TextBufferGeometry"}}class id extends Wl{constructor(e,t){super(),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new td(e,t)),this.mergeVertices()}}class nd extends Yr{constructor(e=1,t=.4,i=8,n=6,r=2*Math.PI){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},i=Math.floor(i),n=Math.floor(n);const a=[],s=[],o=[],l=[],c=new Xi,d=new Xi,p=new Xi;for(let a=0;a<=i;a++)for(let h=0;h<=n;h++){const u=h/n*r,f=a/i*Math.PI*2;d.x=(e+t*Math.cos(f))*Math.cos(u),d.y=(e+t*Math.cos(f))*Math.sin(u),d.z=t*Math.sin(f),s.push(d.x,d.y,d.z),c.x=e*Math.cos(u),c.y=e*Math.sin(u),p.subVectors(d,c).normalize(),o.push(p.x,p.y,p.z),l.push(h/n),l.push(a/i)}for(let e=1;e<=i;e++)for(let t=1;t<=n;t++){const i=(n+1)*e+t-1,r=(n+1)*(e-1)+t-1,s=(n+1)*(e-1)+t,o=(n+1)*e+t;a.push(i,r,o),a.push(r,s,o)}this.setIndex(a),this.setAttribute("position",new Pr(s,3)),this.setAttribute("normal",new Pr(o,3)),this.setAttribute("uv",new Pr(l,2))}}class rd extends Wl{constructor(e,t,i,n,r){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new nd(e,t,i,n,r)),this.mergeVertices()}}class ad extends Yr{constructor(e=1,t=.4,i=64,n=8,r=2,a=3){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},i=Math.floor(i),n=Math.floor(n);const s=[],o=[],l=[],c=[],d=new Xi,p=new Xi,h=new Xi,u=new Xi,f=new Xi,m=new Xi,g=new Xi;for(let s=0;s<=i;++s){const v=s/i*r*Math.PI*2;y(v,r,a,e,h),y(v+.01,r,a,e,u),m.subVectors(u,h),g.addVectors(u,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=n;++e){const r=e/n*Math.PI*2,a=-t*Math.cos(r),u=t*Math.sin(r);d.x=h.x+(a*g.x+u*f.x),d.y=h.y+(a*g.y+u*f.y),d.z=h.z+(a*g.z+u*f.z),o.push(d.x,d.y,d.z),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),c.push(s/i),c.push(e/n)}}for(let e=1;e<=i;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),r=(n+1)*e+(t-1),a=(n+1)*e+t,o=(n+1)*(e-1)+t;s.push(i,r,o),s.push(r,a,o)}function y(e,t,i,n,r){const a=Math.cos(e),s=Math.sin(e),o=i/t*e,l=Math.cos(o);r.x=n*(2+l)*.5*a,r.y=n*(2+l)*s*.5,r.z=n*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new Pr(o,3)),this.setAttribute("normal",new Pr(l,3)),this.setAttribute("uv",new Pr(c,2))}}class sd extends Wl{constructor(e,t,i,n,r,a,s){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ad(e,t,i,n,r,a)),this.mergeVertices()}}class od extends Yr{constructor(e,t=64,i=1,n=8,r=!1){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new Xi,o=new Xi,l=new Ni;let c=new Xi;const d=[],p=[],h=[],u=[];function f(r){c=e.getPointAt(r/t,c);const l=a.normals[r],h=a.binormals[r];for(let e=0;e<=n;e++){const t=e/n*Math.PI*2,r=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+r*h.x,o.y=a*l.y+r*h.y,o.z=a*l.z+r*h.z,o.normalize(),p.push(o.x,o.y,o.z),s.x=c.x+i*o.x,s.y=c.y+i*o.y,s.z=c.z+i*o.z,d.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let i=0;i<=n;i++)l.x=e/t,l.y=i/n,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),r=(n+1)*e+(t-1),a=(n+1)*e+t,s=(n+1)*(e-1)+t;u.push(i,r,s),u.push(r,a,s)}}()}(),this.setIndex(u),this.setAttribute("position",new Pr(d,3)),this.setAttribute("normal",new Pr(p,3)),this.setAttribute("uv",new Pr(h,2))}toJSON(){const e=Yr.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class ld extends Wl{constructor(e,t,i,n,r,a){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");const s=new od(e,t,i,n,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}}class cd extends Yr{constructor(e){super(),this.type="WireframeGeometry";const t=[],i=[0,0],n={},r=["a","b","c"];if(e&&e.isGeometry){const a=e.faces;for(let e=0,t=a.length;e<t;e++){const t=a[e];for(let e=0;e<3;e++){const a=t[r[e]],s=t[r[(e+1)%3]];i[0]=Math.min(a,s),i[1]=Math.max(a,s);const o=i[0]+","+i[1];void 0===n[o]&&(n[o]={index1:i[0],index2:i[1]})}}for(const i in n){const r=n[i];let a=e.vertices[r.index1];t.push(a.x,a.y,a.z),a=e.vertices[r.index2],t.push(a.x,a.y,a.z)}}else if(e&&e.isBufferGeometry){const r=new Xi;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,t=o.length;e<t;++e){const t=o[e],r=t.start;for(let e=r,a=r+t.count;e<a;e+=3)for(let t=0;t<3;t++){const r=s.getX(e+t),a=s.getX(e+(t+1)%3);i[0]=Math.min(r,a),i[1]=Math.max(r,a);const o=i[0]+","+i[1];void 0===n[o]&&(n[o]={index1:i[0],index2:i[1]})}}for(const e in n){const i=n[e];r.fromBufferAttribute(a,i.index1),t.push(r.x,r.y,r.z),r.fromBufferAttribute(a,i.index2),t.push(r.x,r.y,r.z)}}else{const i=e.attributes.position;for(let e=0,n=i.count/3;e<n;e++)for(let n=0;n<3;n++){const a=3*e+n;r.fromBufferAttribute(i,a),t.push(r.x,r.y,r.z);const s=3*e+(n+1)%3;r.fromBufferAttribute(i,s),t.push(r.x,r.y,r.z)}}}this.setAttribute("position",new Pr(t,3))}}var dd=Object.freeze({__proto__:null,BoxGeometry:Vl,BoxBufferGeometry:fa,CircleGeometry:Yl,CircleBufferGeometry:Kl,ConeGeometry:Xl,ConeBufferGeometry:Jl,CylinderGeometry:ql,CylinderBufferGeometry:Zl,DodecahedronGeometry:ec,DodecahedronBufferGeometry:Ql,EdgesGeometry:ac,ExtrudeGeometry:Bc,ExtrudeBufferGeometry:Pc,IcosahedronGeometry:jc,IcosahedronBufferGeometry:zc,LatheGeometry:Fc,LatheBufferGeometry:Nc,OctahedronGeometry:Gc,OctahedronBufferGeometry:Hc,ParametricGeometry:Wc,ParametricBufferGeometry:Uc,PlaneGeometry:Vc,PlaneBufferGeometry:Ra,PolyhedronGeometry:Kc,PolyhedronBufferGeometry:$l,RingGeometry:Zc,RingBufferGeometry:Yc,ShapeGeometry:Xc,ShapeBufferGeometry:qc,SphereGeometry:$c,SphereBufferGeometry:Jc,TetrahedronGeometry:ed,TetrahedronBufferGeometry:Qc,TextGeometry:id,TextBufferGeometry:td,TorusGeometry:rd,TorusBufferGeometry:nd,TorusKnotGeometry:sd,TorusKnotBufferGeometry:ad,TubeGeometry:ld,TubeBufferGeometry:od,WireframeGeometry:cd});function pd(e){xr.call(this),this.type="ShadowMaterial",this.color=new vr(0),this.transparent=!0,this.setValues(e)}function hd(e){va.call(this,e),this.type="RawShaderMaterial"}function ud(e){xr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function fd(e){ud.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ni(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=ji.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function md(e){xr.call(this),this.type="MeshPhongMaterial",this.color=new vr(16777215),this.specular=new vr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gd(e){xr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yd(e){xr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vd(e){xr.call(this),this.type="MeshLambertMaterial",this.color=new vr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function wd(e){xr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function bd(e){vl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}pd.prototype=Object.create(xr.prototype),pd.prototype.constructor=pd,pd.prototype.isShadowMaterial=!0,pd.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this},hd.prototype=Object.create(va.prototype),hd.prototype.constructor=hd,hd.prototype.isRawShaderMaterial=!0,ud.prototype=Object.create(xr.prototype),ud.prototype.constructor=ud,ud.prototype.isMeshStandardMaterial=!0,ud.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},fd.prototype=Object.create(ud.prototype),fd.prototype.constructor=fd,fd.prototype.isMeshPhysicalMaterial=!0,fd.prototype.copy=function(e){return ud.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new vr).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},md.prototype=Object.create(xr.prototype),md.prototype.constructor=md,md.prototype.isMeshPhongMaterial=!0,md.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gd.prototype=Object.create(xr.prototype),gd.prototype.constructor=gd,gd.prototype.isMeshToonMaterial=!0,gd.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yd.prototype=Object.create(xr.prototype),yd.prototype.constructor=yd,yd.prototype.isMeshNormalMaterial=!0,yd.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},vd.prototype=Object.create(xr.prototype),vd.prototype.constructor=vd,vd.prototype.isMeshLambertMaterial=!0,vd.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},wd.prototype=Object.create(xr.prototype),wd.prototype.constructor=wd,wd.prototype.isMeshMatcapMaterial=!0,wd.prototype.copy=function(e){return xr.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bd.prototype=Object.create(vl.prototype),bd.prototype.constructor=bd,bd.prototype.isLineDashedMaterial=!0,bd.prototype.copy=function(e){return vl.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var xd=Object.freeze({__proto__:null,ShadowMaterial:pd,SpriteMaterial:Uo,RawShaderMaterial:hd,ShaderMaterial:va,PointsMaterial:Al,MeshPhysicalMaterial:fd,MeshStandardMaterial:ud,MeshPhongMaterial:md,MeshToonMaterial:gd,MeshNormalMaterial:yd,MeshLambertMaterial:vd,MeshDepthMaterial:To,MeshDistanceMaterial:_o,MeshBasicMaterial:Sr,MeshMatcapMaterial:wd,LineDashedMaterial:bd,LineBasicMaterial:vl,Material:xr});const Sd={arraySlice:function(e,t,i){return Sd.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,i=new Array(t);for(let e=0;e!==t;++e)i[e]=e;return i.sort((function(t,i){return e[t]-e[i]})),i},sortedArray:function(e,t,i){const n=e.length,r=new e.constructor(n);for(let a=0,s=0;s!==n;++a){const n=i[a]*t;for(let i=0;i!==t;++i)r[s++]=e[n+i]}return r},flattenJSON:function(e,t,i,n){let r=1,a=e[0];for(;void 0!==a&&void 0===a[n];)a=e[r++];if(void 0===a)return;let s=a[n];if(void 0!==s)if(Array.isArray(s))do{s=a[n],void 0!==s&&(t.push(a.time),i.push.apply(i,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[n],void 0!==s&&(t.push(a.time),s.toArray(i,i.length)),a=e[r++]}while(void 0!==a);else do{s=a[n],void 0!==s&&(t.push(a.time),i.push(s)),a=e[r++]}while(void 0!==a)},subclip:function(e,t,i,n,r=30){const a=e.clone();a.name=t;const s=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*r;if(!(a<i||a>=n)){l.push(t.times[e]);for(let i=0;i<o;++i)c.push(t.values[e*o+i])}}0!==l.length&&(t.times=Sd.convertArray(l,t.times.constructor),t.values=Sd.convertArray(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,i=e,n=30){n<=0&&(n=30);const r=i.tracks.length,a=t/n;for(let t=0;t<r;++t){const n=i.tracks[t],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const s=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===r}));if(void 0===s)continue;let o=0;const l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const d=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);const p=n.times.length-1;let h;if(a<=n.times[0]){const e=o,t=l-o;h=Sd.arraySlice(n.values,e,t)}else if(a>=n.times[p]){const e=p*l+o,t=e+l-o;h=Sd.arraySlice(n.values,e,t)}else{const e=n.createInterpolant(),t=o,i=l-o;e.evaluate(a),h=Sd.arraySlice(e.resultBuffer,t,i)}if("quaternion"===r){(new qi).fromArray(h).normalize().conjugate().toArray(h)}const u=s.times.length;for(let e=0;e<u;++e){const t=e*d+c;if("quaternion"===r)qi.multiplyQuaternionsFlat(s.values,t,h,0,s.values,t);else{const e=d-2*c;for(let i=0;i<e;++i)s.values[t+i]-=h[i]}}}return e.blendMode=Kt,e}};function Md(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function Td(e,t,i,n){Md.call(this,e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function _d(e,t,i,n){Md.call(this,e,t,i,n)}function Od(e,t,i,n){Md.call(this,e,t,i,n)}function Cd(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Sd.convertArray(t,this.TimeBufferType),this.values=Sd.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function Ed(e,t,i){Cd.call(this,e,t,i)}function Ad(e,t,i,n){Cd.call(this,e,t,i,n)}function Rd(e,t,i,n){Cd.call(this,e,t,i,n)}function kd(e,t,i,n){Md.call(this,e,t,i,n)}function Ld(e,t,i,n){Cd.call(this,e,t,i,n)}function Id(e,t,i,n){Cd.call(this,e,t,i,n)}function Pd(e,t,i,n){Cd.call(this,e,t,i,n)}function Dd(e,t,i,n){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==n?n:Vt,this.uuid=ji.generateUUID(),this.duration<0&&this.resetDuration()}function Bd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rd;case"vector":case"vector2":case"vector3":case"vector4":return Pd;case"color":return Ad;case"quaternion":return Ld;case"bool":case"boolean":return Ed;case"string":return Id}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];Sd.flattenJSON(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Md.prototype,{evaluate:function(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let a;i:{n:if(!(e<n)){for(let a=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,r)}if(i===a)break;if(r=n,n=t[++i],e<n)break t}a=t.length;break i}if(e>=r)break e;{const s=t[1];e<s&&(i=2,r=s);for(let a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===a)break;if(n=r,r=t[--i-1],e>=r)break t}a=i,i=0}}for(;i<a;){const n=i+a>>>1;e<t[n]?a=n:i=n+1}if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let e=0;e!==n;++e)t[e]=i[r+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Md.prototype,{beforeStart_:Md.prototype.copySampleValue_,afterEnd_:Md.prototype.copySampleValue_}),Td.prototype=Object.assign(Object.create(Md.prototype),{constructor:Td,DefaultSettings_:{endingStart:Gt,endingEnd:Gt},intervalChanged_:function(e,t,i){const n=this.parameterPositions;let r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case Ut:r=e,s=2*t-i;break;case Wt:r=n.length-2,s=t+n[r]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case Ut:a=e,o=2*i-t;break;case Wt:a=1,o=i+n[1]-n[0];break;default:a=e-1,o=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,h=this._weightNext,u=(i-t)/(n-t),f=u*u,m=f*u,g=-p*m+2*p*f-p*u,y=(1+p)*m+(-1.5-2*p)*f+(-.5+p)*u+1,v=(-1-h)*m+(1.5+h)*f+.5*u,w=h*m-h*f;for(let e=0;e!==s;++e)r[e]=g*a[c+e]+y*a[l+e]+v*a[o+e]+w*a[d+e];return r}}),_d.prototype=Object.assign(Object.create(Md.prototype),{constructor:_d,interpolate_:function(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(i-t)/(n-t),d=1-c;for(let e=0;e!==s;++e)r[e]=a[l+e]*d+a[o+e]*c;return r}}),Od.prototype=Object.assign(Object.create(Md.prototype),{constructor:Od,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Cd,{toJSON:function(e){const t=e.constructor;let i;if(void 0!==t.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Sd.convertArray(e.times,Array),values:Sd.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}}),Object.assign(Cd.prototype,{constructor:Cd,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ft,InterpolantFactoryMethodDiscrete:function(e){return new Od(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new _d(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Td(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case Nt:t=this.InterpolantFactoryMethodDiscrete;break;case Ft:t=this.InterpolantFactoryMethodLinear;break;case Ht:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nt;case this.InterpolantFactoryMethodLinear:return Ft;case this.InterpolantFactoryMethodSmooth:return Ht}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this},trim:function(e,t){const i=this.times,n=i.length;let r=0,a=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==r||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=Sd.arraySlice(i,r,a),this.values=Sd.arraySlice(this.values,r*e,a*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==r;t++){const n=i[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==a&&a>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,a),e=!1;break}a=n}if(void 0!==n&&Sd.isTypedArray(n))for(let t=0,i=n.length;t!==i;++t){const i=n[t];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,i),e=!1;break}}return e},optimize:function(){const e=Sd.arraySlice(this.times),t=Sd.arraySlice(this.values),i=this.getValueSize(),n=this.getInterpolation()===Ht,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==o[0]))if(n)r=!0;else{const e=s*i,n=e-i,a=e+i;for(let s=0;s!==i;++s){const i=t[e+s];if(i!==t[n+s]||i!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const n=s*i,r=a*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*i,n=a*i,s=0;s!==i;++s)t[n+s]=t[e+s];++a}return a!==e.length?(this.times=Sd.arraySlice(e,0,a),this.values=Sd.arraySlice(t,0,a*i)):(this.times=e,this.values=t),this},clone:function(){const e=Sd.arraySlice(this.times,0),t=Sd.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}),Ed.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Ed,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Nt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ad.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Ad,ValueTypeName:"color"}),Rd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Rd,ValueTypeName:"number"}),kd.prototype=Object.assign(Object.create(Md.prototype),{constructor:kd,interpolate_:function(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(n-t);let l=e*s;for(let e=l+s;l!==e;l+=4)qi.slerpFlat(r,0,a,l-s,a,l,o);return r}}),Ld.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Ld,ValueTypeName:"quaternion",DefaultInterpolation:Ft,InterpolantFactoryMethodLinear:function(e){return new kd(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Id.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Id,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Nt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Pd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Pd,ValueTypeName:"vector"}),Object.assign(Dd,{parse:function(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let e=0,r=i.length;e!==r;++e)t.push(Bd(i[e]).scale(n));const r=new Dd(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r},toJSON:function(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=i.length;e!==n;++e)t.push(Cd.toJSON(i[e]));return n},CreateFromMorphTargetSequence:function(e,t,i,n){const r=t.length,a=[];for(let e=0;e<r;e++){let s=[],o=[];s.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const l=Sd.getKeyframeOrder(s);s=Sd.sortedArray(s,1,l),o=Sd.sortedArray(o,1,l),n||0!==s[0]||(s.push(r),o.push(o[0])),a.push(new Rd(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/i))}return new Dd(e,-1,a)},findByName:function(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.name.match(r);if(a&&a.length>1){const e=a[1];let t=n[e];t||(n[e]=t=[]),t.push(i)}}const a=[];for(const e in n)a.push(Dd.CreateFromMorphTargetSequence(e,n[e],t,i));return a},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,r){if(0!==i.length){const a=[],s=[];Sd.flattenJSON(i,a,s,n),0!==a.length&&r.push(new e(t,a,s))}},n=[],r=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let i=0;i<r[t].morphTargets.length;i++)e[r[t].morphTargets[i]]=-1;for(const i in e){const e=[],a=[];for(let n=0;n!==r[t].morphTargets.length;++n){const n=r[t];e.push(n.time),a.push(n.morphTarget===i?1:0)}n.push(new Rd(".morphTargetInfluence["+i+"]",e,a))}o=e.length*(a||1)}else{const a=".bones["+t[e].name+"]";i(Pd,a+".position",r,"pos",n),i(Ld,a+".quaternion",r,"rot",n),i(Pd,a+".scale",r,"scl",n)}}if(0===n.length)return null;return new Dd(r,o,n,s)}}),Object.assign(Dd.prototype,{resetDuration:function(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Dd(this.name,this.duration,e,this.blendMode)},toJSON:function(){return Dd.toJSON(this)}});const zd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function jd(e,t,i){const n=this;let r=!1,a=0,s=0,o=void 0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){s++,!1===r&&void 0!==n.onStart&&n.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,s),a===s&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}const Nd=new jd;function Fd(e){this.manager=void 0!==e?e:Nd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Fd.prototype,{load:function(){},loadAsync:function(e,t){const i=this;return new Promise((function(n,r){i.load(e,n,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const Hd={};function Gd(e){Fd.call(this,e)}function Ud(e){Fd.call(this,e)}function Wd(e){Fd.call(this,e)}function Vd(e){Fd.call(this,e)}function Kd(e){Fd.call(this,e)}function Yd(e){Fd.call(this,e)}function Zd(e){Fd.call(this,e)}function qd(){this.type="Curve",this.arcLengthDivisions=200}function Xd(e,t,i,n,r,a,s,o){qd.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}function Jd(e,t,i,n,r,a){Xd.call(this,e,t,i,i,n,r,a),this.type="ArcCurve"}function $d(){let e=0,t=0,i=0,n=0;function r(r,a,s,o){e=r,t=s,i=-3*r+3*a-2*s-o,n=2*r-2*a+s+o}return{initCatmullRom:function(e,t,i,n,a){r(t,i,a*(i-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,a,s,o){let l=(t-e)/a-(i-e)/(a+s)+(i-t)/s,c=(i-t)/s-(n-t)/(s+o)+(n-i)/o;l*=s,c*=s,r(t,i,l,c)},calc:function(r){const a=r*r;return e+t*r+i*a+n*(a*r)}}}Gd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Gd,load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=zd.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0!==Hd[e])return void Hd[e].push({onLoad:t,onProgress:i,onError:n});const s=e.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(s){const i=s[1],a=!!s[2];let o=s[3];o=decodeURIComponent(o),a&&(o=atob(o));try{let n;const a=(this.responseType||"").toLowerCase();switch(a){case"arraybuffer":case"blob":const e=new Uint8Array(o.length);for(let t=0;t<o.length;t++)e[t]=o.charCodeAt(t);n="blob"===a?new Blob([e.buffer],{type:i}):e.buffer;break;case"document":const t=new DOMParser;n=t.parseFromString(o,i);break;case"json":n=JSON.parse(o);break;default:n=o}setTimeout((function(){t&&t(n),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Hd[e]=[],Hd[e].push({onLoad:t,onProgress:i,onError:n}),o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",(function(t){const i=this.response,n=Hd[e];if(delete Hd[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),zd.add(e,i);for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onLoad&&t.onLoad(i)}r.manager.itemEnd(e)}else{for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){const i=Hd[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onProgress&&n.onProgress(t)}}),!1),o.addEventListener("error",(function(t){const i=Hd[e];delete Hd[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){const i=Hd[e];delete Hd[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)o.setRequestHeader(e,this.requestHeader[e]);o.send(null)}return r.manager.itemStart(e),o},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Ud.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Ud,load:function(e,t,i,n){const r=this,a=new Gd(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)},parse:function(e){const t=[];for(let i=0;i<e.length;i++){const n=Dd.parse(e[i]);t.push(n)}return t}}),Wd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Wd,load:function(e,t,i,n){const r=this,a=[],s=new zl;s.image=a;const o=new Gd(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const i=r.parse(e,!0);a[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(s.minFilter=we),s.format=i.format,s.needsUpdate=!0,t&&t(s))}),i,n)}if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)c(t);else o.load(e,(function(e){const i=r.parse(e,!0);if(i.isCubemap){const e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)a[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),a[t].format=i.format,a[t].width=i.width,a[t].height=i.height}}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=we),s.format=i.format,s.needsUpdate=!0,t&&t(s)}),i,n);return s}}),Vd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Vd,load:function(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=zd.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),zd.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}),Kd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Kd,load:function(e,t,i,n){const r=new Sa,a=new Vd(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(i){a.load(e[i],(function(e){r.images[i]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(let t=0;t<e.length;++t)o(t);return r}}),Yd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Yd,load:function(e,t,i,n){const r=this,a=new Ta,s=new Gd(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,(function(e){const i=r.parse(e);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:he,a.wrapT=void 0!==i.wrapT?i.wrapT:he,a.magFilter=void 0!==i.magFilter?i.magFilter:we,a.minFilter=void 0!==i.minFilter?i.minFilter:we,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps,a.minFilter=Se),1===i.mipmapCount&&(a.minFilter=we),a.needsUpdate=!0,t&&t(a,i))}),i,n),a}}),Zd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Zd,load:function(e,t,i,n){const r=new Wi,a=new Vd(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(i){r.image=i;const n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=n?ze:je,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r}}),Object.assign(qd.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),r+=i.distanceTo(n),t.push(r),n=i;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const i=this.getLengths();let n=0;const r=i.length;let a;a=t||e*i[r-1];let s,o=0,l=r-1;for(;o<=l;)if(n=Math.floor(o+(l-o)/2),s=i[n]-a,s<0)o=n+1;else{if(!(s>0)){l=n;break}l=n-1}if(n=l,i[n]===a)return n/(r-1);const c=i[n];return(n+(a-c)/(i[n+1]-c))/(r-1)},getTangent:function(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),n>1&&(n=1);const r=this.getPoint(i),a=this.getPoint(n),s=t||(r.isVector2?new Ni:new Xi);return s.copy(a).sub(r).normalize(),s},getTangentAt:function(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)},computeFrenetFrames:function(e,t){const i=new Xi,n=[],r=[],a=[],s=new Xi,o=new _n;for(let t=0;t<=e;t++){const i=t/e;n[t]=this.getTangentAt(i,new Xi),n[t].normalize()}r[0]=new Xi,a[0]=new Xi;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),d=Math.abs(n[0].y),p=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),d<=l&&(l=d,i.set(0,1,0)),p<=l&&i.set(0,0,1),s.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],s),a[0].crossVectors(n[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(n[t-1],n[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(ji.clamp(n[t-1].dot(n[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(n[t],r[t])}if(!0===t){let t=Math.acos(ji.clamp(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let i=1;i<=e;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],t*i)),a[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Xd.prototype=Object.create(qd.prototype),Xd.prototype.constructor=Xd,Xd.prototype.isEllipseCurve=!0,Xd.prototype.getPoint=function(e,t){const i=t||new Ni,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r===n?r=-n:r-=n);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*e-n*t+this.aX,l=i*t+n*e+this.aY}return i.set(o,l)},Xd.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Xd.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Xd.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Jd.prototype=Object.create(Xd.prototype),Jd.prototype.constructor=Jd,Jd.prototype.isArcCurve=!0;const Qd=new Xi,ep=new $d,tp=new $d,ip=new $d;function np(e=[],t=!1,i="centripetal",n=.5){qd.call(this),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}function rp(e,t,i,n,r){const a=.5*(n-t),s=.5*(r-i),o=e*e;return(2*i-2*n+a+s)*(e*o)+(-3*i+3*n-2*a-s)*o+a*e+i}function ap(e,t,i,n){return function(e,t){const i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function sp(e,t,i,n,r){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}function op(e=new Ni,t=new Ni,i=new Ni,n=new Ni){qd.call(this),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}function lp(e=new Xi,t=new Xi,i=new Xi,n=new Xi){qd.call(this),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}function cp(e=new Ni,t=new Ni){qd.call(this),this.type="LineCurve",this.v1=e,this.v2=t}function dp(e=new Xi,t=new Xi){qd.call(this),this.type="LineCurve3",this.v1=e,this.v2=t}function pp(e=new Ni,t=new Ni,i=new Ni){qd.call(this),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}function hp(e=new Xi,t=new Xi,i=new Xi){qd.call(this),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}function up(e=[]){qd.call(this),this.type="SplineCurve",this.points=e}np.prototype=Object.create(qd.prototype),np.prototype.constructor=np,np.prototype.isCatmullRomCurve3=!0,np.prototype.getPoint=function(e,t=new Xi){const i=t,n=this.points,r=n.length,a=(r-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=n[(l-1)%r]:(Qd.subVectors(n[0],n[1]).add(n[0]),s=Qd);const d=n[l%r],p=n[(l+1)%r];if(this.closed||l+2<r?o=n[(l+2)%r]:(Qd.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=Qd),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(p),e),n=Math.pow(p.distanceToSquared(o),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),ep.initNonuniformCatmullRom(s.x,d.x,p.x,o.x,t,i,n),tp.initNonuniformCatmullRom(s.y,d.y,p.y,o.y,t,i,n),ip.initNonuniformCatmullRom(s.z,d.z,p.z,o.z,t,i,n)}else"catmullrom"===this.curveType&&(ep.initCatmullRom(s.x,d.x,p.x,o.x,this.tension),tp.initCatmullRom(s.y,d.y,p.y,o.y,this.tension),ip.initCatmullRom(s.z,d.z,p.z,o.z,this.tension));return i.set(ep.calc(c),tp.calc(c),ip.calc(c)),i},np.prototype.copy=function(e){qd.prototype.copy.call(this,e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},np.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},np.prototype.fromJSON=function(e){qd.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Xi).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},op.prototype=Object.create(qd.prototype),op.prototype.constructor=op,op.prototype.isCubicBezierCurve=!0,op.prototype.getPoint=function(e,t=new Ni){const i=t,n=this.v0,r=this.v1,a=this.v2,s=this.v3;return i.set(sp(e,n.x,r.x,a.x,s.x),sp(e,n.y,r.y,a.y,s.y)),i},op.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},op.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},op.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},lp.prototype=Object.create(qd.prototype),lp.prototype.constructor=lp,lp.prototype.isCubicBezierCurve3=!0,lp.prototype.getPoint=function(e,t=new Xi){const i=t,n=this.v0,r=this.v1,a=this.v2,s=this.v3;return i.set(sp(e,n.x,r.x,a.x,s.x),sp(e,n.y,r.y,a.y,s.y),sp(e,n.z,r.z,a.z,s.z)),i},lp.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},lp.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},lp.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},cp.prototype=Object.create(qd.prototype),cp.prototype.constructor=cp,cp.prototype.isLineCurve=!0,cp.prototype.getPoint=function(e,t=new Ni){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},cp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},cp.prototype.getTangent=function(e,t){const i=t||new Ni;return i.copy(this.v2).sub(this.v1).normalize(),i},cp.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},cp.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},cp.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},dp.prototype=Object.create(qd.prototype),dp.prototype.constructor=dp,dp.prototype.isLineCurve3=!0,dp.prototype.getPoint=function(e,t=new Xi){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},dp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},dp.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},dp.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},dp.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},pp.prototype=Object.create(qd.prototype),pp.prototype.constructor=pp,pp.prototype.isQuadraticBezierCurve=!0,pp.prototype.getPoint=function(e,t=new Ni){const i=t,n=this.v0,r=this.v1,a=this.v2;return i.set(ap(e,n.x,r.x,a.x),ap(e,n.y,r.y,a.y)),i},pp.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},pp.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},pp.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},hp.prototype=Object.create(qd.prototype),hp.prototype.constructor=hp,hp.prototype.isQuadraticBezierCurve3=!0,hp.prototype.getPoint=function(e,t=new Xi){const i=t,n=this.v0,r=this.v1,a=this.v2;return i.set(ap(e,n.x,r.x,a.x),ap(e,n.y,r.y,a.y),ap(e,n.z,r.z,a.z)),i},hp.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},hp.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},hp.prototype.fromJSON=function(e){return qd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},up.prototype=Object.create(qd.prototype),up.prototype.constructor=up,up.prototype.isSplineCurve=!0,up.prototype.getPoint=function(e,t=new Ni){const i=t,n=this.points,r=(n.length-1)*e,a=Math.floor(r),s=r-a,o=n[0===a?a:a-1],l=n[a],c=n[a>n.length-2?n.length-1:a+1],d=n[a>n.length-3?n.length-1:a+2];return i.set(rp(s,o.x,l.x,c.x,d.x),rp(s,o.y,l.y,c.y,d.y)),i},up.prototype.copy=function(e){qd.prototype.copy.call(this,e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this},up.prototype.toJSON=function(){const e=qd.prototype.toJSON.call(this);e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e},up.prototype.fromJSON=function(e){qd.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Ni).fromArray(i))}return this};var fp=Object.freeze({__proto__:null,ArcCurve:Jd,CatmullRomCurve3:np,CubicBezierCurve:op,CubicBezierCurve3:lp,EllipseCurve:Xd,LineCurve:cp,LineCurve3:dp,QuadraticBezierCurve:pp,QuadraticBezierCurve3:hp,SplineCurve:up});function mp(){qd.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function gp(e){mp.call(this),this.type="Path",this.currentPoint=new Ni,e&&this.setFromPoints(e)}function yp(e){gp.call(this,e),this.uuid=ji.generateUUID(),this.type="Shape",this.holes=[]}function vp(e,t=1){Xn.call(this),this.type="Light",this.color=new vr(e),this.intensity=t}function wp(e,t,i){vp.call(this,e,i),this.type="HemisphereLight",this.position.copy(Xn.DefaultUp),this.updateMatrix(),this.groundColor=new vr(t)}function bp(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ni(512,512),this.map=null,this.mapPass=null,this.matrix=new _n,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ca,this._frameExtents=new Ni(1,1),this._viewportCount=1,this._viewports=[new Ki(0,0,1,1)]}function xp(){bp.call(this,new ba(50,1,.5,500)),this.focus=1}function Sp(e,t,i,n,r,a){vp.call(this,e,t),this.type="SpotLight",this.position.copy(Xn.DefaultUp),this.updateMatrix(),this.target=new Xn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new xp}function Mp(){bp.call(this,new ba(90,1,.5,500)),this._frameExtents=new Ni(4,2),this._viewportCount=6,this._viewports=[new Ki(2,1,1,1),new Ki(0,1,1,1),new Ki(3,1,1,1),new Ki(1,1,1,1),new Ki(3,0,1,1),new Ki(1,0,1,1)],this._cubeDirections=[new Xi(1,0,0),new Xi(-1,0,0),new Xi(0,0,1),new Xi(0,0,-1),new Xi(0,1,0),new Xi(0,-1,0)],this._cubeUps=[new Xi(0,1,0),new Xi(0,1,0),new Xi(0,1,0),new Xi(0,1,0),new Xi(0,0,1),new Xi(0,0,-1)]}function Tp(e,t,i,n){vp.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Mp}function _p(e,t,i,n,r,a){wa.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Op(){bp.call(this,new _p(-5,5,5,-5,.5,500))}function Cp(e,t){vp.call(this,e,t),this.type="DirectionalLight",this.position.copy(Xn.DefaultUp),this.updateMatrix(),this.target=new Xn,this.shadow=new Op}function Ep(e,t){vp.call(this,e,t),this.type="AmbientLight"}function Ap(e,t,i,n){vp.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}mp.prototype=Object.assign(Object.create(qd.prototype),{constructor:mp,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new cp(t,e))},getPoint:function(e){const t=e*this.getLength(),i=this.getCurveLengths();let n=0;for(;n<i.length;){if(i[n]>=t){const e=i[n]-t,r=this.curves[n],a=r.getLength(),s=0===a?0:1-e/a;return r.getPointAt(s)}n++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e=12){const t=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const a=r[n],s=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const n=o[e];i&&i.equals(n)||(t.push(n),i=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){qd.prototype.copy.call(this,e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=qd.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){qd.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new fp[i.type]).fromJSON(i))}return this}}),gp.prototype=Object.assign(Object.create(mp.prototype),{constructor:gp,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const i=new cp(this.currentPoint.clone(),new Ni(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,i,n){const r=new pp(this.currentPoint.clone(),new Ni(e,t),new Ni(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this},bezierCurveTo:function(e,t,i,n,r,a){const s=new op(this.currentPoint.clone(),new Ni(e,t),new Ni(i,n),new Ni(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this},splineThru:function(e){const t=new up([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,i,n,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,n,r,a),this},absarc:function(e,t,i,n,r,a){return this.absellipse(e,t,i,i,n,r,a),this},ellipse:function(e,t,i,n,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,n,r,a,s,o),this},absellipse:function(e,t,i,n,r,a,s,o){const l=new Xd(e,t,i,n,r,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return mp.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=mp.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return mp.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),yp.prototype=Object.assign(Object.create(gp.prototype),{constructor:yp,getPointsHoles:function(e){const t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){gp.prototype.copy.call(this,e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){const e=gp.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){gp.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new gp).fromJSON(i))}return this}}),vp.prototype=Object.assign(Object.create(Xn.prototype),{constructor:vp,isLight:!0,copy:function(e){return Xn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=Xn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),wp.prototype=Object.assign(Object.create(vp.prototype),{constructor:wp,isHemisphereLight:!0,copy:function(e){return vp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(bp.prototype,{_projScreenMatrix:new _n,_lightPositionWorld:new Xi,_lookTarget:new Xi,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,i=this.matrix,n=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),xp.prototype=Object.assign(Object.create(bp.prototype),{constructor:xp,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,i=2*ji.RAD2DEG*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),bp.prototype.updateMatrices.call(this,e)}}),Sp.prototype=Object.assign(Object.create(vp.prototype),{constructor:Sp,isSpotLight:!0,copy:function(e){return vp.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Mp.prototype=Object.assign(Object.create(bp.prototype),{constructor:Mp,isPointLightShadow:!0,updateMatrices:function(e,t=0){const i=this.camera,n=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),i.position.copy(r),a.copy(i.position),a.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(a),i.updateMatrixWorld(),n.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}}),Tp.prototype=Object.assign(Object.create(vp.prototype),{constructor:Tp,isPointLight:!0,copy:function(e){return vp.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),_p.prototype=Object.assign(Object.create(wa.prototype),{constructor:_p,isOrthographicCamera:!0,copy:function(e,t){return wa.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-e,a=i+e,s=n+t,o=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=Xn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Op.prototype=Object.assign(Object.create(bp.prototype),{constructor:Op,isDirectionalLightShadow:!0,updateMatrices:function(e){bp.prototype.updateMatrices.call(this,e)}}),Cp.prototype=Object.assign(Object.create(vp.prototype),{constructor:Cp,isDirectionalLight:!0,copy:function(e){return vp.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ep.prototype=Object.assign(Object.create(vp.prototype),{constructor:Ep,isAmbientLight:!0}),Ap.prototype=Object.assign(Object.create(vp.prototype),{constructor:Ap,isRectAreaLight:!0,copy:function(e){return vp.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=vp.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class Rp{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Xi)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*n),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],i*n*1.092548),t.addScaledVector(a[5],n*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],i*r*1.092548),t.addScaledVector(a[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*n),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*i),t.addScaledVector(a[4],.858086*i*n),t.addScaledVector(a[5],.858086*n*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*i*r),t.addScaledVector(a[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}function kp(e,t){vp.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Rp}function Lp(e){Fd.call(this,e),this.textures={}}kp.prototype=Object.assign(Object.create(vp.prototype),{constructor:kp,isLightProbe:!0,copy:function(e){return vp.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=vp.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),Lp.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Lp,load:function(e,t,i,n){const r=this,a=new Gd(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)},parse:function(e){const t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const n=new xd[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&void 0!==n.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=(new vr).setHex(e.sheen)),void 0!==e.emissive&&void 0!==n.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==n.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(n.morphNormals=e.morphNormals),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.vertexTangents&&(n.vertexTangents=e.vertexTangents),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(n.uniforms[t]={},r.type){case"t":n.uniforms[t].value=i(r.value);break;case"c":n.uniforms[t].value=(new vr).setHex(r.value);break;case"v2":n.uniforms[t].value=(new Ni).fromArray(r.value);break;case"v3":n.uniforms[t].value=(new Xi).fromArray(r.value);break;case"v4":n.uniforms[t].value=(new Ki).fromArray(r.value);break;case"m3":n.uniforms[t].value=(new Fi).fromArray(r.value);break;case"m4":n.uniforms[t].value=(new _n).fromArray(r.value);break;default:n.uniforms[t].value=r.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)n.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.matcap&&(n.matcap=i(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),n.normalScale=(new Ni).fromArray(t)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(n.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Ni).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(n.transmission=e.transmission),void 0!==e.transmissionMap&&(n.transmissionMap=i(e.transmissionMap)),n},setTextures:function(e){return this.textures=e,this}});const Ip={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Pp(){Yr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Dp(e,t,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),_r.call(this,e,t,i),this.meshPerAttribute=n||1}function Bp(e){Fd.call(this,e)}Pp.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Pp,isInstancedBufferGeometry:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=Yr.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Dp.prototype=Object.assign(Object.create(_r.prototype),{constructor:Dp,isInstancedBufferAttribute:!0,copy:function(e){return _r.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=_r.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Bp.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Bp,load:function(e,t,i,n){const r=this,a=new Gd(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)},parse:function(e){const t={},i={};function n(e,n){if(void 0!==t[n])return t[n];const r=e.interleavedBuffers[n],a=function(e,t){if(void 0!==i[t])return i[t];const n=e.arrayBuffers[t],r=new Uint32Array(n).buffer;return i[t]=r,r}(e,r.buffer),s=new Fo(Nr(r.type,a),r.stride);return s.uuid=r.uuid,t[n]=s,s}const r=e.isInstancedBufferGeometry?new Pp:new Yr,a=e.data.index;if(void 0!==a){const e=Nr(a.type,a.array);r.setIndex(new _r(e,1))}const s=e.data.attributes;for(const t in s){const i=s[t];let a;if(i.isInterleavedBufferAttribute){a=new Go(n(e.data,i.data),i.itemSize,i.offset,i.normalized)}else{const e=Nr(i.type,i.array);a=new(i.isInstancedBufferAttribute?Dp:_r)(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),r.setAttribute(t,a)}const o=e.data.morphAttributes;if(o)for(const t in o){const i=o[t],a=[];for(let t=0,r=i.length;t<r;t++){const r=i[t];let s;if(r.isInterleavedBufferAttribute){s=new Go(n(e.data,r.data),r.itemSize,r.offset,r.normalized)}else{s=new _r(Nr(r.type,r.array),r.itemSize,r.normalized)}void 0!==r.name&&(s.name=r.name),a.push(s)}r.morphAttributes[t]=a}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];r.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Xi;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new gn(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});class zp extends Fd{constructor(e){super(e)}load(e,t,i,n){const r=this,a=""===this.path?Ip.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new Gd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(i){let a=null;try{a=JSON.parse(i)}catch(t){return void 0!==n&&n(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const s=a.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),i,n)}parse(e,t){const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,i),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}parseShapes(e){const t={};if(void 0!==e)for(let i=0,n=e.length;i<n;i++){const n=(new yp).fromJSON(e[i]);t[n.uuid]=n}return t}parseSkeletons(e,t){const i={},n={};if(t.traverse((function(e){e.isBone&&(n[e.uuid]=e)})),void 0!==e)for(let t=0,r=e.length;t<r;t++){const r=(new hl).fromJSON(e[t],n);i[r.uuid]=r}return i}parseGeometries(e,t){const i={};let n;if(void 0!==e){const r=new Bp;for(let a=0,s=e.length;a<s;a++){let s;const o=e[a];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new dd[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new dd[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new dd[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new dd[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new dd[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new dd[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new dd[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new dd[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new dd[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new dd[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new dd[o.type]((new fp[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new dd[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new dd[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(let e=0,i=o.shapes.length;e<i;e++){const i=t[o.shapes[e]];n.push(i)}s=new dd[o.type](n,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(let e=0,i=o.shapes.length;e<i;e++){const i=t[o.shapes[e]];n.push(i)}const e=o.options.extrudePath;void 0!==e&&(o.options.extrudePath=(new fp[e.type]).fromJSON(e)),s=new dd[o.type](n,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(o);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}}return i}parseMaterials(e,t){const i={},n={};if(void 0!==e){const r=new Lp;r.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];if("MultiMaterial"===a.type){const e=[];for(let t=0;t<a.materials.length;t++){const n=a.materials[t];void 0===i[n.uuid]&&(i[n.uuid]=r.parse(n)),e.push(i[n.uuid])}n[a.uuid]=e}else void 0===i[a.uuid]&&(i[a.uuid]=r.parse(a)),n[a.uuid]=i[a.uuid]}}return n}parseAnimations(e){const t={};if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i],r=Dd.parse(n);t[r.uuid]=r}return t}parseImages(e,t){const i=this,n={};let r;function a(e){if("string"==typeof e){const t=e;return function(e){return i.manager.itemStart(e),r.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:Nr(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const i=new jd(t);r=new Vd(i),r.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],r=i.url;if(Array.isArray(r)){n[i.uuid]=[];for(let e=0,t=r.length;e<t;e++){const t=a(r[e]);null!==t&&(t instanceof HTMLImageElement?n[i.uuid].push(t):n[i.uuid].push(new Ta(t.data,t.width,t.height)))}}else{const e=a(i.url);null!==e&&(n[i.uuid]=e)}}}return n}parseTextures(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const n={};if(void 0!==e)for(let r=0,a=e.length;r<a;r++){const a=e[r];let s;void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const o=t[a.image];Array.isArray(o)?(s=new Sa(o),6===o.length&&(s.needsUpdate=!0)):(s=o&&o.data?new Ta(o.data,o.width,o.height):new Wi(o),o&&(s.needsUpdate=!0)),s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=i(a.mapping,jp)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=i(a.wrap[0],Np),s.wrapT=i(a.wrap[1],Np)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=i(a.minFilter,Fp)),void 0!==a.magFilter&&(s.magFilter=i(a.magFilter,Fp)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),n[a.uuid]=s}return n}parseObject(e,t,i,n){let r,a,s;function o(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];void 0===i[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(i[r])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(e.type){case"Scene":r=new No,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new vr(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new jo(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new zo(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new ba(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new _p(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Ep(e.color,e.intensity);break;case"DirectionalLight":r=new Cp(e.color,e.intensity);break;case"PointLight":r=new Tp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Ap(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Sp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new wp(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=(new kp).fromJSON(e);break;case"SkinnedMesh":a=o(e.geometry),s=l(e.material),r=new ll(a,s),void 0!==e.bindMode&&(r.bindMode=e.bindMode),void 0!==e.bindMatrix&&r.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(r.skeleton=e.skeleton);break;case"Mesh":a=o(e.geometry),s=l(e.material),r=new pa(a,s);break;case"InstancedMesh":a=o(e.geometry),s=l(e.material);const t=e.count,i=e.instanceMatrix;r=new yl(a,s,t),r.instanceMatrix=new _r(new Float32Array(i.array),16);break;case"LOD":r=new ol;break;case"Line":r=new Tl(o(e.geometry),l(e.material),e.mode);break;case"LineLoop":r=new El(o(e.geometry),l(e.material));break;case"LineSegments":r=new Cl(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":r=new Pl(o(e.geometry),l(e.material));break;case"Sprite":r=new nl(l(e.material));break;case"Group":r=new ko;break;case"Bone":r=new cl;break;default:r=new Xn}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(r.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)r.add(this.parseObject(a[e],t,i,n))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const i=t[e];r.animations.push(n[i])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(r.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const i=t[e],n=r.getObjectByProperty("uuid",i.object);void 0!==n&&r.addLevel(n,i.distance)}}return r}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const i=t[e.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(i,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const jp={UVMapping:re,CubeReflectionMapping:ae,CubeRefractionMapping:se,EquirectangularReflectionMapping:oe,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:de},Np={RepeatWrapping:pe,ClampToEdgeWrapping:he,MirroredRepeatWrapping:ue},Fp={NearestFilter:fe,NearestMipmapNearestFilter:me,NearestMipmapLinearFilter:ye,LinearFilter:we,LinearMipmapNearestFilter:be,LinearMipmapLinearFilter:Se};function Hp(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Fd.call(this,e),this.options={premultiplyAlpha:"none"}}function Gp(){this.type="ShapePath",this.color=new vr,this.subPaths=[],this.currentPath=null}function Up(e){this.type="Font",this.data=e}function Wp(e,t,i,n,r){const a=r.glyphs[e]||r.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const s=new Gp;let o,l,c,d,p,h,u,f;if(a.o){const e=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let r=0,a=e.length;r<a;){switch(e[r++]){case"m":o=e[r++]*t+i,l=e[r++]*t+n,s.moveTo(o,l);break;case"l":o=e[r++]*t+i,l=e[r++]*t+n,s.lineTo(o,l);break;case"q":c=e[r++]*t+i,d=e[r++]*t+n,p=e[r++]*t+i,h=e[r++]*t+n,s.quadraticCurveTo(p,h,c,d);break;case"b":c=e[r++]*t+i,d=e[r++]*t+n,p=e[r++]*t+i,h=e[r++]*t+n,u=e[r++]*t+i,f=e[r++]*t+n,s.bezierCurveTo(p,h,u,f,c,d)}}}return{offsetX:a.ha*t,path:s}}function Vp(e){Fd.call(this,e)}let Kp;Hp.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Hp,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=zd.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(i){zd.add(e,i),t&&t(i),r.manager.itemEnd(e)})).catch((function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(Gp.prototype,{moveTo:function(e,t){return this.currentPath=new gp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this},bezierCurveTo:function(e,t,i,n,r,a){return this.currentPath.bezierCurveTo(e,t,i,n,r,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function i(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=new yp;r.curves=n.curves,t.push(r)}return t}function n(e,t){const i=t.length;let n=!1;for(let r=i-1,a=0;a<i;r=a++){let i=t[r],s=t[a],o=s.x-i.x,l=s.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[a],o=-o,s=t[r],l=-l),e.y<i.y||e.y>s.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-o*(e.y-i.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==i.y)continue;if(s.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=s.x)return!0}}return n}const r=kc.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return i(a);let s,o,l;const c=[];if(1===a.length)return o=a[0],l=new yp,l.curves=o.curves,c.push(l),c;let d=!r(a[0].getPoints());d=e?!d:d;const p=[],h=[];let u,f,m=[],g=0;h[g]=void 0,m[g]=[];for(let t=0,i=a.length;t<i;t++)o=a[t],u=o.getPoints(),s=r(u),s=e?!s:s,s?(!d&&h[g]&&g++,h[g]={s:new yp,p:u},h[g].s.curves=o.curves,d&&g++,m[g]=[]):m[g].push({h:o,p:u[0]});if(!h[0])return i(a);if(h.length>1){let e=!1;const t=[];for(let e=0,t=h.length;e<t;e++)p[e]=[];for(let i=0,r=h.length;i<r;i++){const r=m[i];for(let a=0;a<r.length;a++){const s=r[a];let o=!0;for(let r=0;r<h.length;r++)n(s.p,h[r].p)&&(i!==r&&t.push({froms:i,tos:r,hole:a}),o?(o=!1,p[r].push(s)):e=!0);o&&p[i].push(s)}}t.length>0&&(e||(m=p))}for(let e=0,t=h.length;e<t;e++){l=h[e].s,c.push(l),f=m[e];for(let e=0,t=f.length;e<t;e++)l.holes.push(f[e].h)}return c}}),Object.assign(Up.prototype,{isFont:!0,generateShapes:function(e,t=100){const i=[],n=function(e,t,i){const n=Array.from?Array.from(e):String(e).split(""),r=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,s=[];let o=0,l=0;for(let e=0;e<n.length;e++){const t=n[e];if("\n"===t)o=0,l-=a;else{const e=Wp(t,r,o,l,i);o+=e.offsetX,s.push(e.path)}}return s}(e,t,this.data);for(let e=0,t=n.length;e<t;e++)Array.prototype.push.apply(i,n[e].toShapes());return i}}),Vp.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Vp,load:function(e,t,i,n){const r=this,a=new Gd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(e){let i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}const n=r.parse(i);t&&t(n)}),i,n)},parse:function(e){return new Up(e)}});const Yp={getContext:function(){return void 0===Kp&&(Kp=new(window.AudioContext||window.webkitAudioContext)),Kp},setContext:function(e){Kp=e}};function Zp(e){Fd.call(this,e)}function qp(e,t,i){kp.call(this,void 0,i);const n=(new vr).set(e),r=(new vr).set(t),a=new Xi(n.r,n.g,n.b),s=new Xi(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}function Xp(e,t){kp.call(this,void 0,t);const i=(new vr).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}Zp.prototype=Object.assign(Object.create(Fd.prototype),{constructor:Zp,load:function(e,t,i,n){const r=this,a=new Gd(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{const e=i.slice(0);Yp.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)}}),qp.prototype=Object.assign(Object.create(kp.prototype),{constructor:qp,isHemisphereLightProbe:!0,copy:function(e){return kp.prototype.copy.call(this,e),this},toJSON:function(e){return kp.prototype.toJSON.call(this,e)}}),Xp.prototype=Object.assign(Object.create(kp.prototype),{constructor:Xp,isAmbientLightProbe:!0,copy:function(e){return kp.prototype.copy.call(this,e),this},toJSON:function(e){return kp.prototype.toJSON.call(this,e)}});const Jp=new _n,$p=new _n;function Qp(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ba,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ba,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Qp.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),n=t.eyeSep/2,r=n*t.near/t.focus,a=t.near*Math.tan(ji.DEG2RAD*t.fov*.5)/t.zoom;let s,o;$p.elements[12]=-n,Jp.elements[12]=n,s=-a*t.aspect+r,o=a*t.aspect+r,i.elements[0]=2*t.near/(o-s),i.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(i),s=-a*t.aspect-r,o=a*t.aspect-r,i.elements[0]=2*t.near/(o-s),i.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($p),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Jp)}});class eh{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=th(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=th();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function th(){return("undefined"==typeof performance?Date:performance).now()}const ih=new Xi,nh=new qi,rh=new Xi,ah=new Xi;class sh extends Xn{constructor(){super(),this.type="AudioListener",this.context=Yp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ih,nh,rh),ah.set(0,0,-1).applyQuaternion(nh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ih.x,e),t.positionY.linearRampToValueAtTime(ih.y,e),t.positionZ.linearRampToValueAtTime(ih.z,e),t.forwardX.linearRampToValueAtTime(ah.x,e),t.forwardY.linearRampToValueAtTime(ah.y,e),t.forwardZ.linearRampToValueAtTime(ah.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(ih.x,ih.y,ih.z),t.setOrientation(ah.x,ah.y,ah.z,i.x,i.y,i.z)}}class oh extends Xn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const lh=new Xi,ch=new qi,dh=new Xi,ph=new Xi;class hh extends oh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(lh,ch,dh),ph.set(0,0,1).applyQuaternion(ch);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(lh.x,e),t.positionY.linearRampToValueAtTime(lh.y,e),t.positionZ.linearRampToValueAtTime(lh.z,e),t.orientationX.linearRampToValueAtTime(ph.x,e),t.orientationY.linearRampToValueAtTime(ph.y,e),t.orientationZ.linearRampToValueAtTime(ph.z,e)}else t.setPosition(lh.x,lh.y,lh.z),t.setOrientation(ph.x,ph.y,ph.z)}}class uh{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}function fh(e,t,i){let n,r,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(fh.prototype,{accumulate:function(e,t){const i=this.buffer,n=this.valueSize,r=e*n+n;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==n;++e)i[r+e]=i[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=a},accumulateAdditive:function(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(i[e]!==i[e+t]){s.setValue(i,n);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let e=i,r=n;e!==r;++e)t[e]=t[n+e%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]},_select:function(e,t,i,n,r){if(n>=.5)for(let n=0;n!==r;++n)e[t+n]=e[i+n]},_slerp:function(e,t,i,n){qi.slerpFlat(e,t,e,t,e,i,n)},_slerpAdditive:function(e,t,i,n,r){const a=this._workIndex*r;qi.multiplyQuaternionsFlat(e,a,e,t,e,i),qi.slerpFlat(e,t,e,t,e,a,n)},_lerp:function(e,t,i,n,r){const a=1-n;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*a+e[i+s]*n}},_lerpAdditive:function(e,t,i,n,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[i+a]*n}}});const mh=new RegExp("[\\[\\]\\.:\\/]","g"),gh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",yh=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),vh=/(WCOD+)?/.source.replace("WCOD",gh),wh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),xh=new RegExp("^"+yh+vh+wh+bh+"$"),Sh=["material","materials","bones"];function Mh(e,t,i){const n=i||Th.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function Th(e,t,i){this.path=t,this.parsedPath=i||Th.parseTrackName(t),this.node=Th.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function _h(){this.uuid=ji.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(Mh.prototype,{getValue:function(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(Th,{Composite:Mh,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new Th.Composite(e,t,i):new Th(e,t,i)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(mh,"")},parseTrackName:function(e){const t=xh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==Sh.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const a=i(r.children);if(a)return a}return null},n=i(e.children);if(n)return n}return null}}),Object.assign(Th.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=Th.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const a=e[n];if(void 0===a){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Th.prototype,{_getValue_unbound:Th.prototype.getValue,_setValue_unbound:Th.prototype.setValue}),Object.assign(_h.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,a=r.length;let s=void 0,o=e.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const d=arguments[c],p=d.uuid;let h=t[p];if(void 0===h){h=o++,t[p]=h,e.push(d);for(let e=0,t=a;e!==t;++e)r[e].push(new Th(d,i[e],n[e]))}else if(h<l){s=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[p]=o,e[o]=d;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[o];let s=t[h];t[h]=a,void 0===s&&(s=new Th(d,i[e],n[e])),t[o]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=r){const a=r++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[a],r=t[l];t[l]=n,t[a]=r}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const s=--r,o=e[s],c=--a,d=e[c];t[o.uuid]=l,e[l]=o,t[d.uuid]=s,e[s]=d,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[s],r=t[c];t[l]=n,t[s]=r,t.pop()}}else{const r=--a,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const r=this._bindings;if(void 0!==n)return r[n];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,d=new Array(l);n=r.length,i[e]=n,a.push(e),s.push(t),r.push(d);for(let i=c,n=o.length;i!==n;++i){const n=o[i];d[i]=new Th(n,e,t)}return d},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=i,a[i]=o,a.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}});class Oh{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const r=t.tracks,a=r.length,s=new Array(a),o={endingStart:Gt,endingEnd:Gt};for(let e=0;e!==a;++e){const t=r[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,r=n/i,a=i/n;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,r=n.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const n=(e-r)*i;if(n<0||0===i)return;this._startTime=null,t=i*n}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case Kt:for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(a),t[i].accumulateAdditive(s);break;case Vt:default:for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(a),t[i].accumulate(n,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,r=this._loopCount;const a=i===jt;if(0===e)return-1===r?n:a&&1==(1&r)?t-n:n;if(i===Bt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,r+=Math.abs(i);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(a&&1==(1&r))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=Ut,n.endingEnd=Ut):(n.endingStart=e?this.zeroSlopeAtStart?Ut:Gt:Wt,n.endingEnd=t?this.zeroSlopeAtEnd?Ut:Gt:Wt)}_scheduleFading(e,t,i){const n=this._mixer,r=n.time;let a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=i,this}}function Ch(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Ch.prototype=Object.assign(Object.create(Di.prototype),{constructor:Ch,_bindAction:function(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==r;++e){const r=n[e],l=r.name;let d=c[l];if(void 0!==d)a[e]=d;else{if(d=a[e],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,o,l));continue}const n=t&&t._propertyBindings[e].binding.parsedPath;d=new fh(Th.create(i,l,n),r.ValueTypeName,r.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,o,l),a[e]=d}s[e].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){const n=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e},_removeInactiveAction:function(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackAction:function(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_addInactiveBinding:function(e,t,i){const n=this._bindingsByRootAndName,r=this._bindings;let a=n[t];void 0===a&&(a={},n[t]=a),a[i]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,s=a[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[n]},_lendBinding:function(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackBinding:function(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new _d(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,i){const n=t||this._root,r=n.uuid;let a="string"==typeof e?Dd.findByName(n,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===i&&(i=null!==a?a.blendMode:Vt),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Oh(this,a,t,i);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c},existingAction:function(e,t){const i=t||this._root,n=i.uuid,r="string"==typeof e?Dd.findByName(i,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[n]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==i;++s){t[s]._update(n,e,r,a)}const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this},setTime:function(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const e=r.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const r=n._cacheIndex,a=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}},uncacheRoot:function(e){const t=e.uuid,i=this._actionsByClip;for(const e in i){const n=i[e].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const e in n){const t=n[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}});class Eh{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Eh(void 0===this.value.clone?this.value:this.value.clone())}}function Ah(e,t,i){Fo.call(this,e,t),this.meshPerAttribute=i||1}function Rh(e,t,i,n,r){this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}function kh(e,t,i,n){this.ray=new Tn(e,t),this.near=i||0,this.far=n||1/0,this.camera=null,this.layers=new Bn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Lh(e,t){return e.distance-t.distance}function Ih(e,t,i,n){if(e.layers.test(t.layers)&&e.raycast(t,i),!0===n){const n=e.children;for(let e=0,r=n.length;e<r;e++)Ih(n[e],t,i,!0)}}Ah.prototype=Object.assign(Object.create(Fo.prototype),{constructor:Ah,isInstancedInterleavedBuffer:!0,copy:function(e){return Fo.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Fo.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Fo.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(Rh.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Rh.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(kh.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){const n=i||[];return Ih(e,this,n,t),n.sort(Lh),n},intersectObjects:function(e,t,i){const n=i||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(let i=0,r=e.length;i<r;i++)Ih(e[i],this,n,t);return n.sort(Lh),n}});class Ph{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ji.clamp(t/this.radius,-1,1))),this}}class Dh{constructor(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}}const Bh=new Ni;class zh{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new Ni(1/0,1/0),this.max=void 0!==t?t:new Ni(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Bh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Ni),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Ni),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Ni),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Ni),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Bh.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jh=new Xi,Nh=new Xi;class Fh{constructor(e,t){this.start=void 0!==e?e:new Xi,this.end=void 0!==t?t:new Xi}set(e,t){return this.start.copy(e),this.end.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Xi),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Xi),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Xi),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){jh.subVectors(e,this.start),Nh.subVectors(this.end,this.start);const i=Nh.dot(Nh);let n=Nh.dot(jh)/i;return t&&(n=ji.clamp(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new Xi),this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}function Hh(e){Xn.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Hh.prototype=Object.create(Xn.prototype),Hh.prototype.constructor=Hh,Hh.prototype.isImmediateRenderObject=!0;const Gh=new Xi;class Uh extends Xn{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new Yr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,i=32;e<i;e++,t++){const r=e/i*Math.PI*2,a=t/i*Math.PI*2;n.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}i.setAttribute("position",new Pr(n,3));const r=new vl({fog:!1,toneMapped:!1});this.cone=new Cl(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Gh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Gh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Wh=new Xi,Vh=new _n,Kh=new _n;class Yh extends Cl{constructor(e){const t=function e(t){const i=[];t&&t.isBone&&i.push(t);for(let n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new Yr,n=[],r=[],a=new vr(0,0,1),s=new vr(0,1,0);for(let e=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.setAttribute("position",new Pr(n,3)),i.setAttribute("color",new Pr(r,3));super(i,new vl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");Kh.copy(this.root.matrixWorld).invert();for(let e=0,i=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(Vh.multiplyMatrices(Kh,r.matrixWorld),Wh.setFromMatrixPosition(Vh),n.setXYZ(i,Wh.x,Wh.y,Wh.z),Vh.multiplyMatrices(Kh,r.parent.matrixWorld),Wh.setFromMatrixPosition(Vh),n.setXYZ(i+1,Wh.x,Wh.y,Wh.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}class Zh extends pa{constructor(e,t,i){super(new Jc(t,4,2),new Sr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const qh=new Xi,Xh=new vr,Jh=new vr;class $h extends Xn{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const n=new Hc(t);n.rotateY(.5*Math.PI),this.material=new Sr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=n.getAttribute("position"),a=new Float32Array(3*r.count);n.setAttribute("color",new _r(a,3)),this.add(new pa(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Xh.copy(this.light.color),Jh.copy(this.light.groundColor);for(let e=0,i=t.count;e<i;e++){const n=e<i/2?Xh:Jh;t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}e.lookAt(qh.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Qh extends Cl{constructor(e=10,t=10,i=4473924,n=8947848){i=new vr(i),n=new vr(n);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,c=0,d=-s;e<=t;e++,d+=a){o.push(-s,0,d,s,0,d),o.push(d,0,-s,d,0,s);const t=e===r?i:n;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Yr;c.setAttribute("position",new Pr(o,3)),c.setAttribute("color",new Pr(l,3));super(c,new vl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class eu extends Cl{constructor(e=10,t=16,i=8,n=64,r=4473924,a=8947848){r=new vr(r),a=new vr(a);const s=[],o=[];for(let i=0;i<=t;i++){const n=i/t*(2*Math.PI),l=Math.sin(n)*e,c=Math.cos(n)*e;s.push(0,0,0),s.push(l,0,c);const d=1&i?r:a;o.push(d.r,d.g,d.b),o.push(d.r,d.g,d.b)}for(let t=0;t<=i;t++){const l=1&t?r:a,c=e-e/i*t;for(let e=0;e<n;e++){let t=e/n*(2*Math.PI),i=Math.sin(t)*c,r=Math.cos(t)*c;s.push(i,0,r),o.push(l.r,l.g,l.b),t=(e+1)/n*(2*Math.PI),i=Math.sin(t)*c,r=Math.cos(t)*c,s.push(i,0,r),o.push(l.r,l.g,l.b)}}const l=new Yr;l.setAttribute("position",new Pr(s,3)),l.setAttribute("color",new Pr(o,3));super(l,new vl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const tu=new Xi,iu=new Xi,nu=new Xi;class ru extends Xn{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1);let n=new Yr;n.setAttribute("position",new Pr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new vl({fog:!1,toneMapped:!1});this.lightPlane=new Tl(n,r),this.add(this.lightPlane),n=new Yr,n.setAttribute("position",new Pr([0,0,0,0,0,1],3)),this.targetLine=new Tl(n,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){tu.setFromMatrixPosition(this.light.matrixWorld),iu.setFromMatrixPosition(this.light.target.matrixWorld),nu.subVectors(iu,tu),this.lightPlane.lookAt(iu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iu),this.targetLine.scale.z=nu.length()}}const au=new Xi,su=new wa;class ou extends Cl{constructor(e){const t=new Yr,i=new vl({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],a={},s=new vr(16755200),o=new vr(16711680),l=new vr(43775),c=new vr(16777215),d=new vr(3355443);function p(e,t,i){h(e,i),h(t,i)}function h(e,t){n.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}p("n1","n2",s),p("n2","n4",s),p("n4","n3",s),p("n3","n1",s),p("f1","f2",s),p("f2","f4",s),p("f4","f3",s),p("f3","f1",s),p("n1","f1",s),p("n2","f2",s),p("n3","f3",s),p("n4","f4",s),p("p","n1",o),p("p","n2",o),p("p","n3",o),p("p","n4",o),p("u1","u2",l),p("u2","u3",l),p("u3","u1",l),p("c","t",c),p("p","c",d),p("cn1","cn2",d),p("cn3","cn4",d),p("cf1","cf2",d),p("cf3","cf4",d),t.setAttribute("position",new Pr(n,3)),t.setAttribute("color",new Pr(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){const e=this.geometry,t=this.pointMap;su.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),lu("c",t,e,su,0,0,-1),lu("t",t,e,su,0,0,1),lu("n1",t,e,su,-1,-1,-1),lu("n2",t,e,su,1,-1,-1),lu("n3",t,e,su,-1,1,-1),lu("n4",t,e,su,1,1,-1),lu("f1",t,e,su,-1,-1,1),lu("f2",t,e,su,1,-1,1),lu("f3",t,e,su,-1,1,1),lu("f4",t,e,su,1,1,1),lu("u1",t,e,su,.7,1.1,-1),lu("u2",t,e,su,-.7,1.1,-1),lu("u3",t,e,su,0,2,-1),lu("cf1",t,e,su,-1,0,1),lu("cf2",t,e,su,1,0,1),lu("cf3",t,e,su,0,-1,1),lu("cf4",t,e,su,0,1,1),lu("cn1",t,e,su,-1,0,-1),lu("cn2",t,e,su,1,0,-1),lu("cn3",t,e,su,0,-1,-1),lu("cn4",t,e,su,0,1,-1),e.getAttribute("position").needsUpdate=!0}}function lu(e,t,i,n,r,a,s){au.set(r,a,s).unproject(n);const o=t[e];if(void 0!==o){const e=i.getAttribute("position");for(let t=0,i=o.length;t<i;t++)e.setXYZ(o[t],au.x,au.y,au.z)}}const cu=new Qi;class du extends Cl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Yr;r.setIndex(new _r(i,1)),r.setAttribute("position",new _r(n,3)),super(r,new vl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&cu.setFromObject(this.object),cu.isEmpty())return;const t=cu.min,i=cu.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Cl.prototype.copy.call(this,e),this.object=e.object,this}}class pu extends Cl{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Yr;n.setIndex(new _r(i,1)),n.setAttribute("position",new Pr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new vl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class hu extends Tl{constructor(e,t=1,i=16776960){const n=i,r=new Yr;r.setAttribute("position",new Pr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new vl({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new Yr;a.setAttribute("position",new Pr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new pa(a,new Sr({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?m:f,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const uu=new Xi;let fu,mu;class gu extends Xn{constructor(e,t,i,n,r,a){super(),this.type="ArrowHelper",void 0===e&&(e=new Xi(0,0,1)),void 0===t&&(t=new Xi(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===r&&(r=.2*i),void 0===a&&(a=.2*r),void 0===fu&&(fu=new Yr,fu.setAttribute("position",new Pr([0,0,0,0,1,0],3)),mu=new Zl(0,.5,1,5,1),mu.translate(0,-.5,0)),this.position.copy(t),this.line=new Tl(fu,new vl({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new pa(mu,new Sr({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uu.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(uu,t)}}setLength(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class yu extends Cl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Yr;i.setAttribute("position",new Pr(t,3)),i.setAttribute("color",new Pr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(i,new vl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const vu=new Float32Array(1),wu=new Int32Array(vu.buffer),bu={toHalfFloat:function(e){vu[0]=e;const t=wu[0];let i=t>>16&32768,n=t>>12&2047;const r=t>>23&255;return r<103?i:r>142?(i|=31744,i|=(255==r?0:1)&&8388607&t,i):r<113?(n|=2048,i|=(n>>114-r)+(n>>113-r&1),i):(i|=r-112<<10|n>>1,i+=1&n,i)}},xu=Math.pow(2,8),Su=[.125,.215,.35,.446,.526,.582],Mu=5+Su.length,Tu={[Xt]:0,[Jt]:1,[Qt]:2,[ti]:3,[ii]:4,[ni]:5,[$t]:6},_u=new _p,{_lodPlanes:Ou,_sizeLods:Cu,_sigmas:Eu}=Du();let Au=null;const Ru=(1+Math.sqrt(5))/2,ku=1/Ru,Lu=[new Xi(1,1,1),new Xi(-1,1,1),new Xi(1,1,-1),new Xi(-1,1,-1),new Xi(0,Ru,ku),new Xi(0,Ru,-ku),new Xi(ku,0,Ru),new Xi(-ku,0,Ru),new Xi(Ru,ku,0),new Xi(-Ru,ku,0)];class Iu{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),i=new Xi(0,1,0);return new hd({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i},inputEncoding:{value:Tu[Xt]},outputEncoding:{value:Tu[Xt]}},vertexShader:Fu(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Hu()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:w,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){Au=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Nu(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=ju(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Ou.length;e++)Ou[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Au),e.scissorTest=!1,zu(e,0,0,e.width,e.height)}_fromTexture(e){Au=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:fe,minFilter:fe,generateMipmaps:!1,type:Te,format:He,encoding:Pu(e)?e.encoding:Qt,depthBuffer:!1},i=Bu(t);return i.depthBuffer=!e,this._pingPongRenderTarget=Bu(t),i}_compileMaterial(e){const t=new pa(Ou[0],e);this._renderer.compile(t,_u)}_sceneToCubeUV(e,t,i,n){const r=new ba(90,1,t,i),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.outputEncoding,c=o.toneMapping,d=o.getClearColor(),p=o.getClearAlpha();o.toneMapping=$,o.outputEncoding=Xt;let h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();const t=Math.max(h.r,h.g,h.b),i=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);h=h.multiplyScalar(Math.pow(2,-i));const n=(i+128)/255;o.setClearColor(h,n),e.background=null}for(let t=0;t<6;t++){const i=t%3;0==i?(r.up.set(0,a[t],0),r.lookAt(s[t],0,0)):1==i?(r.up.set(0,0,a[t]),r.lookAt(0,s[t],0)):(r.up.set(0,a[t],0),r.lookAt(0,0,s[t])),zu(n,i*xu,t>2?xu:0,xu,xu),o.setRenderTarget(n),o.render(e,r)}o.toneMapping=c,o.outputEncoding=l,o.setClearColor(d,p)}_textureToCubeUV(e,t){const i=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Nu()):null==this._equirectShader&&(this._equirectShader=ju());const n=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new pa(Ou[0],n),a=n.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=Tu[e.encoding],a.outputEncoding.value=Tu[t.texture.encoding],zu(t,0,0,3*xu,2*xu),i.setRenderTarget(t),i.render(r,_u)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let t=1;t<Mu;t++){const i=Math.sqrt(Eu[t]*Eu[t]-Eu[t-1]*Eu[t-1]),n=Lu[(t-1)%Lu.length];this._blur(e,t-1,t,i,n)}t.autoClear=i}_blur(e,t,i,n,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,"latitudinal",r),this._halfBlur(a,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new pa(Ou[n],l),d=l.uniforms,p=Cu[i]-1,h=isFinite(r)?Math.PI/(2*p):2*Math.PI/39,u=r/h,f=isFinite(r)?1+Math.floor(3*u):20;f>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/u,i=Math.exp(-t*t/2);m.push(i),0==e?g+=i:e<f&&(g+=2*i)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;d.envMap.value=e.texture,d.samples.value=f,d.weights.value=m,d.latitudinal.value="latitudinal"===a,s&&(d.poleAxis.value=s),d.dTheta.value=h,d.mipInt.value=8-i,d.inputEncoding.value=Tu[e.texture.encoding],d.outputEncoding.value=Tu[e.texture.encoding];const y=Cu[n];zu(t,3*Math.max(0,xu-2*y),(0===n?0:2*xu)+2*y*(n>4?n-8+4:0),3*y,2*y),o.setRenderTarget(t),o.render(c,_u)}}function Pu(e){return void 0!==e&&e.type===Te&&(e.encoding===Xt||e.encoding===Jt||e.encoding===$t)}function Du(){const e=[],t=[],i=[];let n=8;for(let r=0;r<Mu;r++){const a=Math.pow(2,n);t.push(a);let s=1/a;r>4?s=Su[r-8+4-1]:0==r&&(s=0),i.push(s);const o=1/(a-1),l=-o/2,c=1+o/2,d=[l,l,c,l,c,c,l,l,c,c,l,c],p=6,h=6,u=3,f=2,m=1,g=new Float32Array(u*h*p),y=new Float32Array(f*h*p),v=new Float32Array(m*h*p);for(let e=0;e<p;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];g.set(n,u*h*e),y.set(d,f*h*e);const r=[e,e,e,e,e,e];v.set(r,m*h*e)}const w=new Yr;w.setAttribute("position",new _r(g,u)),w.setAttribute("uv",new _r(y,f)),w.setAttribute("faceIndex",new _r(v,m)),e.push(w),n>4&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:i}}function Bu(e){const t=new Yi(3*xu,3*xu,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function zu(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function ju(){return new hd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Ni(1,1)},inputEncoding:{value:Tu[Xt]},outputEncoding:{value:Tu[Xt]}},vertexShader:Fu(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Hu()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:w,depthTest:!1,depthWrite:!1})}function Nu(){return new hd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Tu[Xt]},outputEncoding:{value:Tu[Xt]}},vertexShader:Fu(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Hu()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:w,depthTest:!1,depthWrite:!1})}function Fu(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Hu(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Gu(e,t,i,n,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new wr(e,t,i,r,a,s)}const Uu=0,Wu=1,Vu=0,Ku=1,Yu=2;function Zu(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function qu(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Xu(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Pl(e,t)}function Ju(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new nl(e)}function $u(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Pl(e,t)}function Qu(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Al(e)}function ef(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Al(e)}function tf(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Al(e)}function nf(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Xi(e,t,i)}function rf(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new _r(e,t).setUsage(_i)}function af(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Or(e,t)}function sf(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Cr(e,t)}function of(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Er(e,t)}function lf(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ar(e,t)}function cf(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Rr(e,t)}function df(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new kr(e,t)}function pf(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Lr(e,t)}function hf(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Pr(e,t)}function uf(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Dr(e,t)}function ff(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),np.call(this,e),this.type="catmullrom",this.closed=!0}function mf(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),np.call(this,e),this.type="catmullrom"}function gf(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),np.call(this,e),this.type="catmullrom"}function yf(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yu(e)}function vf(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new du(e,t)}function wf(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Cl(new ac(e.geometry),new vl({color:void 0!==t?t:16777215}))}function bf(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Cl(new cd(e.geometry),new vl({color:void 0!==t?t:16777215}))}function xf(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Gd(e)}function Sf(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Yd(e)}function Mf(e,t,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Ma(e,i)}qd.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(qd.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(mp.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Wl;for(let i=0,n=e.length;i<n;i++){const n=e[i];t.vertices.push(new Xi(n.x,n.y,n.z||0))}return t}}),Object.assign(gp.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),ff.prototype=Object.create(np.prototype),mf.prototype=Object.create(np.prototype),gf.prototype=Object.create(np.prototype),Object.assign(gf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Qh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Yh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Fd.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ip.extractUrlBase(e)}}),Fd.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(zh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Qi.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(gn.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Ca.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Fh.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(ji,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ji.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ji.ceilPowerOfTwo(e)}}),Object.assign(Fi.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),Object.assign(_n.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Xi).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,a)},getInverse:function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),er.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Object.assign(qi.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Tn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(pr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(pr,{barycoordFromPoint:function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pr.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pr.getNormal(e,t,i,n)}}),Object.assign(yp.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Bc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Xc(this,e)}}),Object.assign(Ni.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xi.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ki.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Wl.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(Xn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Xn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(pa.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(pa.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Yt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(ol.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(hl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ll.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(qd.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ba.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(vp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(_r.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===_i},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(_i)}}}),Object.assign(_r.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?_i:Ti),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Yr.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new _r(arguments[1],arguments[2])))},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Yr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Pp.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(kh.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Fo.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===_i},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Fo.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?_i:Ti),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Pc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(No.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Eh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(xr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===y}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(md.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fd.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(va.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Do.prototype,{clearTarget:function(e,t,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,i,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Do.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Jt:Xt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Oo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(oh.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Zp).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),uh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},xa.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},xa.prototype.clear=function(e,t,i,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,i,n)};const Tf={merge:function(e,t,i){let n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function _f(){console.error("THREE.CanvasRenderer has been removed")}function Of(){console.error("THREE.JSONLoader has been removed.")}Gi.crossOrigin=void 0,Gi.loadTexture=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Zd;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,i,void 0,n);return t&&(a.mapping=t),a},Gi.loadTextureCube=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Kd;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,i,void 0,n);return t&&(a.mapping=t),a},Gi.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Gi.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Cf={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Ef(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}}))},,function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t,i){var n=i(5);t.createCodec=o,t.install=function(e){for(var t in e)a.prototype[t]=s(a.prototype[t],e[t])},t.filter=function(e){return n(e)?function(e){function t(e,t){return t(e)}return e=e.slice(),function(i){return e.reduce(t,i)}}(e):e};var r=i(0);function a(e){return this instanceof a?(this.options=e,void this.init()):new a(e)}function s(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function o(e){return new a(e)}a.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=r.Uint8Array),this},t.preset=o({preset:!0})},function(e,t,i){var n=i(8).ExtBuffer,r=i(41),a=i(42),s=i(6);function o(){var e=this.options;return this.encode=function(e){var t=a.getWriteType(e);return function(e,i){var n=t[typeof i];if(!n)throw new Error('Unsupported type "'+typeof i+'": '+i);n(e,i)}}(e),e&&e.preset&&r.setExtPackers(this),this}s.install({addExtPacker:function(e,t,i){function r(t){return i&&(t=i(t)),new n(t,e)}i=s.filter(i);var a=t.name;if(a&&"Object"!==a){(this.extPackers||(this.extPackers={}))[a]=r}else{(this.extEncoderList||(this.extEncoderList=[])).unshift([t,r])}},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),i=e.constructor,n=i&&i.name&&t[i.name];if(n)return n;for(var r,a=this.extEncoderList||(this.extEncoderList=[]),s=a.length,o=0;o<s;o++)if(r=a[o],i===r[0])return r[1]},init:o}),t.preset=o.call(s.preset)},function(e,t,i){t.ExtBuffer=function e(t,i){return this instanceof e?(this.buffer=n.from(t),void(this.type=i)):new e(t,i)};var n=i(0)},function(e,t){t.read=function(e,t,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,c=l>>1,d=-7,p=i?r-1:0,h=i?-1:1,u=e[t+p];for(p+=h,a=u&(1<<-d)-1,u>>=-d,d+=o;0<d;a=256*a+e[t+p],p+=h,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=n;0<d;s=256*s+e[t+p],p+=h,d-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(u?-1:1);s+=Math.pow(2,n),a-=c}return(u?-1:1)*s*Math.pow(2,a-n)},t.write=function(e,t,i,n,r,a){var s,o,l,c=8*a-r-1,d=(1<<c)-1,p=d>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:a-1,f=n?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),1>t*(l=Math.pow(2,-s))&&(s--,l*=2),2<=(t+=1<=s+p?h/l:h*Math.pow(2,1-p))*l&&(s++,l/=2),s+p>=d?(o=0,s=d):1<=s+p?(o=(t*l-1)*Math.pow(2,r),s+=p):(o=t*Math.pow(2,p-1)*Math.pow(2,r),s=0));8<=r;e[i+u]=255&o,u+=f,o/=256,r-=8);for(s=s<<r|o,c+=r;0<c;e[i+u]=255&s,u+=f,s/=256,c-=8);e[i+u-f]|=128*m}},function(e,t,i){var n,r=i(40);t.copy=c,t.slice=d,t.toString=function(){var e=!o&&a.isBuffer(this)?this.toString:r.toString;return e.apply(this,arguments)},t.write=(n="write",function(){var e=this[n]||r[n];return e.apply(this,arguments)});var a=i(0),s=a.global,o=a.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,l=o&&!s.TYPED_ARRAY_SUPPORT;function c(e,t,i,n){var s=a.isBuffer(this),o=a.isBuffer(e);if(s&&o)return this.copy(e,t,i,n);if(!l&&!s&&!o&&a.isView(this)&&a.isView(e)){var c=i||null!=n?d.call(this,i,n):this;return e.set(c,t),c.length}return r.copy.call(this,e,t,i,n)}function d(e,t){var i=this.slice||!l&&this.subarray;if(i)return i.call(this,e,t);var n=a.alloc.call(this,t-e);return c.call(this,n,0,e,t),n}},function(e,t,i){(function(e){!function(t){function i(e,i,v){function w(e,t,i,n){return this instanceof w?function(e,t,i,n,r){if(m&&g&&(t instanceof g&&(t=new m(t)),n instanceof g&&(n=new m(n))),!(t||i||n||u))return void(e.buffer=l(y,0));if(!s(t,i)){r=i,n=t,i=0,t=new(u||Array)(8)}e.buffer=t,e.offset=i|=0,void 0===n||("string"==typeof n?function(e,t,i,n){var r=0,a=i.length,s=0,o=0;"-"===i[0]&&r++;for(var l,c=r;r<a&&0<=(l=parseInt(i[r++],n));)o=o*n+l,s=s*n+Math.floor(o/4294967296),o%=4294967296;c&&(s=~s,o?o=4294967296-o:s++),x(e,t+M,s),x(e,t+T,o)}(t,i,n,r||10):s(n,r)?o(t,i,n,r):"number"==typeof r?(x(t,i+M,n),x(t,i+T,r)):0<n?A(t,i,n):0>n?R(t,i,n):o(t,i,y,0))}(this,e,t,i,n):new w(e,t,i,n)}function b(){var e=this.buffer,t=this.offset,i=S(e,t+M),n=S(e,t+T);return v||(i|=0),i?4294967296*i+n:n}function x(e,t,i){e[t+E]=255&i,i>>=8,e[t+C]=255&i,i>>=8,e[t+O]=255&i,i>>=8,e[t+_]=255&i}function S(e,t){return 16777216*e[t+_]+(e[t+O]<<16)+(e[t+C]<<8)+e[t+E]}var M=i?0:4,T=i?4:0,_=i?0:3,O=i?1:2,C=i?2:1,E=i?3:0,A=i?c:p,R=i?d:h,k=w.prototype,L="is"+e,I="_"+L;return k.buffer=void 0,k.offset=0,k[I]=!0,k.toNumber=b,k.toString=function(e){var t=this.buffer,i=this.offset,n=S(t,i+M),r=S(t,i+T),a="",s=!v&&2147483648&n;for(s&&(n=~n,r=4294967296-r),e=e||10;;){var o=n%e*4294967296+r;if(n=Math.floor(n/e),r=Math.floor(o/e),a=(o%e).toString(e)+a,!n&&!r)break}return s&&(a="-"+a),a},k.toJSON=b,k.toArray=n,f&&(k.toBuffer=r),m&&(k.toArrayBuffer=a),w[L]=function(e){return!(!e||!e[I])},t[e]=w,w}function n(e){var t=this.buffer,i=this.offset;return u=null,!1!==e&&0===i&&8===t.length&&v(t)?t:l(t,i)}function r(t){var i=this.buffer,n=this.offset;if(u=f,!1!==t&&0===n&&8===i.length&&e.isBuffer(i))return i;var r=new f(8);return o(r,0,i,n),r}function a(e){var t=this.buffer,i=this.offset,n=t.buffer;if(u=m,!1!==e&&0===i&&n instanceof g&&8===n.byteLength)return n;var r=new m(8);return o(r,0,t,i),r.buffer}function s(e,t){var i=e&&e.length;return t|=0,i&&t+8<=i&&"string"!=typeof e[t]}function o(e,t,i,n){t|=0,n|=0;for(var r=0;8>r;r++)e[t++]=255&i[n++]}function l(e,t){return Array.prototype.slice.call(e,t,t+8)}function c(e,t,i){for(var n=t+8;n>t;)e[--n]=255&i,i/=256}function d(e,t,i){var n=t+8;for(i++;n>t;)e[--n]=255^255&-i,i/=256}function p(e,t,i){for(var n=t+8;t<n;)e[t++]=255&i,i/=256}function h(e,t,i){var n=t+8;for(i++;t<n;)e[t++]=255^255&-i,i/=256}var u,f=void 0!==e&&e,m="undefined"!=typeof Uint8Array&&Uint8Array,g="undefined"!=typeof ArrayBuffer&&ArrayBuffer,y=[0,0,0,0,0,0,0,0],v=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)};i("Uint64BE",!0,!0),i("Int64BE",!0,!1),i("Uint64LE",!1,!0),i("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})}).call(this,i(21).Buffer)},function(e,t,i){var n=i(8).ExtBuffer,r=i(44),a=i(26).readUint8,s=i(45),o=i(6);function l(){var e=this.options;return this.decode=function(e){var t=s.getReadToken(e);return function(e){var i=a(e),n=t[i];if(!n)throw new Error("Invalid type: "+(i?"0x"+i.toString(16):i));return n(e)}}(e),e&&e.preset&&r.setExtUnpackers(this),this}o.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=o.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new n(t,e)}},init:l}),t.preset=l.call(o.preset)},function(e,t,i){const n=i(2);e.exports.premium="#FBC02D",e.exports.partner="#993299",e.exports.verified={clan:"#FBC02D",player:"#40C4FF"},e.exports.challLvl=[],e.exports.getChallCol=function(e,t){return 30<e?"rgb":20<e?"#fb2d2d":15<e?"#c12dfb":10<e?"#fb942d":!t&&"white"},e.exports.getClanCol=function(e,t,i){return"DEV"==e?"#40C4FF":1==t?"rgb":n.inRange(t,2,3)?"#292929":n.inRange(t,4,10)?"#eb3437":n.inRange(t,11,20)?"#FBC02D":n.inRange(t,21,30)?"#e834eb":n.inRange(t,31,50)?"#349ceb":i},e.exports.easterPalette=["#ffd45e","#61fff7","#ff63d8"],e.exports.damage="#DE292F",e.exports.critical="#FFD542",e.exports.ready="#32CD32",e.exports.crosshair={background:"#ffffff",shadow:"#000000"},e.exports.hudHealth={low:"#eb5656",high:"#9eeb56"},e.exports.popupScore="#ffea78",e.exports.ping={low:"rgb(158, 235, 86)",medium:"rgb(255, 213, 66)",high:"rgb(255, 75, 66)"},e.exports.teams=["#9eeb56","#eb5656"],e.exports.creationDate={new:"#0a61f7",recent:"#E040FB",old:"#ed4242"},e.exports.matchVote={selected:"rgba(251, 192, 45, 1)",notSelected:"rgba(255, 255, 255, 0.7)"},e.exports.killFeed={enemy:"#eb5656",ally:"#9eeb56",you:"#fff"},e.exports.interactPopup={key:"#FBC02D",enough:"#9eeb56",notEnough:"#eb5656"},e.exports.modeSpecific={infected:{skin:5857617},stalker:{skin:0,body:[0,0,0,0,0,0]}},e.exports.zones={BR:["#c542d9","#c542d9","#c542d9"],sky:["#74a4b9","#dce8ed","#dce8ed"]}},,function(e,t){var i,n,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l,c=[],d=!1,p=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):p=-1,c.length&&u())}function u(){if(!d){var e=o(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new f(e,t)),1!==c.length||d||o(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,function(e,t){e.exports.wheels=[{name:"Starter",headCol:"#b2f252",price:50,icons:2,rarities:[75,22,3,0,0,0],getRarities:function(){return this.rarities}},{name:"Elite",headCol:"#2196F3",price:100,icons:3,rarities:[50,30,15,5,0,0],getRarities:function(){return this.rarities}},{name:"Heroic",headCol:"#fc9803",price:500,icons:4,bigRar:5,rarities:[0,48,35,14,2.49,.5,.01],getRarities:function(){return this.rarities}},{name:"Valour",locked:!0,icons:1,rarities:[43,33,16,6,2,0],getRarities:function(){return this.rarities}},{name:"Free",free:!0,hideMobile:!0,openURL:!0,minLvl:5,price:0,priceT:"Follow",priceCol:"#00eaff",icons:3,rarities:[0,48,35,14,3,0],getRarities:function(){return this.rarities}},{name:"Free KR",free:!0,kr:!0,hideMobile:!0,minLvl:1,price:0,priceCol:"#00eaff",adjRars:!0,rarities:[50,39,10,1,0,0],getRarities:function(){return this.rarities}},{name:"Twitch",price:0,hideMobile:!0,priceT:"Redeem",priceCol:"#00eaff",limType:"Charity",twitch:!0,icons:0,getRarities:function(){return[0,45,35,17,3,0]}}],e.exports.events={Debug:"#000000",Easter:null,"Twitch #1":"#6441a5","Twitch #2":"#6441a5","Twitch #3":"#6441a5","Clan Wars":null,Charity:"#6441a5",Raid:"#eb347a",Canteen:"#fe4002",Gift:null,Free:null},e.exports.types=["weapons/weapon_","hats/hat_","body/body_","melee/melee_","sprays/","dyes/","waist/waist_","faces/face_","shoes/shoe_"],e.exports.purchases=[{val:300,priceS:.99,price:.99},{val:600,priceS:1.79,price:1.79},{val:2600,priceS:7.49,price:7.49},{val:7e3,priceS:15.99,price:15.99},{val:2e4,priceS:34.99,price:34.99,tag:"Popular!",tagCol:"#ed4242"},{val:6e4,priceS:99.99,tag:"Best Value!",tagCol:"#E040FB",price:99.99}],e.exports.mobilePurchases=[{val:300,price:.99,productId:"ch.yendis.krunkerhub.kr300"},{val:600,price:1.79,productId:"ch.yendis.krunkerhub.kr600"},{val:2600,price:7.49,productId:"ch.yendis.krunkerhub.kr2600"},{val:7e3,price:15.99,productId:"ch.yendis.krunkerhub.kr7000"},{val:2e4,price:34.99,productId:"ch.yendis.krunkerhub.kr20000",tag:"Popular!",tagCol:"#ed4242"},{val:6e4,price:99.99,productId:"ch.yendis.krunkerhub.kr60000",tag:"Best Value!",tagCol:"#E040FB"}],e.exports.premium=[{val:7,price:2e3,tag:"Starter",tagCol:"#42ed56",headCol:"#2196F3"},{val:30,price:7500,tag:"Popular!",tagCol:"#ed4242",headCol:"#2196F3"},{val:60,price:14e3,headCol:"#E040FB"},{val:90,price:19e3,tag:"Best Value!",tagCol:"#E040FB",headCol:"#fc9803"}],e.exports.lootRars=[0,0,70,25.5,4,.5,0],e.exports.rarities=[{name:"Uncommon",rar:60,color:"#b2f252",confC:30,confCols:["#b2f252","#fff"],sell:1,fee:5},{name:"Rare",rar:40,color:"#2196F3",confC:30,confCols:["#2196F3","#fff"],sell:3,fee:5},{name:"Epic",rar:25,color:"#E040FB",confC:30,confCols:["#E040FB","#fff"],sell:10,fee:5},{name:"Legendary",rar:10,color:"#FBC02D",confC:40,confCols:["#FBC02D","#fff"],sell:100,fee:10},{name:"Relic",rar:2.5,color:"#ed4242",confC:50,confCols:["#ed4242","#fff"],sell:500,fee:10},{name:"Contraband",rar:.5,color:"#292929",confC:70,confCols:["#292929","#fff"],sell:2500,fee:25},{name:"Unobtainable",rar:0,color:"#fff53d",confC:100,confCols:["#ff0000","#ffa500","#ffff00","#008000","#0000ff","#4b0082","#ee82ee"],animate:!0,sell:1e4,fee:200}],e.exports.getSpnItems=function(t,i,n,r,a){i=i||0;var s=[],o=t.itemTypes,l=t.limType,c=t.weaponType;if(t.itemIndexs)return t.itemIndexs;for(var d=0;d<e.exports.skins.length;++d)e.exports.skins[d]&&!e.exports.skins[d].limited&&!e.exports.skins[d].blocked&&!e.exports.skins[d].noSpin&&!e.exports.skins[d].illicit&&(e.exports.skins[d].rarity==i||a&&e.exports.skins[d].rarity>=a)&&(!l||l==e.exports.skins[d].limT)&&(l||!e.exports.skins[d].limT)&&!(o&&0>o.indexOf(e.exports.skins[d].type||0))&&(!e.exports.skins[d].minRec||e.exports.skins[d].minRec&&n&&n.level<e.exports.skins[d].minRec)&&(e.exports.skins[d].mSeas||(e.exports.skins[d].seas||1)==r.currentSeason)&&(null==c||c==e.exports.skins[d].weapon)&&s.push(d);return s},e.exports.calcTradeFee=function(t){for(var i,n=0,r=0;r<t.length;++r)(i=e.exports.skins[t[r]])&&(n+=e.exports.rarities[i.rarity].fee||0);return n},e.exports.getFreeKR=function(t){return{kr:e.exports.freeKR[t].kr[0],rarity:e.exports.freeKR[t].rarity}},e.exports.freeKR=[{kr:[5],rarity:0},{kr:[10],rarity:1},{kr:[20],rarity:2},{kr:[500],rarity:3}],e.exports.previews={1:{xOff:-2,yOff:-2.6,zRota:.2,scl:.001376794727638135},2:{xOff:-1.4,yOff:-.8,scl:.001148941748743716},3:{xOff:0,yOff:-.2,scl:.000676917226130652},4:{xOff:-1.5,yOff:.5,scl:.000940741507537686},5:{xOff:-.8,yOff:.5,scl:.00079312502512562},6:{xOff:-1,yOff:-1.1,scl:1.2},7:{xOff:-1,yOff:-.9,scl:.001221518472361808},8:{xOff:-1,yOff:-.6,scl:.0012179208743718641},9:{xOff:-1.2,yOff:-1,scl:.0010676876984924638},10:{scl:1.6},14:{yOff:-2.5,scl:.0007874150753768881},15:{scl:.00098426884422111},16:{scl:1.4,yOff:1,xOff:-1},17:{xOff:0,yOff:-.2,scl:3e-4},19:{xOff:-1.4,yOff:-.8,scl:.0009095788844221084}},e.exports.skins=[{name:"Arctic Hunt",id:0,weapon:1,rarity:1},{name:"Autumn Hunt",id:1,weapon:1,rarity:1},{name:"Reticle Blaze",id:2,weapon:1,rarity:2},{name:"Digital Hunt",id:3,weapon:1,rarity:0},{name:"Moon Dragon",id:4,weapon:1,rarity:3},{name:"Scharfschütze",id:5,weapon:1,rarity:1},{name:"Woodland Sniper",id:6,weapon:1,rarity:0},{name:"Hazard Reticle",id:7,weapon:1,rarity:1},{name:"Kodac Reticle",id:8,weapon:1,rarity:1},{name:"Seafarer",id:9,weapon:1,rarity:0},{name:"Acid Breath",glow:!0,id:10,weapon:1,rarity:3},{name:"Trail Scout",id:11,weapon:1,rarity:0},{name:"Arctic AK",id:0,weapon:2,rarity:1},{name:"Autumn AK",id:1,weapon:2,rarity:1},{name:"Blaze AK",id:2,weapon:2,rarity:2},{name:"Digital AK",id:3,weapon:2,rarity:0},{name:"Luna Dragon",id:4,weapon:2,rarity:3},{name:"Flecken AK",id:5,weapon:2,rarity:1},{name:"Woodland AK",id:6,weapon:2,rarity:0},{name:"Hazard AK",id:7,weapon:2,rarity:1},{name:"Kodac AK",id:8,weapon:2,rarity:1},{name:"Seafarer AK",id:9,weapon:2,rarity:0},{name:"Trail AK",id:10,weapon:2,rarity:0},{name:"SMG Arctic",id:0,weapon:4,rarity:1},{name:"SMG Autumn",id:1,weapon:4,rarity:1},{name:"SMG Blaze",id:2,weapon:4,rarity:2},{name:"SMG Digital",id:3,weapon:4,rarity:0},{name:"SMG Flecken",id:4,weapon:4,rarity:1},{name:"SMG Woodland",id:5,weapon:4,rarity:0},{name:"SMG Hazard",id:6,weapon:4,rarity:1},{name:"SMG Kodac",id:7,weapon:4,rarity:1},{name:"SMG Seafarer",id:8,weapon:4,rarity:0},{name:"SMG Trail",id:9,weapon:4,rarity:0},{name:"Arctic Python",id:0,weapon:5,rarity:1},{name:"Autumn Python",id:1,weapon:5,rarity:1},{name:"Blaze Python",id:2,weapon:5,rarity:2},{name:"Digital Python",id:3,weapon:5,rarity:0},{name:"Flecken Python",id:4,weapon:5,rarity:1},{name:"Woodland",id:5,weapon:5,rarity:0},{name:"Hazard Python",id:6,weapon:5,rarity:1},{name:"Kodac Python",id:7,weapon:5,rarity:1},{name:"Seafarer",id:8,weapon:5,rarity:0},{name:"Trail Python",id:9,weapon:5,rarity:0},{name:"Arctic Slug",id:0,weapon:6,rarity:1},{name:"Autumn Slug",id:1,weapon:6,rarity:1},{name:"Twin Blaze",id:2,weapon:6,rarity:2},{name:"SG Digital",id:3,weapon:6,rarity:0},{name:"Flecken",id:4,weapon:6,rarity:1},{name:"Woodland",id:5,weapon:6,rarity:0},{name:"Hazard Slug",id:6,weapon:6,rarity:1},{name:"Kodac Slug",id:7,weapon:6,rarity:1},{name:"Buccaneer",id:8,weapon:6,rarity:0},{name:"SG Trail",id:9,weapon:6,rarity:0},{name:"Arctic LMG",id:0,weapon:7,rarity:1},{name:"Autumn LMG",id:1,weapon:7,rarity:1},{name:"Blaze LMG",id:2,weapon:7,rarity:2},{name:"Digital LMG",id:3,weapon:7,rarity:0},{name:"Flecken LMG",id:4,weapon:7,rarity:1},{name:"Woodland LMG",id:5,weapon:7,rarity:0},{name:"Hazard LMG",id:6,weapon:7,rarity:1},{name:"Kodac LMG",id:7,weapon:7,rarity:1},{name:"Seafarer LMG",id:8,weapon:7,rarity:0},{name:"Trail LMG",id:9,weapon:7,rarity:0},{name:"Arctic Auto",id:0,weapon:8,rarity:1},{name:"Autumn Auto",id:1,weapon:8,rarity:1},{name:"Blaze Auto",id:2,weapon:8,rarity:2},{name:"Digital Auto",id:3,weapon:8,rarity:0},{name:"Flecken Auto",id:4,weapon:8,rarity:1},{name:"Woodland Auto",id:5,weapon:8,rarity:0},{name:"Hazard Auto",id:6,weapon:8,rarity:1},{name:"Kodac Auto",id:7,weapon:8,rarity:1},{name:"Seafarer Auto",id:8,weapon:8,rarity:0},{name:"Trail Auto",id:9,weapon:8,rarity:0},{name:"Mach Auto",id:10,creator:"AtarSt",weapon:8,rarity:1},{name:"Arctic RL",id:0,weapon:9,rarity:1},{name:"Autumn RL",id:1,weapon:9,rarity:1},{name:"Blaze RL",id:2,weapon:9,rarity:2},{name:"Digital RL",id:3,weapon:9,rarity:0},{name:"Flecken RL",id:4,weapon:9,rarity:1},{name:"Woodland RL",id:5,weapon:9,rarity:0},{name:"Hazard RL",id:6,weapon:9,rarity:1},{name:"Kodac RL",id:7,weapon:9,rarity:1},{name:"Seafarer RL",id:8,weapon:9,rarity:0},{name:"Trail RL",id:9,weapon:9,rarity:0},{name:"101 Skullbreaker",id:12,weapon:1,rarity:3},{name:"Reticle Faded",id:13,weapon:1,rarity:0},{name:"Puma Sniper",id:14,weapon:1,rarity:0},{name:"Scoped Elite",id:15,weapon:1,rarity:2},{name:"Faded AK",id:11,weapon:2,rarity:0},{name:"Puma AR",id:12,weapon:2,rarity:1},{name:"SMG Fade",id:10,weapon:4,rarity:0},{name:"SMG Puma",id:11,weapon:4,rarity:1},{name:"Faded Python",id:10,weapon:5,rarity:0},{name:"Puma Python",id:11,weapon:5,rarity:1},{name:"SG Fade",id:10,weapon:6,rarity:0},{name:"Slug Puma",id:11,weapon:6,rarity:1},{name:"Faded LMG",id:10,weapon:7,rarity:0},{name:"Puma LMG",id:11,weapon:7,rarity:1},{name:"Faded MMR",id:11,weapon:8,rarity:0},{name:"Puma MMR",id:12,weapon:8,rarity:1},{name:"Faded RTL",id:10,weapon:9,rarity:0},{name:"Puma RTL",id:11,weapon:9,rarity:1},{name:"Scoped Carbon",id:16,weapon:1,rarity:0},{name:"Carbon AK",id:13,weapon:2,rarity:0},{name:"SMG Carbon",id:12,weapon:4,rarity:0},{name:"Carbon Python",id:12,weapon:5,rarity:0},{name:"SG Carbon",id:12,weapon:6,rarity:0},{name:"Carbon LMG",id:12,weapon:7,rarity:0},{name:"Carbon MMR",id:13,weapon:8,rarity:0},{name:"Carbon RTL",id:12,weapon:9,rarity:0},{name:"Neon Ripper",id:14,glow:!0,weapon:2,rarity:4},{name:"Top Hat",type:1,keyW:"Head",scl:2.5,sitOff:.4,yOff:-4,id:1,rarity:2},{name:"SMG Spitfire",id:13,weapon:4,rarity:3},{name:"Cowboy Hat",type:1,keyW:"Head",scl:2.5,sitOff:.4,yOff:-3,id:0,rarity:0},{name:"Flame Tamer",id:13,pulsT:.0015,weapon:5,glow:!0,rarity:5},{name:"Cool Cap",type:1,keyW:"Head",scl:2.5,sitOff:.4,yOff:-3,xOff:2,id:2,rarity:1},{name:"Jack O' Lantern",type:1,keyW:"Head",scl:2.8,glow:!0,sclMlt:1.4,sitOff:2.05,yOff:-4,id:3,rarity:3},{name:"Medic Helmet",type:1,keyW:"Head",scl:2.8,sclMlt:1,sitOff:.65,yOff:-2.5,id:4,rarity:2},{name:"Neon Reaver",creator:"Electrode_",id:17,glow:!0,weapon:1,rarity:4},{name:"Sun Glasses",type:1,keyW:"Head",scl:2.8,sclMlt:1,sitOff:2.3,yOff:-5,xOff:2,id:5,rarity:0},{name:"Afro",type:1,keyW:"Head",scl:2,sclMlt:.9,sitOff:1.4,yOff:-4,id:6,rarity:0},{name:"Hard Hat",type:1,keyW:"Head",scl:3,sitOff:.4,yOff:-3,id:7,rarity:0},{name:"Zombie Head",type:1,keyW:"Head",scl:2.8,glow:!0,sclMlt:1.2,sitOff:2.05,yOff:-4,id:8,rarity:3},{name:"Barbed Rifle",id:18,weapon:1,rarity:2},{name:"Blushed Sniper",id:19,weapon:1,rarity:0},{name:"AWP Mech",id:20,weapon:1,rarity:1},{name:"Olympus Rifle",id:21,weapon:1,rarity:2},{name:"Scoped Tuscan",id:22,weapon:1,rarity:1},{name:"AWP Pacemaker",id:23,weapon:1,rarity:4,glow:!0},{name:"AR Wired",id:15,weapon:2,rarity:2},{name:"Blushed AK",id:16,weapon:2,rarity:0},{name:"Mach Rifle",id:17,weapon:2,rarity:1},{name:"Olympus Rifle",id:18,weapon:2,rarity:2},{name:"AR Tuscan",id:19,weapon:2,rarity:1},{name:"SMG Barbed",id:14,weapon:4,rarity:2},{name:"SMG Blossom",id:15,weapon:4,rarity:0},{name:"SMG Machinist",id:16,weapon:4,rarity:1},{name:"SMG Lazarus",id:17,weapon:4,rarity:2},{name:"SMG Tuscan",id:18,weapon:4,rarity:1},{name:"Barbed Python",id:14,weapon:5,rarity:2},{name:"Blushed Revolver",id:15,weapon:5,rarity:0},{name:"Machinist Python",id:16,weapon:5,rarity:1},{name:"REV Olympus",id:17,weapon:5,rarity:2},{name:"Tuscan Revolver",id:18,weapon:5,rarity:1},{name:"Coach Barb",id:13,weapon:6,rarity:2},{name:"Blossom",id:14,weapon:6,rarity:0},{name:"MD Frag",id:15,weapon:6,rarity:1},{name:"SG Olympus",id:16,weapon:6,rarity:2},{name:"SG Tuscan",id:17,weapon:6,rarity:1},{name:"Blushed LMG",id:13,weapon:7,rarity:0},{name:"Machinist LMG",id:14,weapon:7,rarity:1},{name:"Olympus LMG",id:15,weapon:7,rarity:2},{name:"Tuscan LMG",id:16,weapon:7,rarity:1},{name:"Barbed Auto",id:14,weapon:8,rarity:2},{name:"Blushed MMA",id:15,weapon:8,rarity:0},{name:"Auto Machinist",id:16,weapon:8,rarity:1},{name:"Olympus MMA",id:17,weapon:8,rarity:2},{name:"Tuscan MMA",id:18,weapon:8,rarity:1},{name:"Barbed Launcher",id:13,weapon:9,rarity:2},{name:"Blushed Launcher",id:14,weapon:9,rarity:0},{name:"Machinist Launcher",id:15,weapon:9,rarity:1},{name:"Olympus Launcher",id:16,weapon:9,rarity:2},{name:"Tuscan Launcher",id:17,weapon:9,rarity:1},{name:"Omen",glow:!0,id:24,creator:"Zino",weapon:1,rarity:3},{name:"Scoped Moss",id:25,weapon:1,rarity:0},{name:"Swamped Scope",id:26,weapon:1,rarity:0},{name:"Tiger Bolt",id:27,weapon:1,rarity:2},{name:"Zebra Bolt",id:28,weapon:1,rarity:2},{name:"Necron Bolt",id:29,weapon:1,rarity:4,glow:!0},{name:"Lava Bolt",id:30,weapon:1,rarity:3},{name:"Sky Bolt",id:31,weapon:1,rarity:2},{name:"AWP Iris",id:32,weapon:1,rarity:1},{name:"Bolt Wanderer",id:33,weapon:1,rarity:1},{name:"Mossy Rifle",id:20,weapon:2,rarity:1},{name:"Swamped AK",id:21,weapon:2,rarity:0},{name:"Tiger Rifle",id:22,weapon:2,rarity:2},{name:"Zebra Rifle",id:23,weapon:2,rarity:2},{name:"Plasma Rifle",id:24,weapon:2,rarity:4,glow:!0},{name:"Lava Rifle",id:25,weapon:2,glow:!0,rarity:3},{name:"Sky Rifle",id:26,weapon:2,rarity:2},{name:"Bark AK",id:27,weapon:2,rarity:0},{name:"Rifle Wanderer",id:28,weapon:2,rarity:0},{name:"SMG Growth",id:19,weapon:4,rarity:1},{name:"SMG Marsh",id:20,weapon:4,rarity:0},{name:"SMG Tigris",id:21,weapon:4,rarity:2},{name:"SMG Safari",id:22,weapon:4,rarity:2},{name:"Rapid Plasma",id:23,weapon:4,rarity:4,glow:!0},{name:"Lava SMG",id:24,weapon:4,rarity:3,glow:!0},{name:"UMP Atmos",id:25,weapon:4,rarity:2},{name:"Birch SMG",id:26,weapon:4,rarity:0},{name:"SMG Wanderer",id:27,weapon:4,rarity:0},{name:"Mossy Python",id:19,weapon:5,rarity:1},{name:"Swamped Revolver",id:20,weapon:5,rarity:0},{name:"Tiger Python",id:21,weapon:5,rarity:2},{name:"Zebra Python",id:22,weapon:5,rarity:2},{name:"Venomous",creator:"Rengar",glow:!0,id:23,weapon:5,rarity:3},{name:"Lava Revolver",id:24,weapon:5,rarity:3},{name:"Sky Python",id:25,weapon:5,rarity:2,glow:!0},{name:"Bark Python",id:26,weapon:5,rarity:0},{name:"Wanderer Python",id:27,weapon:5,rarity:0},{name:"Gabrand",id:19,weapon:6,rarity:1},{name:"Tennessee",id:20,weapon:6,rarity:0},{name:"SG Tigris",id:21,weapon:6,rarity:2},{name:"Safaris",id:22,weapon:6,rarity:2},{name:"Neuromance",id:23,weapon:6,rarity:4,glow:!0},{name:"Anatomis",id:24,weapon:6,rarity:3,glow:!0},{name:"Sky Pump",id:25,weapon:6,rarity:2},{name:"Bark Slug",id:26,weapon:6,rarity:0},{name:"Slug Wanderer",id:27,weapon:6,rarity:0},{name:"Mossy LMG",id:17,weapon:7,rarity:1},{name:"Swamped LMG",id:18,weapon:7,rarity:0},{name:"Tiger LMG",id:19,weapon:7,rarity:2},{name:"Zebra LMG",id:20,weapon:7,rarity:2},{name:"Heavy Plasma",id:21,weapon:7,rarity:4,glow:!0},{name:"Lava LMG",id:22,weapon:7,rarity:3},{name:"Sky LMG",id:23,weapon:7,rarity:2,glow:!0},{name:"Bark LMG",id:24,weapon:7,rarity:0},{name:"LMG Wanderer",id:25,weapon:7,rarity:0},{name:"Overgrowth",id:19,weapon:8,rarity:1},{name:"Marshland",id:20,weapon:8,rarity:0},{name:"Tiger MMA",id:21,weapon:8,rarity:2},{name:"Zebra MMA",id:22,weapon:8,rarity:2},{name:"MMA Plasma",id:23,weapon:8,rarity:4,glow:!0},{name:"Magnis",id:24,weapon:8,rarity:3,glow:!0},{name:"Sky AUTO",id:25,weapon:8,rarity:2},{name:"Bark AUTO",id:26,weapon:8,rarity:0},{name:"MMA Wanderer",id:27,weapon:8,rarity:0},{name:"Mossy Rocket",id:18,weapon:9,rarity:1},{name:"Swamped Launcher",id:19,weapon:9,rarity:0},{name:"Tiger Rocket",id:20,weapon:9,rarity:2},{name:"Zebra Launcher",id:21,weapon:9,rarity:2},{name:"Plasma Nuke",id:22,weapon:9,rarity:4,glow:!0},{name:"Lava Rocket",id:23,weapon:9,rarity:3},{name:"Sky Launcher",id:24,weapon:9,rarity:2},{name:"Bark Launcher",id:25,weapon:9,rarity:0},{name:"Wanderer Rocket",id:26,weapon:9,rarity:0},{name:"Purple Cap",id:2,tex:1,type:1,keyW:"Head",scl:2.5,sitOff:.4,yOff:-3,xOff:2,rarity:0},{name:"Bear Mask",id:9,type:1,keyW:"Head",scl:2.5,sclMlt:1.3,sitOff:2.05,yOff:-4,xOff:1,rarity:2},{name:"Panda Mask",id:9,tex:1,type:1,keyW:"Head",scl:2.5,sclMlt:1.3,sitOff:2.05,yOff:-4,xOff:1,rarity:2},{name:"Brown Beard",id:11,type:1,keyW:"Head",scl:2.8,sclMlt:.9,sitOff:2,yOff:-3,rarity:2},{name:"Blonde Beard",id:11,tex:1,type:1,keyW:"Head",scl:2.8,sclMlt:.9,sitOff:2,yOff:-3,rarity:2},{name:"Skull Mask",id:12,type:1,keyW:"Head",scl:3,glow:!0,sclMlt:1.05,sitOff:2.5,sitOffZ:1.1,yOff:-4.5,xOff:-3,tex:0,rarity:3},{name:"Red Beanie",id:13,type:1,keyW:"Head",scl:3,sclMlt:1.1,sitOff:.4,yOff:-3,tex:0,rarity:0},{name:"Blue Beanie",id:13,type:1,keyW:"Head",scl:3,sclMlt:1.1,sitOff:.4,yOff:-3,tex:1,rarity:0},{name:"Krunk Headset",id:14,type:1,keyW:"Head",scl:2,sclMlt:1.1,sitOff:1.4,yOff:-4,rarity:2},{name:"Cherry Headset",id:14,type:1,keyW:"Head",tex:1,scl:2,sclMlt:1.1,sitOff:1.4,yOff:-4,rarity:2},{name:"Demonic Wings",id:0,type:2,keyW:"Back",glow:!0,scl:3.5,sclMlt:3,xOff:-1.5,sitOff:-1.3,sitOffZ:-1.4,yOff:-2,rarity:4},{name:"Bass Guitar",id:1,type:2,keyW:"Back",scl:4,sclMlt:3.8,sitOff:-1.3,sitOffZ:-1,yOff:-2,rarity:2},{name:"Samurai Blades",id:2,type:2,keyW:"Back",glow:!0,scl:.00048112055276382,sclMlt:.000406279577889448,sitOff:-1.3,sitOffZ:-.95,yOff:-1,xOff:-.5,rarity:3},{name:"Blood Harvest",id:3,type:2,keyW:"Back",glow:!0,scl:5.1,sclMlt:5,sitOff:-1.3,sitOffZ:-.95,yOff:-1,rarity:3},{name:"Panda Body",id:4,type:2,keyW:"Back",scl:2.1,sclMlt:1.3,sitOff:2.2,sitOffZ:0,yOff:-5,rarity:3},{name:"Bear Body",id:4,tex:1,type:2,keyW:"Back",scl:2.1,sclMlt:1.3,sitOff:2.2,sitOffZ:0,yOff:-5,rarity:3},{name:"Angelic Wings",id:5,type:2,keyW:"Back",glow:!0,scl:3.5,sclMlt:3.6,xOff:-1.5,sitOff:-1.3,sitOffZ:-1.4,yOff:-2,rarity:4},{name:"Ninja Mask",id:15,glow:!0,type:1,keyW:"Head",scl:2.5,sclMlt:1.1,sitOff:2.05,yOff:-4,xOff:0,rarity:3},{name:"Halo",id:16,glow:!0,type:1,keyW:"Head",scl:3.5,sclMlt:1.1,sitOff:-.65,yOff:-1,rarity:3},{name:"Welder Mask",type:1,keyW:"Head",scl:2.5,sitOff:2.1,yOff:-3,xOff:1,id:17,rarity:1},{name:"Diver Goggles",type:1,keyW:"Head",scl:2.5,sclMlt:.9,sitOff:1,yOff:-1,id:18,rarity:1},{name:"Mad Cap",type:1,keyW:"Head",tex:2,scl:2.5,sitOff:.4,yOff:-3,xOff:2,id:2,rarity:1},{name:"Ace Cap",type:1,keyW:"Head",tex:3,scl:2.5,sitOff:.4,yOff:-3,xOff:2,id:2,rarity:1},{name:"Ice Cap",type:1,keyW:"Head",tex:4,scl:2.5,sitOff:.4,yOff:-3,xOff:2,id:2,rarity:1},{name:"Soldier Pack",id:6,type:2,keyW:"Back",glow:!0,scl:2.6,sclMlt:1.8,xOff:1,sitOff:1.3,sitOffZ:-1.75,yOff:-5,rarity:1},{name:"Robo Wings",id:7,type:2,keyW:"Back",glow:!0,scl:5,sclMlt:3.9,xOff:-3.5,sitOff:-1.3,sitOffZ:-.75,yOff:-4,rarity:4},{name:"Basket",id:8,type:2,keyW:"Back",scl:3.5,sclMlt:2,xOff:-1.5,sitOff:.75,sitOffZ:-.8,yOff:-4,rarity:1},{name:"Baby Panda",id:9,type:2,keyW:"Back",scl:3.5,sclMlt:2,xOff:1,sitOff:.75,sitOffZ:-.8,yOff:-5,xRot:Math.PI,rarity:3},{name:"Sturm Helmet",type:1,keyW:"Head",tex:1,scl:2.8,sclMlt:1,sitOff:.65,yOff:-2.5,id:4,rarity:1},{name:"Brown Afro",type:1,keyW:"Head",tex:1,scl:2,sclMlt:.9,sitOff:1.4,yOff:-4,id:6,rarity:0},{name:"Acid Skull",id:12,type:1,keyW:"Head",tex:1,scl:3,glow:!0,sclMlt:1.05,sitOff:2.5,sitOffZ:1.1,yOff:-4.5,xOff:-3,rarity:3},{name:"Uranium",type:1,keyW:"Head",tex:1,scl:2.5,sitOff:2.1,yOff:-3,xOff:1,id:17,rarity:2},{name:"Panda King",id:19,glow:!0,type:1,keyW:"Head",scl:2.5,sclMlt:1.3,sitOff:2.05,yOff:-4,xOff:1,rarity:3},{name:"Kolt Rifle",creator:"iSpy",id:35,weapon:1,rarity:3},{name:"Pace Dore",id:34,glow:!0,weapon:1,rarity:4},{name:"Shot Element",creator:"Electrode_",glow:!0,id:28,weapon:6,rarity:3},{name:"Warp Sequence",creator:"Electrode_",id:28,glow:!0,weapon:4,rarity:4},{name:"Radioactive",creator:"Electrode_",glow:!0,id:29,weapon:5,rarity:4},{name:"Targeted",creator:"Subza",glow:!0,id:28,weapon:5,rarity:3},{name:"Robot Helmet",type:1,keyW:"Head",glow:!0,scl:2.4,sclMlt:1,sitOff:2,yOff:-3.4,id:20,rarity:3},{name:"Knight Helmet",type:1,keyW:"Head",scl:2.3,sclMlt:1,sitOff:2,yOff:-3.2,id:21,rarity:3},{name:"Cat Ears",type:1,keyW:"Head",scl:2.5,sclMlt:1.2,sitOff:1.65,yOff:-3.2,id:22,rarity:2},{name:"Snowman",type:1,keyW:"Head",scl:2.2,sclMlt:1,sitOff:2.05,yOff:-3.2,id:23,rarity:2},{name:"Trendy Biker",type:1,keyW:"Head",scl:2.2,sclMlt:1,sitOff:1.8,yOff:-3.2,id:24,rarity:3},{name:"Golden Crown",type:1,keyW:"Head",glow:!0,scl:2.4,sclMlt:1,sitOff:.65,yOff:-3.2,id:25,rarity:3},{name:"Master Drinker",type:1,keyW:"Head",scl:2.4,sclMlt:1,sitOff:.65,yOff:-2.7,id:26,rarity:3},{name:"Pig Head",type:1,keyW:"Head",scl:2.5,sclMlt:1,sitOff:2.05,yOff:-3.2,id:27,rarity:3},{name:"Red Bandana",type:1,keyW:"Head",scl:2.2,sclMlt:1,sitOff:1.6,yOff:-3.2,id:28,rarity:1},{name:"Sheriff",type:1,keyW:"Head",scl:2.2,sclMlt:1,sitOff:2.05,yOff:-3.2,id:29,rarity:4},{name:"Bandit",type:1,keyW:"Head",glow:!0,scl:2.2,sclMlt:1,sitOff:2.05,yOff:-3.2,id:30,rarity:4},{name:"Vlaine",id:36,weapon:1,rarity:1},{name:"AWP Supersport",creator:"Kitter",id:37,weapon:1,rarity:2},{name:"Reine",id:38,weapon:1,rarity:3},{name:"Melted",glow:!0,id:39,weapon:1,rarity:4},{name:"Viper",glow:!0,id:40,weapon:1,rarity:3},{name:"Razor",glow:!0,id:41,weapon:1,rarity:4},{name:"Lazor",id:29,glow:!0,weapon:2,rarity:4},{name:"Uzera",id:2,glow:!0,weapon:10,rarity:4},{name:"Tazor",glow:!0,id:7,weapon:10,rarity:3},{name:"Dual Woodland",id:0,weapon:10,rarity:1},{name:"Flecken Uzi",id:1,weapon:10,rarity:1},{name:"Dual Seafarer",id:3,weapon:10,rarity:2},{name:"Rapid Digital",id:4,weapon:10,rarity:1},{name:"Sap Uzi",id:5,weapon:10,rarity:0},{name:"Torn Dual",id:6,weapon:10,rarity:1},{name:"Haste",glow:!0,id:42,weapon:1,rarity:3},{name:"Leine",id:43,weapon:1,rarity:3},{name:"Lore",glow:!0,id:44,weapon:1,rarity:4},{name:"Reaver",glow:!0,id:45,weapon:1,rarity:4},{name:"Splixen",glow:!0,id:46,weapon:1,rarity:4},{name:"AWP Stream",creator:"Electrode_",glow:!0,id:47,weapon:1,rarity:4},{name:"Circuit",creator:"Electrode_",glow:!0,id:30,weapon:2,rarity:4},{name:"SMG Iris",id:29,weapon:4,rarity:2},{name:"SMG Venom",id:30,weapon:4,rarity:2,glow:!0},{name:"SMG Wingman",id:31,weapon:4,rarity:2},{name:"x0n-voX",creator:"???",pat:0,tex:"weapons/pat/0",sameGlow:!0,movT:1e-4,weapon:4,rarity:5},{name:"1Ad-dA0",creator:"???",pat:0,tex:"weapons/pat/0",sameGlow:!0,movT:1e-4,weapon:2,rarity:5},{name:"Raynb0w",creator:"???",pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:2,rarity:5},{name:"Raynb0w",creator:"???",pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:4,rarity:5},{name:"UMP Saphire",id:32,weapon:4,rarity:1},{name:"UMP Jade",id:33,weapon:4,rarity:1},{name:"UMP Plexus",id:34,weapon:4,rarity:1},{name:"UMP Lapis",id:35,weapon:4,rarity:0},{name:"Perplex",id:36,weapon:4,rarity:0},{name:"UMP Torpe",id:37,weapon:4,rarity:0},{name:"SMG Como",id:38,weapon:4,rarity:0},{name:"SMG Liquid",id:39,weapon:4,rarity:0},{name:"Clementine",id:40,weapon:4,rarity:1},{name:"Dropper",id:41,weapon:4,rarity:0},{name:"SMG Auburn",id:42,weapon:4,rarity:1},{name:"UMP Laurel",id:43,weapon:4,rarity:1},{name:"UMP Crimson",id:44,weapon:4,rarity:1},{name:"UMP Azure",id:45,weapon:4,rarity:1},{name:"Laguna",id:46,weapon:4,rarity:1},{name:"UMP Cygenta",id:47,weapon:4,rarity:1},{name:"UMP Cygentro",id:48,weapon:4,rarity:2},{name:"Chartreuse",id:49,weapon:4,rarity:2},{name:"UMP Tortobe",id:50,weapon:4,rarity:2},{name:"UMP Octo",id:51,weapon:4,rarity:2},{name:"UMP Versate",id:52,weapon:4,rarity:2},{name:"SMG Purpur",id:53,weapon:4,rarity:2},{name:"Leaf",id:54,weapon:4,rarity:0},{name:"Flame",id:55,weapon:4,rarity:0},{name:"Aqua",id:56,weapon:4,rarity:0},{name:"Gravel",id:57,weapon:4,rarity:0},{name:"AR Saphire",id:31,weapon:2,rarity:1},{name:"AR Jade",id:32,weapon:2,rarity:1},{name:"AR Plexus",id:33,weapon:2,rarity:1},{name:"AR Lapis",id:34,weapon:2,rarity:1},{name:"Perplex",id:35,weapon:2,rarity:0},{name:"Trople",id:36,weapon:2,rarity:0},{name:"AR Altis",id:37,weapon:2,rarity:1},{name:"Liquid",id:38,weapon:2,rarity:1},{name:"Clementine",id:39,weapon:2,rarity:1},{name:"Dropper",id:40,weapon:2,rarity:0},{name:"Laurel",id:41,weapon:2,rarity:1},{name:"Crimson",id:42,weapon:2,rarity:1},{name:"Azure",id:43,weapon:2,rarity:1},{name:"Laguna",id:44,weapon:2,rarity:1},{name:"Cygenta",id:45,weapon:2,rarity:1},{name:"Cygento",id:46,weapon:2,rarity:2},{name:"Chartreuse",id:47,weapon:2,rarity:2},{name:"Tortobe",id:48,weapon:2,rarity:2},{name:"AK Octo",id:49,weapon:2,rarity:2},{name:"Versate",id:50,weapon:2,rarity:2},{name:"Purpur",id:51,weapon:2,rarity:2},{name:"Leaf",id:52,weapon:2,rarity:0},{name:"Flame",id:53,weapon:2,rarity:0},{name:"Aqua",id:54,weapon:2,rarity:0},{name:"Gravel",id:55,weapon:2,rarity:0},{name:"Saphire",id:28,weapon:8,rarity:1},{name:"Jade",id:29,weapon:8,rarity:1},{name:"Plexus",id:30,weapon:8,rarity:1},{name:"Lapis",id:31,weapon:8,rarity:1},{name:"Perplexum",id:32,weapon:8,rarity:0},{name:"Torped",id:33,weapon:8,rarity:0},{name:"Commo",id:34,weapon:8,rarity:0},{name:"MMA Liquid",id:35,weapon:8,rarity:1},{name:"Dropper",id:36,weapon:8,rarity:0},{name:"MMA Auburn",id:37,weapon:8,rarity:1},{name:"MMA Laurel",id:38,weapon:8,rarity:1},{name:"MMA Crimson",id:39,weapon:8,rarity:1},{name:"MMA Azure",id:40,weapon:8,rarity:1},{name:"MMA Laguna",id:41,weapon:8,rarity:1},{name:"MMA Cygneta",id:42,weapon:8,rarity:1},{name:"MMA Cygneto",id:43,weapon:8,rarity:2},{name:"M14 Chartreuse",id:44,weapon:8,rarity:2},{name:"MMA Tortobe",id:45,weapon:8,rarity:2},{name:"MMA Octo",id:46,weapon:8,rarity:2},{name:"MMA Versate",id:47,weapon:8,rarity:2},{name:"MMA Purpur",id:48,weapon:8,rarity:2},{name:"Nature",id:49,weapon:8,rarity:0},{name:"Flame",id:50,weapon:8,rarity:0},{name:"Aqua",id:51,weapon:8,rarity:0},{name:"Earth",id:52,weapon:8,rarity:0},{name:"Black Ice",creator:"Electrode_",id:53,weapon:8,rarity:2},{name:"Mach 3",creator:"Jytesh",id:54,weapon:8,rarity:1},{name:"Bloodripper",creator:"Jytesh",id:55,weapon:8,rarity:1},{name:"Theta",creator:"Floatingpoint",seas:2,id:48,weapon:1,rarity:3},{name:"Raynb0w",creator:"???",pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:1,rarity:5},{name:"Diablo Wings",id:10,type:2,keyW:"Back",scl:.0005593478391959849,sclMlt:.0006552360402010109,xOff:-3,sitOff:-1.3,sitOffZ:-1.4,yOff:-2,rarity:4},{name:"AK Gold Rush",creator:"_irizu",id:56,weapon:2,rarity:3,seas:2},{name:"AK Mortal",creator:"_irizu",glow:!0,id:57,weapon:2,rarity:4},{name:"nV Dragon",creator:"nightly-build7",id:51,weapon:1,rarity:3},{name:"Cherry Blossom",creator:"jonschmiddy",id:50,weapon:1,rarity:2},{name:"Vapormoon",creator:"jonschmiddy",id:58,weapon:2,rarity:2},{name:"Tesselate",creator:"jonschmiddy",id:59,weapon:2,rarity:2},{name:"Polydrive",creator:"Ziggy",id:49,weapon:1,rarity:2},{name:"Safran",id:29,weapon:6,rarity:2},{name:"Purple Rain",id:30,weapon:6,rarity:2},{name:"Cobra",id:31,weapon:6,rarity:2},{name:"Spectrum",id:32,weapon:6,rarity:2},{name:"Anodized",creator:"Blitz-.",id:33,weapon:6,rarity:3},{name:"Blunderbuss",creator:"Blitz-.",id:34,weapon:6,rarity:2},{name:"Tv Tron A",type:1,keyW:"Head",glow:!0,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,id:32,rarity:4},{name:"Tv Tron B",tex:1,type:1,keyW:"Head",glow:!0,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,id:32,rarity:4},{name:"Hollow Fade",keyW:"Knife",animInd:1,glow:!0,tex:2,id:0,type:3,scl:2,sclMlt:.9,yOff:-2,rarity:5},{name:"Tv Tron C",tex:2,type:1,keyW:"Head",glow:!0,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,id:32,rarity:4},{name:"Tv Tron D",tex:3,type:1,keyW:"Head",glow:!0,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,id:32,rarity:4},{name:"AWP Dazzle",glow:!0,id:53,weapon:1,rarity:4},{name:"Octodance",glow:!0,id:54,weapon:1,rarity:4},{name:"Ice Fade",glow:!0,id:55,weapon:1,rarity:4},{name:"Frostlance",keyW:"Knife",animInd:1,glow:!0,tex:3,id:0,type:3,scl:2,sclMlt:.9,yOff:-2,rarity:5},{name:"Frostbite",limT:"Gift",keyW:"Axe",priceMlt:4,animInd:1,glow:!0,id:1,type:3,scl:2,sclMlt:.9,yOff:-.5,rarity:6},{name:"Arctic",id:0,weapon:15,rarity:1},{name:"Autumn Burst",id:1,weapon:15,rarity:1},{name:"Reticle Burst",id:2,weapon:15,rarity:2},{name:"Digital Burst",id:3,weapon:15,rarity:0},{name:"Bushwalker",id:4,weapon:15,rarity:1},{name:"Woodland",id:5,weapon:15,rarity:0},{name:"Burst Hazard",id:6,weapon:15,rarity:1},{name:"Kodac Famas",id:7,weapon:15,rarity:1},{name:"Seafarer G2",id:8,weapon:15,rarity:0},{name:"G2 Trail",id:9,weapon:15,rarity:0},{name:"Burst Fade",id:10,weapon:15,rarity:0},{name:"G2 Puma",id:11,weapon:15,rarity:0},{name:"Burst Carbo",id:12,weapon:15,rarity:0},{name:"G2 Barb",id:13,weapon:15,rarity:2},{name:"F1 Blush",id:14,weapon:15,rarity:0},{name:"Machinist",id:15,weapon:15,rarity:1},{name:"Triple Olympus",id:16,weapon:15,rarity:2},{name:"Honey Badger",id:17,weapon:15,rarity:1},{name:"G2 Moss",id:18,weapon:15,rarity:1},{name:"F1 Marshland",id:19,weapon:15,rarity:1},{name:"G2 Tigris",id:20,weapon:15,rarity:2},{name:"Zebra Burst",id:21,weapon:15,rarity:2},{name:"Skyfarer",id:22,weapon:15,rarity:2},{name:"Commando Fade",id:23,weapon:15,rarity:2},{name:"Mindseeker",id:24,glow:!0,weapon:15,rarity:4},{name:"Intervention VI",mid:0,glow:!0,pulsT:.0015,scl:.00094830394974876,mScl:.0010536710552764,zOff:-.25,seas:2,yOff:.05,weapon:1,rarity:5},{name:"Intervention XI",mid:0,midT:1,glow:!0,seas:2,pulsT:.0015,scl:.00094830394974876,mScl:.0010536710552764,zOff:-.25,yOff:.05,weapon:1,rarity:5},{name:"Soul Fang",keyW:"Knife",animInd:1,glow:!0,pulsT:.1,id:2,type:3,scl:3,seas:2,sclMlt:.98,yOff:-2,rarity:5},{name:"Dusk Fang",keyW:"Knife",animInd:1,glow:!0,tex:4,id:0,type:3,scl:2,sclMlt:.9,yOff:-2,rarity:4},{name:"Boneclaw",id:56,weapon:1,rarity:2,seas:2},{name:"Blue Digital",id:57,weapon:1,rarity:1,seas:2},{name:"Green Digital",id:58,weapon:1,rarity:1,seas:2},{name:"Purple Digital",id:59,weapon:1,rarity:1,seas:2},{name:"Red Digital",id:60,weapon:1,rarity:1,seas:2},{name:"Cascade",id:61,weapon:1,rarity:2,seas:2},{name:"Pink Poly",id:62,weapon:1,rarity:1,seas:2},{name:"Orange Poly",id:63,weapon:1,rarity:1,seas:2},{name:"Green Poly",id:64,weapon:1,rarity:1,seas:2},{name:"Blue Poly",id:65,weapon:1,rarity:1,seas:2},{name:"War Torn",id:66,weapon:1,rarity:2,seas:2},{name:"Spook",id:67,weapon:1,rarity:3,glow:!0,seas:2},{name:"Pink Drip",id:68,weapon:1,rarity:1,seas:2},{name:"Blue Drip",id:69,weapon:1,rarity:1,seas:2},{name:"Sepia",id:70,weapon:1,rarity:0,seas:2},{name:"Olive",id:71,weapon:1,rarity:0,seas:2},{name:"Spruce",id:72,weapon:1,rarity:0,seas:2},{name:"Dijon",id:73,weapon:1,rarity:0,seas:2},{name:"Red Splat",id:74,weapon:1,rarity:1,seas:2},{name:"Purple Splat",id:75,weapon:1,rarity:1,seas:2},{name:"Orange Splat",id:76,weapon:1,rarity:1,seas:2},{name:"Green Splat",id:77,weapon:1,rarity:1,seas:2},{name:"Yellow Poly",id:78,weapon:1,rarity:1,seas:2},{name:"Red Poly",id:79,weapon:1,rarity:1,seas:2},{name:"Green Poly",id:80,weapon:1,rarity:1,seas:2},{name:"Blue Poly",id:81,weapon:1,rarity:1,seas:2},{name:"Sandstorm",id:82,weapon:1,rarity:0,seas:2},{name:"Fabrica",id:83,weapon:1,rarity:2,seas:2},{name:"Azazel",creator:"Lxckless",id:84,weapon:1,rarity:2,seas:2},{name:"Picnic",id:85,weapon:1,rarity:1,seas:2},{name:"Picasso",id:86,weapon:1,rarity:0,seas:2},{name:"Cracked",id:87,weapon:1,rarity:2,seas:2},{name:"Fire Stream",id:88,weapon:1,rarity:2,seas:2},{name:"Ripped Sun",id:89,weapon:1,rarity:2,seas:2},{name:"Bliss Flow",id:90,weapon:1,rarity:2,seas:2},{name:"Kenzo",id:91,weapon:1,rarity:3,glow:!0,seas:2},{name:"Snowy",id:92,weapon:1,rarity:0,seas:2},{name:"Galaxy",id:93,weapon:1,rarity:2,seas:2},{name:"Ducky",id:94,weapon:1,rarity:0,seas:2},{name:"Graphite",id:95,weapon:1,rarity:0,seas:2},{name:"Porcelain",id:96,weapon:1,rarity:0,seas:2},{name:"Neon Spill",id:97,weapon:1,rarity:3,glow:!0,seas:2},{name:"Danger",id:98,weapon:1,rarity:0,seas:2},{name:"Paint Spill",id:99,weapon:1,rarity:2,seas:2},{name:"Goop",id:100,weapon:1,rarity:2,seas:2},{name:"Cerise",id:101,weapon:1,rarity:0,seas:2},{name:"Orange Drip",id:102,weapon:1,rarity:0,seas:2},{name:"Red Drip",id:103,weapon:1,rarity:0,seas:2},{name:"Green Drip",id:104,weapon:1,rarity:0,seas:2},{name:"Flame Viper",id:105,weapon:1,rarity:4,glow:!0,seas:2},{name:"Red Phantom",id:106,weapon:1,rarity:4,glow:!0,seas:2},{name:"Arctic",creator:"Blitz",id:107,weapon:1,rarity:1,seas:2},{name:"Magma Core",id:108,weapon:1,rarity:4,animInd:1,pulsT:.1,glow:!0,seas:2},{name:"Wired",creator:"Floatingpoint",id:109,weapon:1,rarity:3,seas:2},{name:"Kings",creator:"Floatingpoint",id:110,weapon:1,rarity:3,seas:2},{name:"Tessalate",id:111,weapon:1,rarity:2,seas:2},{name:"Sunset",creator:"Graham",id:112,weapon:1,rarity:3,glow:!0,seas:2},{name:"Poly Blush",id:113,weapon:1,rarity:2,seas:2},{name:"Cuircuitor",creator:"Gnnr",id:114,weapon:1,rarity:3,glow:!0,seas:2},{name:"Marbled .50",creator:"Blitz",id:115,weapon:1,rarity:2,seas:2},{name:"Exoscarlet",creator:"CyAnIdE",id:116,weapon:1,rarity:1,seas:2},{name:"Sorable V",creator:"Zino",id:117,weapon:1,rarity:3,glow:!0,seas:2},{name:"Boneclaw",id:60,weapon:2,rarity:2,seas:2},{name:"Blue Digital",id:61,weapon:2,rarity:1,seas:2},{name:"Green Digital",id:62,weapon:2,rarity:1,seas:2},{name:"Purple Digital",id:63,weapon:2,rarity:1,seas:2},{name:"Red Digital",id:64,weapon:2,rarity:1,seas:2},{name:"Cascade",id:65,weapon:2,rarity:2,seas:2},{name:"Pink Poly",id:66,weapon:2,rarity:1,seas:2},{name:"Orange Poly",id:67,weapon:2,rarity:1,seas:2},{name:"Green Poly",id:68,weapon:2,rarity:1,seas:2},{name:"Blue Poly",id:69,weapon:2,rarity:1,seas:2},{name:"War Torn",id:70,weapon:2,rarity:2,seas:2},{name:"Phantasma",id:72,weapon:2,rarity:3,glow:!0,seas:2},{name:"Pink Drip",id:73,weapon:2,rarity:1,seas:2},{name:"Blue Drip",id:74,weapon:2,rarity:1,seas:2},{name:"Sepia",id:75,weapon:2,rarity:0,seas:2},{name:"Olive",id:76,weapon:2,rarity:0,seas:2},{name:"Spruce",id:77,weapon:2,rarity:0,seas:2},{name:"Dijon",id:78,weapon:2,rarity:0,seas:2},{name:"Red Splat",id:79,weapon:2,rarity:1,seas:2},{name:"Purple Splat",id:80,weapon:2,rarity:1,seas:2},{name:"Orange Splat",id:81,weapon:2,rarity:1,seas:2},{name:"Green Splat",id:82,weapon:2,rarity:1,seas:2},{name:"Yellow Poly",id:83,weapon:2,rarity:1,seas:2},{name:"Red Poly",id:84,weapon:2,rarity:1,seas:2},{name:"Green Poly",id:85,weapon:2,rarity:1,seas:2},{name:"Blue Poly",id:86,weapon:2,rarity:1,seas:2},{name:"Sandstorm",id:87,weapon:2,rarity:0,seas:2},{name:"Fabrica",id:88,weapon:2,rarity:2,seas:2},{name:"Zebrik",id:89,weapon:2,rarity:3,glow:!0,seas:2},{name:"Picnic",id:90,weapon:2,rarity:0,seas:2},{name:"Picasso",id:91,weapon:2,rarity:0,seas:2},{name:"Cracked",id:92,weapon:2,rarity:2,seas:2},{name:"Fire Stream",id:93,weapon:2,rarity:2,seas:2},{name:"Ripped Sun",id:94,weapon:2,rarity:2,seas:2},{name:"Bliss Flow",id:95,weapon:2,rarity:2,seas:2},{name:"Snowy",id:96,weapon:2,rarity:0,seas:2},{name:"Ducky",id:97,weapon:2,rarity:0,seas:2},{name:"Graphite",id:98,weapon:2,rarity:0,seas:2},{name:"Porcelain",id:99,weapon:2,rarity:0,seas:2},{name:"Danger",id:100,weapon:2,rarity:0,seas:2},{name:"Paint Spill",id:101,weapon:2,rarity:2,seas:2},{name:"Goop",id:102,weapon:2,rarity:2,seas:2},{name:"Cerise",id:103,weapon:2,rarity:0,seas:2},{name:"Orange Drip",id:104,weapon:2,rarity:0,seas:2},{name:"Red Drip",id:105,weapon:2,rarity:0,seas:2},{name:"Green Drip",id:106,weapon:2,rarity:0,seas:2},{name:"Void",id:107,weapon:2,rarity:4,glow:!0,seas:2},{name:"Lightning Storm",id:108,weapon:2,rarity:4,glow:!0,seas:2},{name:"Scribbler",id:109,weapon:2,rarity:3,seas:2},{name:"Scorched",creator:"0mar",id:110,weapon:2,rarity:4,glow:!0,seas:2},{name:"Heat-Tint",creator:"Leaaf",id:111,weapon:2,rarity:2,seas:2},{name:"Welded",id:112,weapon:2,rarity:2,seas:2},{name:"Acid Howler",id:113,weapon:2,rarity:5,glow:!0,seas:2},{name:"Boneclaw",id:58,weapon:4,rarity:2,seas:2},{name:"Blue Digital",id:59,weapon:4,rarity:1,seas:2},{name:"Green Digital",id:60,weapon:4,rarity:1,seas:2},{name:"Purple Digital",id:61,weapon:4,rarity:1,seas:2},{name:"Red Digital",id:62,weapon:4,rarity:1,seas:2},{name:"Cascade",id:63,weapon:4,rarity:2,seas:2},{name:"Pink Poly",id:64,weapon:4,rarity:1,seas:2},{name:"Orange Poly",id:65,weapon:4,rarity:1,seas:2},{name:"Green Poly",id:66,weapon:4,rarity:1,seas:2},{name:"Blue Poly",id:67,weapon:4,rarity:1,seas:2},{name:"War Torn",id:68,weapon:4,rarity:2,seas:2},{name:"Pink Drip",id:69,weapon:4,rarity:1,seas:2},{name:"Blue Drip",id:70,weapon:4,rarity:1,seas:2},{name:"Sepia",id:71,weapon:4,rarity:0,seas:2},{name:"Olive",id:72,weapon:4,rarity:0,seas:2},{name:"Spruce",id:73,weapon:4,rarity:0,seas:2},{name:"Dijon",id:74,weapon:4,rarity:0,seas:2},{name:"Red Splat",id:75,weapon:4,rarity:1,seas:2},{name:"Purple Splat",id:76,weapon:4,rarity:1,seas:2},{name:"Orange Splat",id:77,weapon:4,rarity:1,seas:2},{name:"Green Splat",id:78,weapon:4,rarity:1,seas:2},{name:"Yellow Poly",id:79,weapon:4,rarity:1,seas:2},{name:"Red Poly",id:80,weapon:4,rarity:1,seas:2},{name:"Green Poly",id:81,weapon:4,rarity:1,seas:2},{name:"Blue Poly",id:82,weapon:4,rarity:1,seas:2},{name:"Sandstorm",id:83,weapon:4,rarity:0,seas:2},{name:"Fabrica",id:84,weapon:4,rarity:2,seas:2},{name:"Picnic",id:85,weapon:4,rarity:0,seas:2},{name:"Picasso",id:86,weapon:4,rarity:0,seas:2},{name:"Cracked",id:87,weapon:4,rarity:2,seas:2},{name:"Fire Stream",id:88,weapon:4,rarity:2,seas:2},{name:"Ripped Sun",id:89,weapon:4,rarity:2,seas:2},{name:"Bliss Flow",id:90,weapon:4,rarity:2,seas:2},{name:"Snowy",id:91,weapon:4,rarity:0,seas:2},{name:"Ducky",id:92,weapon:4,rarity:0,seas:2},{name:"Graphite",id:93,weapon:4,rarity:0,seas:2},{name:"Porcelain",id:94,weapon:4,rarity:0,seas:2},{name:"Danger",id:95,weapon:4,rarity:0,seas:2},{name:"Paint Spill",id:96,weapon:4,rarity:2,seas:2},{name:"Goop",id:97,weapon:4,rarity:2,seas:2},{name:"Cerise",id:98,weapon:4,rarity:0,seas:2},{name:"Orange Drip",id:99,weapon:4,rarity:0,seas:2},{name:"Red Drip",id:100,weapon:4,rarity:0,seas:2},{name:"Green Drip",id:101,weapon:4,rarity:0,seas:2},{name:"Polymer",id:102,weapon:4,rarity:2,seas:2},{name:"Andromeda",id:103,weapon:4,rarity:3,glow:!0,seas:2},{name:"Liberty",id:104,weapon:4,rarity:3,seas:2},{name:"Dragon Breath",id:105,weapon:4,rarity:4,glow:!0,seas:2},{name:"Parabellum",creator:"Floatingpoint",id:106,weapon:4,rarity:2,seas:2},{name:"Poly Fade",id:107,weapon:4,rarity:2,seas:2},{name:"Picnic",id:31,weapon:5,rarity:1,seas:2},{name:"Picasso",id:32,weapon:5,rarity:0,seas:2},{name:"Cracked",id:33,weapon:5,rarity:2,seas:2},{name:"Fire Stream",id:34,weapon:5,rarity:2,seas:2},{name:"Ripped Sun",id:35,weapon:5,rarity:2,seas:2},{name:"Bliss Flow",id:36,weapon:5,rarity:2,seas:2},{name:"Snowy",id:37,weapon:5,rarity:0,seas:2},{name:"Ducky",id:38,weapon:5,rarity:0,seas:2},{name:"Graphite",id:39,weapon:5,rarity:0,seas:2},{name:"Porcelain",id:40,weapon:5,rarity:0,seas:2},{name:"Danger",id:41,weapon:5,rarity:0,seas:2},{name:"Paint Spill",id:42,weapon:5,rarity:2,seas:2},{name:"Slime Spill",id:43,weapon:5,rarity:2,seas:2},{name:"Cerise",id:44,weapon:5,rarity:0,seas:2},{name:"Orange Drip",id:45,weapon:5,rarity:0,seas:2},{name:"Red Drip",id:46,weapon:5,rarity:0,seas:2},{name:"Green Drip",id:47,weapon:5,rarity:0,seas:2},{name:"Overheated",id:48,weapon:5,rarity:3,glow:!0,seas:2},{name:"Royal",id:49,weapon:5,rarity:3,glow:!0,seas:2},{name:"Nordic",id:50,weapon:5,rarity:4,glow:!0,seas:2},{name:"Boneclaw",id:51,weapon:5,rarity:2,seas:2},{name:"Blue Digital",id:52,weapon:5,rarity:1,seas:2},{name:"Green Digital",id:53,weapon:5,rarity:1,seas:2},{name:"Purple Digital",id:54,weapon:5,rarity:1,seas:2},{name:"Red Digital",id:55,weapon:5,rarity:1,seas:2},{name:"Cascade",id:56,weapon:5,rarity:2,seas:2},{name:"Pink Poly",id:57,weapon:5,rarity:1,seas:2},{name:"Orange Poly",id:58,weapon:5,rarity:1,seas:2},{name:"Green Poly",id:59,weapon:5,rarity:1,seas:2},{name:"Blue Poly",id:60,weapon:5,rarity:1,seas:2},{name:"War Torn",id:61,weapon:5,rarity:2,seas:2},{name:"Pink Drip",id:62,weapon:5,rarity:1,seas:2},{name:"Blue Drip",id:63,weapon:5,rarity:1,seas:2},{name:"Sepia",id:64,weapon:5,rarity:0,seas:2},{name:"Olive",id:65,weapon:5,rarity:0,seas:2},{name:"Spruce",id:66,weapon:5,rarity:0,seas:2},{name:"Dijon",id:67,weapon:5,rarity:0,seas:2},{name:"Red Splat",id:68,weapon:5,rarity:1,seas:2},{name:"Purple Splat",id:69,weapon:5,rarity:1,seas:2},{name:"Orange Splat",id:70,weapon:5,rarity:1,seas:2},{name:"Green Splat",id:71,weapon:5,rarity:1,seas:2},{name:"Yellow Poly",id:72,weapon:5,rarity:1,seas:2},{name:"Red Poly",id:73,weapon:5,rarity:1,seas:2},{name:"Green Poly",id:74,weapon:5,rarity:1,seas:2},{name:"Blue Poly",id:75,weapon:5,rarity:1,seas:2},{name:"Sandstorm",id:76,weapon:5,rarity:0,seas:2},{name:"Fabrica",id:77,weapon:5,rarity:2,seas:2},{name:"Outlaw",id:78,weapon:5,rarity:3,seas:2},{name:"Green Poly",id:26,weapon:7,rarity:1,seas:2},{name:"Blue Poly",id:27,weapon:7,rarity:1,seas:2},{name:"Sandstorm",id:28,weapon:7,rarity:0,seas:2},{name:"Fabrica",id:29,weapon:7,rarity:2,seas:2},{name:"Zebrik",id:30,weapon:7,rarity:3,glow:!0,seas:2},{name:"Picnic",id:31,weapon:7,rarity:0,seas:2},{name:"Picasso",id:32,weapon:7,rarity:0,seas:2},{name:"Cracked",id:33,weapon:7,rarity:2,seas:2},{name:"Fire Stream",id:34,weapon:7,rarity:2,seas:2},{name:"Ripped Sun",id:35,weapon:7,rarity:2,seas:2},{name:"Bliss Flow",id:36,weapon:7,rarity:2,seas:2},{name:"Snowy",id:37,weapon:7,rarity:0,seas:2},{name:"Ducky",id:38,weapon:7,rarity:0,seas:2},{name:"Graphite",id:39,weapon:7,rarity:0,seas:2},{name:"Porcelain",id:40,weapon:7,rarity:0,seas:2},{name:"Danger",id:41,weapon:7,rarity:0,seas:2},{name:"Paint Spill",id:42,weapon:7,rarity:2,seas:2},{name:"Slime Spill",id:43,weapon:7,rarity:2,seas:2},{name:"Cerise",id:44,weapon:7,rarity:0,seas:2},{name:"Orange Drip",id:45,weapon:7,rarity:0,seas:2},{name:"Red Drip",id:46,weapon:7,rarity:0,seas:2},{name:"Green Drip",id:47,weapon:7,rarity:0,seas:2},{name:"Neoran",id:48,weapon:7,rarity:3,glow:!0,seas:2},{name:"Fire Breath",id:49,weapon:7,rarity:3,glow:!0,seas:2},{name:"Boneclaw",id:50,weapon:7,rarity:2,seas:2},{name:"Blue Digital",id:51,weapon:7,rarity:1,seas:2},{name:"Green Digital",id:52,weapon:7,rarity:1,seas:2},{name:"Purple Digital",id:53,weapon:7,rarity:1,seas:2},{name:"Red Digital",id:54,weapon:7,rarity:1,seas:2},{name:"Cascade",id:55,weapon:7,rarity:2,seas:2},{name:"Pink Poly",id:56,weapon:7,rarity:1,seas:2},{name:"Orange Poly",id:57,weapon:7,rarity:1,seas:2},{name:"Green Poly",id:58,weapon:7,rarity:1,seas:2},{name:"Blue Poly",id:59,weapon:7,rarity:1,seas:2},{name:"War Torn",id:60,weapon:7,rarity:2,seas:2},{name:"Pink Drip",id:61,weapon:7,rarity:1,seas:2},{name:"Blue Drip",id:62,weapon:7,rarity:1,seas:2},{name:"Sepia",id:63,weapon:7,rarity:0,seas:2},{name:"Olive",id:64,weapon:7,rarity:0,seas:2},{name:"Spruce",id:65,weapon:7,rarity:0,seas:2},{name:"Dijon",id:66,weapon:7,rarity:0,seas:2},{name:"Red Splat",id:67,weapon:7,rarity:1,seas:2},{name:"Purple Splat",id:68,weapon:7,rarity:1,seas:2},{name:"Orange Splat",id:69,weapon:7,rarity:1,seas:2},{name:"Green Splat",id:70,weapon:7,rarity:1,seas:2},{name:"Yellow Poly",id:71,weapon:7,rarity:1,seas:2},{name:"Bloodbath",id:72,weapon:7,rarity:4,glow:!0,seas:2},{name:"Red Poly",id:73,weapon:7,rarity:1,seas:2},{name:"Blue Poly",id:27,weapon:9,rarity:1,seas:2},{name:"Sandstorm",id:28,weapon:9,rarity:0,seas:2},{name:"Fabrica",id:29,weapon:9,rarity:2,seas:2},{name:"Picnic",id:30,weapon:9,rarity:0,seas:2},{name:"Picasso",id:31,weapon:9,rarity:0,seas:2},{name:"Cracked",id:32,weapon:9,rarity:2,seas:2},{name:"Fire Stream",id:33,weapon:9,rarity:2,seas:2},{name:"Ripped Sun",id:34,weapon:9,rarity:2,seas:2},{name:"Bliss Flow",id:35,weapon:9,rarity:2,seas:2},{name:"Kenzo",id:36,weapon:9,rarity:2,seas:2},{name:"Snowy",id:37,weapon:9,rarity:0,seas:2},{name:"Ducky",id:38,weapon:9,rarity:0,seas:2},{name:"Graphite",id:39,weapon:9,rarity:0,seas:2},{name:"Porcelain",id:40,weapon:9,rarity:0,seas:2},{name:"Danger",id:41,weapon:9,rarity:0,seas:2},{name:"Paint Spill",id:42,weapon:9,rarity:2,seas:2},{name:"Goop",id:43,weapon:9,rarity:2,seas:2},{name:"Cerise",id:44,weapon:9,rarity:0,seas:2},{name:"Orange Drip",id:45,weapon:9,rarity:0,seas:2},{name:"Red Drip",id:46,weapon:9,rarity:0,seas:2},{name:"Green Drip",id:47,weapon:9,rarity:0,seas:2},{name:"Boneclaw",id:48,weapon:9,rarity:2,seas:2},{name:"Blue Digital",id:49,weapon:9,rarity:1,seas:2},{name:"Green Digital",id:50,weapon:9,rarity:1,seas:2},{name:"Purple Digital",id:51,weapon:9,rarity:1,seas:2},{name:"Red Digital",id:52,weapon:9,rarity:1,seas:2},{name:"Cascade",id:53,weapon:9,rarity:2,seas:2},{name:"Pink Poly",id:54,weapon:9,rarity:1,seas:2},{name:"Orange Poly",id:55,weapon:9,rarity:1,seas:2},{name:"Green Poly",id:56,weapon:9,rarity:1,seas:2},{name:"Blue Poly",id:57,weapon:9,rarity:1,seas:2},{name:"War Torn",id:58,weapon:9,rarity:2,seas:2},{name:"Pink Drip",id:59,weapon:9,rarity:1,seas:2},{name:"Blue Drip",id:60,weapon:9,rarity:1,seas:2},{name:"Sepia",id:61,weapon:9,rarity:0,seas:2},{name:"Olive",id:62,weapon:9,rarity:0,seas:2},{name:"Spruce",id:63,weapon:9,rarity:0,seas:2},{name:"Dijon",id:64,weapon:9,rarity:0,seas:2},{name:"Red Splat",id:65,weapon:9,rarity:1,seas:2},{name:"Purple Splat",id:66,weapon:9,rarity:1,seas:2},{name:"Orange Splat",id:67,weapon:9,rarity:1,seas:2},{name:"Green Splat",id:68,weapon:9,rarity:1,seas:2},{name:"Yellow Poly",id:69,weapon:9,rarity:1,seas:2},{name:"Red Poly",id:70,weapon:9,rarity:1,seas:2},{name:"Green Poly",id:71,weapon:9,rarity:1,seas:2},{name:"Coffin",id:72,weapon:9,rarity:3,glow:!0,seas:2},{name:"Lightning Strike",id:73,weapon:9,rarity:4,glow:!0,seas:2},{name:"Boneclaw",id:25,weapon:15,rarity:3,seas:2},{name:"Blue Digital",id:26,weapon:15,rarity:1,seas:2},{name:"Green Digital",id:27,weapon:15,rarity:1,seas:2},{name:"Purple Digital",id:28,weapon:15,rarity:1,seas:2},{name:"Red Digital",id:29,weapon:15,rarity:1,seas:2},{name:"Cascade",id:30,weapon:15,rarity:2,seas:2},{name:"Pink Poly",id:31,weapon:15,rarity:1,seas:2},{name:"Orange Poly",id:32,weapon:15,rarity:1,seas:2},{name:"Green Poly",id:33,weapon:15,rarity:1,seas:2},{name:"Blue Poly",id:34,weapon:15,rarity:1,seas:2},{name:"War Torn",id:35,weapon:15,rarity:2,seas:2},{name:"Spook",id:36,weapon:15,rarity:3,glow:!0,seas:2},{name:"Pink Drip",id:37,weapon:15,rarity:1,seas:2},{name:"Blue Drip",id:38,weapon:15,rarity:1,seas:2},{name:"Sepia",id:39,weapon:15,rarity:0,seas:2},{name:"Olive",id:40,weapon:15,rarity:0,seas:2},{name:"Spruce",id:41,weapon:15,rarity:0,seas:2},{name:"Dijon",id:42,weapon:15,rarity:0,seas:2},{name:"Red Splat",id:43,weapon:15,rarity:1,seas:2},{name:"Purple Splat",id:44,weapon:15,rarity:1,seas:2},{name:"Orange Splat",id:45,weapon:15,rarity:1,seas:2},{name:"Green Splat",id:46,weapon:15,rarity:1,seas:2},{name:"Yellow Poly",id:47,weapon:15,rarity:1,seas:2},{name:"Red Poly",id:48,weapon:15,rarity:1,seas:2},{name:"Green Poly",id:49,weapon:15,rarity:1,seas:2},{name:"Blue Poly",id:50,weapon:15,rarity:1,seas:2},{name:"Sandstorm",id:51,weapon:15,rarity:0,seas:2},{name:"Fabrica",id:52,weapon:15,rarity:2,seas:2},{name:"Zebrik",id:53,weapon:15,rarity:2,seas:2},{name:"Picnic",id:54,weapon:15,rarity:0,seas:2},{name:"Picasso",id:55,weapon:15,rarity:0,seas:2},{name:"Cracked",id:56,weapon:15,rarity:2,seas:2},{name:"Fire Stream",id:57,weapon:15,rarity:2,seas:2},{name:"Ripped Sun",id:58,weapon:15,rarity:2,seas:2},{name:"Bliss Flow",id:59,weapon:15,rarity:2,seas:2},{name:"Kenzo",id:60,weapon:15,rarity:3,seas:2},{name:"Snowy",id:61,weapon:15,rarity:0,seas:2},{name:"Ducky",id:62,weapon:15,rarity:0,seas:2},{name:"Graphite",id:63,weapon:15,rarity:0,seas:2},{name:"Porcelain",id:64,weapon:15,rarity:0,seas:2},{name:"Danger",id:65,weapon:15,rarity:0,seas:2},{name:"Paint Spill",id:66,weapon:15,rarity:2,seas:2},{name:"Slime Spill",id:67,weapon:15,rarity:2,seas:2},{name:"Cerise",id:68,weapon:15,rarity:0,seas:2},{name:"Orange Drip",id:69,weapon:15,rarity:0,seas:2},{name:"Red Drip",id:70,weapon:15,rarity:0,seas:2},{name:"Green Drip",id:71,weapon:15,rarity:0,seas:2},{name:"Galaxy Morse",id:72,weapon:15,rarity:4,glow:!0,seas:2},{name:"Fire Storm",id:73,weapon:15,rarity:4,glow:!0,seas:2},{name:"Marked",id:74,weapon:15,rarity:3,glow:!0,seas:2},{name:"Frosted",id:75,weapon:15,rarity:4,glow:!0,seas:2},{name:"Gold Tipped",creator:"jonschmiddy",id:76,weapon:15,rarity:3,glow:!0,seas:2},{name:"Damascus",keyW:"Knife",tex:6,id:0,type:3,scl:2.3,seas:2,sclMlt:.9,yOff:-2,rarity:3},{name:"Prism",creator:"jonschmiddy",keyW:"Knife",tex:7,id:0,type:3,scl:2.3,seas:2,sclMlt:.9,yOff:-2,rarity:3},{name:"Bloodless",keyW:"Knife",id:2,tex:1,glow:!0,type:3,scl:3,seas:2,sclMlt:.9,yOff:-2,rarity:4},{name:"Steelfang",keyW:"Knife",flipAnim:!0,id:3,type:3,scl:2.6,seas:2,sclMlt:1,yOff:-1,xOff:-1.5,rarity:4,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Flamefang",keyW:"Knife",flipAnim:!0,tex:1,glow:!0,id:3,type:3,scl:2.6,seas:2,sclMlt:.9,yOff:-1,xOff:-1.5,rarity:5,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Plasma Dust",keyW:"Knife",flipAnim:!0,tex:2,glow:!0,id:3,type:3,scl:2.6,seas:2,sclMlt:.9,yOff:-1,xOff:-1.5,rarity:5,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Volt Fang",keyW:"Knife",flipAnim:!0,tex:3,glow:!0,id:3,type:3,scl:2.6,seas:2,sclMlt:.9,yOff:-1,xOff:-1.5,rarity:5,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Black Cowboy Hat",type:1,keyW:"Head",id:39,rarity:0,seas:2,sclMlt:.56,sitOff:.6},{name:"Brown Cowboy Hat",type:1,keyW:"Head",id:39,tex:1,rarity:0,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Outback Hat",type:1,keyW:"Head",id:40,rarity:1,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Dundee Hat",type:1,keyW:"Head",id:40,tex:1,rarity:1,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Red Hat",type:1,keyW:"Head",id:41,rarity:1,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Blue Hat",type:1,keyW:"Head",id:41,tex:1,rarity:0,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Urban Soldier",type:1,keyW:"Head",id:42,tex:0,rarity:1,seas:2,sclMlt:.56,sitOff:.78,yOff:-1.2,scl:1.2},{name:"Desert Soldier",type:1,keyW:"Head",id:42,tex:1,rarity:1,seas:2,sclMlt:.56,sitOff:.78,yOff:-1.2,scl:1.2},{name:"Arctic Soldier",type:1,keyW:"Head",id:42,tex:2,rarity:1,seas:2,sclMlt:.56,sitOff:.78,yOff:-1.2,scl:1.2},{name:"Ace",type:1,keyW:"Head",id:43,rarity:3,seas:2,sclMlt:.56,sitOff:.7,yOff:-1.2,scl:1.2},{name:"Pinata",type:1,keyW:"Head",id:44,rarity:1,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Sombrerro",type:1,keyW:"Head",id:44,tex:1,rarity:1,seas:2,sclMlt:.56,sitOff:.6,yOff:-1.2,scl:1.2},{name:"Swagger",type:1,keyW:"Head",id:45,rarity:3,seas:2,sclMlt:.56,sitOff:1.8,yOff:-2,scl:1.2},{name:"Acid Bane",id:11,rarity:3,glow:!0,type:2,keyW:"Back",seas:2,scl:5,sclMlt:3.4,sitOff:-1.3,sitOffZ:-.8,yOff:-2,xOff:-4},{name:"Plasma Bones",id:11,tex:1,rarity:3,glow:!0,type:2,keyW:"Back",seas:2,scl:5,sclMlt:3.4,sitOff:-1.3,sitOffZ:-.8,yOff:-2,xOff:-4},{name:"Jet Pack",id:13,rarity:2,glow:!0,type:2,keyW:"Back",seas:2,scl:6,sclMlt:3,sitOff:-.5,sitOffZ:-.93,yOff:-1.3,xRot:Math.PI},{name:"Red Backpack",id:14,rarity:1,type:2,keyW:"Back",seas:2,scl:4,sclMlt:2.3,sitOff:-.8,sitOffZ:-.8,yOff:-1.5,xRot:Math.PI},{name:"Blue Backpack",id:14,tex:1,rarity:1,type:2,keyW:"Back",seas:2,scl:3.5,sclMlt:2.3,sitOff:-.8,sitOffZ:-.8,yOff:-1.5,xRot:Math.PI},{name:"Police Vest",id:15,rarity:1,type:2,keyW:"Back",seas:2,scl:4.5,sclMlt:2.5,sitOff:.4,sitOffZ:0,yOff:-2,xRot:Math.PI},{name:"Angelic Wings",id:16,rarity:3,glow:!0,type:2,keyW:"Back",seas:2,scl:3,sclMlt:3,sitOff:-.5,sitOffZ:-2,xOff:-2,yOff:-3},{name:"Gradient Pennon",id:16,tex:1,rarity:4,glow:!0,type:2,keyW:"Back",seas:2,scl:3,sclMlt:3,sitOff:-.5,sitOffZ:-2,xOff:-2,yOff:-3},{name:"Torn Aileron",id:17,rarity:4,glow:!0,type:2,keyW:"Back",seas:2,scl:3,sclMlt:3,sitOff:0,sitOffZ:-2,xOff:-2,yOff:-3},{name:"Cursed",id:17,tex:1,rarity:3,glow:!0,type:2,keyW:"Back",seas:2,scl:3,sclMlt:3,sitOff:0,sitOffZ:-2,xOff:-2,yOff:-3},{name:"Butterfly",id:19,rarity:2,type:2,keyW:"Back",seas:2,scl:3.5,sclMlt:3.3,sitOff:-.9,sitOffZ:-2.4,yOff:-2},{name:"Mr. Rabbiton",id:46,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Madman",id:47,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.95,sitOff:.8,scl:1.6,yOff:-1.2},{name:"Grizz Lee",id:48,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.95,sitOff:.8,scl:1.6,yOff:-1.2},{name:"Claws",id:48,tex:1,rarity:3,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Simba",id:49,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Captain Walrus",id:50,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Monke",id:51,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Lord Panda",id:52,rarity:3,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Ray Bam",id:53,rarity:0,type:1,keyW:"Head",seas:2,sclMlt:.51,sitOff:1.1,scl:1.4,xOff:1.5,yOff:-1.2},{name:"Gold Sunnies",id:53,tex:1,rarity:1,type:1,keyW:"Head",seas:2,sclMlt:.51,sitOff:1.1,scl:1.4,xOff:1.5,yOff:-1.2},{name:"Queens Guard",id:54,rarity:0,type:1,keyW:"Head",seas:2,sclMlt:.6,sitOff:.9,scl:.9,yOff:-2.1},{name:"Snowman",id:55,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.8,xOff:1.5,scl:1.6,yOff:-1.2},{name:"Misty",id:56,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Unicorn",id:57,rarity:3,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"TV Tron LCD",id:32,tex:4,rarity:4,type:1,keyW:"Head",seas:2,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,frames:2,frameT:400},{name:"Acidic Bane",id:36,rarity:3,glow:!0,type:1,keyW:"Head",seas:2,sclMlt:.56,sitOff:1.3,xOff:1.2,scl:1.1,yOff:-1.2},{name:"Tentacus",id:34,tex:1,rarity:3,glow:!0,type:1,keyW:"Head",seas:2,sclMlt:.56,sitOff:1.3,scl:1.1,yOff:-1.2},{name:"Soldier 159",id:35,tex:1,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.56,sitOff:1.3,scl:1.1,yOff:-1.2},{name:"Soldier 160",id:35,tex:2,rarity:2,type:1,keyW:"Head",seas:2,sclMlt:.56,sitOff:1.3,scl:1.1,yOff:-1.2},{name:"Templar",id:37,rarity:3,type:1,glow:!0,keyW:"Head",seas:2,sclMlt:.56,sitOff:1.3,scl:1.1,yOff:-1.2},{name:"Phase Blades",id:2,tex:1,type:2,seas:2,keyW:"Back",glow:!0,scl:.00048112055276382,sclMlt:.000406279577889448,sitOff:-1.3,sitOffZ:-.95,yOff:-1,xOff:-.5,rarity:3},{name:"Pot'O'Gold",id:20,rarity:2,type:2,keyW:"Back",seas:2,sclMlt:2.5,sitOff:-.8,sitOffZ:-2,yOff:-2,xOff:.5,scl:4,xRot:Math.PI},{name:"Unicorn Backpack",id:21,rarity:3,type:2,keyW:"Back",seas:2,sclMlt:2.3,sitOff:-.8,sitOffZ:-.8,yOff:-2,xOff:-1.5,scl:3.5,xRot:Math.PI},{name:"Flame Talon",weapon:5,glow:!0,id:79,seas:2,rarity:4},{name:"Raynb0w",creator:"???",pat:1,seas:2,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:7,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:2,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:5,rarity:5},{name:"Terminal",id:39,type:4,rarity:0,seas:2,opacity:.6,frames:2,frameT:250,keyW:"Sprays"},{name:"Clickbait",id:40,type:4,rarity:2,seas:2,opacity:.75,frames:2,frameT:550,keyW:"Sprays"},{name:"Kunai",keyW:"Knife",glow:!0,pulsT:.0015,id:4,type:3,seas:2,rarity:4,scl:2,sclMlt:.75,yOff:-1,sxOff:0,syOff:-.05,szOff:-.1},{name:"Wrench",keyW:"Knife",id:5,type:3,seas:2,rarity:4,scl:2,sclMlt:.8,yOff:-2.5,sxOff:.35,szOff:-.25},{name:"Clown",id:58,rarity:3,type:1,keyW:"Head",seas:2,sclMlt:.89,sitOff:.9,scl:1.6,yOff:-1.2},{name:"Wink",id:41,type:4,rarity:1,seas:2,opacity:.75,frames:2,frameT:550,keyW:"Sprays"},{name:"No U",id:42,type:4,rarity:1,seas:2,opacity:.75,frames:2,frameT:550,keyW:"Sprays"},{name:"Coolman",id:43,type:4,rarity:1,seas:2,opacity:.75,frames:2,frameT:550,keyW:"Sprays"},{name:"Paranoid",id:44,type:4,rarity:0,seas:2,opacity:.75,frames:2,frameT:1200,keyW:"Sprays"},{name:"Dab",id:45,type:4,rarity:1,seas:2,opacity:.75,frames:2,frameT:400,keyW:"Sprays"},{name:"Pepereel",id:46,type:4,rarity:1,seas:2,opacity:.8,movT:-.0025,keyW:"Sprays"},{name:"Wanted",id:47,type:4,rarity:0,seas:2,opacity:.75,keyW:"Sprays"},{name:"Soon&trade;",id:48,type:4,rarity:0,seas:2,opacity:.7,frames:2,frameT:550,keyW:"Sprays"},{name:"Art",id:49,type:4,rarity:2,seas:2,opacity:.8,frames:2,frameT:350,keyW:"Sprays"},{name:"Nautilus",id:50,type:4,rarity:3,seas:2,opacity:.85,frames:4,frameT:200,keyW:"Sprays"},{name:"Baller",creator:"???",pat:6,tex:"weapons/pat/6",sameGlow:!0,movT:2e-4,weapon:1,rarity:5,seas:2},{name:"Baller",creator:"???",pat:6,tex:"weapons/pat/6",sameGlow:!0,movT:2e-4,weapon:2,rarity:5,seas:2},{name:"Baller",creator:"???",pat:6,tex:"weapons/pat/6",sameGlow:!0,movT:2e-4,weapon:4,rarity:5,seas:2},{name:"Baller",creator:"???",pat:6,tex:"weapons/pat/6",sameGlow:!0,movT:2e-4,weapon:5,rarity:5,seas:2},{name:"TV Tron HD",id:32,tex:5,rarity:4,type:1,keyW:"Head",seas:2,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,frames:2,frameT:400},{name:"Nova Pump",limT:"Debug",lore:"First Weapon Remodel Placeholder",mid:0,midT:38,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0},{name:"Roadkill",mid:0,midT:1,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:3},{name:"Molten Core",mid:0,midT:2,pulsT:.0015,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,glow:!0,rarity:4},{name:"Mosaik",mid:0,midT:3,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Kiason",mid:0,midT:4,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Monatomic",mid:0,midT:5,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,glow:!0,rarity:3},{name:"Crystalline",mid:0,midT:6,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,glow:!0,rarity:4},{name:"Blue Digital",mid:0,midT:7,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0},{name:"Green Digital",mid:0,midT:8,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0},{name:"Purple Digital",mid:0,midT:9,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0},{name:"Red Digital",mid:0,midT:10,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0},{name:"Pink Poly",mid:0,midT:11,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Orange Poly",mid:0,midT:12,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Green Poly",mid:0,midT:13,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Blue Poly",mid:0,midT:14,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Pink Drip",mid:0,midT:15,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Blue Drip",mid:0,midT:16,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Sepia",mid:0,midT:17,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Olive",mid:0,midT:18,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Spruce",mid:0,midT:19,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Dijon",mid:0,midT:20,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Red Splat",mid:0,midT:21,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Purple Splat",mid:0,midT:22,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Orange Splat",mid:0,midT:23,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Green Splat",mid:0,midT:24,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Yellow Comb",mid:0,midT:25,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Red Comb",mid:0,midT:26,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Green Comb",mid:0,midT:27,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Blue Comb",mid:0,midT:28,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Sandstorm",mid:0,midT:29,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Picnic",mid:0,midT:30,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Picasso",mid:0,midT:31,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Snowy",mid:0,midT:32,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Hazard",mid:0,midT:33,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Cerise",mid:0,midT:34,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:2},{name:"Orange Drip",mid:0,midT:35,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Red Drip",mid:0,midT:36,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Green Drip",mid:0,midT:37,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:1},{name:"Wasteland",id:118,creator:"FlowerKid",weapon:1,rarity:3,seas:2},{name:"Turbo",id:119,creator:"Floatingpoint",weapon:1,rarity:2,seas:2},{name:"Urban Splat",id:114,creator:"FlowerKid",glow:!0,weapon:2,rarity:4,seas:2},{name:"Cimota",id:108,creator:"Cimota",glow:!0,weapon:4,rarity:3,seas:2},{name:"Fractal",id:109,creator:"Cimota",weapon:4,rarity:3,seas:2},{name:"Chrome",id:80,creator:"Flowerkid",glow:!0,weapon:5,rarity:3,seas:2},{name:"World of Light",id:77,creator:"Electrode",glow:!0,weapon:15,rarity:3,seas:2},{name:"Vantablack",id:0,shirtCol:197379,sleeveCol:197379,pantsCol:197379,shoeCol:197379,seas:2,type:5,rarity:5},{name:"Lederhose",id:120,weapon:1,rarity:3,seas:2},{name:"Emboss",id:121,weapon:1,rarity:2,seas:2},{name:"Spineless",id:122,weapon:1,rarity:2,seas:2},{name:"Gold Plated",id:123,weapon:1,rarity:2,seas:2},{name:"Daimyo Spirit",creator:"FlowerKid",id:124,weapon:1,glow:!0,rarity:4,seas:2},{name:"Heat Stroke",id:125,weapon:1,glow:!0,rarity:3,seas:2},{name:"Samurai Spirit",creator:"FlowerKid",id:78,weapon:15,glow:!0,rarity:4,seas:2},{name:"Suede Blade",keyW:"Knife",flipAnim:!0,id:3,tex:4,type:3,scl:2.6,seas:2,sclMlt:1,yOff:-1,xOff:-1.5,rarity:3,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Aziru",creator:"Halloluke0201",keyW:"Knife",flipAnim:!0,glow:!0,id:3,tex:5,type:3,scl:2.6,seas:2,sclMlt:1,yOff:-1,xOff:-1.5,rarity:4,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Clockwork",id:126,seas:2,weapon:1,rarity:3},{name:"Jagdfaust IV",mid:2,glow:!0,limited:!0,scl:.9,mScl:1,spnScl:1.35,zOff:-.25,seas:2,yOff:.05,weapon:1,rarity:6},{name:"Coroller",keyW:"Toilet",id:7,type:3,seas:2,rarity:6,limited:!0,scl:2,sclMlt:.76,yOff:-2.5,sxOff:.15},{name:"Facemask",keyW:"Mask",limited:!0,id:60,rarity:2,type:1,seas:2,sclMlt:.54,sitOff:.9,scl:1.6},{name:"Spectralon",id:1,shirtCol:"#ffffff",sleeveCol:"#ffffff",pantsCol:"#ffffff",shoeCol:"#ffffff",seas:2,type:5,rarity:5},{name:"24/7",id:127,creator:"Drag",weapon:1,rarity:4,glow:!0,seas:2},{name:"Shattered",id:128,creator:"Edibleporg",weapon:1,rarity:2,seas:2},{name:"Lunatic",id:115,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,seas:2},{name:"Auzora",id:116,creator:"Cyanide",weapon:2,rarity:2,seas:2},{name:"Botanical",id:79,creator:"Nxbulah",weapon:15,rarity:4,glow:!0,seas:2},{name:"Krunkette 1",id:51,type:4,rarity:5,seas:2,opacity:.7,keyW:"Sprays"},{name:"Krunkette 2",id:52,type:4,rarity:4,seas:2,opacity:.7,keyW:"Sprays"},{name:"Krunkette 3",id:53,type:4,rarity:3,seas:2,opacity:.7,keyW:"Sprays"},{name:"Lunar",id:117,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,seas:2},{name:"S&Y",id:81,creator:"Cimota",weapon:5,rarity:3,glow:!0,seas:2},{name:"Quarantine",creator:"Floatingpoint",midT:39,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:2},{name:"Scarlet",id:118,creator:"FlowerKid",weapon:2,rarity:5,glow:!0,seas:2},{name:"Lunar Nitro",id:129,creator:"Kitter",weapon:1,rarity:2,seas:2},{name:"Sunset Raven",creator:"FlowerKid",midT:40,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,glow:!0,seas:2},{name:"Otzarreta",id:110,creator:"FlowerKid",weapon:4,rarity:4,glow:!0,seas:2},{name:"Wychwood",id:111,creator:"FlowerKid",weapon:4,rarity:4,glow:!0,seas:2},{name:"Trip",id:112,creator:"Nxbulah",weapon:4,rarity:3,glow:!0,seas:2},{name:"Retribution",id:130,creator:"Jhonxay_Playz",weapon:1,rarity:2,seas:2},{name:"Spiritful",id:80,creator:"Zinoob",weapon:15,rarity:3,glow:!0,seas:2},{name:"Toxix",creator:"Kltter",midT:41,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,glow:!0,seas:2},{name:"Spec Ops",id:131,creator:"floatingpoint",weapon:1,rarity:3,seas:2},{name:"Retro-cade",id:113,creator:"Kltter",weapon:4,rarity:2,seas:2},{name:"Incognito",midT:42,creator:"cimota",mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,seas:2},{name:"Crator",id:132,weapon:1,rarity:2,seas:2},{name:"Scalar",creator:"floatingpoint",midT:43,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,seas:2},{name:"HotRod",creator:"Kltter",midT:44,glow:!0,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:2},{name:"Insanity",id:119,weapon:2,rarity:4,glow:!0,seas:2},{name:"Violet",id:133,creator:"Jhonxay_Playz",weapon:1,rarity:2,seas:2},{name:"Savaged",id:134,creator:"Vx Bomb",weapon:1,rarity:2,seas:2},{name:"Crimson",id:120,creator:"Nxbulah",weapon:2,rarity:3,glow:!0,seas:2},{name:"T3CH",id:114,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:2},{name:"SMG Wired",id:115,creator:"floatingpoint",weapon:4,rarity:2,seas:2},{name:"AWM Federation",id:135,creator:"jonschmiddy",weapon:1,rarity:2,seas:2},{name:"Soul",id:121,creator:"Zino",weapon:2,rarity:2,seas:2},{name:"RevBG",id:82,creator:"cimota",weapon:5,rarity:2,seas:2},{name:"Thunder Serpent",midT:0,glow:!0,noMuz:!0,mid:0,weapon:3,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0,rarity:4,seas:2},{name:"Sheikah",id:136,creator:"FlowerKid",weapon:1,rarity:4,glow:!0,seas:2},{name:"Fairy",id:137,creator:"Jhonxay",weapon:1,rarity:2,seas:2},{name:"Trix",id:83,creator:"Jhonxay",weapon:5,rarity:3,glow:!0,seas:2},{name:"Moonlight",creator:"FlowerKid",midT:46,glow:!0,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:4,seas:2},{name:"Cassette",id:116,creator:"Kltter",weapon:4,rarity:3,seas:2},{name:"Damascus",id:122,weapon:2,rarity:3,seas:2},{name:"Toxic Nitro",id:138,creator:"Kltter",weapon:1,rarity:3,glow:!0,seas:2},{name:"Polly",id:139,creator:"Waldo",weapon:1,rarity:1,seas:2},{name:"Nozomu",id:140,creator:"Jhonxay",weapon:1,rarity:2,seas:2},{name:"Gilded",id:123,creator:"Cimota",weapon:2,rarity:2,glow:!0,seas:2},{name:"Shinto",id:124,creator:"Kltter",weapon:2,rarity:3,seas:2},{name:"Lantern",id:125,creator:"FlowerKid",weapon:2,rarity:3,glow:!0,seas:2},{name:"Diode",id:126,creator:"Cimota",pulsT:.0015,weapon:2,rarity:4,glow:!0,seas:2},{name:"Automatis",id:24,type:2,keyW:"Back",scl:4.5,sclMlt:3.1,spnSpd:.1,xOff:-3,sitOff:-.9,sitOffZ:-.2,yOff:-.5,rarity:4,seas:2,rAnim:.0015,rAnimA:"x"},{name:"Osiris' Servant",midT:1,glow:!0,minGlo:.35,noMuz:!0,mid:0,weapon:3,pulsT:.0015,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0,rarity:5,seas:2},{name:"Shatter Wings",id:16,tex:2,rarity:4,glow:!0,type:2,keyW:"Back",seas:2,scl:3,sclMlt:3,sitOff:-.5,sitOffZ:-2,xOff:-2,yOff:-3,movT:3e-4},{name:"Shattercore",creator:"Xorn XII",tex:"weapons/pat/7",pat:7,tileS:3,sameGlow:!0,movT:-7e-4,seas:2,weapon:1,rarity:5},{name:"Outrunner",creator:"Kltter",id:128,weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:2},{name:"Draconic",creator:"Wolfgang",id:129,weapon:2,rarity:4,glow:!0,seas:2},{name:"Orchid Dream",creator:"Nxbulah",id:84,weapon:5,rarity:4,glow:!0,seas:2},{name:"Hades",creator:"Kltter",id:85,weapon:5,rarity:3,glow:!0,seas:2},{name:"Aurum",id:86,weapon:5,rarity:2,seas:2},{name:"Injection",creator:"Cimota",id:74,weapon:7,rarity:4,glow:!0,pulsT:.0015,seas:2},{name:"Sugarbear",id:2,shirtCol:15956900,sleeveCol:15956900,pantsCol:15956900,shoeCol:15956900,seas:2,type:5,rarity:4},{name:"Verb",id:141,creator:"FlowerKid",weapon:1,rarity:4,glow:!0,minGlo:.35,pulsT:.0015,seas:2},{name:"Easter Egg",limT:"Easter",keyW:"Sprays",id:60,type:4,rarity:1,seas:2,opacity:.75},{name:"Egginald",limT:"Easter",keyW:"Sprays",id:61,type:4,rarity:2,seas:2,opacity:.75},{name:"Mr Carrot",limT:"Easter",keyW:"Sprays",id:62,type:4,rarity:2,seas:2,opacity:.85,frames:2,frameT:550},{name:"Carambit",limT:"Easter",keyW:"Knife",id:8,type:3,seas:2,rarity:4,scl:2,sclMlt:.76,xOff:-.5,yOff:-2},{name:"Carrot Top",limT:"Easter",keyW:"Hat",id:61,rarity:2,type:1,seas:2,sclMlt:.8,sitOff:.55,scl:1.6},{name:"Mr Chick",limT:"Easter",keyW:"Hat",id:62,rarity:2,type:1,seas:2,sclMlt:.89,sitOff:.8,xOff:.8,scl:1.6},{name:"Bunny",limT:"Easter",keyW:"Hat",id:63,rarity:2,type:1,seas:2,sclMlt:.89,sitOff:.8,scl:1.6,yOff:-1},{name:"Munchie",limT:"Easter",keyW:"Hat",id:64,rarity:1,type:1,seas:2,sclMlt:.5,sitOff:1.6,sitOffZ:1,scl:1.6},{name:"Arrowhead",limT:"Easter",keyW:"Hat",id:65,rarity:1,type:1,seas:2,sclMlt:.5,sitOff:1,scl:1.6,yOff:-2},{name:"Egghead",limT:"Easter",keyW:"Hat",id:66,rarity:1,type:1,seas:2,sclMlt:.7,sitOff:.79,scl:1.6},{name:"Egg Basket",limT:"Easter",keyW:"Back",id:25,rarity:2,type:2,seas:2,scl:3,sclMlt:2,sitOff:-.8,sitOffZ:-.63,xOff:-1,yOff:-.8,xRot:Math.PI},{name:"Red Ribbon",limT:"Easter",keyW:"Back",id:26,rarity:3,type:2,seas:2,scl:3,sclMlt:2,sitOff:-1.4,sitOffZ:-.63,xOff:-2},{name:"Carockets",limT:"Easter",keyW:"Back",id:27,rarity:3,type:2,seas:2,scl:3,sclMlt:2,sitOff:-.9,sitOffZ:-.63,xOff:-.7,xRot:Math.PI},{name:"Carrot Blades",limT:"Easter",keyW:"Back",id:28,rarity:3,type:2,seas:2,scl:3,sclMlt:2,sitOff:-.9,sitOffZ:-.3,xOff:-.4,yOff:-.6,xRot:Math.PI},{name:"Chick N' Basket",limT:"Easter",keyW:"Back",id:29,rarity:3,type:2,seas:2,scl:3,sclMlt:2,sitOff:-1.1,sitOffZ:-.63,xOff:-1,xRot:Math.PI},{name:"Just N' Egg",limT:"Easter",keyW:"Back",id:30,rarity:1,type:2,seas:2,scl:3,sclMlt:2.5,sitOff:-.5,sitOffZ:-.63,xOff:-1,xRot:Math.PI},{name:"Egg Tamer",limT:"Easter",keyW:"Back",id:31,type:2,scl:3,sclMlt:2.6,sitOff:-1.1,sitOffZ:-2,yOff:-.9,xOff:-.3,rarity:5,seas:2,rAnim:.0015,rAnimA:"x"},{name:"Carotine",limT:"Easter",id:3,shirtCol:13203507,sleeveCol:3911758,pantsCol:13203507,shoeCol:3911758,seas:2,type:5,rarity:4},{name:"Zig-Zag",limT:"Easter",id:142,weapon:1,rarity:1,seas:2},{name:"Eco",limT:"Easter",id:143,weapon:1,rarity:1,seas:2},{name:"Musk",limT:"Easter",id:144,weapon:1,rarity:1,seas:2},{name:"Sugar Kiss",limT:"Easter",id:145,weapon:1,rarity:1,seas:2},{name:"Candy",limT:"Easter",id:146,weapon:1,rarity:2,seas:2},{name:"Choc",limT:"Easter",id:147,weapon:1,rarity:2,seas:2},{name:"Pastel",limT:"Easter",id:148,creator:"Jonschmiddy",weapon:1,rarity:2,seas:2},{name:"BunnyBeam",limT:"Easter",id:149,creator:"FlowerKid",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:2},{name:"Zig-Zag",limT:"Easter",id:130,weapon:2,rarity:1,seas:2},{name:"Eco",limT:"Easter",id:131,weapon:2,rarity:1,seas:2},{name:"Musk",limT:"Easter",id:132,weapon:2,rarity:1,seas:2},{name:"Sugar Kiss",limT:"Easter",id:133,weapon:2,rarity:1,seas:2},{name:"Candy",limT:"Easter",id:134,weapon:2,rarity:2,seas:2},{name:"Wiggle",limT:"Easter",id:135,weapon:2,rarity:2,seas:2},{name:"Choc",limT:"Easter",id:136,weapon:2,rarity:2,seas:2},{name:"HyperYolk",limT:"Easter",id:137,creator:"FlowerKid",weapon:2,rarity:4,glow:!0,seas:2},{name:"Farmland",limT:"Easter",id:138,creator:"Cimota",weapon:2,rarity:3,seas:2},{name:"Horisun",limT:"Easter",id:139,creator:"Cimota",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:2},{name:"Zig-Zag",limT:"Easter",id:117,weapon:4,rarity:1,seas:2},{name:"Eco",limT:"Easter",id:118,weapon:4,rarity:1,seas:2},{name:"Musk",limT:"Easter",id:119,weapon:4,rarity:1,seas:2},{name:"Sugar Kiss",limT:"Easter",id:120,weapon:4,rarity:1,seas:2},{name:"Candy",limT:"Easter",id:121,weapon:4,rarity:2,seas:2},{name:"Wiggle",limT:"Easter",id:122,weapon:4,rarity:2,seas:2},{name:"Choc",limT:"Easter",id:123,weapon:4,rarity:2,seas:2},{name:"Festive",limT:"Easter",id:124,creator:"FlowerKid",weapon:4,rarity:3,seas:2},{name:"Zig-Zag",limT:"Easter",midT:47,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:2},{name:"Eco",limT:"Easter",midT:48,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:2},{name:"Musk",limT:"Easter",midT:49,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:2},{name:"Sugar Kiss",limT:"Easter",midT:50,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:2},{name:"Candy",limT:"Easter",midT:51,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:2},{name:"Egg Catcher",limT:"Easter",creator:"FlowerKid",midT:52,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,seas:2},{name:"Eggcellent",limT:"Easter",creator:"Cimota",midT:53,glow:!0,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,seas:2},{name:"Zig-Zag",limT:"Easter",id:75,weapon:7,rarity:1,seas:2},{name:"Eco",limT:"Easter",id:76,weapon:7,rarity:1,seas:2},{name:"Musk",limT:"Easter",id:77,weapon:7,rarity:1,seas:2},{name:"Sugar Kiss",limT:"Easter",id:78,weapon:7,rarity:1,seas:2},{name:"Candy",limT:"Easter",id:79,weapon:7,rarity:1,seas:2},{name:"Choc",limT:"Easter",id:80,weapon:7,rarity:2,seas:2},{name:"Sweet Tooth",keyW:"Knife",limT:"Easter",creator:"jonschmiddy",flipAnim:!0,id:3,tex:6,type:3,scl:2.6,seas:2,sclMlt:1,yOff:-1,xOff:-1.5,rarity:4,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Ceretta 92",limT:"Easter",midT:2,noMuz:!0,noEmis:!0,mid:2,weapon:3,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0,rarity:5,seas:2},{name:"Gold N' Egg",limT:"Easter",keyW:"Back",tex:1,id:30,rarity:4,type:2,seas:2,scl:3,sclMlt:2.5,sitOff:-.5,sitOffZ:-.63,xOff:-1,xRot:Math.PI},{name:"Vertigo",limT:"Easter",keyW:"Hat",id:67,rarity:6,type:1,seas:2,sclMlt:.9,sitOff:-.8,scl:1.6,rAnim:-.0022,rAnimA:"y"},{name:"U.F.0",keyW:"Hat",id:68,rarity:5,type:1,seas:2,sclMlt:1.75,sitOff:-.5,xOff:-3.6,scl:1.6,rAnim:-.0022,rAnimA:"y",trans:!0,glow:!0},{name:"RGB",priceMlt:4,id:4,seas:2,type:5,rarity:6,rgb:!0,rgbS:.5},{name:"Raynb0w",weapon:3,pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,rarity:5,seas:2},{name:"Hackusate",mid:0,midT:41,weapon:10,rarity:5,rgb:!0,rgbs:.5,wire:!0,seas:3},{name:"Raynb0w",creator:"???",pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:15,rarity:5,seas:3},{name:"Raynb0w",creator:"???",pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:14,rarity:5,seas:3},{name:"Coldsnap",id:9,shirtCol:2862847,sleeveCol:16449023,pantsCol:2862847,shoeCol:16449023,seas:3,type:5,rarity:4},{name:"Crimson",id:5,shirtCol:16724787,sleeveCol:526344,pantsCol:16724787,shoeCol:526344,seas:3,type:5,rarity:4},{name:"Lavender",id:6,shirtCol:11809791,sleeveCol:6501375,pantsCol:11809791,shoeCol:6501375,seas:3,type:5,rarity:4},{name:"Royality",id:150,creator:"Nxbulah",weapon:1,rarity:3,seas:3},{name:"Firestorm",id:151,creator:"Chromatikk",weapon:1,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Sense",id:152,creator:"Nxbulah",weapon:1,rarity:3,glow:!0,seas:3},{name:"Yürei",id:153,creator:"Jhonxay",weapon:1,rarity:2,seas:3},{name:"Unistorm",id:154,creator:"Skriller33",weapon:1,rarity:3,glow:!0,seas:3},{name:"Vaporride",id:155,creator:"jonschmiddy",weapon:1,rarity:2,seas:3},{name:"Alligator",id:156,creator:"Skriller33",weapon:1,rarity:2,seas:3},{name:"Hakan",id:157,creator:"Nxbulah & Kilfy",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Jungle",id:158,creator:"Skriller33",weapon:1,rarity:2,seas:3},{name:"Void X",id:159,creator:"floatingpoint",glow:!0,weapon:1,rarity:3,seas:3},{name:"Eira",id:160,creator:"Nxbulah",weapon:1,rarity:3,glow:!0,seas:3},{name:"Neigh",id:161,creator:"_irizu",weapon:1,rarity:3,glow:!0,seas:3},{name:"Akkoro",id:162,creator:"FlowerKid",weapon:1,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Stickerbomb",id:163,creator:"Luminae",weapon:1,rarity:2,seas:3},{name:"Combined",id:164,creator:"Kltter",weapon:1,rarity:3,glow:!0,seas:3},{name:"Wildstyle",id:165,creator:"FlowerKid",weapon:1,rarity:4,glow:!0,seas:3},{name:"Nova",id:166,creator:"FlowerKid",weapon:1,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"The Star",id:167,creator:"Chromatikk",weapon:1,rarity:3,seas:3},{name:"Lime",id:168,weapon:1,rarity:0,seas:3},{name:"Berry",id:169,weapon:1,rarity:0,seas:3},{name:"Indigo",id:170,weapon:1,rarity:0,seas:3},{name:"Citrus",id:171,weapon:1,rarity:0,seas:3},{name:"Tangerine",id:172,weapon:1,rarity:0,seas:3},{name:"Grape",id:173,weapon:1,rarity:0,seas:3},{name:"Canvas",id:174,weapon:1,rarity:0,seas:3},{name:"Libra",id:175,weapon:1,rarity:0,seas:3},{name:"Psychedelic",id:176,weapon:1,rarity:0,seas:3},{name:"Violette",id:177,weapon:1,rarity:0,seas:3},{name:"Marv",id:178,weapon:1,rarity:0,seas:3},{name:"Basel",id:179,weapon:1,rarity:0,seas:3},{name:"Tiger Blood",id:180,weapon:1,rarity:1,seas:3},{name:"Scalamandre",id:181,weapon:1,rarity:1,seas:3},{name:"Tiger Maine",id:182,weapon:1,rarity:1,seas:3},{name:"Leopard",id:183,weapon:1,rarity:1,seas:3},{name:"Metallic Swirl",id:184,weapon:1,rarity:2,seas:3},{name:"Tessilate",id:185,weapon:1,rarity:2,seas:3},{name:"Bubblegum",id:186,weapon:1,rarity:2,seas:3},{name:"Peppermint",id:187,weapon:1,rarity:1,seas:3},{name:"Spearmint",id:188,weapon:1,rarity:1,seas:3},{name:"Obsydian",id:189,weapon:1,rarity:2,seas:3},{name:"Pink Panther",id:190,weapon:1,rarity:1,seas:3},{name:"Amber",id:191,weapon:1,rarity:1,seas:3},{name:"Clover",id:192,weapon:1,rarity:0,seas:3},{name:"Multicam",id:193,weapon:1,rarity:1,seas:3},{name:"Aquaric",id:194,weapon:1,rarity:1,seas:3},{name:"Heather",id:195,weapon:1,rarity:1,seas:3},{name:"Carbonfibre",id:196,weapon:1,rarity:2,seas:3},{name:"Cobra",id:197,weapon:1,rarity:2,seas:3},{name:"Python",id:198,weapon:1,rarity:2,seas:3},{name:"Lost",id:199,weapon:1,rarity:1,seas:3},{name:"Blue Maze",id:200,weapon:1,rarity:0,seas:3},{name:"Yellow Maze",id:201,weapon:1,rarity:0,seas:3},{name:"Morgana",id:202,weapon:1,rarity:1,seas:3},{name:"Sagittarius",id:140,creator:"Chromatikk",weapon:2,rarity:4,seas:3},{name:"VAX",id:141,creator:"KItter",weapon:2,rarity:2,glow:!0,seas:3},{name:"Wims",id:142,creator:"Nxbulah",weapon:2,rarity:3,glow:!0,seas:3},{name:"Amaterasu",id:143,creator:"KItter",weapon:2,rarity:3,seas:3},{name:"Kanagawa",id:144,creator:"FlowerKid",weapon:2,rarity:2,seas:3},{name:"AKS",id:145,creator:"KItter",weapon:2,rarity:2,seas:3},{name:"Fragternity",id:146,creator:"FlowerKid",weapon:2,rarity:4,glow:!0,seas:3},{name:"Eurasian",id:147,creator:"Cimota",weapon:2,rarity:3,glow:!0,seas:3},{name:"Ifrit",id:148,creator:"FlowerKid",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Fantasy",id:149,creator:"Luminae",weapon:2,rarity:3,glow:!0,seas:3},{name:"Apocalypse",id:150,creator:"Lxckless",weapon:2,rarity:5,glow:!0,seas:3},{name:"Cheetah",id:151,creator:"Skriller33",weapon:2,rarity:2,seas:3},{name:"Krunkodore",id:152,creator:"KItter",weapon:2,rarity:3,glow:!0,seas:3},{name:"Creature",id:153,creator:"Jonschmiddy",weapon:2,rarity:3,frames:4,frameT:250,seas:3},{name:"Disco",id:154,creator:"Cimota",weapon:2,rarity:3,glow:!0,seas:3},{name:"Komics",id:155,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,seas:3},{name:"Toxic Nitro",id:156,creator:"KItter",weapon:2,rarity:3,glow:!0,seas:3},{name:"Swarm",id:157,creator:"Kilfy",weapon:2,rarity:4,glow:!0,seas:3},{name:"Letos",id:159,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,seas:3},{name:"Machinehead",id:160,creator:"jonschmiddy",weapon:2,rarity:4,frames:4,frameT:100,seas:3},{name:"Atheris",id:161,creator:"Skriller33",weapon:2,rarity:3,glow:!0,seas:3},{name:"Akhenaten",id:162,creator:"Nxbulah",weapon:2,rarity:3,glow:!0,seas:3},{name:"Futuristic",id:163,creator:"Zinoob",weapon:2,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Raiju",id:164,creator:"Kilfy",weapon:2,rarity:5,glow:!0,seas:3},{name:"Plague",id:165,creator:"BigBBaniel",weapon:2,rarity:4,glow:!0,seas:3},{name:"Frostywolf",id:166,creator:"Skriller33",weapon:2,rarity:4,glow:!0,frames:2,frameT:250,seas:3},{name:"Abducted",id:167,creator:"Luminae",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Lime",id:168,weapon:2,rarity:0,seas:3},{name:"Berry",id:169,weapon:2,rarity:0,seas:3},{name:"Indigo",id:170,weapon:2,rarity:0,seas:3},{name:"Citrus",id:171,weapon:2,rarity:0,seas:3},{name:"Tangerine",id:172,weapon:2,rarity:0,seas:3},{name:"Grape",id:173,weapon:2,rarity:0,seas:3},{name:"Canvas",id:174,weapon:2,rarity:0,seas:3},{name:"Libra",id:175,weapon:2,rarity:0,seas:3},{name:"Psychedelic",id:176,weapon:2,rarity:0,seas:3},{name:"Violette",id:177,weapon:2,rarity:0,seas:3},{name:"Marv",id:178,weapon:2,rarity:0,seas:3},{name:"Basel",id:179,weapon:2,rarity:0,seas:3},{name:"Tiger Blood",id:180,weapon:2,rarity:1,seas:3},{name:"Scalamandre",id:181,weapon:2,rarity:1,seas:3},{name:"Tiger Maine",id:182,weapon:2,rarity:1,seas:3},{name:"Leopard",id:183,weapon:2,rarity:1,seas:3},{name:"Metallic Swirl",id:184,weapon:2,rarity:2,seas:3},{name:"Tessilate",id:185,weapon:2,rarity:2,seas:3},{name:"Bubblegum",id:186,weapon:2,rarity:2,seas:3},{name:"Peppermint",id:187,weapon:2,rarity:1,seas:3},{name:"Spearmint",id:188,weapon:2,rarity:1,seas:3},{name:"Obsydian",id:189,weapon:2,rarity:2,seas:3},{name:"Pink Panther",id:190,weapon:2,rarity:1,seas:3},{name:"Amber",id:191,weapon:2,rarity:1,seas:3},{name:"Clover",id:192,weapon:2,rarity:0,seas:3},{name:"Multicam",id:193,weapon:2,rarity:1,seas:3},{name:"Aquaric",id:194,weapon:2,rarity:1,seas:3},{name:"Heather",id:195,weapon:2,rarity:1,seas:3},{name:"Carbonfibre",id:196,weapon:2,rarity:2,seas:3},{name:"Cobra",id:197,weapon:2,rarity:2,seas:3},{name:"Python",id:198,weapon:2,rarity:2,seas:3},{name:"Lost",id:199,weapon:2,rarity:1,seas:3},{name:"Blue Maze",id:200,weapon:2,rarity:0,seas:3},{name:"Yellow Maze",id:201,weapon:2,rarity:0,seas:3},{name:"Morgana",id:202,weapon:2,rarity:1,seas:3},{name:"Aquarium",id:125,creator:"Skriller33",weapon:4,rarity:2,seas:3},{name:"Traveller",id:126,creator:"KItter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Abraxas",id:127,creator:"Cimota",weapon:4,rarity:3,glow:!0,seas:3},{name:"Krunkstruct",id:128,creator:"Cimota",weapon:4,rarity:2,glow:!0,seas:3},{name:"Bloodmoon",id:129,creator:"Nxbulah",weapon:4,rarity:2,glow:!0,seas:3},{name:"Doodle",id:130,creator:"Luminae",weapon:4,rarity:3,glow:!0,seas:3},{name:"WildClaw",id:131,creator:"FlowerKid",weapon:4,rarity:5,glow:!0,seas:3},{name:"Carcinogen",id:132,creator:"Floatingpoint",weapon:4,rarity:3,glow:!0,seas:3},{name:"Spinner",id:133,creator:"Cimota",weapon:4,rarity:3,glow:!0,seas:3},{name:"Green Waves",id:134,creator:"Zinoob",weapon:4,rarity:2,seas:3},{name:"Purple Waves",id:135,creator:"Zinoob",weapon:4,rarity:2,seas:3},{name:"Goddess",id:136,creator:"FlowerKid",weapon:4,rarity:2,glow:!0,seas:3},{name:"Bahamut",id:137,creator:"Kilfy",weapon:4,rarity:5,glow:!0,seas:3},{name:"Occult",id:138,creator:"floatingpoint",weapon:4,rarity:3,glow:!0,seas:3},{name:"Merlin",id:139,creator:"Cimota",weapon:4,rarity:3,glow:!0,seas:3},{name:"Kittle",id:140,creator:"Kltter",weapon:4,rarity:2,glow:!0,seas:3},{name:"TV Strike",id:141,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Composite",id:142,creator:"Floatingpoint",weapon:4,rarity:4,glow:!0,seas:3},{name:"Taurine",id:143,creator:"Chromatikk",weapon:4,rarity:3,glow:!0,seas:3},{name:"Vandal",id:144,creator:"Nxbulah",weapon:4,rarity:4,glow:!0,seas:3},{name:"Amethyst",id:145,creator:"Luminae",weapon:4,rarity:3,frames:4,frameT:250,seas:3},{name:"Northern",id:146,creator:"Luminae",weapon:4,rarity:3,glow:!0,seas:3},{name:"Agent",id:147,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Lester",id:148,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Lime",id:149,weapon:4,rarity:0,seas:3},{name:"Berry",id:150,weapon:4,rarity:0,seas:3},{name:"Indigo",id:151,weapon:4,rarity:0,seas:3},{name:"Citrus",id:152,weapon:4,rarity:0,seas:3},{name:"Tangerine",id:153,weapon:4,rarity:0,seas:3},{name:"Grape",id:154,weapon:4,rarity:0,seas:3},{name:"Canvas",id:155,weapon:4,rarity:0,seas:3},{name:"Libra",id:156,weapon:4,rarity:0,seas:3},{name:"Psychedelic",id:157,weapon:4,rarity:0,seas:3},{name:"Violette",id:158,weapon:4,rarity:0,seas:3},{name:"Marv",id:159,weapon:4,rarity:0,seas:3},{name:"Basel",id:160,weapon:4,rarity:0,seas:3},{name:"Tiger Blood",id:161,weapon:4,rarity:1,seas:3},{name:"Scalamandre",id:162,weapon:4,rarity:1,seas:3},{name:"Tiger Maine",id:163,weapon:4,rarity:1,seas:3},{name:"Leopard",id:164,weapon:4,rarity:1,seas:3},{name:"Metallic Swirl",id:165,weapon:4,rarity:2,seas:3},{name:"Tessilate",id:166,weapon:4,rarity:2,seas:3},{name:"Bubblegum",id:167,weapon:4,rarity:2,seas:3},{name:"Peppermint",id:168,weapon:4,rarity:1,seas:3},{name:"Spearmint",id:169,weapon:4,rarity:1,seas:3},{name:"Obsydian",id:170,weapon:4,rarity:2,seas:3},{name:"Pink Panther",id:171,weapon:4,rarity:1,seas:3},{name:"Amber",id:172,weapon:4,rarity:1,seas:3},{name:"Clover",id:173,weapon:4,rarity:0,seas:3},{name:"Multicam",id:174,weapon:4,rarity:1,seas:3},{name:"Aquaric",id:175,weapon:4,rarity:1,seas:3},{name:"Heather",id:176,weapon:4,rarity:1,seas:3},{name:"Carbonfibre",id:177,weapon:4,rarity:2,seas:3},{name:"Cobra",id:178,weapon:4,rarity:2,seas:3},{name:"Python",id:179,weapon:4,rarity:2,seas:3},{name:"Lost",id:180,weapon:4,rarity:1,seas:3},{name:"Blue Maze",id:181,weapon:4,rarity:0,seas:3},{name:"Yellow Maze",id:182,weapon:4,rarity:0,seas:3},{name:"Morgana",id:183,weapon:4,rarity:1,seas:3},{name:"Lineride",midT:54,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,pulsT:.0015,creator:"Kltter",weapon:6,rarity:4,glow:!0,seas:3},{name:"Halogen",midT:55,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"floatingpoint",weapon:6,rarity:2,glow:!0,seas:3},{name:"Adventurine",midT:56,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Nxbulah",weapon:6,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Surreal",midT:57,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Nxbulah",weapon:6,rarity:4,glow:!0,seas:3},{name:"Red Supersport",midT:58,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Kltter",weapon:6,rarity:3,seas:3},{name:"Pink Supersport",midT:59,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Kltter",weapon:6,rarity:3,seas:3},{name:"Exponentiat",midT:60,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Cimota",glow:!0,weapon:6,rarity:2,seas:3},{name:"Ethereal",midT:61,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Nxbulah",weapon:6,rarity:3,glow:!0,seas:3},{name:"Spectate",midT:62,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Cimota",weapon:6,rarity:3,glow:!0,seas:3},{name:"Sunburst",midT:63,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"FlowerKid",weapon:6,rarity:4,glow:!0,seas:3},{name:"Hydrofluric",midT:64,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Cimota",weapon:6,rarity:3,glow:!0,seas:3},{name:"Mech Rainbow",midT:65,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Luminae",weapon:6,rarity:2,glow:!0,seas:3},{name:"Midnight",midT:66,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Luminae",weapon:6,rarity:3,glow:!0,seas:3},{name:"Lime",midT:67,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Berry",midT:68,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Indigo",midT:69,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Citrus",midT:70,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Tangerine",midT:71,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Grape",midT:72,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Canvas",midT:73,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Libra",midT:74,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Psychedelic",midT:75,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Violette",midT:76,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Marv",midT:77,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Basel",midT:78,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Tiger Blood",midT:79,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Scalamandre",midT:80,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Tiger Maine",midT:81,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Leopard",midT:82,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Metallic Swirl",midT:83,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Tessilate",midT:84,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Bubblegum",midT:85,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Peppermint",midT:86,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Spearmint",midT:87,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Obsydian",midT:88,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Pink Panther",midT:89,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Amber",midT:90,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Clover",midT:91,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Multicam",midT:92,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Aquaric",midT:93,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Heather",midT:94,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Carbonfibre",midT:95,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Cobra",midT:96,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Python",midT:97,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Lost",midT:98,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Blue Maze",midT:99,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Yellow Maze",midT:100,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:3},{name:"Morgana",midT:101,mid:0,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Excalibur",id:87,creator:"Nxbulah",weapon:5,rarity:3,seas:3},{name:"Zeus",id:88,creator:"Kltter",weapon:5,rarity:3,glow:!0,seas:3},{name:"Luminous",id:89,creator:"Nxbulah",weapon:5,rarity:4,glow:!0,seas:3},{name:"Depth",id:90,creator:"jonschmiddy",weapon:5,rarity:2,seas:3},{name:"Absinthe",id:91,creator:"Cimota",weapon:5,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Scoria",id:92,creator:"Cimota",weapon:5,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Krunkitis",id:93,creator:"Electrode_",weapon:5,rarity:4,glow:!0,seas:3},{name:"Pearlescent",id:94,creator:"Cimota",weapon:5,rarity:2,seas:3},{name:"Zap",id:95,creator:"Kilfy",weapon:5,rarity:3,glow:!0,seas:3},{name:"Midas",id:96,creator:"FlowerKid",weapon:5,rarity:3,glow:!0,seas:3},{name:"Sea Wanderer",id:97,creator:"Nxbulah",weapon:5,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Crystallize",id:98,creator:"Cimota",weapon:5,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Lime",id:99,weapon:5,rarity:0,seas:3},{name:"Berry",id:100,weapon:5,rarity:0,seas:3},{name:"Indigo",id:101,weapon:5,rarity:0,seas:3},{name:"Citrus",id:102,weapon:5,rarity:0,seas:3},{name:"Tangerine",id:103,weapon:5,rarity:0,seas:3},{name:"Grape",id:104,weapon:5,rarity:0,seas:3},{name:"Canvas",id:105,weapon:5,rarity:0,seas:3},{name:"Libra",id:106,weapon:5,rarity:0,seas:3},{name:"Psychedelic",id:107,weapon:5,rarity:0,seas:3},{name:"Violette",id:108,weapon:5,rarity:0,seas:3},{name:"Marv",id:109,weapon:5,rarity:0,seas:3},{name:"Basel",id:110,weapon:5,rarity:0,seas:3},{name:"Tiger Blood",id:111,weapon:5,rarity:1,seas:3},{name:"Scalamandre",id:112,weapon:5,rarity:1,seas:3},{name:"Tiger Maine",id:113,weapon:5,rarity:1,seas:3},{name:"Leopard",id:114,weapon:5,rarity:1,seas:3},{name:"Metallic Swirl",id:115,weapon:5,rarity:2,seas:3},{name:"Tessilate",id:116,weapon:5,rarity:2,seas:3},{name:"Bubblegum",id:117,weapon:5,rarity:2,seas:3},{name:"Peppermint",id:118,weapon:5,rarity:1,seas:3},{name:"Spearmint",id:119,weapon:5,rarity:1,seas:3},{name:"Obsydian",id:120,weapon:5,rarity:2,seas:3},{name:"Pink Panther",id:121,weapon:5,rarity:1,seas:3},{name:"Amber",id:122,weapon:5,rarity:1,seas:3},{name:"Clover",id:123,weapon:5,rarity:0,seas:3},{name:"Multicam",id:124,weapon:5,rarity:1,seas:3},{name:"Aquaric",id:125,weapon:5,rarity:1,seas:3},{name:"Heather",id:126,weapon:5,rarity:1,seas:3},{name:"Carbonfibre",id:127,weapon:5,rarity:2,seas:3},{name:"Cobra",id:128,weapon:5,rarity:2,seas:3},{name:"Python",id:129,weapon:5,rarity:2,seas:3},{name:"Lost",id:130,weapon:5,rarity:1,seas:3},{name:"Blue Maze",id:131,weapon:5,rarity:0,seas:3},{name:"Yellow Maze",id:132,weapon:5,rarity:0,seas:3},{name:"Morgana",id:133,weapon:5,rarity:1,seas:3},{name:"Playmat",creator:"Skriller33",id:67,rarity:4,type:4,frames:4,frameT:250,keyW:"Spray",seas:3},{name:"Anti-cheat",creator:"Bodeneinheit",id:68,rarity:4,type:4,frames:4,frameT:450,keyW:"Spray",seas:3},{name:"Vince OP",creator:"Bodeneinheit",id:69,rarity:2,type:4,keyW:"Spray",seas:3},{name:"200 IQ",creator:"krunchiez",id:70,rarity:1,type:4,keyW:"Spray",seas:3},{name:"Alien",creator:"MBR7CLeo",id:71,rarity:1,type:4,keyW:"Spray",seas:3},{name:"Krunkitis",creator:"NvrRshABlyat",id:72,rarity:2,type:4,keyW:"Spray",seas:3},{name:"SMH",creator:"OneEyedOwl",id:73,rarity:1,type:4,keyW:"Spray",seas:3},{name:"Race",creator:"ReDeagle",id:74,rarity:1,type:4,keyW:"Spray",seas:3},{name:"Fair Trades",creator:"Seasefire",id:75,rarity:2,type:4,keyW:"Spray",seas:3},{name:"Lucky",creator:"TrGPoTaTo",id:76,rarity:0,type:4,keyW:"Spray",seas:3},{name:"Arrow",creator:"TrGPoTaTo",id:77,rarity:0,type:4,keyW:"Spray",seas:3},{name:"Dream",creator:"Nxbulah",id:78,rarity:3,type:4,keyW:"Spray",seas:3},{name:"Sonar",id:81,creator:"Cimota",weapon:7,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Icevein",id:82,creator:"FlowerKid",weapon:7,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Demonvein",id:83,creator:"FlowerKid",weapon:7,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Tartrazine",id:84,creator:"Cimota",weapon:7,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Diopside",id:85,creator:"Cimota",weapon:7,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Lime",id:86,weapon:7,rarity:0,seas:3},{name:"Berry",id:87,weapon:7,rarity:0,seas:3},{name:"Indigo",id:88,weapon:7,rarity:0,seas:3},{name:"Citrus",id:89,weapon:7,rarity:0,seas:3},{name:"Tangerine",id:90,weapon:7,rarity:0,seas:3},{name:"Grape",id:91,weapon:7,rarity:0,seas:3},{name:"Canvas",id:92,weapon:7,rarity:0,seas:3},{name:"Libra",id:93,weapon:7,rarity:0,seas:3},{name:"Psychedelic",id:94,weapon:7,rarity:0,seas:3},{name:"Violette",id:95,weapon:7,rarity:0,seas:3},{name:"Marv",id:96,weapon:7,rarity:0,seas:3},{name:"Basel",id:97,weapon:7,rarity:0,seas:3},{name:"Tiger Blood",id:98,weapon:7,rarity:1,seas:3},{name:"Scalamandre",id:99,weapon:7,rarity:1,seas:3},{name:"Tiger Maine",id:100,weapon:7,rarity:1,seas:3},{name:"Leopard",id:101,weapon:7,rarity:1,seas:3},{name:"Metallic Swirl",id:102,weapon:7,rarity:2,seas:3},{name:"Tessilate",id:103,weapon:7,rarity:2,seas:3},{name:"Bubblegum",id:104,weapon:7,rarity:2,seas:3},{name:"Peppermint",id:105,weapon:7,rarity:1,seas:3},{name:"Spearmint",id:106,weapon:7,rarity:1,seas:3},{name:"Obsydian",id:107,weapon:7,rarity:2,seas:3},{name:"Pink Panther",id:108,weapon:7,rarity:1,seas:3},{name:"Amber",id:109,weapon:7,rarity:1,seas:3},{name:"Clover",id:110,weapon:7,rarity:0,seas:3},{name:"Multicam",id:111,weapon:7,rarity:1,seas:3},{name:"Aquaric",id:112,weapon:7,rarity:1,seas:3},{name:"Heather",id:113,weapon:7,rarity:1,seas:3},{name:"Carbonfibre",id:114,weapon:7,rarity:2,seas:3},{name:"Cobra",id:115,weapon:7,rarity:2,seas:3},{name:"Python",id:116,weapon:7,rarity:2,seas:3},{name:"Lost",id:117,weapon:7,rarity:1,seas:3},{name:"Blue Maze",id:118,weapon:7,rarity:0,seas:3},{name:"Yellow Maze",id:119,weapon:7,rarity:0,seas:3},{name:"Morgana",id:120,weapon:7,rarity:1,seas:3},{name:"Ballistic Knife",id:9,rarity:4,type:3,sxOff:.4,scl:1.4,yOff:-2,keyW:"Melee",seas:3},{name:"Samurai Sword",id:10,rarity:4,type:3,sxRot:-.3,syOff:.1,szOff:-.1,scl:.8,yOff:-1,xOff:-1,keyW:"Melee",seas:3},{name:"Acid Razer",id:11,rarity:5,type:3,sxOff:.02,sclMlt:1.1,scl:2,yOff:-2,glow:!0,pulsT:.1,keyW:"Melee",seas:3},{name:"Lumus",tex:1,id:11,rarity:5,sxOff:.02,sclMlt:1.1,glow:!0,scl:2,yOff:-2,pulsT:.1,type:3,keyW:"Melee",seas:3},{name:"Heated Crowbar",id:12,rarity:5,type:3,scl:.8,yOff:-1,xOff:-.5,keyW:"Melee",glow:!0,pulsT:.0015,seas:3,snd:!0},{name:"Disintegrator",mid:0,glow:!0,limited:!0,pulsT:.03,seas:3,weapon:2,rarity:6},{name:"Artifact XY",id:0,weapon:12,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Anti-Matter",mid:4,glow:!0,limited:!0,pulsT:.0015,scl:.9,mScl:1,spnScl:1.35,zOff:-.25,seas:3,yOff:.05,weapon:1,rarity:6},{name:"Good Ol' Days",mid:3,scl:.9,mScl:1,spnScl:1.35,zOff:-.25,seas:3,yOff:.05,weapon:1,rarity:5},{name:"Blonde Beard",id:69,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Brown Beard",tex:1,id:69,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Aged Beard",id:70,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Bandito",id:71,rarity:4,glow:!0,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Purple Beanie",id:72,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1.5,sitOff:.8,seas:3},{name:"Red Beanie",tex:1,id:72,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1.5,sitOff:.8,seas:3},{name:"Blue Pom-Pom",id:73,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1.5,sitOff:.8,seas:3},{name:"Green Pom-Pom",tex:1,id:73,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1.5,sitOff:.8,seas:3},{name:"Love-Cap",id:74,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1.5,xOff:1,sitOff:.8,seas:3},{name:"Lucky-Cap",tex:1,id:74,rarity:0,type:1,keyW:"Hat",yOff:-1.5,xOff:-1,sclMlt:.5,sitOff:.8,seas:3},{name:"Chef",id:75,rarity:1,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,sitOff:.8,seas:3},{name:"Hypno",id:76,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Hotdogger",id:77,rarity:2,type:1,keyW:"Hat",noHead:!0,sclMlt:.7,sitOff:.71,seas:3},{name:"Sunflower",id:78,rarity:1,type:1,keyW:"Hat",yOff:-1,sclMlt:.5,sitOff:.8,seas:3},{name:"Lavender",tex:1,id:78,rarity:1,type:1,keyW:"Hat",yOff:-1,sclMlt:.5,sitOff:.8,seas:3},{name:"Cirangle",id:79,rarity:3,glow:!0,type:1,keyW:"Hat",sclMlt:.5,yOff:-4,sitOff:.8,seas:3},{name:"Django",id:80,rarity:1,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,sitOff:.8,seas:3},{name:"Cattleman",tex:1,id:80,rarity:1,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,sitOff:.8,seas:3},{name:"Chosen One",id:81,rarity:4,type:1,keyW:"Hat",yOff:-1,sclMlt:.62,sitOff:-.35,rAnim:-.004,rAnimA:"y",seas:3},{name:"Sailor",id:82,rarity:1,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,sitOff:.8,seas:3},{name:"Planetarium",id:83,rarity:5,type:1,keyW:"Hat",sclMlt:.5,sitOff:-.68,rAnim:-.0016,rAnimA:"y",seas:3},{name:"Acid Reaper",id:84,rarity:4,glow:!0,noHead:!0,type:1,keyW:"Hat",xOff:.5,yOff:-.5,sclMlt:.5,sitOff:1.05,seas:3},{name:"Ushanka",id:85,rarity:1,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,sitOff:.8,seas:3},{name:"Private",id:86,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Sergeant",id:87,rarity:2,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Undead",id:88,rarity:4,glow:!0,noHead:!0,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Witch",id:89,rarity:2,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,xOff:1,sitOff:.8,seas:3},{name:"Farmer",id:90,rarity:0,type:1,keyW:"Hat",yOff:-1,sclMlt:.5,sitOff:.8,seas:3},{name:"Helper",tex:1,id:90,rarity:0,type:1,keyW:"Hat",yOff:-1,sclMlt:.5,sitOff:.8,seas:3},{name:"Purple Bandana",id:91,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Red Bandana",tex:1,id:91,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Rave Glasses",id:92,rarity:3,glow:!0,type:1,keyW:"Hat",sclMlt:.5,spnScl:1.6,xOff:2,yOff:-2,sitOff:1,seas:3},{name:"Blue Headband",id:93,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1,sitOff:1,seas:3},{name:"Red Headband",tex:1,id:93,rarity:0,type:1,keyW:"Hat",sclMlt:.5,yOff:-1,sitOff:1,seas:3},{name:"Shlem",id:94,rarity:3,type:1,keyW:"Hat",sclMlt:.5,yOff:-1,sitOff:.9,seas:3},{name:"Headshot",id:95,rarity:3,type:1,keyW:"Hat",sclMlt:.5,yOff:-1,sitOff:.9,xOff:.5,yOff:-1,seas:3},{name:"Big Apple",id:96,rarity:2,type:1,keyW:"Hat",noHead:!0,sclMlt:.56,sitOff:.75,seas:3},{name:"Green Alien",id:97,rarity:3,type:1,keyW:"Hat",noHead:!0,sclMlt:.65,spnScl:1.2,sitOff:.62,seas:3},{name:"Purple Alien",tex:1,id:97,rarity:3,type:1,keyW:"Hat",noHead:!0,sclMlt:.65,spnScl:1.2,sitOff:.62,seas:3},{name:"Banananana",id:98,rarity:2,type:1,keyW:"Hat",noHead:!0,sclMlt:.6,sitOff:.71,seas:3},{name:"Coolman",id:99,rarity:2,type:1,keyW:"Hat",noHead:!0,sclMlt:.56,sitOff:.75,seas:3},{name:"Green Headset",id:100,rarity:1,type:1,keyW:"Hat",sclMlt:.5,yOff:-1.5,sitOff:.9,seas:3},{name:"Red Headset",tex:1,id:100,rarity:1,type:1,keyW:"Hat",yOff:-1.5,sclMlt:.5,sitOff:.9,seas:3},{name:"Bot 1",id:101,rarity:4,glow:!0,frames:4,frameT:250,type:1,keyW:"Hat",sclMlt:.5,sitOff:.9,seas:3},{name:"Mustache",id:102,rarity:1,type:1,keyW:"Hat",sclMlt:.5,spnScl:1.4,yOff:-1,xOff:3,sitOff:.9,seas:3},{name:"Bane",id:103,rarity:3,glow:!0,type:1,keyW:"Hat",yOff:-1,sclMlt:.5,sitOff:.8,seas:3},{name:"Ducky",id:104,rarity:2,type:1,noHead:!0,keyW:"Hat",sclMlt:.8,spnScl:1.4,xOff:.5,yOff:-1,sitOff:.75,seas:3},{name:"Pot",id:105,rarity:1,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,xOff:-1.5,yOff:-.5,seas:3},{name:"Boom Boxer",id:106,rarity:4,glow:!0,type:1,keyW:"Hat",sclMlt:.6,sitOff:.8,yOff:-1,seas:3},{name:"Santa",id:107,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.9,xOff:-1,yOff:-1,seas:3},{name:"Splinter",id:108,rarity:4,glow:!0,type:1,keyW:"Hat",sclMlt:.5,sitOff:.7,seas:3},{name:"Wizard",id:109,rarity:2,type:1,keyW:"Hat",sclMlt:.5,sitOff:.7,yOff:-1,seas:3},{name:"Hackusate",id:203,weapon:2,rarity:5,rgb:!0,rgbs:.5,wire:!0,seas:3},{name:"Hackusate",id:184,weapon:4,rarity:5,rgb:!0,rgbs:.5,wire:!0,seas:3},{name:"Hackusate",id:121,weapon:7,rarity:5,rgb:!0,rgbs:.5,wire:!0,seas:3},{name:"Hackusate",id:74,weapon:9,rarity:5,rgb:!0,rgbs:.5,wire:!0,seas:3},{name:"Flag",id:32,rarity:1,type:2,keyW:"Body",sclMlt:2,sitOff:-1.3,sitOffZ:-.6,seas:3},{name:"KrunkBoy",id:33,rarity:3,frames:4,frameT:500,type:2,keyW:"Body",sclMlt:2.2,spnScl:4,xRot:2,sitOff:-.7,sitOffZ:-.6,seas:3},{name:"Skeleton Grip",id:34,rarity:2,type:2,keyW:"Body",sclMlt:2.2,spnScl:2.4,sitOff:-.7,sitOffZ:-.65,seas:3},{name:"Spider Grip",tex:1,id:34,rarity:2,type:2,keyW:"Body",sclMlt:2.2,spnScl:2.4,xOff:-1,sitOff:-.7,sitOffZ:-.65,seas:3},{name:"Sir HotDog",id:35,rarity:2,type:2,keyW:"Body",sclMlt:2.4,xRot:2,xOff:-1.5,yOff:-.5,spnScl:2.6,sitOff:-.1,sitOffZ:-.65,seas:3},{name:"Green Kite",id:36,rarity:0,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,sitOff:-1.1,sitOffZ:-.65,seas:3},{name:"Lantern",id:37,rarity:3,glow:!0,pulsT:.0015,type:2,keyW:"Body",sclMlt:2.6,spnScl:3.4,yOff:.5,xOff:-3,xRot:2,sitOff:-.75,sitOffZ:-.75,seas:3},{name:"Hellbound",id:38,rarity:3,glow:!0,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:-3,yOff:-1,sitOff:-1.1,sitOffZ:-.6,seas:3},{name:"Nuke",id:39,rarity:3,glow:!0,type:2,keyW:"Body",sclMlt:2.4,spnScl:3,xOff:-3,xRot:2,sitOff:-1.1,sitOffZ:-.6,seas:3},{name:"Roman Shield",id:40,rarity:2,type:2,keyW:"Body",sclMlt:2.6,spnScl:2.6,xOff:-2,xRot:2,sitOff:-.85,sitOffZ:-.6,seas:3},{name:"Krunky Safe",id:41,rarity:1,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xRot:2,xOff:-2,sitOff:-1.1,sitOffZ:-.6,seas:3},{name:"Yellow Scuba",id:43,rarity:1,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,sitOff:-1.1,sitOffZ:-.6,xOff:-2,seas:3},{name:"Blue Scuba",tex:1,id:43,rarity:1,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,sitOff:-1.1,sitOffZ:-.6,xOff:-2,seas:3},{name:"Agares",id:44,rarity:4,glow:!0,type:2,keyW:"Body",sclMlt:2.2,spnScl:2.4,xOff:-1,zOff:1,sitOff:-.9,sitOffZ:-.6,trans:!0,seas:3},{name:"Red Ski",id:45,rarity:1,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:-1,sitOff:-.9,sitOffZ:-.6,seas:3},{name:"Green Ski",tex:1,id:45,rarity:1,type:2,keyW:"Body",spnScl:2.6,xOff:-1,sclMlt:2.4,sitOff:-.9,sitOffZ:-.6,seas:3},{name:"Black Widow",id:46,rarity:5,glow:!0,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:1,xRot:2.5,sitOff:-.9,sitOffZ:-.6,seas:3},{name:"Viking",id:48,rarity:3,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:-2,zOff:-1,xRot:2,sitOff:-.9,sitOffZ:-.6,seas:3},{name:"Kruncade",id:50,rarity:3,frames:2,frameT:250,type:2,keyW:"Body",sclMlt:2.4,xRot:2,xOff:-1.5,yOff:-.5,spnScl:2.6,sitOff:-1,sitOffZ:-.6,seas:3},{name:"Fully Loaded",id:51,rarity:3,type:2,keyW:"Body",sclMlt:2.4,sitOff:-1.1,sitOffZ:-.6,xOff:-2,spnScl:2.6,seas:3},{name:"1 Year Cape",id:52,rarity:5,side:2,glow:!0,type:2,keyW:"Body",xRot:2,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:3,noSale:!0,illicit:!0,funds:100,reqT:"1 Year Account Age",req:function(e){return(new Date).getTime()-new Date(e.createDate).getTime()>=31536e6}},{name:"2 Year Cape",tex:1,id:52,rarity:5,side:2,glow:!0,type:2,keyW:"Body",xRot:2,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:3,noSale:!0,illicit:!0,funds:100,reqT:"2 Year Account Age",req:function(e){return(new Date).getTime()-new Date(e.createDate).getTime()>=63072e6}},{name:"Arunasura",id:53,rarity:4,glow:!0,type:2,keyW:"Body",xOff:-2.5,yOff:-2,xRot:-.5,spnScl:2.6,sclMlt:2.4,sitOff:-.65,sitOffZ:-.6,seas:3},{name:"Barong",tex:1,id:53,rarity:4,glow:!0,type:2,keyW:"Body",xOff:-2.5,yOff:-2,xRot:-.5,spnScl:2.6,sclMlt:2.4,sitOff:-.65,sitOffZ:-.6,seas:3},{name:"Pink Glazed",id:54,rarity:0,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:-2,sitOff:-.5,sitOffZ:-.7,seas:3},{name:"Blue Glazed",tex:1,id:54,rarity:0,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:-2,sitOff:-.5,sitOffZ:-.7,seas:3},{name:"Krunk-Bull",id:55,rarity:0,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:-2,sitOff:-1.4,sitOffZ:-.7,seas:3},{name:"Soul Reaper",tex:1,id:84,rarity:4,glow:!0,noHead:!0,type:1,keyW:"Hat",xOff:1,yOff:-.5,sclMlt:.5,sitOff:1.05,seas:3},{name:"Terra",id:7,shirtCol:1486651,sleeveCol:1842204,pantsCol:1486651,shoeCol:1842204,seas:3,type:5,rarity:4},{name:"Amberite",id:8,shirtCol:16765734,sleeveCol:1842204,pantsCol:16765734,shoeCol:1842204,seas:3,type:5,rarity:4},{name:"Moon Juice",id:205,weapon:1,rarity:4,glow:!0,seas:3},{name:"Shift",mid:0,midT:2,creator:"Luminae",weapon:8,rarity:3,glow:!0,seas:3},{name:"Lepton",mid:0,midT:3,creator:"jonschmiddy",weapon:8,rarity:4,pulsT:.0015,frames:4,frameT:250,seas:3},{name:"Dessolate",mid:0,midT:4,creator:"Nxbulah",weapon:8,rarity:3,glow:!0,seas:3},{name:"Retro Beast",mid:0,midT:5,creator:"Luminae",weapon:8,rarity:4,glow:!0,seas:3},{name:"Lime",mid:0,midT:6,weapon:8,rarity:0,seas:3},{name:"Berry",mid:0,midT:7,weapon:8,rarity:0,seas:3},{name:"Indigo",mid:0,midT:8,weapon:8,rarity:0,seas:3},{name:"Citrus",mid:0,midT:9,weapon:8,rarity:0,seas:3},{name:"Tangerine",mid:0,midT:10,weapon:8,rarity:0,seas:3},{name:"Grape",mid:0,midT:11,weapon:8,rarity:0,seas:3},{name:"Canvas",mid:0,midT:12,weapon:8,rarity:0,seas:3},{name:"Libra",mid:0,midT:13,weapon:8,rarity:0,seas:3},{name:"Psychedelic",mid:0,midT:14,weapon:8,rarity:0,seas:3},{name:"Violette",mid:0,midT:15,weapon:8,rarity:0,seas:3},{name:"Marv",mid:0,midT:16,weapon:8,rarity:0,seas:3},{name:"Basel",mid:0,midT:17,weapon:8,rarity:0,seas:3},{name:"Tiger Blood",mid:0,midT:18,weapon:8,rarity:1,seas:3},{name:"Scalamandre",mid:0,midT:19,weapon:8,rarity:1,seas:3},{name:"Tiger Maine",mid:0,midT:20,weapon:8,rarity:1,seas:3},{name:"Leopard",mid:0,midT:21,weapon:8,rarity:1,seas:3},{name:"Metallic Swirl",mid:0,midT:22,weapon:8,rarity:2,seas:3},{name:"Tessilate",mid:0,midT:23,weapon:8,rarity:2,seas:3},{name:"Bubblegum",mid:0,midT:24,weapon:8,rarity:2,seas:3},{name:"Peppermint",mid:0,midT:25,weapon:8,rarity:1,seas:3},{name:"Spearmint",mid:0,midT:26,weapon:8,rarity:1,seas:3},{name:"Obsydian",mid:0,midT:27,weapon:8,rarity:2,seas:3},{name:"Pink Panther",mid:0,midT:28,weapon:8,rarity:1,seas:3},{name:"Amber",mid:0,midT:29,weapon:8,rarity:1,seas:3},{name:"Clover",mid:0,midT:30,weapon:8,rarity:0,seas:3},{name:"Multicam",mid:0,midT:31,weapon:8,rarity:1,seas:3},{name:"Aquaric",mid:0,midT:32,weapon:8,rarity:1,seas:3},{name:"Heather",mid:0,midT:33,weapon:8,rarity:1,seas:3},{name:"Carbonfibre",mid:0,midT:34,weapon:8,rarity:2,seas:3},{name:"Cobra",mid:0,midT:35,weapon:8,rarity:2,seas:3},{name:"Python",mid:0,midT:36,weapon:8,rarity:2,seas:3},{name:"Lost",mid:0,midT:37,weapon:8,rarity:1,seas:3},{name:"Blue Maze",mid:0,midT:38,weapon:8,rarity:0,seas:3},{name:"Yellow Maze",mid:0,midT:39,weapon:8,rarity:0,seas:3},{name:"Morgana",mid:0,midT:40,weapon:8,rarity:1,seas:3},{name:"StremZ",id:204,creator:"Nxbulah",weapon:2,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Krystal",mid:0,midT:40,creator:"KItter",weapon:10,rarity:3,glow:!0,seas:3},{name:"Corrosive",mid:0,midT:1,creator:"Jonschmiddy",weapon:10,rarity:3,frames:4,frameT:250,seas:3},{name:"Kitta",mid:0,midT:2,creator:"KItter",weapon:10,rarity:2,seas:3},{name:"Plasma Grime",mid:0,midT:3,creator:"Cimota",weapon:10,rarity:3,glow:!0,seas:3},{name:"Graffiti",mid:0,midT:4,creator:"Maple",weapon:10,rarity:3,glow:!0,seas:3},{name:"Lime",mid:0,midT:5,weapon:10,rarity:0,seas:3},{name:"Berry",mid:0,midT:6,weapon:10,rarity:0,seas:3},{name:"Indigo",mid:0,midT:7,weapon:10,rarity:0,seas:3},{name:"Citrus",mid:0,midT:8,weapon:10,rarity:0,seas:3},{name:"Tangerine",mid:0,midT:9,weapon:10,rarity:0,seas:3},{name:"Grape",mid:0,midT:10,weapon:10,rarity:0,seas:3},{name:"Canvas",mid:0,midT:11,weapon:10,rarity:0,seas:3},{name:"Libra",mid:0,midT:12,weapon:10,rarity:0,seas:3},{name:"Psychedelic",mid:0,midT:13,weapon:10,rarity:0,seas:3},{name:"Violette",mid:0,midT:14,weapon:10,rarity:0,seas:3},{name:"Marv",mid:0,midT:15,weapon:10,rarity:0,seas:3},{name:"Basel",mid:0,midT:16,weapon:10,rarity:0,seas:3},{name:"Tiger Blood",mid:0,midT:17,weapon:10,rarity:1,seas:3},{name:"Scalamandre",mid:0,midT:18,weapon:10,rarity:1,seas:3},{name:"Tiger Maine",mid:0,midT:19,weapon:10,rarity:1,seas:3},{name:"Leopard",mid:0,midT:20,weapon:10,rarity:1,seas:3},{name:"Metallic Swirl",mid:0,midT:21,weapon:10,rarity:2,seas:3},{name:"Tessilate",mid:0,midT:22,weapon:10,rarity:2,seas:3},{name:"Bubblegum",mid:0,midT:23,weapon:10,rarity:2,seas:3},{name:"Peppermint",mid:0,midT:24,weapon:10,rarity:1,seas:3},{name:"Spearmint",mid:0,midT:25,weapon:10,rarity:1,seas:3},{name:"Obsydian",mid:0,midT:26,weapon:10,rarity:2,seas:3},{name:"Pink Panther",mid:0,midT:27,weapon:10,rarity:1,seas:3},{name:"Amber",mid:0,midT:28,weapon:10,rarity:1,seas:3},{name:"Clover",mid:0,midT:29,weapon:10,rarity:0,seas:3},{name:"Multicam",mid:0,midT:30,weapon:10,rarity:1,seas:3},{name:"Aquaric",mid:0,midT:31,weapon:10,rarity:1,seas:3},{name:"Heather",mid:0,midT:32,weapon:10,rarity:1,seas:3},{name:"Carbonfibre",mid:0,midT:33,weapon:10,rarity:2,seas:3},{name:"Cobra",mid:0,midT:34,weapon:10,rarity:2,seas:3},{name:"Python",mid:0,midT:35,weapon:10,rarity:2,seas:3},{name:"Lost",mid:0,midT:36,weapon:10,rarity:1,seas:3},{name:"Blue Maze",mid:0,midT:37,weapon:10,rarity:0,seas:3},{name:"Yellow Maze",mid:0,midT:38,weapon:10,rarity:0,seas:3},{name:"Morgana",mid:0,midT:39,weapon:10,rarity:0,seas:3},{name:"Fireburst",id:81,creator:"jonschmiddy",weapon:15,rarity:2,seas:3},{name:"Moldavite",id:82,creator:"Cimota",weapon:15,rarity:2,glow:!0,seas:3},{name:"Wyvern",id:83,creator:"Nxbulah",weapon:15,rarity:4,glow:!0,seas:3},{name:"Forbidden",id:84,creator:"Nxbulah",weapon:15,rarity:4,glow:!0,seas:3},{name:"Lxd",id:85,creator:"Nxbulah",weapon:15,rarity:3,glow:!0,seas:3},{name:"Scribble",id:86,creator:"FlowerKid",weapon:15,rarity:2,seas:3},{name:"Peruvia",id:87,creator:"Nxbulah",weapon:15,rarity:3,glow:!0,seas:3},{name:"Caged",id:88,creator:"FlowerKid",weapon:15,rarity:3,glow:!0,seas:3},{name:"Lime",id:89,weapon:15,rarity:0,seas:3},{name:"Berry",id:90,weapon:15,rarity:0,seas:3},{name:"Indigo",id:91,weapon:15,rarity:0,seas:3},{name:"Citrus",id:92,weapon:15,rarity:0,seas:3},{name:"Tangerine",id:93,weapon:15,rarity:0,seas:3},{name:"Grape",id:94,weapon:15,rarity:0,seas:3},{name:"Canvas",id:95,weapon:15,rarity:0,seas:3},{name:"Libra",id:96,weapon:15,rarity:0,seas:3},{name:"Psychedelic",id:97,weapon:15,rarity:0,seas:3},{name:"Violette",id:98,weapon:15,rarity:0,seas:3},{name:"Marv",id:99,weapon:15,rarity:0,seas:3},{name:"Basel",id:100,weapon:15,rarity:0,seas:3},{name:"Tiger Blood",id:101,weapon:15,rarity:1,seas:3},{name:"Scalamandre",id:102,weapon:15,rarity:1,seas:3},{name:"Tiger Maine",id:103,weapon:15,rarity:1,seas:3},{name:"Leopard",id:104,weapon:15,rarity:1,seas:3},{name:"Metallic Swirl",id:105,weapon:15,rarity:2,seas:3},{name:"Tessilate",id:106,weapon:15,rarity:2,seas:3},{name:"Bubblegum",id:107,weapon:15,rarity:2,seas:3},{name:"Peppermint",id:108,weapon:15,rarity:1,seas:3},{name:"Spearmint",id:109,weapon:15,rarity:1,seas:3},{name:"Obsydian",id:110,weapon:15,rarity:2,seas:3},{name:"Pink Panther",id:111,weapon:15,rarity:1,seas:3},{name:"Amber",id:112,weapon:15,rarity:1,seas:3},{name:"Clover",id:113,weapon:15,rarity:0,seas:3},{name:"Multicam",id:114,weapon:15,rarity:1,seas:3},{name:"Aquaric",id:115,weapon:15,rarity:1,seas:3},{name:"Heather",id:116,weapon:15,rarity:1,seas:3},{name:"Carbonfibre",id:117,weapon:15,rarity:2,seas:3},{name:"Cobra",id:118,weapon:15,rarity:2,seas:3},{name:"Python",id:119,weapon:15,rarity:2,seas:3},{name:"Lost",id:120,weapon:15,rarity:1,seas:3},{name:"Blue Maze",id:121,weapon:15,rarity:0,seas:3},{name:"Yellow Maze",id:122,weapon:15,rarity:0,seas:3},{name:"Morgana",id:123,weapon:15,rarity:1,seas:3},{name:"Timeless",creator:"Chromatikk",keyW:"Knife",flipAnim:!0,id:3,tex:12,type:3,scl:2.6,seas:3,sclMlt:1,yOff:-1,xOff:-1.5,rarity:3,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Crimson Tiger",creator:"Kltter",keyW:"Knife",flipAnim:!0,id:3,tex:7,type:3,scl:2.6,seas:3,sclMlt:1,yOff:-1,xOff:-1.5,rarity:3,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Vaporblade",creator:"Jonschmiddy",keyW:"Knife",flipAnim:!0,id:3,tex:8,type:3,scl:2.6,seas:3,sclMlt:1,yOff:-1,xOff:-1.5,rarity:3,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Verdant",creator:"Jonschmiddy",keyW:"Knife",flipAnim:!0,id:3,tex:9,type:3,scl:2.6,seas:3,sclMlt:1,yOff:-1,xOff:-1.5,rarity:3,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Zvilpogghua",creator:"Jonschmiddy",keyW:"Knife",flipAnim:!0,id:3,tex:10,frames:4,frameT:250,type:3,scl:2.6,seas:3,glow:!0,pulsT:.0015,sclMlt:1,yOff:-1,xOff:-1.5,rarity:4,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Volcanic",creator:"BigBBaniel",keyW:"Knife",flipAnim:!0,id:3,tex:11,glow:!0,frames:4,frameT:250,type:3,scl:2.6,seas:3,sclMlt:1,yOff:-1,xOff:-1.5,rarity:4,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Flintstone",creator:"Skriller33",keyW:"Knife",animInd:1,glow:!0,pulsT:.1,id:2,tex:2,type:3,scl:3,seas:3,sclMlt:.98,yOff:-2,rarity:4},{name:"Raynb0w",creator:"???",keyW:"Knife",pat:1,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,id:0,type:3,scl:2.3,seas:3,sclMlt:.9,yOff:-2,rarity:5},{name:"C0b4lt",creator:"???",pat:5,tex:"weapons/pat/5",sameGlow:!0,movT:5e-4,seas:3,weapon:16,rarity:5},{name:"Shattered Asura",id:53,tex:2,rarity:5,glow:!0,type:2,keyW:"Body",sclMlt:2.4,sitOff:-.65,sitOffZ:-.6,seas:3,movT:3e-4},{name:"Pellucid",creator:"???",pat:8,tex:"weapons/pat/8",sameGlow:!0,movT:3e-4,weapon:1,opac:.6,rarity:5,seas:3},{name:"Pellucid",creator:"???",pat:8,tex:"weapons/pat/8",sameGlow:!0,movT:3e-4,weapon:2,opac:.6,rarity:5,seas:3},{name:"Pellucid",creator:"???",mid:0,midT:102,scl:.9,mScl:1,zOff:.28,yOff:-.5,sameGlow:!0,movT:3e-4,weapon:6,opac:.6,rarity:5,seas:3},{name:"Soul Harvest",id:53,tex:3,rarity:5,glow:!0,type:2,opac:.6,keyW:"Body",sclMlt:2.4,sitOff:-.65,sitOffZ:-.6,xOff:-2.5,yOff:-2,xRot:-.5,spnScl:2.6,seas:3,movT:3e-4},{name:"Hackusate",id:203,weapon:1,rarity:5,rgb:!0,rgbs:.5,wire:!0,seas:3},{name:"Kortex",id:204,weapon:1,rarity:3,glow:!0,seas:3},{name:"Bloodlust",id:185,creator:"FlowerKid",weapon:4,rarity:3,glow:!0,seas:3},{name:"Hellhound",id:186,creator:"Kilfy",weapon:4,rarity:4,glow:!0,seas:3},{name:"Explora",id:187,creator:"Luminae",weapon:4,rarity:2,seas:3},{name:"Outrunner",creator:"Kltter",mid:0,midT:103,scl:.9,mScl:1,zOff:.28,yOff:-.5,glow:!0,pulsT:.0015,weapon:6,rarity:4,seas:3},{name:"Stanik",mid:0,midT:41,creator:"Cimota",weapon:8,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Eaglx",mid:0,midT:42,creator:"Kltter",weapon:8,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Aesthetica",mid:0,midT:43,creator:"Luminae",weapon:8,rarity:3,glow:!0,seas:3},{name:"Aries",mid:0,midT:44,creator:"Chromatikk",weapon:8,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Puppet Master",id:110,rarity:4,noHead:!0,type:1,keyW:"Hat",xOff:1,yOff:-.5,sclMlt:.5,sitOff:1.05,seas:3,illicit:!0,funds:2e3,reqT:"No Greenskins!",req:function(){return!1}},{name:"Nuke Tamer",keyW:"Back",id:56,type:2,scl:3,sclMlt:2.6,sitOff:-1.1,sitOffZ:-2,yOff:-.9,xOff:-.3,rarity:5,seas:3,rAnim:-.002,rAnimA:"x",noSale:!0,illicit:!0,funds:3e3,reqT:"Call in 1000 Nukes",req:function(e){return e&&e.stats&&1e3<=(e.stats.n||0)}},{name:"Floatie",id:0,type:6,keyW:"Waist",scl:2.1,spnScl:2.5,sclMlt:1.8,yOff:-1.5,xOff:.5,prevRot:4,rarity:5,seas:3},{name:"Combat Banana",keyW:"Knife",snd:!0,id:14,type:3,scl:1.7,sclMlt:.9,yOff:-.5,xOff:-1,rarity:4,seas:3},{name:"Banana Tail",id:2,type:6,keyW:"Waist",scl:2.1,spnScl:2.5,sclMlt:2.5,sitOff:1.9,sitOffZ:-3,yOff:-1.5,xOff:.5,prevRot:4,rarity:4,seas:3},{name:"Cyber Midnight",id:207,creator:"SplatterSponge",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Delirium",id:206,creator:"floatingpoint",weapon:2,rarity:2,seas:3},{name:"Mosasaur",id:207,creator:"BigBBaniel",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Captane",id:134,creator:"Nxbulah",weapon:5,rarity:4,glow:!0,seas:3},{name:"Tiger Cascade",id:122,creator:"Multihawk",weapon:7,rarity:2,seas:3},{name:"Flamer",mid:0,midT:45,creator:"Multihawk",weapon:8,rarity:2,seas:3},{name:"MOS",mid:0,midT:46,creator:"Kltter",weapon:8,rarity:3,glow:!0,seas:3},{name:"Dynamite",mid:0,midT:43,creator:"Destroy007",weapon:10,rarity:3,seas:3},{name:"Rye",id:124,creator:"Nxbulah",weapon:15,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Isotope Mk2",id:125,creator:"Multihawk",weapon:15,rarity:2,seas:3},{name:"Izulu",id:208,creator:"Kilfy",weapon:1,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Izula",id:209,creator:"Kilfy",weapon:1,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Milestone",id:208,creator:"Kilfy",weapon:2,rarity:4,glow:!0,seas:3},{name:"Antidote XVI",keyW:"Knife",rarity:5,seas:3,id:15,type:3,scl:1.25,sclMlt:.98,yOff:-2,alpha:.02,opac:1,noSale:!0,illicit:!0,funds:1e4,reqT:"???????",req:function(e){return e&&e.stats&&59961<=(e.stats.ggr||0)}},{name:"Tropic Pop",id:209,creator:"Exxor",weapon:2,rarity:2,seas:3},{name:"Cyclonic Charge",id:188,creator:"Multihawk",weapon:4,rarity:2,seas:3},{name:"Disco Kill",id:189,creator:"Destroy007",weapon:4,rarity:2,glow:!0,seas:3},{name:"Line Breaker",id:135,creator:"Multihawk",weapon:5,rarity:2,seas:3},{name:"Rev 2058",id:136,creator:"Destroy007",weapon:5,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Sarin",mid:0,midT:104,creator:"Floatingpoint",scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,glow:!0,seas:3},{name:"Nitrox",mid:0,midT:105,creator:"Destroy007",scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,seas:3},{name:"Fireball",mid:0,midT:47,creator:"Destroy007",weapon:8,rarity:3,seas:3},{name:"Noble Guard",mid:0,midT:48,creator:"Multihawk",weapon:8,rarity:3,seas:3},{name:"Institute",mid:0,midT:49,creator:"Floatingpoint",weapon:8,rarity:3,seas:3},{name:"Charoite",mid:0,midT:44,creator:"Cimota",weapon:10,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Stream Suit",limT:"Twitch #1",id:10,shirtCol:6570405,sleeveCol:16448250,pantsCol:6570405,shoeCol:16448250,seas:3,type:5,noSpin:!0,rarity:4},{name:"USS Krunk",keyW:"Waist",rarity:5,seas:3,id:4,type:6,scl:2.1,spnScl:2.5,sclMlt:2.8,yOff:-1.5,xOff:-1,sitOff:1,glow:!0,prevRot:4,side:2,alpha:.7,trans:!0,frames:2,frameT:300,noLegs:!0,noSale:!0,illicit:!0,funds:1e4,reqT:"Level 50 Runner",req:function(e){return e&&e.stats&&2667778<=(e.stats.c9||0)}},{name:"USS TTV",keyW:"Waist",limT:"Twitch #1",tex:1,rarity:5,seas:3,id:4,type:6,scl:2.1,spnScl:2.5,sclMlt:2.8,yOff:-1.5,xOff:-1,sitOff:1,prevRot:4,glow:!0,side:2,alpha:.7,trans:!0,frames:2,frameT:300,noLegs:!0,noSpin:!0},{name:"TTV",keyW:"Sprays",limT:"Twitch #1",id:80,type:4,rarity:1,seas:3,opacity:.8,noSpin:!0},{name:"TTV Cape",limT:"Twitch #1",id:52,tex:3,rarity:4,side:2,glow:!0,type:2,keyW:"Body",xRot:3,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:3,noSpin:!0},{name:"TTV Tron",limT:"Twitch #1",id:32,tex:6,rarity:3,type:1,keyW:"Head",seas:3,scl:1,glow:!0,sclMlt:.6,sitOff:2.05,yOff:-3.2,frames:2,frameT:400,noSpin:!0},{name:"Krunk TTV",limT:"Twitch #1",id:32,tex:7,rarity:3,type:1,keyW:"Head",seas:3,scl:1,sclMlt:.6,sitOff:2.05,yOff:-3.2,frames:4,frameT:400,noSpin:!0},{name:"Twitched",limT:"Twitch #1",id:111,rarity:2,type:1,keyW:"Head",seas:3,scl:1,sclMlt:.6,sitOff:.75,yOff:-1,noSpin:!0,noHead:!0},{name:"tRaDeS?",keyW:"Sprays",limT:"Twitch #1",id:81,type:4,rarity:1,seas:3,opacity:.8,noSpin:!0},{name:"Partner Push",keyW:"Sprays",limT:"Twitch #1",id:82,type:4,rarity:1,seas:3,opacity:.8,noSpin:!0},{name:"Mic'd Up",keyW:"Knife",limT:"Twitch #1",noSpin:!0,rarity:4,seas:3,id:17,type:3,scl:1,sclMlt:.8,yOff:-2,frames:2,frameT:500,sxOff:.5,syOff:-.05,szOff:-.1},{name:"Zed",keyW:"Sprays",limT:"Twitch #1",id:84,type:4,rarity:1,seas:3,opacity:.8,noSpin:!0},{name:"Kaarson",keyW:"Sprays",limT:"Twitch #1",id:86,type:4,rarity:1,seas:3,opacity:.8,noSpin:!0},{name:"TTV Vest",limT:"Twitch #1",noSpin:!0,id:58,rarity:2,type:2,keyW:"Back",seas:3,scl:.5,sclMlt:.5,sitOff:1.7,sitOffZ:0,yOff:-2,xRot:Math.PI},{name:"Cheerfull",limT:"Twitch #1",noSpin:!0,id:57,rarity:4,glow:!0,type:2,keyW:"Back",xOff:-2.5,yOff:-2,xRot:-.5,spnScl:2.6,sclMlt:2.4,sitOff:-1.65,sitOffZ:-.7,seas:3},{name:"Twitcher",limT:"Twitch #1",noSpin:!0,id:210,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Streamer",limT:"Twitch #1",noSpin:!0,mid:0,midT:50,creator:"Chromatikk",weapon:8,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"TTV-Cap",limT:"Twitch #1",noSpin:!0,tex:2,id:74,rarity:1,type:1,keyW:"Hat",yOff:-1.5,xOff:1,sclMlt:.5,sitOff:.8,seas:3},{name:"Bits",limT:"Twitch #1",noSpin:!0,id:112,rarity:5,type:1,keyW:"Hat",sclMlt:.5,sitOff:-1.5,rAnim:-.0016,rAnimA:"y",seas:3},{name:"Just Vibing",limT:"Twitch #1",creator:"???",pat:11,tex:"weapons/pat/11",sameGlow:!0,movT:3e-4,movD:1,tileS:3,weapon:1,rarity:4,seas:3,noSpin:!0},{name:"Arae Atlas",id:210,creator:"Luminae",weapon:1,rarity:3,seas:3},{name:"Rezein",id:211,creator:"Nxbulah",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"ThiccChemist",id:212,creator:"Nxbulah",weapon:1,rarity:3,glow:!0,seas:3},{name:"Radalive",id:213,creator:"Kilfy",weapon:1,rarity:4,glow:!0,seas:3},{name:"Arctic",id:211,creator:"Destroy007",weapon:2,rarity:2,seas:3},{name:"Kanashii",id:190,creator:"Whippii",weapon:4,rarity:3,seas:3},{name:"Sunset claw",id:137,creator:"Kilfy",weapon:5,rarity:2,seas:3},{name:"Blazed",id:123,creator:"Cimota",weapon:7,rarity:3,seas:3},{name:"Avalan",mid:0,midT:51,creator:"Nxbulah",weapon:8,rarity:3,seas:3},{name:"Disruptor",mid:0,midT:52,creator:"Multihawk",weapon:8,rarity:3,glow:!0,seas:3},{name:"Phusion",mid:0,midT:53,creator:"Nxbulah",weapon:8,rarity:3,glow:!0,seas:3},{name:"Midnight Phoenix",id:126,creator:"Destroy007",weapon:15,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Ocean",mid:0,midT:45,creator:"Skriller33",weapon:10,rarity:2,seas:3},{name:"Thunder God",mid:0,midT:42,creator:"Chromatikk",weapon:10,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Upset",id:214,creator:"Kilfy",weapon:1,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Fished",id:212,creator:"Skriller33",weapon:2,rarity:2,seas:3},{name:"Hannya",id:213,creator:"Whippii",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Drakon",id:214,creator:"Kltter",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"caL",id:215,creator:"Kilfy",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"CIRO",id:191,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Redolent",id:138,creator:"Cimota",weapon:5,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Man vs God",mid:0,midT:54,creator:"Chromatikk",weapon:8,rarity:3,seas:3},{name:"Scaze",id:127,creator:"Kilfy",weapon:15,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Kinto",creator:"Nxbulah",keyW:"Knife",animInd:1,glow:!0,pulsT:.1,tex:4,id:2,type:3,scl:3,seas:3,sclMlt:.98,yOff:-2,rarity:4},{name:"Divine",creator:"Destroy007",keyW:"Knife",animInd:1,glow:!0,pulsT:.1,tex:5,id:2,type:3,scl:3,seas:3,sclMlt:.98,yOff:-2,rarity:4},{name:"Diabolo",creator:"Destroy007",keyW:"Knife",animInd:1,glow:!0,tex:6,id:2,type:3,scl:3,seas:3,sclMlt:.98,yOff:-2,rarity:4},{name:"Fadecrusher",creator:"Multihawk",keyW:"Knife",glow:!0,pulsT:.0015,id:4,tex:2,type:3,seas:3,rarity:5,scl:2,sclMlt:.75,yOff:-1,sxOff:0,syOff:-.05,szOff:-.1},{name:"Crimson Edge",creator:"Multihawk",id:9,tex:1,rarity:4,type:3,sxOff:.4,scl:1.4,yOff:-2,keyW:"Melee",seas:3},{name:"Alter",creator:"_irizu",glow:!0,pulsT:.0015,id:10,tex:1,rarity:5,type:3,sxRot:-.3,syOff:.1,szOff:-.1,scl:.8,yOff:-1,xOff:-1,keyW:"Melee",seas:3},{name:"Prototype-14",id:0,creator:"Multihawk",weapon:14,rarity:3,glow:!0,seas:3},{name:"Dream Destroyer",id:1,creator:"Destroy007",weapon:14,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"E-12",id:2,creator:"Cimota",weapon:14,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"T.A.N 9",id:3,creator:"Floatingpoint",weapon:14,rarity:3,glow:!0,seas:3},{name:"Sekigahara",id:215,creator:"Flower Kid",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Death Parade",id:216,creator:"Flower Kid",weapon:1,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Sentinel-56",id:217,creator:"Cimota",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Cryptic J",id:216,creator:"Nxbulah & Kilfy",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Voyage",id:192,creator:"Cimota",weapon:4,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Iara",id:193,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Insidious",mid:0,midT:106,creator:"Cimota",scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Tri-Tech",id:124,creator:"Multihawk",weapon:7,rarity:3,glow:!0,seas:3},{name:"Prototype BWSX",id:0,creator:"Floatingpoint",weapon:11,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Hexgen",id:1,creator:"Nxbulah",weapon:11,rarity:5,glow:!0,pulsT:.0015,seas:3},{name:"Scout Mastery",mid:5,seas:3,weapon:1,rarity:5,noSale:!0,illicit:!0,funds:1e4,yOrg:-.2,reqT:"Level 100 Hunter",req:function(e){return e&&e.stats&&1089e4<=(e.stats.c1||0)}},{name:"Redux",id:10,tex:2,rarity:5,type:3,sxRot:-.3,syOff:.1,szOff:-.1,scl:.8,yOff:-1,xOff:-1,keyW:"Melee",seas:3,shaderId:0},{name:"Neon Dance",id:52,tex:4,rarity:5,side:2,glow:!0,type:2,keyW:"Body",xRot:3,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:3,shaderId:1},{name:"Jason",limT:"Twitch #2",id:113,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.5,sitOff:1,yOff:-.7,xOff:1,trans:!0},{name:"Sicko",limT:"Twitch #2",id:114,glow:!0,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.5,sitOff:1,yOff:-.7,xOff:1,trans:!0},{name:"Succubus",limT:"Twitch #2",id:115,glow:!0,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.45,sitOff:.4,yOff:-.7,xOff:.2},{name:"Socket",limT:"Twitch #2",noHead:!0,id:116,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:.2},{name:"Crunch",limT:"Twitch #2",noHead:!0,id:117,rarity:1,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:.2},{name:"Paraseye",limT:"Twitch #2",noHead:!0,id:118,rarity:2,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.7,sitOff:.9,yOff:-.7},{name:"Puff Puff",limT:"Twitch #2",noHead:!0,id:119,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:.8,yOff:-.7},{name:"Moneybags",limT:"Twitch #2",noHead:!0,id:121,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7},{name:"Braindead",limT:"Twitch #2",noHead:!0,id:122,rarity:2,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:1,yOff:-.7,trans:!0},{name:"Gobbler",limT:"Twitch #2",noHead:!0,id:123,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:1,yOff:-.7},{name:"Seefood",limT:"Twitch #2",noHead:!0,id:124,glow:!0,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.7,sitOff:.9,yOff:-.7,trans:!0},{name:"Mr Doodles",limT:"Twitch #2",noHead:!0,id:125,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,trans:!0},{name:"Drowned",limT:"Twitch #2",id:126,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7,trans:!0},{name:"Tentacle",limT:"Twitch #2",id:59,rarity:4,type:2,keyW:"Body",seas:3,sclMlt:2.4,spnScl:2.6,xOff:-1,sitOff:-.7,sitOffZ:-.65},{name:"Observer",limT:"Twitch #2",id:60,rarity:5,type:2,keyW:"Body",seas:3,scl:3,sclMlt:2.6,sitOff:-1.1,sitOffZ:-2,yOff:-.9,xOff:-.3,rAnim:-.002,rAnimA:"x"},{name:"Butcher",limT:"Twitch #2",id:61,rarity:2,type:2,keyW:"Body",seas:3,scl:4.5,spnScl:3.5,sclMlt:2.55,sitOff:-.4,yOff:-2,prevRot:-.1},{name:"Scales",limT:"Twitch #2",id:62,rarity:2,type:2,keyW:"Body",seas:3,scl:4.5,spnScl:3.5,sclMlt:2.55,sitOff:-.4,yOff:-1,xOff:-1,xRot:Math.PI},{name:"Pauldrons",limT:"Twitch #2",id:64,rarity:2,type:2,keyW:"Body",seas:3,scl:4.5,sclMlt:2.3,sitOff:-.6,yOff:-2,xRot:Math.PI},{name:"Walpurgis",limT:"Twitch #2",id:5,rarity:4,type:6,keyW:"Waist",seas:3,scl:2.1,spnScl:3,sclMlt:2.6,sitOff:1.4,prevRot:4,xOff:-2,noLegs:!0},{name:"Scales",limT:"Twitch #2",id:7,rarity:3,type:6,keyW:"Waist",seas:3,scl:2.1,spnScl:3,sitOff:1,sitOffZ:1,sclMlt:2.6,prevRot:2,xOff:-3.5,xRot:.6*Math.PI},{name:"Monster V",limT:"Twitch #2",id:89,type:4,rarity:1,seas:3,opacity:.9,keyW:"Sprays"},{name:"Monster III",limT:"Twitch #2",id:91,type:4,rarity:1,seas:3,opacity:.9,keyW:"Sprays"},{name:"Monster X",limT:"Twitch #2",id:92,type:4,rarity:1,seas:3,opacity:.9,keyW:"Sprays"},{name:"Demonic Haze",limT:"Twitch #2",id:218,creator:"Kilfy",weapon:1,rarity:5,glow:!0,seas:3},{name:"Vassago",limT:"Twitch #2",id:219,creator:"Lxckless",weapon:1,rarity:3,glow:!0,seas:3},{name:"Cranium",limT:"Twitch #2",id:220,weapon:1,rarity:2,seas:3},{name:"Ignis",limT:"Twitch #2",id:221,weapon:1,rarity:1,seas:3},{name:"Poseidon",limT:"Twitch #2",id:217,creator:"Atomize",weapon:2,rarity:2,seas:3},{name:"Overseer",limT:"Twitch #2",id:218,creator:"Luminae",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Etona",limT:"Twitch #2",id:219,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,seas:3},{name:"NeoTitan",limT:"Twitch #2",id:220,creator:"FlowerKid",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Full Moon",limT:"Twitch #2",id:221,creator:"Kristai",weapon:2,rarity:4,frames:4,frameT:250,seas:3},{name:"Nightmare",limT:"Twitch #2",id:222,creator:"CreshorTV",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Crimson",limT:"Twitch #2",id:223,creator:"Chromatikk",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Corruption",limT:"Twitch #2",id:224,creator:"Chromatikk",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Overwatch",limT:"Twitch #2",id:194,creator:"Destroy007",weapon:4,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Ignis",limT:"Twitch #2",id:195,weapon:4,rarity:1,seas:3},{name:"Cranium",limT:"Twitch #2",id:196,weapon:4,rarity:2,seas:3},{name:"Symbiote",limT:"Twitch #2",id:139,creator:"Whippii",weapon:5,rarity:4,glow:!0,seas:3},{name:"Cranium",limT:"Twitch #2",id:140,weapon:5,rarity:2,seas:3},{name:"Ignis",limT:"Twitch #2",id:141,weapon:5,rarity:1,seas:3},{name:"Ignis",limT:"Twitch #2",mid:0,midT:107,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:3},{name:"Cranium",limT:"Twitch #2",mid:0,midT:108,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:3},{name:"Toxic Rider",limT:"Twitch #2",id:125,creator:"Destroy007",weapon:7,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Knightingale",limT:"Twitch #2",id:126,creator:"FailBucket",weapon:7,rarity:2,seas:3},{name:"Cranium",limT:"Twitch #2",id:127,weapon:7,rarity:2,seas:3},{name:"Ignis",limT:"Twitch #2",id:128,weapon:7,rarity:1,seas:3},{name:"Wildlife",limT:"Twitch #2",mid:0,midT:55,creator:"Destroy007",weapon:8,rarity:3,glow:!0,seas:3},{name:"Ignis",limT:"Twitch #2",mid:0,midT:56,weapon:8,rarity:1,seas:3},{name:"Cranium",limT:"Twitch #2",mid:0,midT:57,weapon:8,rarity:2,seas:3},{name:"Ignis",limT:"Twitch #2",mid:0,midT:46,weapon:10,rarity:1,seas:3},{name:"Cranium",limT:"Twitch #2",mid:0,midT:47,weapon:10,rarity:2,seas:3},{name:"Devourer",limT:"Twitch #2",id:2,creator:"Kilfy",weapon:11,rarity:5,glow:!0,seas:3},{name:"Ignis",limT:"Twitch #2",id:128,weapon:15,rarity:1,seas:3},{name:"Cranium",limT:"Twitch #2",id:129,weapon:15,rarity:2,seas:3},{name:"Arachnidis",limT:"Twitch #2",id:46,tex:1,rarity:5,type:2,keyW:"Body",sclMlt:2.4,spnScl:2.6,xOff:1,xRot:2.5,sitOff:-.9,sitOffZ:-.6,seas:3,shaderId:3},{name:"Infinity Cloak",limT:"Twitch #2",id:52,tex:5,rarity:5,side:2,type:2,keyW:"Body",xRot:2,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:3,shaderId:3},{name:"Sorable",keyW:"Sprays",limT:"Twitch #2",id:93,type:4,rarity:1,seas:3,opacity:.8},{name:"Stremz",keyW:"Sprays",limT:"Twitch #2",id:94,type:4,rarity:2,seas:3,opacity:.8},{name:"Void Slicer",keyW:"Knife",flipAnim:!0,id:3,tex:13,type:3,scl:2.6,seas:3,sclMlt:1,yOff:-1,xOff:-1.5,rarity:5,sxRot:.3,sxOff:.35,szOff:-.25,shaderId:3},{name:"Steel Serpent",id:222,creator:"Chromatikk",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Theta Republica",id:223,creator:"Floatingpoint",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Cactus Jack",id:225,creator:"Kltter",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Jakku",id:197,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:3},{name:"Shortcake",id:130,creator:"Kristai",weapon:15,rarity:3,seas:3},{name:"Resurrection",id:224,creator:"Kilfy",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Bopper",id:225,creator:"FlowerKid",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Containment",id:226,creator:"Atomize",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Sunshine",id:227,creator:"CreshorTV",weapon:1,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Tedssyt",limT:"Twitch #2",id:228,creator:"Cimota",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Onamu",id:226,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,seas:3},{name:"Pestilence",limT:"Twitch #2",id:227,creator:"Chromatikk",weapon:2,rarity:3,glow:!0,seas:3},{name:"Signal",limT:"Twitch #2",id:198,creator:"FlowerKid",weapon:4,rarity:3,frames:4,frameT:250,glow:!0,seas:3},{name:"Graffitius",id:199,creator:"Luminae",weapon:4,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Headhunter Alpha",id:200,creator:"Multihawk",weapon:4,rarity:3,seas:3},{name:"Tau",id:201,creator:"Floatingpoint",weapon:4,rarity:2,glow:!0,seas:3},{name:"Kotal",id:142,creator:"Nxbulah",weapon:5,rarity:3,glow:!0,seas:3},{name:"Imperial",mid:0,midT:109,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Cimota",weapon:6,rarity:3,glow:!0,seas:3},{name:"Foria",mid:0,midT:110,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Nxbulah",weapon:6,rarity:3,glow:!0,seas:3},{name:"Watercolours",mid:0,midT:58,creator:"Multihawk",weapon:8,rarity:2,seas:3},{name:"Luminescence",mid:0,midT:48,creator:"FailBucket",weapon:10,rarity:3,glow:!0,seas:3},{name:"SunBurst Swirl",mid:0,midT:49,creator:"Exxor",weapon:10,rarity:3,glow:!0,seas:3},{name:"Sanctum",id:3,creator:"Multihawk",weapon:11,rarity:4,glow:!0,seas:3},{name:"Futurai",id:4,creator:"Destroy007",weapon:14,rarity:3,glow:!0,seas:3},{name:"Fish Warfare",id:5,creator:"Multihawk",weapon:14,rarity:2,glow:!0,seas:3},{name:"Hunter",id:6,creator:"Multihawk",weapon:14,rarity:3,seas:3},{name:"Kortal",id:131,creator:"Destroy007",weapon:15,rarity:3,glow:!0,pulsT:.0015,seas:3},{name:"Modular",id:0,creator:"Floatingpoint",weapon:17,rarity:3,seas:3},{name:"Googly",limT:"Twitch #2",id:127,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.5,sitOff:1,yOff:-.7,xOff:1,trans:!0},{name:"Despair",creator:"Kilfy",keyW:"Knife",tex:7,id:2,glow:!0,type:3,seas:3,scl:3,sclMlt:.9,yOff:-2,rarity:5},{name:"Death Rattle",id:228,creator:"CreshorTV",weapon:2,rarity:3,seas:3},{name:"Cinder",id:202,creator:"Kilfy",weapon:4,rarity:4,glow:!0,seas:3},{name:"Overloaded",id:1,creator:"Kilfy",weapon:12,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Happy",id:0,rarity:3,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Smooch",id:0,tex:1,rarity:4,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Kawaii",id:0,tex:2,rarity:3,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Smirk",id:0,tex:3,rarity:3,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Upset",id:0,tex:4,rarity:4,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Ravatron",id:130,rarity:5,type:1,glow:!0,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7,trans:!0},{name:"Demon Baby",noHead:!0,id:131,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:.8,yOff:-.7},{name:"Soulless",noHead:!0,id:132,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:.8,yOff:-.7},{name:"Krunkuto",id:133,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.5,sitOff:1,yOff:-.7,xOff:1,trans:!0},{name:"5Head",noHead:!0,id:134,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7},{name:"Deadball",noHead:!0,id:135,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:.8,yOff:-.7},{name:"UwU",id:0,tex:5,rarity:3,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Pierre",id:0,tex:6,rarity:3,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Voodoo",id:0,tex:7,rarity:4,type:7,keyW:"Face",seas:3,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5},{name:"Heart Cycle",id:229,creator:"Whippii",weapon:1,rarity:3,seas:3},{name:"Whippii",id:230,creator:"Whippii",weapon:1,rarity:3,seas:3},{name:"Automaton",id:231,creator:"Kilfy",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Soda-Licious",id:229,creator:"Whippii",weapon:2,rarity:3,glow:!0,seas:3},{name:"TnT",midT:3,noMuz:!0,mid:0,weapon:3,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0,rarity:3,creator:"Destroy007",seas:3},{name:"Acid Bark",id:143,creator:"CreshorTV",weapon:5,rarity:3,glow:!0,seas:3},{name:"Wharf",mid:0,midT:59,creator:"Whippii",weapon:8,rarity:3,seas:3},{name:"Railix V",id:4,creator:"Kilfy",weapon:11,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Sidious",id:5,creator:"Nxbulah",weapon:11,rarity:3,glow:!0,seas:3},{name:"Fleece",id:6,creator:"Whippii",weapon:11,rarity:3,seas:3},{name:"Proton XV",id:2,creator:"Cimota",weapon:12,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"VR-4",id:132,creator:"Floatingpoint",weapon:15,rarity:3,glow:!0,seas:3},{name:"Pip Squeak",id:2,creator:"Cimota",weapon:16,rarity:4,glow:!0,seas:3},{name:"Turbocharged",id:1,creator:"ReDeagle",weapon:16,rarity:3,seas:3},{name:"Spock",noHead:!0,id:136,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7},{name:"Miss Package",noHead:!0,id:137,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7},{name:"Lil Jack",noHead:!0,id:138,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7},{name:"Disco Mouse",id:139,rarity:5,type:1,glow:!0,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7,trans:!0},{name:"Innocent",noHead:!0,id:141,rarity:3,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.48,sitOff:1,yOff:-.7},{name:"Bot 2",id:101,tex:1,rarity:4,glow:!0,type:1,keyW:"Hat",sclMlt:.5,sitOff:.9,seas:3},{name:"Balloon",noHead:!0,id:140,rarity:4,type:1,keyW:"Hat",seas:3,scl:1,sclMlt:.8,sitOff:.25,yOff:-.7},{name:"Disco Shirt",id:67,rarity:4,glow:!0,type:2,keyW:"Body",seas:3,scl:1,sclMlt:.48,sitOff:-.6,yOff:-1,xOff:-1,trans:!0},{name:"Shuriken",keyW:"Knife",flipAnim:!0,snd:!0,id:19,glow:!0,type:3,seas:3,scl:1.5,sclMlt:.9,yOff:-2,rarity:5,sxRot:.3,sxOff:.15,szOff:-.35,syOff:.1,noSale:!0,illicit:!0,funds:1e4,reqT:"10000 Thrown Melee Kills",req:function(e){return e&&e.stats&&1e4<=(e.stats.tmk||0)}},{name:"Mamba",keyW:"Knife",id:20,type:3,seas:3,scl:1,sclMlt:.7,yOff:-2,rarity:4,sxRot:.3,sxOff:.05,szOff:-.55,syOff:.6},{name:"Arcturus",limT:"Charity",noSale:!0,mSeas:!0,noSpin:!0,id:232,creator:"Nxbulah",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Celeste",limT:"Charity",noSale:!0,noSpin:!0,id:230,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,pulsT:.0015,mSeas:!0,seas:3},{name:"Warlock",limT:"Charity",noSale:!0,noSpin:!0,rarity:3,mSeas:!0,seas:3,id:142,type:1,sclMlt:.5,sitOff:1,yOff:-2,keyW:"Hat"},{name:"Starlight",limT:"Charity",noSpin:!0,noSale:!0,rarity:4,mSeas:!0,seas:3,id:68,type:2,scl:1,sclMlt:.85,sitOff:0,sitOffZ:-.4,yOff:-1,xOff:-1,keyW:"Body"},{name:"Magic Wand",limT:"Charity",noSpin:!0,noSale:!0,rarity:3,mSeas:!0,seas:3,id:21,type:3,sxRot:-.1,sxOff:.3,szOff:-.1,scl:1.3,yOff:-1.5,xOff:-1,keyW:"Melee"},{name:"Star Power",limT:"Charity",noSpin:!0,noSale:!0,rarity:2,mSeas:!0,seas:3,id:95,type:4,opacity:.9,keyW:"Sprays"},{name:"Shine Bright",limT:"Charity",noSpin:!0,noSale:!0,rarity:2,mSeas:!0,seas:3,id:96,type:4,opacity:.9,keyW:"Sprays"},{name:"Flow",id:231,creator:"Luminae",weapon:2,rarity:4,glow:!0,seas:3},{name:"Freshmint",id:232,creator:"Destroy007",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:3},{name:"Lykos",id:233,creator:"Skriller33",weapon:2,rarity:4,glow:!0,seas:3},{name:"Ragnarok",id:203,creator:"Failbucket",weapon:4,rarity:3,glow:!0,seas:3},{name:"Brainstorm",id:204,creator:"Atomize",weapon:4,rarity:2,seas:3},{name:"FSS Archdaemon",id:129,creator:"floatingpoint",weapon:7,rarity:3,glow:!0,seas:3},{name:"ZE-14",mid:0,midT:60,creator:"Zinoob",weapon:8,rarity:3,glow:!0,seas:3},{name:"Sly",mid:0,midT:61,creator:"Whippii",weapon:8,rarity:2,seas:3},{name:"Abyssal",id:8,creator:"Kilfy",weapon:11,rarity:5,glow:!0,seas:3},{name:"Admiral",id:133,creator:"_irizu",weapon:15,rarity:3,glow:!0,seas:3},{name:"Nebulous",id:135,creator:"Failbucket",weapon:15,rarity:2,seas:3},{name:"Azeal",id:136,creator:"Kilfy",weapon:15,rarity:4,glow:!0,seas:3},{name:"Slayer",id:3,creator:"Multihawk",weapon:16,rarity:3,seas:3},{name:"Skullwood",id:1,creator:"Multihawk",weapon:17,rarity:3,glow:!0,seas:3},{name:"Big Mouth",id:2,creator:"Cimota",weapon:17,rarity:4,glow:!0,seas:3},{name:"K.P.D Hat",keyW:"Hat",id:143,rarity:4,type:1,seas:3,sclMlt:.5,sitOff:.6,scl:1.6},{name:"K.P.D Uniform",id:11,shirtCol:2369592,sleeveCol:2368548,pantsCol:2369592,shoeCol:2368548,seas:3,type:5,rarity:5},{name:"AP Rally",keyW:"Waist",limT:"Clan Wars",region:"Asia",rarity:5,seas:3,id:10,type:6,scl:2.1,spnScl:2.5,sclMlt:2.8,yOff:-1.5,xOff:-1,sitOff:0,prevRot:4,glow:!0,noLegs:!0,noSpin:!0,lowR:!0,noSale:!0},{name:"Chaffee",keyW:"Waist",limT:"Clan Wars",region:"North America",rarity:5,seas:3,id:9,type:6,scl:2.1,spnScl:2.5,sclMlt:2.8,yOff:-1.5,xOff:-1,sitOff:0,prevRot:4,noLegs:!0,noSpin:!0,lowR:!0,noSale:!0},{name:"Magic Carpet",keyW:"Waist",limT:"Clan Wars",region:"Middle East",rarity:5,seas:3,id:8,type:6,scl:2.1,spnScl:3,sclMlt:2.6,sitOff:1.4,prevRot:4,xOff:-2,noLegs:!0,noSpin:!0,lowR:!0,noSale:!0},{name:"Matryoshka",limT:"Clan Wars",region:"Eastern Europe",noSpin:!0,id:129,rarity:5,type:1,keyW:"Hat",sclMlt:.5,sitOff:1,rAnim:-.0016,rAnimA:"y",seas:3,noSale:!0},{name:"Baluba",limT:"Clan Wars",region:"Africa",noSpin:!0,id:128,rarity:5,type:1,keyW:"Hat",scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:3.7,seas:3,noSale:!0},{name:"Kali",limT:"Clan Wars",region:"Oceania",keyW:"Back",noSpin:!0,id:65,type:2,scl:3,sclMlt:2.6,sitOff:-1.1,sitOffZ:-2,yOff:-.9,xOff:-.3,rarity:5,seas:3,rAnim:-.002,rAnimA:"x",noSale:!0},{name:"Union",limT:"Clan Wars",region:"Western Europe",keyW:"Back",noSpin:!0,id:66,glow:!0,type:2,scl:3,sclMlt:2.6,sitOff:-1.1,sitOffZ:-2,yOff:-.9,xOff:-.3,rarity:5,seas:3,rAnim:-.002,rAnimA:"x",noSale:!0},{name:"Macuahuitl",limT:"Clan Wars",region:"South America",noSpin:!0,id:18,rarity:4,type:3,sxRot:-.1,syOff:0,sxOff:.5,szOff:-.2,scl:.8,yOff:-1,xOff:-1,keyW:"Melee",seas:3,glow:!0,noSale:!0},{name:"Haunter",limT:"Raid",noSpin:!0,noSale:!0,noQuickSell:!0,rarity:2,seas:4,id:97,type:4,opacity:.9,keyW:"Sprays"},{name:"Boo!",limT:"Raid",noSpin:!0,noSale:!0,noQuickSell:!0,rarity:2,seas:4,id:98,type:4,opacity:.9,keyW:"Sprays"},{name:"Ghast",keyW:"Waist",limT:"Raid",rarity:4,seas:4,id:11,type:6,glow:!0,opac:.9,scl:2.1,spnScl:3,color:3823936,sclMlt:.45,sitOff:.4,prevRot:4,xOff:-2,noLegs:!0,noSpin:!0,noQuickSell:!0,lowR:!0,noSale:!0},{name:"Pumpking",keyW:"Hat",limT:"Raid",id:144,rarity:4,type:1,glow:!0,seas:4,scl:1,sclMlt:.6,sitOff:.85,yOff:-.7,xOff:3.7,trans:!0,noHead:!0,noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Spooky",limT:"Raid",id:0,tex:8,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5,noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Rune Lord",limT:"Raid",keyW:"Back",id:69,glow:!0,type:2,scl:2.3,sclMlt:.8,sitOff:-1.1,sitOffZ:-2,yOff:-.9,xOff:-.3,rarity:5,seas:4,color:4235601,rAnim:-.002,rAnimA:"x",noSpin:!0,trans:!0,emiss:11075511,side:2,noQuickSell:!0},{name:"Ghostly",limT:"Raid",noSpin:!0,id:12,sameGlow:!0,opac:.9,emiss:11075511,color:3823936,seas:4,type:5,rarity:5,noQuickSell:!0},{name:"Skelly",limT:"Raid",noSpin:!0,noSale:!0,rarity:2,seas:4,id:99,type:4,opacity:.9,keyW:"Sprays",noQuickSell:!0},{name:"Halloween",limT:"Raid",noSpin:!0,noSale:!0,rarity:2,seas:4,id:100,type:4,opacity:.9,keyW:"Sprays",noQuickSell:!0},{name:"Ghostly Cowboy",limT:"Raid",noSale:!0,noSpin:!0,type:1,keyW:"Head",scl:2.5,sitOff:.4,glow:!0,emiss:11075511,yOff:-3,tex:1,id:0,seas:4,rarity:3,noQuickSell:!0,opac:.9},{name:"Grinner",limT:"Raid",id:0,tex:9,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:1.6,xRot:-.5,noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Bats",limT:"Raid",rarity:2,seas:4,id:102,type:4,opacity:.9,keyW:"Sprays",noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Ectoplasm",limT:"Raid",glow:!0,opac:.9,color:3823936,id:0,weapon:3,rarity:4,seas:4,noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Devil Horns",limT:"Raid",id:115,tex:1,rarity:3,type:1,keyW:"Hat",scl:1,sclMlt:.45,sitOff:.4,yOff:-.7,xOff:.2,seas:4,noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Devious",keyW:"Waist",limT:"Raid",rarity:4,seas:4,id:12,type:6,scl:2.1,spnScl:3,sclMlt:.6,sitOff:.9,sitOffZ:.4,prevRot:2,xOff:-2,noSpin:!0,noQuickSell:!0,noSale:!0},{name:"Necromancer",limT:"Raid",rarity:4,id:142,glow:!0,tex:1,type:1,color:3823936,opac:.9,sclMlt:.5,sitOff:1,yOff:-2,keyW:"Hat",seas:4,noSale:!0,noSpin:!0,noQuickSell:!0},{name:"OMEGASOUL",limT:"Raid",rarity:2,seas:4,id:103,type:4,opacity:.9,keyW:"Sprays",noSale:!0,noSpin:!0,noQuickSell:!0},{name:"Crayator Bandana",limT:"Canteen",noSale:!0,noSpin:!0,id:91,tex:2,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Scuffed Bandana",limT:"Canteen",noSale:!0,noSpin:!0,id:91,tex:3,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Loserfruit Bandana",limT:"Canteen",noSale:!0,noSpin:!0,id:91,tex:4,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Strawberry Milk",limT:"Canteen",noSale:!0,noSpin:!0,rarity:2,seas:3,id:104,type:4,opacity:.9,keyW:"Sprays"},{name:"Quacky Bandana",limT:"Canteen",creator:"Quacky",noSale:!0,noSpin:!0,id:91,tex:6,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"Zed Bandana",limT:"Canteen",creator:"Quacky",noSale:!0,noSpin:!0,id:91,tex:5,rarity:3,type:1,keyW:"Hat",sclMlt:.5,sitOff:.8,seas:3},{name:"AussieAntics",limT:"Canteen",noSale:!0,noSpin:!0,rarity:2,seas:3,id:105,type:4,opacity:.9,keyW:"Sprays"},{name:"Re-tron I",id:145,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.9,yOff:-.7,noHead:!0,rarity:4},{name:"Re-tron II",id:145,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.9,yOff:-.7,noHead:!0,rarity:4},{name:"Q-tron I",id:145,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.9,yOff:-.7,noHead:!0,rarity:4},{name:"O-tron I",id:145,tex:3,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.9,yOff:-.7,noHead:!0,rarity:4},{name:"Hazmat",id:146,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,xOff:.6,trans:1,rarity:4},{name:"Scientist",id:146,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,xOff:.6,trans:1,rarity:4},{name:"Goblin King",id:147,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"Jester",id:148,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,rarity:3},{name:"Fool",id:148,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,rarity:3},{name:"Lincoln",id:149,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,rarity:2},{name:"Umbrella",id:150,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:1.3,yOff:-1.9,rarity:4,side:2,rAnim:-.0022,rAnimA:"y"},{name:"Pickler",id:152,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.75,yOff:-1,xOff:-.6,noHead:!0,rarity:3},{name:"Membi",id:153,type:1,keyW:"Hat",seas:4,scl:1.5,sclMlt:.68,sitOff:1,yOff:-1,noHead:!0,rarity:3},{name:"Rice Hat",id:154,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2},{name:"Lemy",id:155,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.75,yOff:-.5,xOff:-.4,noHead:!0,rarity:3},{name:"Limey",id:155,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.6,sitOff:.75,yOff:-.5,xOff:-.4,noHead:!0,rarity:3},{name:"Shroomy",id:156,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.9,sitOff:.05,yOff:-.7,xOff:-.4,noHead:!0,rarity:3},{name:"Blonde",id:157,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2},{name:"Ranga",id:157,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2},{name:"Elvis",id:157,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2},{name:"Brunet",id:157,tex:3,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2},{name:"Fancy",id:158,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.6,rarity:2},{name:"Beaver",id:158,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.6,rarity:2},{name:"Lucky",id:158,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.6,rarity:2},{name:"Bane",id:159,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:3},{name:"Black Cloak",id:160,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2,side:2},{name:"White Cloak",id:160,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:2,side:2},{name:"Methane",id:161,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,xOff:1,rarity:4,trans:!0,side:2,glow:!0},{name:"Toxins",id:161,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,xOff:1,rarity:4,trans:!0,side:2,glow:!0},{name:"Loud",id:162,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1,rarity:3},{name:"Stupid",id:163,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-5,xOff:1.8,rarity:2,trans:!0,side:2},{name:"Cuppa",id:164,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:4,noHead:!0,side:2,frames:2,frameT:450,alpha:.1},{name:"Mysterious",id:165,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:3,trans:2,glow:!0,side:2},{name:"Watchful",id:165,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:3,trans:2,glow:!0,side:2},{name:"Pope",id:166,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-2.2,rarity:2},{name:"Grizzly Hat",id:167,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:3},{name:"Bear Hat",id:167,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:3},{name:"Propeller Cap",id:168,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-2.5,xOff:1.4,rarity:4,side:2,frames:2,frameT:50,trans:!0},{name:"Vocal",id:169,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.4,rarity:1},{name:"Casual",id:169,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.4,rarity:1},{name:"Hat Hat",id:170,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-2.6,rarity:3},{name:"Baby",id:171,type:1,keyW:"Hat",seas:4,scl:1.3,sclMlt:.78,sitOff:.8,yOff:-.7,rarity:3,noHead:!0},{name:"Sir",id:172,type:1,keyW:"Hat",seas:4,scl:.7,sclMlt:.48,sitOff:1,yOff:-2.5,rarity:3},{name:"Lady",id:172,tex:1,type:1,keyW:"Hat",seas:4,scl:.7,sclMlt:.48,sitOff:1,yOff:-2.5,rarity:3},{name:"Grey Hat",id:173,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.4,rarity:1},{name:"Black Hat",id:173,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.4,rarity:1},{name:"Brown Hat",id:173,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.4,rarity:1},{name:"King",id:174,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.9,rarity:3},{name:"Face Shield",id:175,type:1,keyW:"Hat",seas:4,scl:1,side:2,sclMlt:.48,sitOff:1,yOff:-.7,rarity:3},{name:"Mossworm",id:176,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-4.5,xOff:.8,rarity:3},{name:"Science Kid",id:177,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:3},{name:"Magic",id:178,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.2,rarity:2},{name:"Green Capper",id:179,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,xOff:1.4,rarity:1,side:2,trans:!0},{name:"Sports Capper",id:179,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,xOff:1.4,rarity:1,side:2,trans:!0},{name:"Race Capper",id:179,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,xOff:1.4,rarity:1,side:2,trans:!0},{name:"Street Capper",id:179,tex:3,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,xOff:1.4,rarity:1,side:2,trans:!0,alpha:.02},{name:"Robob MKI",id:180,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.3,rarity:5,trans:!0,frames:2,frameT:200,glow:!0,noHead:!0,side:2,rAnim:.003,rAnimT:1,alpha:.02},{name:"Robob MKII",id:180,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.3,rarity:5,trans:!0,frames:2,frameT:200,glow:!0,noHead:!0,side:2,rAnim:.003,rAnimT:1,alpha:.02},{name:"Black Bucket",id:181,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2,side:2},{name:"White Bucket",id:181,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2,side:2},{name:"Bomber",id:182,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.78,sitOff:.7,yOff:-.7,xOff:-1,rarity:4,noHead:!0,trans:!0,side:2,frames:2,frameT:200},{name:"Green Present",id:183,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2,alpha:.2},{name:"Red Present",id:183,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2,alpha:.2},{name:"Red Mask",id:184,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"Green Mask",id:184,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"Blue Mask",id:184,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"Pink Mask",id:184,tex:3,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"High",id:185,type:1,keyW:"Hat",seas:4,scl:1.5,sclMlt:.68,sitOff:.7,yOff:-.9,xOff:.6,rarity:4,side:2,noHead:!0},{name:"Noodler",id:186,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.68,sitOff:.58,yOff:-.7,rarity:3,noHead:!0},{name:"Sir Krunk V",id:187,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.65,sitOff:.65,yOff:-.7,rarity:4,noHead:!0,trans:!0,alpha:.02,side:2},{name:"Black Bunny",id:188,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-4.5,xOff:3,rarity:3},{name:"Grey Bunny",id:188,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-4.5,xOff:3,rarity:3},{name:"Pink Bunny",id:188,tex:2,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-4.5,xOff:3,rarity:3},{name:"Red Buddy",id:189,type:1,keyW:"Hat",seas:4,scl:1.6,sclMlt:.48,sitOff:1,yOff:-4.5,xOff:.6,rarity:3},{name:"Green Buddy",id:189,tex:1,type:1,keyW:"Hat",seas:4,scl:1.6,sclMlt:.48,sitOff:1,yOff:-4.5,xOff:.6,rarity:3},{name:"Avo",id:190,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.78,sitOff:.35,sitOffZ:.6,yOff:-.7,xOff:-.6,rarity:3,noHead:!0},{name:"Red Eye",id:191,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"Blue Eye",id:191,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:2},{name:"Piper",id:192,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-2,xOff:.7,rarity:3,frames:2,frameT:200,alpha:.01,side:2},{name:"Pink Bow",id:193,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-2.1,rarity:1},{name:"Yellow Bow",id:193,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-2.1,rarity:1},{name:"Swarm",id:194,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.5,sitOff:-.5,rAnim:.0016,rAnimA:"y",yOff:-.7,rarity:4},{name:"Genius",id:195,type:1,keyW:"Hat",seas:4,scl:2,sclMlt:.48,sitOff:1,yOff:-4.2,xOff:.5,rarity:4},{name:"Samurai",id:196,type:1,creator:"iSpy",keyW:"Hat",seas:4,scl:.8,sclMlt:.48,sitOff:1,yOff:-.9,rarity:4},{name:"Dark Samurai",id:196,tex:1,type:1,creator:"iSpy",keyW:"Hat",seas:4,scl:.8,sclMlt:.48,sitOff:1,yOff:-.9,rarity:4},{name:"Conscience",id:197,type:1,creator:"iSpy",keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.5,xOff:-1,rarity:4},{name:"Mad",id:198,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.5,xOff:-1,rarity:2,side:2,trans:!0},{name:"Night Doctor",id:199,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:.7,rarity:4},{name:"Plague Doctor",id:199,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:.7,rarity:4},{name:"Red Tinted Goggles",id:200,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:1},{name:"Blue Tinted Goggles",id:200,tex:1,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-.7,rarity:1},{name:"Rainbow Afro",type:1,keyW:"Head",seas:4,scl:2,sclMlt:.9,sitOff:1.4,yOff:-4,id:6,tex:2,rarity:3},{name:"Amber Skull",type:1,id:12,keyW:"Head",seas:4,scl:3,glow:!0,sclMlt:1.05,sitOff:2.5,sitOffZ:1.1,yOff:-4.5,xOff:-4.2,tex:3,rarity:3},{name:"Alpha",seas:4,id:36,glow:!0,type:1,keyW:"Head",sclMlt:.56,sitOff:1.3,xOff:1.4,scl:1.1,yOff:-1.2,tex:3,rarity:4},{name:"Soul Eater",seas:4,noHead:!0,id:132,type:1,keyW:"Hat",scl:1.5,sclMlt:.8,sitOff:.8,yOff:-.7,tex:1,rarity:4},{name:"Papa",seas:4,noHead:!0,id:134,type:1,keyW:"Hat",scl:1,sclMlt:.48,sitOff:1,yOff:-.9,tex:1,rarity:3},{name:"Box Head",seas:4,id:137,type:1,keyW:"Hat",scl:1,sclMlt:.48,sitOff:1,yOff:-.7,xOff:-.3,tex:1,rarity:3,alpha:.2,side:2},{name:"Content Clown",id:1,rarity:4,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Flushed",id:0,tex:10,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Glowup",id:0,tex:11,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Angwy",id:0,tex:12,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Sea Sick",id:0,tex:13,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Gah",id:0,tex:14,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Waaah",id:0,tex:15,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Yikes",id:0,tex:16,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Yummy",id:0,tex:17,rarity:4,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Growl",id:0,tex:18,rarity:4,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5,glow:!0},{name:"Panda",id:0,tex:19,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Constipated",id:0,tex:20,rarity:4,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Kalm",id:0,tex:21,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Baked",id:0,tex:22,rarity:4,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Chiseled",id:0,tex:23,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Chompers",id:0,tex:24,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Simp",id:0,tex:25,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Nerd",id:0,tex:26,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Ded",id:0,tex:27,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Boosters",id:70,type:2,rarity:4,keyW:"Back",seas:4,glow:!0,frames:2,frameT:400,trans:!0,side:2,xOff:-4.6,sitOff:-.3,sitOffZ:.1,sclMlt:.6},{name:"Up",id:71,type:2,rarity:3,keyW:"Back",seas:4,xOff:-3,yOff:-7,sitOff:-.3,sitOffZ:.6,sclMlt:.7},{name:"Mechacrow",id:72,type:2,rarity:4,keyW:"Back",seas:4,scl:.5,xOff:-6.6,yOff:-1,glow:!0,sitOffZ:.5,sitOff:-.3,sclMlt:.55},{name:"Dynocrow",id:72,tex:1,type:2,rarity:4,xOff:-6.6,yOff:-1,keyW:"Back",seas:4,scl:.5,glow:!0,sitOffZ:.5,sitOff:-.3,sclMlt:.55},{name:"Red Backpack",id:73,type:2,rarity:1,keyW:"Back",seas:4,scl:.6,yOff:-.5,xRot:Math.PI,sitOff:-.3,sclMlt:.5},{name:"Blue Backpack",id:73,tex:1,type:2,rarity:1,keyW:"Back",scl:.6,yOff:-.5,seas:4,xRot:Math.PI,sitOff:-.3,sclMlt:.5},{name:"Green Backpack",id:73,tex:2,type:2,rarity:1,keyW:"Back",scl:.6,yOff:-.5,seas:4,xRot:Math.PI,sitOff:-.3,sclMlt:.5},{name:"Yellow Backpack",id:73,tex:3,type:2,rarity:1,keyW:"Back",scl:.6,yOff:-.5,seas:4,xRot:Math.PI,sitOff:-.3,sclMlt:.5},{name:"Dark Armor",id:74,type:2,rarity:3,keyW:"Back",seas:4,sitOff:-.3,sclMlt:.5},{name:"Samurai Armor",id:74,tex:1,type:2,rarity:3,keyW:"Back",seas:4,sitOff:-.3,sclMlt:.5},{name:"Fender",id:75,type:2,rarity:3,keyW:"Back",seas:4,side:2,xRot:Math.PI,scl:.7,yOff:-1,trans:!0,sitOffZ:.2,sclMlt:.6},{name:"Gibson",id:75,tex:1,type:2,rarity:3,keyW:"Back",seas:4,xRot:Math.PI,scl:.7,yOff:-1,side:2,trans:!0,sitOffZ:.2,sclMlt:.6},{name:"Todo List",id:76,type:2,rarity:1,keyW:"Back",seas:4,scl:.7,sitOff:-.3,sclMlt:.5},{name:"Disco Wings",id:77,type:2,rarity:3,keyW:"Back",seas:4,scl:.7,xOff:-.6,yOff:-1.9,glow:!0,sitOff:.3,sclMlt:.7},{name:"Crimson Fairy",id:78,type:2,rarity:3,keyW:"Back",seas:4,glow:!0,trans:!0,scl:.7,yOff:-1.9,xOff:-2.2,sitOff:-.5,sclMlt:.5},{name:"Fairy",id:78,tex:1,type:2,rarity:3,keyW:"Back",seas:4,glow:!0,scl:.7,yOff:-1.9,xOff:-2.2,trans:!0,sitOff:-.5,sclMlt:.5},{name:"Sprout",id:79,type:2,rarity:3,keyW:"Back",seas:4,side:2,scl:.7,yOff:-2,xOff:-5,sitOffZ:.3,sclMlt:.7},{name:"Milk Chocolate",id:80,type:2,rarity:2,keyW:"Back",seas:4,scl:.7,sitOff:-.4,sclMlt:.5},{name:"White Chocolate",id:80,tex:1,type:2,rarity:2,keyW:"Back",scl:.7,seas:4,sitOff:-.4,sclMlt:.5},{name:"Dark Chocolate",id:80,tex:2,type:2,rarity:2,keyW:"Back",scl:.7,seas:4,sitOff:-.4,sclMlt:.5},{name:"Imagination",id:81,type:2,rarity:5,keyW:"Back",seas:4,side:2,xOff:-4.6,yOff:-2.5,sitOff:-2,sitOffZ:1,sclMlt:.8,movT:-.001,movD:1,glow:!0},{name:"Sweet N Sour",id:82,type:2,rarity:3,keyW:"Back",xRot:Math.PI,scl:.6,yOff:-1.9,seas:4,sclMlt:.5},{name:"Moonlit",id:83,type:2,rarity:5,keyW:"Back",xRot:Math.PI,scl:.7,yOff:-2,xOff:-.2,seas:4,glow:!0,sitOff:-.3,sitOffZ:.1,sclMlt:.7},{name:"Krunkie",id:84,type:2,rarity:1,keyW:"Back",seas:4,scl:.7,xRot:Math.PI,sitOff:-.3,sclMlt:.5},{name:"Bipolar",id:85,type:2,rarity:5,keyW:"Back",seas:4,scl:.7,sitOff:-1,sitOffZ:-2.5,sclMlt:.8,rAnim:.0015,rAnimA:"x"},{name:"Tehch Deck",id:86,type:2,rarity:2,keyW:"Back",seas:4,xRot:Math.PI,sitOff:-.3,sitOffZ:.3,sclMlt:.7},{name:"Jumbo Jet 1",id:87,type:2,rarity:3,keyW:"Back",seas:4,frames:2,scl:.6,xOff:-.5,yOff:-1,frameT:400,xRot:Math.PI,sitOff:.1,sclMlt:.65,side:2},{name:"Jumbo Jet 2",id:87,tex:1,type:2,rarity:3,keyW:"Back",seas:4,scl:.6,xOff:-.5,yOff:-1,frames:2,frameT:400,xRot:Math.PI,sitOff:.1,sclMlt:.65,side:2},{name:"Slidehop 101",id:88,type:2,rarity:2,keyW:"Back",xRot:Math.PI,seas:4,sitOff:-.4,sclMlt:.5},{name:"Hydrate",id:89,type:2,rarity:1,keyW:"Back",seas:4,xRot:Math.PI,xOff:-.4,sitOff:-.3,sitOffZ:.1,sclMlt:.6},{name:"Swipe Left",id:90,type:2,rarity:2,keyW:"Back",xRot:Math.PI,scl:.7,seas:4,sitOff:-.3,sclMlt:.5},{name:"Papilion",id:91,type:2,rarity:4,keyW:"Back",seas:4,glow:!0,xRot:Math.PI,side:2,scl:.7,xOff:-.8,sitOff:-.4,sitOffZ:.3,sclMlt:.8},{name:"Morpho",id:91,tex:1,type:2,rarity:4,keyW:"Back",xRot:Math.PI,seas:4,glow:!0,side:2,scl:.7,xOff:-.8,sitOff:-.4,sclMlt:.8,sitOffZ:.3},{name:"Lil Buddy",id:92,type:2,rarity:2,xRot:Math.PI,keyW:"Back",scl:.7,seas:4,sitOff:-.3,sclMlt:.5},{name:"Dont Shoot",id:93,type:2,rarity:3,keyW:"Back",seas:4,glow:!0,trans:!0,frames:2,frameT:400,side:2,scl:.5,yOff:-3,xOff:-1,sclMlt:.6,sitOffZ:.2,sitOff:-.3},{name:"Nano Wings",id:94,type:2,rarity:4,creator:"iSpy",keyW:"Back",xRot:Math.PI,scl:.45,xOff:-1,yOff:-2.2,seas:4,glow:!0,sclMlt:.5},{name:"Skelly",id:95,type:2,rarity:2,keyW:"Back",seas:4,noChest:!0,sclMlt:.5,sitOff:-.6},{name:"Krunk League",id:96,type:2,rarity:3,keyW:"Back",seas:4,xRot:Math.PI,sclMlt:.6,scl:.8,xOff:-2,sitOffZ:.2,sitOff:-.9},{name:"Trophy",id:97,type:2,rarity:2,keyW:"Back",seas:4,xRot:Math.PI,sclMlt:.5,xOff:-1,sitOff:-.7},{name:"Robbery",id:98,type:2,rarity:3,keyW:"Back",seas:4,frames:2,frameT:400,trans:!0,side:2,scl:.7,xOff:-2,xRot:Math.PI,sclMlt:.5,sitOff:-.5,alpha:.2},{name:"Krunk Landing",id:99,type:2,rarity:2,keyW:"Back",xRot:.8*Math.PI,scl:.6,xOff:-2,yOff:-1,seas:4,side:2,sitOff:-.3,sclMlt:.5},{name:"Croissant",id:100,type:2,rarity:2,keyW:"Back",xRot:Math.PI,scl:.7,xOff:-1,yOff:-1,seas:4,sclMlt:.5,sitOff:-.3},{name:"Mechladon",creator:"cimota",id:7,tex:1,type:2,keyW:"Back",glow:!0,scl:5,sclMlt:4.5,xOff:-3,sitOff:-.5,sitOffZ:-.4,yOff:-3,seas:4,rarity:3},{name:"Red All Stars",id:0,rarity:4,type:8,yOff:-3,xOff:1,keyW:"Shoes",seas:4},{name:"Blue All Stars",id:0,tex:1,rarity:4,type:8,yOff:-3,xOff:1,keyW:"Shoes",seas:4},{name:"Squeakers",id:1,rarity:5,type:8,yOff:-3,xOff:1,keyW:"Shoes",snd:!0,seas:4},{name:"Bunnies",id:2,rarity:5,type:8,yOff:-3,xOff:1,keyW:"Shoes",snd:!0,seas:4},{name:"Frosted Bite",id:107,type:4,rarity:4,opacity:.8,keyW:"Sprays",seas:4},{name:"Antidote",id:108,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Kanji",id:109,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"Clownjuice",id:110,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Kill Feed",id:111,type:4,rarity:4,opacity:.8,keyW:"Sprays",seas:4},{name:"Thirdeye",id:112,type:4,rarity:0,opacity:.8,keyW:"Sprays",seas:4},{name:"Kaboom",id:113,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"Krunkie",id:114,type:4,rarity:0,opacity:.8,keyW:"Sprays",seas:4},{name:"Crime Scene",id:115,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Fenris",creator:"bodeneinheit",id:116,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Sike",id:117,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"FFA",id:118,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"Krunk League",id:119,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"Sad Noodle",id:120,type:4,rarity:2,opacity:.8,keyW:"Sprays",seas:4},{name:"Locked n Loaded",id:121,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Milk",id:122,type:4,rarity:0,opacity:.8,keyW:"Sprays",seas:4},{name:"Hunter",id:123,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Cuppa",id:124,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"Bloodshot",id:125,type:4,rarity:0,opacity:.8,keyW:"Sprays",seas:4},{name:"Howdy",id:126,type:4,rarity:2,opacity:.8,keyW:"Sprays",seas:4},{name:"Nightmare",id:127,type:4,rarity:2,opacity:.8,keyW:"Sprays",seas:4},{name:"Rolled",creator:"Iniquity",id:128,type:4,rarity:5,opacity:.8,keyW:"Sprays",frames:4,frameT:400,seas:4},{name:"Huh",id:129,type:4,rarity:3,opacity:.8,keyW:"Sprays",frames:5,frameT:400,seas:4},{name:"Champion",id:130,type:4,rarity:1,opacity:.8,keyW:"Sprays",seas:4},{name:"Bee Hop",id:131,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Cherries",id:132,type:4,rarity:0,opacity:.8,keyW:"Sprays",seas:4},{name:"Nuke",id:133,type:4,rarity:2,opacity:.8,keyW:"Sprays",seas:4},{name:"S.A.R",id:134,type:4,rarity:4,opacity:.8,keyW:"Sprays",seas:4},{name:"AK Iris",id:268,weapon:2,rarity:5,glow:!0,seas:4,shaderId:4},{name:"Annihilation",id:233,creator:"Nxbulah",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Kanj",id:234,creator:"ReDeagle",weapon:1,rarity:3,seas:4},{name:"intergalactic takeaway",id:235,creator:"creshorTV",weapon:1,rarity:3,seas:4},{name:"3-E",id:236,creator:"Whippii",weapon:1,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Bullets",id:237,creator:"Chromatikk",weapon:1,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Wasteland Warrior",id:238,creator:"creshorTV",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Red Panda Playground",id:239,creator:"Kristai",weapon:1,rarity:3,seas:4},{name:"Testing",id:240,creator:"Kltter",weapon:1,rarity:3,glow:!0,seas:4},{name:"Astral Horror",id:241,creator:"Kilfy & Nxbulah",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Metro",id:242,creator:"Luminae",weapon:1,rarity:3,glow:!0,seas:4},{name:"Underworld Worm",id:243,creator:"Destroy007",weapon:1,rarity:4,glow:!0,seas:4},{name:"Envious",id:244,creator:"Kilfy",weapon:1,rarity:5,glow:!0,seas:4},{name:"Seishin",id:245,creator:"Atomize",weapon:1,rarity:2,seas:4},{name:"Reinga",id:246,creator:"Chromatikk & Kitter",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Death Goat",id:247,creator:"Destroy007",weapon:1,rarity:3,glow:!0,seas:4},{name:"Honeycomb",id:248,weapon:1,rarity:1,seas:4},{name:"Sweety",id:249,weapon:1,rarity:1,seas:4},{name:"Stormy",id:250,weapon:1,rarity:1,seas:4},{name:"Illusion",id:251,weapon:1,rarity:0,seas:4},{name:"Ducky",id:252,weapon:1,rarity:1,seas:4},{name:"Emoji",id:253,weapon:1,rarity:2,seas:4},{name:"Autumn",id:254,weapon:1,rarity:1,seas:4},{name:"Alpes",id:255,weapon:1,rarity:1,seas:4},{name:"Love",id:256,weapon:1,rarity:1,seas:4},{name:"Rich",id:257,weapon:1,rarity:2,seas:4},{name:"Puzzler",id:258,weapon:1,rarity:1,seas:4},{name:"Rainbow Sky",id:259,weapon:1,rarity:2,seas:4},{name:"Pirate",id:260,weapon:1,rarity:2,seas:4},{name:"Tsunami",id:261,weapon:1,rarity:2,seas:4},{name:"Hemp",id:262,weapon:1,rarity:2,seas:4},{name:"Kyanite",id:263,weapon:1,rarity:3,seas:4},{name:"Kunzite",id:264,weapon:1,rarity:2,seas:4},{name:"Merlot",id:265,weapon:1,rarity:0,seas:4},{name:"Huckleberry",id:266,weapon:1,rarity:0,seas:4},{name:"Sketch",id:267,weapon:1,rarity:0,seas:4},{name:"Ion X",id:234,creator:"Kilfy",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Nav",id:235,creator:"Kilfy",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Aurora",id:236,creator:"Kristai",weapon:2,rarity:2,glow:!0,seas:4},{name:"Teknic",id:237,creator:"Nxbulah",weapon:2,rarity:3,glow:!0,seas:4},{name:"Lore",id:238,creator:"Skriller33",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Kaiju",id:239,creator:"Kilfy",weapon:2,rarity:5,glow:!0,seas:4},{name:"Impostor",id:240,creator:"Atomize",weapon:2,rarity:2,seas:4},{name:"Dungeon Crawl",id:241,creator:"creshorTV",weapon:2,rarity:3,glow:!0,seas:4},{name:"Hydrogen",id:242,creator:"Xyba",weapon:2,rarity:3,seas:4},{name:"Epitome",id:243,creator:"creshorTV",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Hokage",id:244,creator:"creshorTV",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Synergy",id:245,creator:"Nxbulah & Luminae",weapon:2,rarity:4,glow:!0,seas:4},{name:"Doragons Influence",id:246,creator:"Nxbulah",weapon:2,rarity:3,glow:!0,seas:4},{name:"Wrong Number",id:247,creator:"Kltter",weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Honeycomb",id:248,weapon:2,rarity:0,seas:4},{name:"Sweety",id:249,weapon:2,rarity:0,seas:4},{name:"Stormy",id:250,weapon:2,rarity:2,seas:4},{name:"Illusion",id:251,weapon:2,rarity:0,seas:4},{name:"Ducky",id:252,weapon:2,rarity:2,seas:4},{name:"Emoji",id:253,weapon:2,rarity:2,seas:4},{name:"Autumn",id:254,weapon:2,rarity:1,seas:4},{name:"Alpes",id:255,weapon:2,rarity:1,seas:4},{name:"Love",id:256,weapon:2,rarity:1,seas:4},{name:"Rich",id:257,weapon:2,rarity:2,seas:4},{name:"Puzzler",id:258,weapon:2,rarity:1,seas:4},{name:"Rainbow Sky",id:259,weapon:2,rarity:2,seas:4},{name:"Pirate",id:260,weapon:2,rarity:2,seas:4},{name:"Tsunami",id:261,weapon:2,rarity:1,seas:4},{name:"Hemp",id:262,weapon:2,rarity:2,seas:4},{name:"Kyanite",id:263,weapon:2,rarity:3,seas:4},{name:"Kunzite",id:264,weapon:2,rarity:2,seas:4},{name:"Merlot",id:265,weapon:2,rarity:1,seas:4},{name:"Huckleberry",id:266,weapon:2,rarity:1,seas:4},{name:"Sketch",id:267,weapon:2,rarity:1,seas:4},{name:"BoomBox",id:206,creator:"Kitter",weapon:4,rarity:3,glow:!0,seas:4},{name:"Koi",id:207,creator:"Luminae",weapon:4,rarity:2,glow:!0,seas:4},{name:"Reactor",id:208,creator:"Cimota",weapon:4,rarity:4,glow:!0,seas:4},{name:"Yingyang",id:210,creator:"Destroy007",weapon:4,rarity:2,glow:!0,seas:4},{name:"Saberstorm",id:211,creator:"Kilfy",weapon:4,rarity:4,glow:!0,seas:4},{name:"Shogunner",id:212,creator:"Chromatikk",weapon:4,rarity:3,seas:4},{name:"Project Firefly",id:213,creator:"floatingpoint",weapon:4,rarity:3,glow:!0,seas:4},{name:"AYSY",id:214,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:4},{name:"Serpentine",id:215,creator:"KaineDCB",weapon:4,rarity:2,glow:!0,seas:4},{name:"Honeycomb",id:216,weapon:4,rarity:0,seas:4},{name:"Sweety",id:217,weapon:4,rarity:1,seas:4},{name:"Stormy",id:218,weapon:4,rarity:1,seas:4},{name:"Illusion",id:219,weapon:4,rarity:0,seas:4},{name:"Ducky",id:220,weapon:4,rarity:1,seas:4},{name:"Emoji",id:221,weapon:4,rarity:2,seas:4},{name:"Autumn",id:222,weapon:4,rarity:1,seas:4},{name:"Alpes",id:223,weapon:4,rarity:1,seas:4},{name:"Love",id:224,weapon:4,rarity:1,seas:4},{name:"Rich",id:225,weapon:4,rarity:2,seas:4},{name:"Puzzler",id:226,weapon:4,rarity:1,seas:4},{name:"Rainbow Sky",id:227,weapon:4,rarity:2,seas:4},{name:"Pirate",id:228,weapon:4,rarity:2,seas:4},{name:"Tsunami",id:229,weapon:4,rarity:1,seas:4},{name:"Hemp",id:230,weapon:4,rarity:2,seas:4},{name:"Kyanite",id:231,weapon:4,rarity:3,seas:4},{name:"Kunzite",id:232,weapon:4,rarity:2,seas:4},{name:"Merlot",id:233,weapon:4,rarity:0,seas:4},{name:"Huckleberry",id:234,weapon:4,rarity:0,seas:4},{name:"Sketch",id:235,weapon:4,rarity:0,seas:4},{name:"Basilisk",id:144,creator:"FailBucket",weapon:5,rarity:2,glow:!0,seas:4},{name:"Golden Future",id:145,creator:"Multihawk",weapon:5,rarity:2,seas:4},{name:"Lonely",id:146,creator:"creshorTV",weapon:5,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Zephyr",id:147,creator:"Whippii",weapon:5,rarity:2,seas:4},{name:"Vince",id:148,creator:"Kltter",weapon:5,rarity:2,glow:!0,seas:4},{name:"Fire Starter",id:149,creator:"creshorTV",weapon:5,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Flower Power",id:150,creator:"creshorTV",weapon:5,rarity:3,seas:4},{name:"Living Dead",id:151,creator:"Skriller33",weapon:5,rarity:3,glow:!0,seas:4},{name:"Cyberkitty",id:152,creator:"Kltter",weapon:5,rarity:2,glow:!0,seas:4},{name:"Harcollicegen",id:153,creator:"ReDeagle",weapon:5,rarity:2,glow:!0,seas:4},{name:"Little Bite",id:154,creator:"Whippii",weapon:5,rarity:3,glow:!0,seas:4},{name:"El Matador",id:155,creator:"Destroy007",weapon:5,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Obsessed",id:156,creator:"Xyba",weapon:5,rarity:2,glow:!0,seas:4},{name:"Honeycomb",id:157,weapon:5,rarity:0,seas:4},{name:"Sweety",id:158,weapon:5,rarity:1,seas:4},{name:"Stormy",id:159,weapon:5,rarity:1,seas:4},{name:"Illusion",id:160,weapon:5,rarity:0,seas:4},{name:"Ducky",id:161,weapon:5,rarity:1,seas:4},{name:"Emoji",id:162,weapon:5,rarity:2,seas:4},{name:"Autumn",id:163,weapon:5,rarity:1,seas:4},{name:"Alpes",id:164,weapon:5,rarity:1,seas:4},{name:"Love",id:165,weapon:5,rarity:1,seas:4},{name:"Rich",id:166,weapon:5,rarity:2,seas:4},{name:"Puzzler",id:167,weapon:5,rarity:1,seas:4},{name:"Rainbow Sky",id:168,weapon:5,rarity:2,seas:4},{name:"Pirate",id:169,weapon:5,rarity:1,seas:4},{name:"Tsunami",id:170,weapon:5,rarity:1,seas:4},{name:"Hemp",id:171,weapon:5,rarity:1,seas:4},{name:"Kyanite",id:172,weapon:5,rarity:3,seas:4},{name:"Kunzite",id:173,weapon:5,rarity:2,seas:4},{name:"Merlot",id:174,weapon:5,rarity:2,seas:4},{name:"Huckleberry",id:175,weapon:5,rarity:1,seas:4},{name:"Sketch",id:176,weapon:5,rarity:0,seas:4},{name:"Death Rise",mid:0,midT:111,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"creshorTV",weapon:6,rarity:3,glow:!0,seas:4},{name:"Keanu",mid:0,midT:112,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Zinoob",weapon:6,rarity:3,glow:!0,seas:4},{name:"Track 73",mid:0,midT:113,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"multihawk",weapon:6,rarity:2,seas:4},{name:"Silver Teal",mid:0,midT:114,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"multihawk",weapon:6,rarity:2,seas:4},{name:"RY4-S",mid:0,midT:115,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Zinoob",weapon:6,rarity:2,glow:!0,seas:4},{name:"Spook Town",mid:0,midT:116,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Xyba",weapon:6,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Prehistoric",mid:0,midT:117,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Atomize",weapon:6,rarity:2,seas:4},{name:"DragonBorn",mid:0,midT:118,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Kilfy",weapon:6,rarity:3,glow:!0,seas:4},{name:"Blossom Revenge",mid:0,midT:119,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Destroy007",weapon:6,rarity:3,glow:!0,seas:4},{name:"One Off",mid:0,midT:120,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"cimota",weapon:6,rarity:3,seas:4},{name:"Bloodhound",mid:0,midT:121,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Kilfy",weapon:6,rarity:4,glow:!0,seas:4},{name:"Cybergum",mid:0,midT:122,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Nxbulah",weapon:6,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"CyberBuddy",mid:0,midT:123,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"multihawk",weapon:6,rarity:3,glow:!0,seas:4},{name:"Lotus",mid:0,midT:124,scl:.9,mScl:1,zOff:.28,yOff:-.5,creator:"Kristai",weapon:6,rarity:2,seas:4},{name:"Honeycomb",mid:0,midT:125,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:4},{name:"Sweety",mid:0,midT:126,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Stormy",mid:0,midT:127,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Illusion",mid:0,midT:128,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:4},{name:"Ducky",mid:0,midT:129,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Emoji",mid:0,midT:130,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:4},{name:"Autumn",mid:0,midT:131,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Alpes",mid:0,midT:132,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Love",mid:0,midT:133,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:4},{name:"Rich",mid:0,midT:134,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:4},{name:"Puzzler",mid:0,midT:135,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Rainbow Sky",mid:0,midT:136,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:4},{name:"Pirate",mid:0,midT:137,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:4},{name:"Tsunami",mid:0,midT:138,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Hemp",mid:0,midT:139,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Kyanite",mid:0,midT:140,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:3,seas:4},{name:"Kunzite",mid:0,midT:141,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:2,seas:4},{name:"Merlot",mid:0,midT:142,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Huckleberry",mid:0,midT:143,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:1,seas:4},{name:"Sketch",mid:0,midT:144,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:0,seas:4},{name:"Orah",mid:0,midT:50,creator:"Nxbulah",weapon:10,rarity:2,seas:4},{name:"Lifeline",mid:0,midT:51,creator:"creshorTV",weapon:10,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Rockstar",mid:0,midT:52,creator:"Destroy007",weapon:10,rarity:3,glow:!0,seas:4},{name:"SMILEZ",mid:0,midT:53,creator:"Kltter",weapon:10,rarity:3,glow:!0,seas:4},{name:"Krunk Wet-Cannon",mid:0,midT:54,creator:"creshorTV",weapon:10,rarity:2,seas:4},{name:"Chameleon",mid:0,midT:55,creator:"bodeneinheit",weapon:10,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Vizual",mid:0,midT:56,creator:"Zinoob",weapon:10,rarity:3,glow:!0,seas:4},{name:"Lightning Vein",mid:0,midT:57,creator:"Destroy007",weapon:10,rarity:3,glow:!0,seas:4},{name:"Records",id:9,creator:"Kltter",weapon:11,rarity:3,seas:4},{name:"Jaw O Death",id:10,creator:"Kltter",weapon:11,rarity:3,glow:!0,seas:4},{name:"Bubblegun",id:11,creator:"Multihawk",weapon:11,rarity:3,seas:4},{name:"Abominable",id:12,creator:"Kilfy",weapon:11,rarity:4,glow:!0,seas:4},{name:"Fervor",id:13,creator:"Cimota",weapon:11,rarity:3,glow:!0,seas:4},{name:"Ultranoir",id:14,creator:"floatingpoint",weapon:11,rarity:5,glow:!0,pulsT:.0015,seas:4},{name:"Vroominator",id:3,creator:"creshorTV",weapon:12,rarity:5,glow:!0,pulsT:.0015,seas:4},{name:"Space Ranger",id:7,creator:"Exxor",weapon:14,rarity:3,glow:!0,seas:4},{name:"Party Animal",id:8,creator:"Destroy007",weapon:14,rarity:3,glow:!0,seas:4},{name:"Policijia",id:9,creator:"_irizu",weapon:14,rarity:3,seas:4},{name:"K9X",id:10,creator:"_Xyba",weapon:14,rarity:3,seas:4},{name:"Digital Supremacy",id:137,creator:"Multihawk",weapon:15,rarity:2,seas:4},{name:"Frosting",id:138,creator:"creshorTV",weapon:15,rarity:2,seas:4},{name:"Spike",id:139,creator:"Destroy007",weapon:15,rarity:3,glow:!0,seas:4},{name:"Dragon Koi",id:140,creator:"Kilfy",weapon:15,rarity:3,seas:4},{name:"Synthetic Void",id:141,creator:"Nxbulah",weapon:15,rarity:4,glow:!0,seas:4},{name:"World Eater",id:142,creator:"creshorTV",weapon:15,rarity:3,glow:!0,seas:4},{name:"Anky",id:143,creator:"Chromatikk",weapon:15,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Black Cats",id:144,creator:"Kristai",weapon:15,rarity:3,glow:!0,seas:4},{name:"Dezein",id:145,creator:"Nxbulah",weapon:15,rarity:3,glow:!0,seas:4},{name:"Gate to Hxll",id:146,creator:"Nxbulah",weapon:15,rarity:5,glow:!0,pulsT:.0015,seas:4},{name:"Trick or Treat",id:147,creator:"Destroy007",weapon:15,rarity:2,glow:!0,seas:4},{name:"Crusade",id:148,creator:"Atomize",weapon:15,rarity:2,seas:4},{name:"Sentry",id:149,creator:"Kilfy",weapon:15,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Scorpio",id:150,creator:"Kilfy",weapon:15,rarity:3,glow:!0,seas:4},{name:"Thorny",id:151,creator:"Xyba",weapon:15,rarity:3,glow:!0,seas:4},{name:"Irresponsible",id:152,creator:"Kcress",weapon:15,rarity:3,glow:!0,seas:4},{name:"Honeycomb",id:153,weapon:15,rarity:0,seas:4},{name:"Sweety",id:154,weapon:15,rarity:1,seas:4},{name:"Stormy",id:155,weapon:15,rarity:1,seas:4},{name:"Illusion",id:156,weapon:15,rarity:0,seas:4},{name:"Ducky",id:157,weapon:15,rarity:1,seas:4},{name:"Emoji",id:158,weapon:15,rarity:2,seas:4},{name:"Autumn",id:159,weapon:15,rarity:1,seas:4},{name:"Alpes",id:160,weapon:15,rarity:1,seas:4},{name:"Love",id:161,weapon:15,rarity:0,seas:4},{name:"Rich",id:162,weapon:15,rarity:2,seas:4},{name:"Puzzler",id:163,weapon:15,rarity:1,seas:4},{name:"Rainbow Sky",id:164,weapon:15,rarity:2,seas:4},{name:"Pirate",id:165,weapon:15,rarity:2,seas:4},{name:"Tsunami",id:166,weapon:15,rarity:1,seas:4},{name:"Hemp",id:167,weapon:15,rarity:1,seas:4},{name:"Kyanite",id:168,weapon:15,rarity:3,seas:4},{name:"Kunzite",id:169,weapon:15,rarity:2,seas:4},{name:"Merlot",id:170,weapon:15,rarity:1,seas:4},{name:"Huckleberry",id:171,weapon:15,rarity:1,seas:4},{name:"Sketch",id:172,weapon:15,rarity:0,seas:4},{name:"Slayed",id:4,creator:"Multihawk",weapon:16,rarity:3,seas:4},{name:"Urus",id:4,creator:"Nxbulah",weapon:17,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"KrunkieBoy",id:5,creator:"Kltter",weapon:17,rarity:3,glow:!0,seas:4},{name:"Block-18",id:6,creator:"Cimota",weapon:17,rarity:3,glow:!0,seas:4},{name:"Avalanche Spirits",id:7,creator:"Kilfy",weapon:17,rarity:4,glow:!0,seas:4},{name:"Th3 Numb3rs",id:8,creator:"Exxor",weapon:17,rarity:4,frames:4,frameT:250,glow:!0,seas:4},{name:"Submergence",id:9,creator:"Kilfy",weapon:17,rarity:3,glow:!0,seas:4},{name:"C-300",id:1,creator:"cimota",weapon:19,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Pentacore",id:2,creator:"Floatingpoint & Luminae",weapon:19,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Ripjaws",mid:0,midT:62,creator:"Luminae",weapon:8,rarity:3,seas:4},{name:"Blood Diamond",mid:0,midT:63,creator:"Exxor",weapon:8,rarity:2,seas:4},{name:"MKT",mid:0,midT:64,creator:"Cimota",weapon:8,rarity:2,glow:!0,seas:4},{name:"Glorious",mid:0,midT:65,creator:"Destroy007",weapon:8,rarity:2,seas:4},{name:"Laminar",mid:0,midT:66,creator:"Luminae",weapon:8,rarity:2,glow:!0,seas:4},{name:"Prey",mid:0,midT:67,creator:"Chromatikk",weapon:8,rarity:2,seas:4},{name:"Wind",mid:0,midT:68,creator:"Luminae",weapon:8,rarity:3,glow:!0,seas:4},{name:"Costume Party",mid:0,midT:69,creator:"Chromatikk",weapon:8,rarity:3,seas:4},{name:"Ciote",mid:0,midT:70,creator:"Luminae",weapon:8,rarity:4,glow:!0,seas:4},{name:"Honeycomb",mid:0,midT:71,weapon:8,rarity:0,seas:4},{name:"Sweety",mid:0,midT:72,weapon:8,rarity:2,seas:4},{name:"Stormy",mid:0,midT:73,weapon:8,rarity:1,seas:4},{name:"Illusion",mid:0,midT:74,weapon:8,rarity:0,seas:4},{name:"Ducky",mid:0,midT:75,weapon:8,rarity:1,seas:4},{name:"Emoji",mid:0,midT:76,weapon:8,rarity:2,seas:4},{name:"Autumn",mid:0,midT:77,weapon:8,rarity:1,seas:4},{name:"Alpes",mid:0,midT:78,weapon:8,rarity:1,seas:4},{name:"Love",mid:0,midT:79,weapon:8,rarity:0,seas:4},{name:"Rich",mid:0,midT:80,weapon:8,rarity:2,seas:4},{name:"Puzzler",mid:0,midT:81,weapon:8,rarity:1,seas:4},{name:"Rainbow Sky",mid:0,midT:82,weapon:8,rarity:2,seas:4},{name:"Pirate",mid:0,midT:83,weapon:8,rarity:1,seas:4},{name:"Tsunami",mid:0,midT:84,weapon:8,rarity:1,seas:4},{name:"Hemp",mid:0,midT:85,weapon:8,rarity:2,seas:4},{name:"Kyanite",mid:0,midT:86,weapon:8,rarity:3,seas:4},{name:"Kunzite",mid:0,midT:87,weapon:8,rarity:2,seas:4},{name:"Merlot",mid:0,midT:88,weapon:8,rarity:1,seas:4},{name:"Huckleberry",mid:0,midT:89,weapon:8,rarity:1,seas:4},{name:"Sketch",mid:0,midT:90,weapon:8,rarity:0,seas:4},{name:"Society",id:130,creator:"Cimota",weapon:7,rarity:3,glow:!0,seas:4},{name:"Loch Ness Monster",id:131,creator:"Destroy007",weapon:7,rarity:3,glow:!0,seas:4},{name:"Centibeast",id:132,creator:"Xyba",weapon:7,rarity:5,glow:!0,pulsT:.0015,seas:4},{name:"Honeycomb",id:134,weapon:7,rarity:0,seas:4},{name:"Sweety",id:135,weapon:7,rarity:1,seas:4},{name:"Stormy",id:136,weapon:7,rarity:1,seas:4},{name:"Illusion",id:137,weapon:7,rarity:0,seas:4},{name:"Ducky",id:138,weapon:7,rarity:1,seas:4},{name:"Emoji",id:139,weapon:7,rarity:2,seas:4},{name:"Autumn",id:140,weapon:7,rarity:1,seas:4},{name:"Alpes",id:141,weapon:7,rarity:1,seas:4},{name:"Love",id:142,weapon:7,rarity:0,seas:4},{name:"Rich",id:143,weapon:7,rarity:2,seas:4},{name:"Puzzler",id:144,weapon:7,rarity:1,seas:4},{name:"Rainbow Sky",id:145,weapon:7,rarity:2,seas:4},{name:"Pirate",id:146,weapon:7,rarity:2,seas:4},{name:"Tsunami",id:147,weapon:7,rarity:1,seas:4},{name:"Hemp",id:148,weapon:7,rarity:1,seas:4},{name:"Kyanite",id:149,weapon:7,rarity:3,seas:4},{name:"Kunzite",id:150,weapon:7,rarity:2,seas:4},{name:"Merlot",id:151,weapon:7,rarity:1,seas:4},{name:"Huckleberry",id:152,weapon:7,rarity:1,seas:4},{name:"Sketch",id:153,weapon:7,rarity:0,seas:4},{name:"Honeycomb",id:94,weapon:9,rarity:0,seas:4},{name:"Sweety",id:75,weapon:9,rarity:1,seas:4},{name:"Stormy",id:76,weapon:9,rarity:1,seas:4},{name:"Illusion",id:77,weapon:9,rarity:0,seas:4},{name:"Ducky",id:78,weapon:9,rarity:1,seas:4},{name:"Emoji",id:79,weapon:9,rarity:2,seas:4},{name:"Autumn",id:80,weapon:9,rarity:1,seas:4},{name:"Alpes",id:81,weapon:9,rarity:1,seas:4},{name:"Love",id:82,weapon:9,rarity:0,seas:4},{name:"Rich",id:83,weapon:9,rarity:2,seas:4},{name:"Puzzler",id:84,weapon:9,rarity:1,seas:4},{name:"Rainbow Sky",id:85,weapon:9,rarity:2,seas:4},{name:"Pirate",id:86,weapon:9,rarity:2,seas:4},{name:"Tsunami",id:87,weapon:9,rarity:1,seas:4},{name:"Hemp",id:88,weapon:9,rarity:1,seas:4},{name:"Kyanite",id:89,weapon:9,rarity:3,seas:4},{name:"Kunzite",id:90,weapon:9,rarity:2,seas:4},{name:"Merlot",id:91,weapon:9,rarity:1,seas:4},{name:"Huckleberry",id:92,weapon:9,rarity:1,seas:4},{name:"Sketch",id:93,weapon:9,rarity:0,seas:4},{name:"Mallet",keyW:"Knife",id:22,type:3,scl:1,sclMlt:.9,yOff:-2,rarity:4,seas:4},{name:"Cast Iron",keyW:"Knife",creator:"iSpy",id:23,type:3,scl:1,sclMlt:.9,yOff:-2,rarity:4,seas:4},{name:"Furball",keyW:"Knife",creator:"Whippii",flipAnim:!0,id:3,tex:16,type:3,glow:!0,scl:2.6,seas:4,sclMlt:1,yOff:-1,rarity:3,xOff:-1.5,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Psychofang",keyW:"Knife",creator:"Uvaiz",flipAnim:!0,id:3,tex:14,type:3,scl:2.6,glow:!0,seas:4,sclMlt:1,yOff:-1,xOff:-1.5,rarity:5,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Dragonclaw",keyW:"Knife",creator:"ReDeagle",flipAnim:!0,id:3,tex:15,type:3,scl:2.6,seas:4,sclMlt:1,yOff:-1,rarity:3,sxRot:.3,sxOff:.35,szOff:-.25},{name:"Vectronus",creator:"Multihawk",id:9,tex:2,rarity:4,type:3,sxOff:.4,scl:1.4,yOff:-2,keyW:"Melee",glow:!0,seas:4},{name:"Dark Matter",creator:"Kilfy",id:10,tex:3,rarity:5,type:3,sxRot:-.3,syOff:.1,szOff:-.1,scl:.8,yOff:-1,keyW:"Melee",seas:4,pulsT:.0015,glow:!0},{name:"Silenced",mid:0,weapon:11,spnScl:1,rarity:5,seas:4,glow:!0},{name:"Exo-Skeleton",creator:"Exxor",mid:0,weapon:4,rarity:5,seas:4,pulsT:.0015,glow:!0},{name:"MP5",leftHoldY:-.43,rightHoldY:-.8,rightHoldZ:-1.3,mScl:.00052263417085427,mid:1,weapon:4,rarity:5,seas:4,noAttach:!0},{name:"Bizon",leftHoldY:-.85,rightHoldY:-.4,rightHoldZ:-1,attachYOff:-.05,attachZOff:-.95,attachScale:1,mScl:.000627161005025124,mid:2,weapon:4,rarity:5,seas:4,noSale:!0,illicit:!0,funds:1e4,reqT:"Level 100 SMG",req:function(e){return e&&e.stats&&1089e4<=(e.stats.c2||0)}},{name:"Dusty",id:13,shirtCol:6710886,sleeveCol:2368548,pantsCol:6710886,shoeCol:2368548,seas:4,type:5,rarity:4},{name:"Cocoa",id:14,shirtCol:4599073,sleeveCol:1182729,pantsCol:4599073,shoeCol:1182729,seas:4,type:5,rarity:4},{name:"Exotic",lore:"Adapts to your Skin Color",id:15,useSkin:!0,noSleeve:!0,seas:4,type:5,rarity:6},{name:"Plasma Ball",keyW:"Knife",id:20,tex:1,type:3,seas:4,scl:1,sclMlt:.7,yOff:-2,rarity:5,sxRot:.3,sxOff:.05,szOff:-.55,syOff:.6,shaderId:5},{name:"Chain Blade",id:25,rarity:5,type:3,sxOff:.4,frames:2,frameT:100,spnScl:1.2,scl:1.4,yOff:-2,keyW:"Melee",trans:!0,glow:!0,seas:4},{name:"Galagis",creator:"Nxbulah",id:25,tex:1,rarity:5,type:3,spnScl:1.2,sxOff:.4,scl:1.4,yOff:-2,keyW:"Melee",glow:!0,seas:4},{name:"Baton",id:26,rarity:4,spnScl:1.2,type:3,sxOff:.4,scl:1.4,yOff:-2,keyW:"Melee",seas:4},{name:"Good Ol' Days",mid:1,seas:4,weapon:7,rarity:5,noAttach:!0,noEmis:!0,rightHoldZ:-.4,aimY:-.21},{name:"Scouts Honor",mid:7,scl:.00094830394974876,mScl:.0010536710552764,zOff:-.25,seas:4,yOff:.05,weapon:1,rarity:6},{name:"Good Ol' Days",mid:1,weapon:2,rarity:5,seas:4,noAttach:!0},{name:"Plasmacrow",id:72,tex:2,type:2,rarity:5,keyW:"Back",seas:4,scl:.5,xOff:-6.6,yOff:-1,glow:!0,sitOffZ:.5,sitOff:-.3,sclMlt:.55,shaderId:6},{name:"Mankini",id:13,rarity:4,type:6,keyW:"Waist",seas:4,scl:3.6,spnScl:3.5,yOff:-2,side:2,sclMlt:2.6,sitOff:1.4,prevRot:4},{name:"Galaxys",keyW:"Knife",id:20,tex:2,type:3,seas:4,scl:1,sclMlt:.7,yOff:-2,rarity:5,sxRot:.3,sxOff:.05,szOff:-.55,syOff:.6,shaderId:11},{name:"Captain Galaxy",id:52,tex:6,rarity:5,side:2,glow:!0,type:2,keyW:"Body",xRot:2,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:4,shaderId:11},{name:"Discoblaze",mid:0,midT:91,weapon:8,rarity:5,seas:4,shaderId:11},{name:"Woodstock",mid:0,midT:145,scl:.9,mScl:1,zOff:.28,yOff:-.5,weapon:6,rarity:5,seas:4,shaderId:10},{name:"Woodstock",id:173,weapon:15,rarity:5,seas:4,shaderId:10},{name:"Censored",id:14,rarity:4,type:6,keyW:"Waist",seas:4,scl:3.6,spnScl:3.5,yOff:-2,side:2,sclMlt:2.6,sitOff:1.4,prevRot:4},{name:"Honeycomb",mid:0,midT:58,weapon:10,rarity:0,seas:4},{name:"Sweety",mid:0,midT:59,weapon:10,rarity:0,seas:4},{name:"Stormy",mid:0,midT:60,weapon:10,rarity:2,seas:4},{name:"Illusion",mid:0,midT:61,weapon:10,rarity:0,seas:4},{name:"Ducky",mid:0,midT:62,weapon:10,rarity:2,seas:4},{name:"Emoji",mid:0,midT:63,weapon:10,rarity:2,seas:4},{name:"Autumn",mid:0,midT:64,weapon:10,rarity:1,seas:4},{name:"Alpes",mid:0,midT:65,weapon:10,rarity:1,seas:4},{name:"Love",mid:0,midT:66,weapon:10,rarity:1,seas:4},{name:"Rich",mid:0,midT:67,weapon:10,rarity:2,seas:4},{name:"Puzzler",mid:0,midT:68,weapon:10,rarity:1,seas:4},{name:"Rainbow Sky",mid:0,midT:69,weapon:10,rarity:2,seas:4},{name:"Pirate",mid:0,midT:70,weapon:10,rarity:2,seas:4},{name:"Tsunami",mid:0,midT:71,weapon:10,rarity:1,seas:4},{name:"Hemp",mid:0,midT:72,weapon:10,rarity:2,seas:4},{name:"Kyanite",mid:0,midT:73,weapon:10,rarity:3,seas:4},{name:"Kunzite",mid:0,midT:74,weapon:10,rarity:2,seas:4},{name:"Merlot",mid:0,midT:75,weapon:10,rarity:1,seas:4},{name:"Huckleberry",mid:0,midT:76,weapon:10,rarity:1,seas:4},{name:"Sketch",mid:0,midT:77,weapon:10,rarity:1,seas:4},{name:"Raynb0w",creator:"???",pat:1,seas:4,mid:0,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,midT:92,weapon:8,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,scl:.9,mScl:1,zOff:.28,yOff:-.5,mid:0,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,midT:146,weapon:6,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:11,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:19,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,mid:0,midT:78,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:10,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:17,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:9,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:12,rarity:5},{name:"Raynb0w",creator:"???",pat:1,seas:4,tex:"weapons/pat/1",sameGlow:!0,movT:.0015,weapon:16,rarity:5},{name:"Bunny",id:0,tex:28,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Puppy",id:0,tex:29,rarity:3,type:7,keyW:"Face",seas:4,sitOff:1,sitOffZ:.005,trans:!0,yOff:-.7,xOff:2.2,xRot:-.5},{name:"Panda Streak",creator:"Chwoubaka",id:135,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Parkour!",creator:"Chwoubaka",id:136,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"R.K.R",creator:"Chwoubaka",id:137,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"Rekt",creator:"Chwoubaka",id:138,type:4,rarity:3,opacity:.8,keyW:"Sprays",seas:4},{name:"EZ",creator:"Chwoubaka",id:139,type:4,rarity:4,opacity:.8,keyW:"Sprays",seas:4},{name:"Krunker",id:0,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"Target",id:1,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"GG",id:2,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"Pumpkin",id:3,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"Spooky",id:4,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"Ded",id:5,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"Sadface",id:6,keyW:"Sprays",free:!0,type:4,opacity:.6},{name:"Laugh Cry",id:7,keyW:"Sprays",free:!0,type:4,opacity:.7},{name:"Sid",id:8,keyW:"Sprays",free:!0,type:4,opacity:.9},{name:"Vince",id:9,keyW:"Sprays",free:!0,type:4,opacity:.9},{name:"Kiki",id:10,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"Ladder",id:11,free:!0,keyW:"Sprays",type:4,opacity:1},{name:"Dummy",id:12,free:!0,keyW:"Sprays",type:4,opacity:1},{name:"8 Ball",id:13,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"xD",id:14,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"MMOK",id:15,free:!0,keyW:"Sprays",type:4,opacity:.7},{name:"Madman",id:16,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"Terminal",id:17,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"YODO",id:18,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"Crayon",id:19,free:!0,keyW:"Sprays",type:4,opacity:.6},{name:"Myth",id:20,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"SpikyJohn",id:21,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"LevelGaming",id:22,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"PolarAce",id:23,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"FrostyWolf",id:24,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"Waspy",id:25,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"Kpal",id:26,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Rain Song",id:27,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"nV",id:28,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"BV Hype",id:29,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"Kaarson",id:30,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Deal With It",id:31,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Rice",id:32,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Lore",id:33,free:!0,keyW:"Sprays",type:4,opacity:.95},{name:"Desu Sid",id:34,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"Anomaly",id:35,free:!0,keyW:"Sprays",type:4,opacity:.85},{name:"FaZe",id:36,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Nudah",id:37,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Misfits",id:38,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Bill $aber",id:54,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Fields Food v1",id:55,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Fields Food v2",id:56,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Phil",id:57,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"VoKUS",id:58,free:!0,keyW:"Sprays",type:4,opacity:.8},{name:"StremZ",id:59,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Zed",id:63,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Northern Forces",id:64,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Sorable",id:65,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Syctis",id:66,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Moon Juice",id:79,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"caL",id:83,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Quacky",id:87,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Verb",id:88,free:!0,keyW:"Sprays",type:4,opacity:.9,frames:4,frameT:250},{name:"Fields Food v3",id:106,free:!0,keyW:"Sprays",type:4,opacity:.9},{name:"Chwoubaka",creator:"Chwoubaka",id:140,free:!0,keyW:"Sprays",type:4,opacity:.8},{name:"Mile",creator:"milerobloxfan",id:141,free:!0,keyW:"Sprays",type:4,opacity:.8},{name:"Trigger Mastery",leftHoldY:-.57,rightHoldY:-1,rightHoldZ:-1.4,rotOffA:-.013,yOrg:-.0018,yRot:1e-9,zOrg:-3.5,noAttach:!0,mid:2,weapon:2,rarity:5,seas:4,noSale:!0,illicit:!0,funds:1e4,reqT:"Lvl 100 Triggerman",req:function(e){return e&&e.stats&&1089e4<=(e.stats.c0||0)}},{name:"Dismay",id:268,creator:"Dismay",weapon:1,rarity:3,glow:!0,seas:4},{name:"All Aboard",id:269,creator:"Nxbulah",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Hologram",midT:4,noMuz:!0,mid:0,weapon:3,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0,rarity:3,glow:!0,pulsT:.0015,creator:"Destroy007",seas:4},{name:"Toucan",id:177,creator:"Destroy007",weapon:5,rarity:3,glow:!0,seas:4},{name:"Crystal",mid:0,midT:95,creator:"Luminae",weapon:8,rarity:3,glow:!0,seas:4},{name:"Frozen",mid:0,midT:96,creator:"Luminae",weapon:8,rarity:3,glow:!0,seas:4},{name:"Ghen",mid:0,midT:93,creator:"Kcress",weapon:8,rarity:2,seas:4},{name:"Guardian",mid:0,midT:94,creator:"Kilfy",weapon:8,rarity:4,glow:!0,seas:4},{name:"Laboratorix",id:15,creator:"ReDeagle",weapon:11,rarity:3,glow:!0,seas:4},{name:"Paladin",id:3,creator:"Destroy007",weapon:19,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Division X",id:4,creator:"ReDeagle",weapon:19,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Star Capper",limT:"Charity",noSale:!0,noSpin:!0,mSeas:!0,id:179,tex:4,type:1,keyW:"Hat",seas:4,scl:1,sclMlt:.48,sitOff:1,yOff:-1.5,xOff:1.4,rarity:1,side:2,trans:!0,alpha:.02},{name:"Zero Ground",limT:"Charity",noSale:!0,noSpin:!0,mSeas:!0,id:52,tex:7,rarity:4,side:2,glow:!0,type:2,keyW:"Body",xRot:2,xOff:-1,yOff:.5,spnScl:2.6,sclMlt:2.4,sitOff:-.5,sitOffZ:-.6,seas:4},{name:"Krunkstar",limT:"Charity",noSale:!0,noSpin:!0,mSeas:!0,id:0,tex:2,rarity:4,type:8,yOff:-3,xOff:1,keyW:"Shoes",seas:4},{name:"Telescope",limT:"Charity",noSale:!0,noSpin:!0,mSeas:!0,id:269,weapon:1,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Shooting Star",limT:"Charity",noSale:!0,noSpin:!0,mSeas:!0,id:270,weapon:2,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"SubStar",limT:"Charity",noSale:!0,noSpin:!0,mSeas:!0,id:236,weapon:4,rarity:3,glow:!0,pulsT:.0015,seas:4},{name:"Neonic",id:270,creator:"Luminae",weapon:1,rarity:3,glow:!0,seas:4},{name:"Krunker'77",id:271,creator:"Exxor",weapon:1,rarity:3,glow:!0,seas:4},{name:"Vespidae Mk. III",id:272,creator:"floatingpoint",weapon:1,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"OPTILINE",id:273,creator:"Kltter",weapon:1,rarity:3,glow:!0,seas:4},{name:"Dimension",id:271,creator:"Luminae",weapon:2,rarity:3,glow:!0,seas:4},{name:"Mecha Zone",id:272,creator:"multihawk",weapon:2,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"AL-405",id:273,creator:"Zinoob",weapon:2,rarity:3,glow:!0,seas:4},{name:"Nightmare Fue",id:274,creator:"MDebski",weapon:2,rarity:3,glow:!0,seas:4},{name:"CPU",id:275,creator:"Destroy007",weapon:2,rarity:3,glow:!0,seas:4},{name:"Hell Tooth",creator:"creshorTV",weapon:3,midT:5,noMuz:!0,mid:0,spnScl:1.3,scl:.9,mScl:.84,zOff:0,yOff:0,glow:!0,pulsT:.0015,rarity:3,seas:4},{name:"BRAINWASH",id:237,creator:"Kltter",weapon:4,rarity:3,glow:!0,seas:4},{name:"Mecha's Bane",id:238,creator:"multihawk",weapon:4,rarity:4,glow:!0,pulsT:.0015,seas:4},{name:"Natrix",id:239,creator:"Kltter",weapon:4,rarity:2,glow:!0,seas:4},{name:"Chromatikk",id:240,creator:"Dark Soul",weapon:4,rarity:4,glow:!0,seas:4},{name:"Controlled",id:241,creator:"Luminae",weapon:4,rarity:3,glow:!0,seas:4},{name:"Octopod",id:178,creator:"bodeneinheit",weapon:5,rarity:2,glow:!0,seas:4},{name:"Hades Blaze",id:179,creator:"MDebski",weapon:5,rarity:3,glow:!0,seas:4},{name:"Malignance",mid:0,midT:97,creator:"Whippii",weapon:8,rarity:2,seas:4},{name:"Ginova",id:16,creator:"MDebski",weapon:11,rarity:3,glow:!0,seas:4},{name:"Kristai",id:17,creator:"Golden Moon",weapon:11,rarity:2,seas:4},{name:"Pocket Sniper",id:18,creator:"Pocket Sniper",weapon:11,rarity:3,glow:!0,seas:4},{name:"Izon",id:174,creator:"Nxbulah",weapon:15,rarity:4,glow:!0,seas:4},{name:"Heartbreak",id:10,creator:"Kcress",weapon:17,rarity:3,seas:4},{name:"Cadaver",id:11,creator:"MDebski",weapon:17,rarity:4,glow:!0,seas:4},{name:"Paladin",id:5,creator:"Krunk Punk",weapon:19,rarity:4,glow:!0,seas:4}];for(var i=[1,2,6,7,8],n=0;n<e.exports.skins.length;n++)e.exports.skins[n].index=n,e.exports.skins[n].type&&-1!=i.indexOf(e.exports.skins[n].type)&&(null==e.exports.skins[n].sitOff&&(e.exports.skins[n].sitOff=0),null==e.exports.skins[n].sitOffZ&&(e.exports.skins[n].sitOffZ=0),null==e.exports.skins[n].sclMlt&&(e.exports.skins[n].sclMlt=0)),e.exports.skins[n].free&&(e.exports.skins[n].limT="Free",e.exports.skins[n].noSale=!0,e.exports.skins[n].noSpin=!0)},function(e){e.exports="M7e2y"},function(e,t,i){t.encode=function(e,t){var i=new n(t);return i.write(e),i.read()};var n=i(20).EncodeBuffer},function(e,t,i){t.EncodeBuffer=r;var n=i(7).preset;function r(e){if(!(this instanceof r))return new r(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}i(23).FlexEncoder.mixin(r.prototype),r.prototype.codec=n,r.prototype.write=function(e){this.codec.encode(this,e)}},function(e,t,i){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var n=i(36),r=i(9),a=i(5);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return c(this,e,t,i)}function c(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,n){if(t.byteLength,0>i||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t),e}(e,t,i,n):"string"==typeof t?function(e,t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,i),r=(e=o(e,n)).write(t,i);return r!==n&&(e=e.slice(0,r)),e}(e,t,i):function(e,t){if(l.isBuffer(t)){var i=0|u(t.length);return 0===(e=o(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(d(t),e=o(e,0>t?0:0|u(t)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function h(e,t){var i=0>t.length?0:0|u(t.length);e=o(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function u(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return H(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,i){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,i);case"utf8":case"utf-8":return O(this,t,i);case"ascii":return C(this,t,i);case"latin1":case"binary":return E(this,t,i);case"base64":return _(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function y(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),0>i&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(0>i){if(!r)return-1;i=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,i,n,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):v(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function v(e,t,i,n,r){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var s,o=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;o=2,l/=2,c/=2,i/=2}if(r){var d=-1;for(s=i;s<l;s++)if(a(e,s)!==a(t,-1===d?0:s-d))-1!==d&&(s-=s-d),d=-1;else if(-1===d&&(d=s),s-d+1===c)return d*o}else for(i+c>l&&(i=l-c),s=i;0<=s;s--){for(var p=!0,h=0;h<c;h++)if(a(e,s+h)!==a(t,h)){p=!1;break}if(p)return s}return-1}function w(e,t,i,n){i=+i||0;var r=e.length-i;n?(n=+n)>r&&(n=r):n=r;var a=t.length;if(0!=a%2)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s,o=0;o<n;++o){if(s=parseInt(t.substr(2*o,2),16),isNaN(s))return o;e[i+o]=s}return o}function b(e,t,i,n){return G(F(t,e.length-i),e,i,n)}function x(e,t,i,n){return G(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function S(e,t,i,n){return x(e,t,i,n)}function M(e,t,i,n){return G(H(t),e,i,n)}function T(e,t,i,n){return G(function(e,t){for(var i,n,r,a=[],s=0;s<e.length&&!(0>(t-=2));++s)i=e.charCodeAt(s),n=i>>8,r=i%256,a.push(r),a.push(n);return a}(t,e.length-i),e,i,n)}function _(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function O(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var a,s,o,l,c=e[r],d=null,p=239<c?4:223<c?3:191<c?2:1;if(r+p<=i)1===p?128>c&&(d=c):2===p?128==(192&(a=e[r+1]))&&(127<(l=(31&c)<<6|63&a)&&(d=l)):3===p?(a=e[r+1],s=e[r+2],128==(192&a)&&128==(192&s)&&(2047<(l=(15&c)<<12|(63&a)<<6|63&s)&&(55296>l||57343<l)&&(d=l))):4===p&&(a=e[r+1],s=e[r+2],o=e[r+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(65535<(l=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)&&1114112>l&&(d=l)));null===d?(d=65533,p=1):65535<d&&(d-=65536,n.push(55296|1023&d>>>10),d=56320|1023&d),n.push(d),r+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return i}(n)}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}():e.TYPED_ARRAY_SUPPORT,t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,i){return c(null,e,t,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,i){return function(e,t,i,n){return d(t),0>=t||void 0===i?o(e,t):"string"==typeof n?o(e,t).fill(i,n):o(e,t).fill(i)}(null,e,t,i)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,r=0,a=Math.min(i,n);r<a;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var s=e[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,i,n,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),0>t||i>e.length||0>n||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0),o=Math.min(a,s),c=this.slice(n,r),d=e.slice(t,i),p=0;p<o;++p)if(c[p]!==d[p]){a=c[p],s=d[p];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return y(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return y(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),0<e.length&&(0>i||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return w(this,e,t,i);case"utf8":case"utf-8":return b(this,e,t,i);case"ascii":return x(this,e,t,i);case"latin1":case"binary":return S(this,e,t,i);case"base64":return M(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function E(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function A(e,t,i){var n=e.length;(!t||0>t)&&(t=0),(!i||0>i||i>n)&&(i=n);for(var r="",a=t;a<i;++a)r+=N(e[a]);return r}function R(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function k(e,t,i){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,i,n,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function I(e,t,i,n){0>t&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-i,2);r<a;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function P(e,t,i,n){0>t&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-i,4);r<a;++r)e[i+r]=255&t>>>8*(n?r:3-r)}function D(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}function B(e,t,i,n,a){return a||D(e,0,i,4),r.write(e,t,i,n,23,4),i+4}function z(e,t,i,n,a){return a||D(e,0,i,8),r.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){var i,n=this.length;if(0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;i=new l(r,void 0);for(var a=0;a<r;++a)i[a]=this[a+e]}return i},l.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n},l.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},l.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||k(e,t,this.length);for(var n=t,r=1,a=this[e+--n];0<n&&(r*=256);)a+=this[e+--n]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||L(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=255&e/r;return t+i},l.prototype.writeUIntBE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||L(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=255&e/a;return t+i},l.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);L(this,e,t,i,r-1,-r)}var a=0,s=1,o=0;for(this[t]=255&e;++a<i&&(s*=256);)0>e&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=255&(e/s>>0)-o;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);L(this,e,t,i,r-1,-r)}var a=i-1,s=1,o=0;for(this[t+a]=255&e;0<=--a&&(s*=256);)0>e&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=255&(e/s>>0)-o;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||L(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,i){return B(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return B(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return z(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return z(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r,a=n-i;if(this===e&&i<t&&t<n)for(r=a-1;0<=r;--r)e[r+t]=this[r+i];else if(1e3>a||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},l.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var a;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var s=l.isBuffer(e)?e:F(new l(e,n).toString()),o=s.length;for(a=0;a<i-t;++a)this[a+t]=s[a%o]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function N(e){return 16>e?"0"+e.toString(16):e.toString(16)}function F(e,t){t=t||1/0;for(var i,n=e.length,r=null,a=[],s=0;s<n;++s){if(55295<(i=e.charCodeAt(s))&&57344>i){if(!r){if(56319<i){-1<(t-=3)&&a.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&a.push(239,191,189);continue}r=i;continue}if(56320>i){-1<(t-=3)&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,128>i){if(0>(t-=1))break;a.push(i)}else if(2048>i){if(0>(t-=2))break;a.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;a.push(224|i>>12,128|63&i>>6,128|63&i)}else{if(!(1114112>i))throw new Error("Invalid code point");if(0>(t-=4))break;a.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}}return a}function H(e){return n.toByteArray(function(e){if(2>(e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function G(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}}).call(this,i(29))},function(e,t){for(var i=t.uint8=Array(256),n=0;255>=n;n++)i[n]=r(n);function r(e){return function(t){var i=t.reserve(1);t.buffer[i]=e}}},function(e,t,i){t.FlexDecoder=r,t.FlexEncoder=a;var n=i(0);function r(){if(!(this instanceof r))return new r}function a(){if(!(this instanceof a))return new a}function s(){throw new Error("method not implemented: write()")}function o(){throw new Error("method not implemented: fetch()")}function l(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(e){(this.buffers||(this.buffers=[])).push(e)}function d(){return(this.buffers||(this.buffers=[])).shift()}function p(e){return function(t){for(var i in e)t[i]=e[i];return t}}r.mixin=p({bufferish:n,write:function(e){var t=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:o,flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&"BUFFER_SHORTAGE"!=e.message)throw e;this.offset=t;break}this.push(e)}},push:c,pull:d,read:l,reserve:function(e){var t=this.offset,i=t+e;if(i>this.buffer.length)throw new Error("BUFFER_SHORTAGE");return this.offset=i,t},offset:0}),r.mixin(r.prototype),a.mixin=p({bufferish:n,write:s,fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return n.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:c,pull:function(){var e=this.buffers||(this.buffers=[]),t=1<e.length?this.bufferish.concat(e):e[0];return e.length=0,t},read:l,reserve:function(e){var t=0|e;if(this.buffer){var i=this.buffer.length,n=0|this.offset,r=n+t;if(r<i)return this.offset=r,n;this.flush(),e=Math.max(e,Math.min(2*i,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var i=this.reserve(t);n.prototype.copy.call(e,this.buffer,i)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),a.mixin(a.prototype)},function(e,t,i){t.decode=function(e,t){var i=new n(t);return i.write(e),i.read()};var n=i(25).DecodeBuffer},function(e,t,i){t.DecodeBuffer=r;var n=i(12).preset;function r(e){if(!(this instanceof r))return new r(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}i(23).FlexDecoder.mixin(r.prototype),r.prototype.codec=n,r.prototype.fetch=function(){return this.codec.decode(this)}},function(e,t,i){var n=i(9),r=i(11),a=r.Uint64BE,s=r.Int64BE;t.getReadFormat=function(e){var t=o.hasArrayBuffer&&e&&e.binarraybuffer,i=e&&e.int64;return{map:c&&e&&e.usemap?p:d,array:h,str:u,bin:t?m:f,ext:g,uint8:y,uint16:w,uint32:x,uint64:M(8,i?O:T),int8:v,int16:b,int32:S,int64:M(8,i?C:_),float32:M(4,E),float64:M(8,A)}},t.readUint8=y;var o=i(0),l=i(10),c="undefined"!=typeof Map;function d(e,t){var i,n={},r=Array(t),a=Array(t),s=e.codec.decode;for(i=0;i<t;i++)r[i]=s(e),a[i]=s(e);for(i=0;i<t;i++)n[r[i]]=a[i];return n}function p(e,t){var i,n=new Map,r=Array(t),a=Array(t),s=e.codec.decode;for(i=0;i<t;i++)r[i]=s(e),a[i]=s(e);for(i=0;i<t;i++)n.set(r[i],a[i]);return n}function h(e,t){for(var i=Array(t),n=e.codec.decode,r=0;r<t;r++)i[r]=n(e);return i}function u(e,t){var i=e.reserve(t);return l.toString.call(e.buffer,"utf-8",i,i+t)}function f(e,t){var i=e.reserve(t),n=l.slice.call(e.buffer,i,i+t);return o.from(n)}function m(e,t){var i=e.reserve(t),n=l.slice.call(e.buffer,i,i+t);return o.Uint8Array.from(n).buffer}function g(e,t){var i=e.reserve(t+1),n=e.buffer[i++],r=i+t,a=e.codec.getExtUnpacker(n);if(!a)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return a(l.slice.call(e.buffer,i,r))}function y(e){var t=e.reserve(1);return e.buffer[t]}function v(e){var t=e.reserve(1),i=e.buffer[t];return 128&i?i-256:i}function w(e){var t=e.reserve(2),i=e.buffer;return i[t++]<<8|i[t]}function b(e){var t=e.reserve(2),i=e.buffer,n=i[t++]<<8|i[t];return 32768&n?n-65536:n}function x(e){var t=e.reserve(4),i=e.buffer;return 16777216*i[t++]+(i[t++]<<16)+(i[t++]<<8)+i[t]}function S(e){var t=e.reserve(4),i=e.buffer;return i[t++]<<24|i[t++]<<16|i[t++]<<8|i[t]}function M(e,t){return function(i){var n=i.reserve(e);return t.call(i.buffer,n,!0)}}function T(e){return new a(this,e).toNumber()}function _(e){return new s(this,e).toNumber()}function O(e){return new a(this,e)}function C(e){return new s(this,e)}function E(e){return n.read(this,e,!1,23,4)}function A(e){return n.read(this,e,!1,52,8)}},function(e,t,i){!function(t){function i(e){for(var t in a)e[t]=a[t];return e}function n(e,t){function i(e){return e!==t&&e.originalListener!==t}var a,s=this;if(arguments.length){if(t){if(a=r(s,e,!0)){if(!(a=a.filter(i)).length)return n.call(s,e);s.listeners[e]=a}}else if((a=s.listeners)&&(delete a[e],!Object.keys(a).length))return n.call(s)}else delete s.listeners;return s}function r(e,t,i){if(!i||e.listeners){var n=e.listeners||(e.listeners={});return n[t]||(n[t]=[])}}e.exports=t;var a={on:function(e,t){return r(this,e).push(t),this},once:function(e,t){function i(){n.call(a,e,i),t.apply(this,arguments)}var a=this;return i.originalListener=t,r(a,e).push(i),a},off:n,emit:function(e,t){function i(e){e.apply(n,o)}var n=this,a=r(n,e,!0);if(!a)return!1;var s=arguments.length;if(1===s)a.forEach((function(e){e.call(n)}));else if(2===s)a.forEach((function(e){e.call(n,t)}));else{var o=Array.prototype.slice.call(arguments,1);a.forEach(i)}return!!a.length}};i(t.prototype),t.mixin=i}((
/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */
function e(){if(!(this instanceof e))return new e}))},function(e,t){e.exports=[{name:"Sniper Rifle",src:"weapon_1",icon:"icon_1",sound:"weapon_1",secondary:!1,noSpread:!1,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:100,spd:2.5,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:7e3,snd:0},akimbo:!1,noAim:!1,animWhileAim:!0,trail:!0,flap:{src:"flap_0",rot:2.1,scl:1,zOff:.43,xOff:.17,yOff:.53},physRang:0,physPow:0,noAo:!0,nAuto:!0,type:0,scope:!0,swapTime:300,aimSpd:120,spdMlt:.95,ammo:3,dmg:100,hsMlt:1.5,pierce:.2,reload:1500,range:1e3,dropStart:230,dmgDrop:30,scale:.00115608717587935,leftHoldY:-.65,rightHoldY:-.68,leftHoldZ:2.1,rightHoldZ:.75,holdW:1,xOff:.8,yOff:-.65,zOff:-1.8,xOrg:0,yOrg:-.55,zOrg:-.8,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:.1,muzOff:8,muzMlt:1.6,rate:900,spread:260,zoom:2.7,leanMlt:1.5,recoil:.009,recoilR:.05,recover:.993,recoverY:.997,recoverF:.975,recoilYM:.55,recoilZ:1.5,recoilAnim:{time:280,aimTime:500,recoilTweenY:.24},jumpYM:.15,rumble:.9,rumbleDur:500,icnPad:9},{name:"Assault Rifle",src:"weapon_2",icon:"icon_2",sound:"weapon_2",projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:23,spd:2.6,lookDir:!0,grav:11e-5,scale:1.4,length:10,range:3e3,snd:0},secondary:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!1,physRang:0,physPow:0,swapWiggle:.3,attach:0,attachYOff:-.07,attachZOff:-.8,zRot:1,type:0,swapTime:300,aimSpd:130,spdMlt:.95,ammo:30,rate:110,reload:1400,dmg:23,hsMlt:1.5,pierce:1,range:700,dmgDrop:5,scale:.00095745145728643,leftHoldY:-.41,rightHoldY:-.6,leftHoldZ:.5,rightHoldZ:-1.2,holdW:.8,xOff:.7,yOff:-.87,zOff:-3.33,rotOff:-.08,rotOffA:-.035,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.59,zOrg:-2.14,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzOff:5.1,muzOffY:-.05,muzMlt:1.4,spread:100,minSpread:5,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.6,recoilZ:4.3,recoilZM:-.04,aimRecMlt:.65,recoilAnim:{time:160,recoilTweenY:.065,recoilTweenZ:.1},jumpYM:.3,rumble:.5,icnPad:5},{name:"Pistol",src:"weapon_3",icon:"icon_3",sound:"weapon_3",secondary:!0,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,transp:!0,nAuto:!0,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:12,spd:2.3,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:1600,snd:0},physRang:0,physPow:0,kill:["",75],swapWiggle:.3,type:1,shine:10,swapTime:260,aimSpd:110,spdMlt:1.05,ammo:10,reload:700,dmg:20,hsMlt:1.5,range:700,dmgDrop:10,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.3,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,jYMlt:.1,cLean:.3,cRot:.3,caseZOff:.2,caseYOff:0,inspectR:.3,inspectM:.8,muzOff:1.5,muzOffY:0,muzMlt:.95,rate:150,spread:60,zoom:1.4,leanMlt:1,recoil:.006,recoilR:.02,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28,recoilTweenZ:.1},rumble:.4,icnPad:-15,expScale:.8},{name:"Submachine Gun",src:"weapon_4",icon:"icon_4",sound:"weapon_4",secondary:!1,noSpread:!1,nAuto:!1,noAim:!1,akimbo:!1,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:18,spd:2.4,lookDir:!0,grav:11e-5,scale:1.4,length:10,range:2700,snd:0},physRang:0,physPow:0,swapWiggle:.5,attach:0,attachYOff:-.09,attachZOff:-1.1,zRot:.75,noAo:!0,type:0,shine:50,swapTime:300,aimSpd:110,spdMlt:1.04,ammo:34,reload:1e3,dmg:18,hsMlt:1.5,pierce:1,range:700,dmgDrop:12,scale:.000574897587939697,leftHoldY:-.4,leftHoldX:-.1,leftHoldZ:1.1,rightHoldZ:-.95,rightHoldY:-.5,holdW:.85,xOff:.85,yOff:-.86,zOff:-3,xOrg:0,yOrg:-.59,zOrg:-2.5,cRot:.18,cLean:.16,inspectR:.2,inspectM:1.2,caseYOff:-.15,caseZOff:-.4,muzOff:2.15,muzOffY:.1,rate:90,spread:70,minSpread:5,zoom:1.65,jYMlt:.8,leanMlt:1,recoil:.0034,recoilY:.77,recoilYM:.3,recoilR:.065,recover:.975,recoverY:.996,recoverF:.975,recoilZ:3.4,recoilZM:-.1,aimRecMlt:.6,recoilAnim:{time:190,recoilTweenYM:.05,recoilTweenY:.06,recoilTweenZ:.14},expScale:.8,rumble:.4,icnPad:0},{name:"Revolver",src:"weapon_5",icon:"icon_5",sound:"weapon_5",secondary:!1,noSpread:!1,akimbo:!1,noAim:!1,nAuto:!0,noAo:!0,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:66,spd:2.3,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:2600,snd:0},physRang:0,physPow:0,nCase:!0,transp:!0,kill:["",50],type:0,swapTime:200,swapWiggle:.4,aimSpd:110,spdMlt:1.04,ammo:6,reload:900,dmg:66,hsMlt:1.5,pierce:.85,dmgDrop:10,scale:.000515531266331653,hDstOff:1.6,leftHoldY:-1.3,rightHoldY:-.8,leftHoldZ:-.6,rightHoldZ:-.72,rightHoldX:.1,holdW:1.1,rotOff:-.05,xOff:.7,yOff:-.5,zOff:-3.5,xOrg:0,yOrg:-.31,zOrg:-3.5,jYMlt:.4,cLean:.2,cRot:.1,cDrop:.1,inspectR:.1,inspectM:.3,muzOff:2.75,muzOffY:.2,muzMlt:.95,range:700,rate:390,spread:100,zoom:1.45,leanMlt:1.6,recoil:.013,recoilR:.082,recover:.982,recoverY:.992,recoverF:.98,recoilYM:.5,aimRecMlt:.1,recoilZM:.01,recoilZ:4,recoilAnim:{time:350,recoilTweenY:.39,recoilTweenYM:.25},expScale:.9,rumble:.7,icnPad:-10},{name:"Shotgun",src:"weapon_6",icon:"icon_6",sound:"weapon_6",secondary:!1,noSpread:!1,noAim:!1,akimbo:!1,altSkin:{name:"Nova Pump",mid:0,blocked:!0,noSale:!0,midT:38,scl:.9,mScl:1,zOff:.28,yOff:-.5,seas:2,weapon:6,rarity:0},noAo:!0,nAuto:!0,nCase:!0,nRing:!0,swapWiggle:.4,shine:35,type:0,physRang:35,physPow:.09,swapTime:300,aimSpd:120,spdMlt:1,ammo:2,reload:1100,dmg:50,hsMlt:1.5,dmgDrop:50,scale:.00082934281407035,rightHoldX:.1,leftHoldY:-.6,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.3,holdW:1,xOff:.95,yOff:-.6,zOff:-3.8,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,muzOff:6,muzMlt:1.8,inspectM:1.9,range:160,rate:450,innac:110,spread:180,shots:5,cSpread:[.03,.02,-.27,.02,.03,-.31,.3,-.01,.01,.28,.01,.02,-.17,-.22,-.3,.31,.32,.28,.3,-.2],minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.2,aimRecMlt:.67,recoilYM:.65,recoilAnim:{time:340,recoilTweenY:.22},jumpYM:.5,rumble:.8,icnPad:10,expScale:.85},{name:"Machine Gun",src:"weapon_7",icon:"icon_7",sound:"weapon_7",secondary:!1,akimbo:!1,noAim:!1,nAuto:!1,noSpread:!1,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:18,spd:2.3,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:3e3,snd:0},physRang:0,physPow:0,type:0,attach:0,swapWiggle:.3,attachYOff:-.085,attachZOff:-.74,zRot:.75,noAo:!0,swapTime:700,aimSpd:200,spdMlt:.79,jumMlt:.85,ammo:60,reload:3300,dmg:18,hsMlt:1.5,pierce:1,range:700,dmgDrop:10,jYMlt:.8,scale:.0008856008924623108,leftHoldY:-.85,leftHoldX:.4,rightHoldX:-.1,rightHoldY:-.79,leftHoldZ:1.1,rightHoldZ:-.2,holdW:1.1,yRot:-.01,xOff:.95,yOff:-.75,zOff:-2.8,xOrg:0,yOrg:-.6,zOrg:-1.8,cLean:.1,cRot:.1,cDrop:.1,inspectR:.2,inspectM:.6,caseInd:2,caseZOff:-.5,caseYOff:-.1,muzOff:5.5,muzOffY:-.14,muzMlt:1.7,rate:130,spread:300,minSpread:10,zoom:1.3,leanMlt:1.6,recoil:.0032,recoilR:.04,recover:.98,recoverY:.9975,recoverF:.975,recoilZ:3.8,recoilYM:.25,recoilZ:3,recoilZM:-.1,aimRecMlt:.5,recoilAnim:{time:200,recoilTweenY:.045,recoilTweenZ:.12},jumpYM:.5,expScale:.85,rumble:.65,icnPad:10,forceAttach:!0},{name:"Semi Auto",src:"weapon_8",icon:"icon_8",sound:"weapon_8",noSpread:!1,secondary:!1,noAim:!1,akimbo:!1,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:33,spd:2.5,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:4e3,snd:0},physRang:0,physPow:0,altSkin:{name:"Nova Semi",blocked:!0,noSale:!0,mid:0,midT:0,seas:3,weapon:8,rarity:0},attach:0,attachYOff:-.08,attachZOff:-1.55,nAuto:!0,zRot:.7,type:0,noAo:!0,swapWiggle:.4,swapTime:300,aimSpd:120,spdMlt:1,ammo:8,reload:1500,dmg:32,hsMlt:1.5625,pierce:.2,range:1e3,dmgDrop:0,scale:.00093686221105528,leftHoldY:-.5,rightHoldY:-.45,leftHoldZ:.4,rightHoldZ:-1.85,jYMlt:.6,xOff:.8,yOff:-.6,zOff:-3.5,xOrg:0,yOrg:-.395,yRot:-.005,zOrg:-3.4,rotOff:-.02,cLean:.2,cRot:.2,cDrop:.1,inspectR:.2,inspectM:1.4,muzOff:4,muzOffY:-.05,muzMlt:1.1,rate:120,spread:250,caseZOff:-1.3,zoom:2.1,recoil:.01,recoilR:.08,recover:.98,recoilY:.36,recoverY:.994,recoverF:.975,recoilYM:.6,recoilZ:2,recoilZM:.2,aimRecMlt:.8,recoilAnim:{time:250,recoilTweenY:.11,recoilTweenZ:.15},jumpYM:.5,rumble:.75,icnPad:10},{name:"Rocket Launcher",src:"weapon_9",icon:"icon_9",sound:"weapon_9",noSpread:!1,noAim:!1,secondary:!1,akimbo:!1,nInsp:!0,kill:["",75],nSkill:!0,nAuto:!0,nCase:!0,nRing:!0,noAo:!0,projectile:{mat:"BASIC",color:16777179,explode:35,dmg:50,eDmg:35,spd:.75,grav:8e-5,nImp:!0,lookDir:!0,scale:1.4,length:10,range:1500},type:0,swapTime:400,swapWiggle:.4,aimSpd:200,spdMlt:.9,physRang:46,physPow:.095,ammo:3,shots:0,reload:1500,hsMlt:1.5,scale:.00076263407035176,leftHoldX:-.1,leftHoldY:-.36,rightHoldY:-.3,leftHoldZ:1.2,rightHoldX:-.15,rightHoldZ:-.45,holdW:.9,jYMlt:.4,xOff:.95,yOff:-.56,zOff:-2.6,xOrg:0,yOrg:-.945,zOrg:-3,zRot:.9,cLean:.2,cRot:.2,cDrop:.1,muzOff:5,muzOffY:0,muzMlt:1.5,rate:350,spread:120,minSpread:15,zoom:1.5,leanMlt:1.4,landBob:.8,recoil:.008,recoilR:.012,recover:.99,recoverY:.998,recoverF:.975,recoilZ:4,recoilZM:-.5,aimRecMlt:.9,recoilAnim:{time:400,recoilTweenY:.25},jumpYM:.3,expScale:.7,rumble:1,rumbleDur:750,icnPad:10},{name:"Akimbo Uzi",src:"weapon_10",icon:"icon_10",sound:"weapon_10",secondary:!1,nAuto:!1,noAo:!0,physRang:0,physPow:0,altSkin:{name:"Nova Uzi",mid:0,midT:0,blocked:!0,noSale:!0,weapon:10,rarity:0,seas:3},nInsp:!0,noAim:!0,akimbo:!0,type:0,swapTime:300,aimSpd:120,spdMlt:1.04,ammo:18,reload:1300,dmg:14,hsMlt:1.5,pierce:1,range:700,dmgDrop:13,scale:.9,rightHoldY:-.55,leftHoldZ:.2,leftHoldX:-.1,leftHoldY:-.55,rightHoldZ:.2,rightHoldX:-.1,holdW:1.3,xOff:1.5,yOff:-.95,zOff:-3.3,xOrg:0,yOrg:-.62,zOrg:-2.5,zLnM:.4,cLean:.1,cRot:.1,cDrop:.2,caseYOff:-.15,caseZOff:-.4,muzOff:3.6,rate:70,spread:40,noSpread:!1,movSpread:.1,minSpread:10,zoom:1.5,recoil:.0034,recoilR:.015,leanMlt:.6,recover:.978,recoverY:.996,recoverF:.975,recoilZ:5,recoilYM:.7,recoilAnim:{recoilTweenY:.01},expScale:.7,rumble:.4,icnPad:-4},{name:"Desert Eagle",src:"weapon_11",icon:"icon_11",sound:"weapon_11",noSpread:!1,akimbo:!1,secondary:!0,noAim:!1,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:50,spd:2.3,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:1500,snd:0},physRang:0,physPow:0,minRec:15,nAuto:!0,noAo:!0,transp:!0,kill:["",50],type:1,swapTime:200,aimSpd:110,spdMlt:1,ammo:6,reload:1e3,dmg:50,hsMlt:1.5,pierce:.85,dmgDrop:10,scale:.94,leftHoldY:-.9,rightHoldY:-.7,leftHoldZ:-.5,rightHoldZ:-.5,holdW:1.1,xOff:1,yOff:-.5,zOff:-4.1,xOrg:0,yOrg:-.195,zOrg:-3.8,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzOff:2,muzMlt:1.1,range:700,rate:400,spread:150,jYMlt:.5,zoom:1.4,leanMlt:1.6,recoil:.01,recoilR:.01,recover:.982,recoverY:.995,recoverF:.98,recoilYM:.62,aimRecMlt:.23,recoilZ:4.8,recoilZM:.2,recoilAnim:{time:240,recoilTweenY:.42},rumble:.8,icnPad:-10,expScale:1.55},{name:"Alien Blaster",src:"weapon_12",icon:"icon_12",sound:"weapon_12",akimbo:!1,noSpread:!1,noAim:!1,noAo:!0,physRang:0,physPow:0,secondary:!0,nRing:!0,nAuto:!0,transp:!0,nCase:!0,minRec:50,kill:["",50],type:1,swapTime:200,aimSpd:120,spdMlt:1,ammo:4,reload:1500,dmg:50,hsMlt:1.5,pierce:.85,dmgDrop:10,scale:1.1,leftHoldY:-1,rightHoldY:-.65,leftHoldZ:-.2,rightHoldZ:-.2,holdW:1,xOff:1.3,yOff:-.83,zOff:-4.1,xOrg:0,yRot:-.01,yOrg:-.53,zOrg:-3.8,cLean:.2,cRot:.2,cDrop:0,inspectR:.1,inspectM:.8,muzOff:2.2,muzOffY:.1,muzID:3,muzMlt:1.1,jYMlt:.8,range:700,rate:170,spread:150,zoom:1.4,leanMlt:1.6,recoil:.006,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,recoilZ:2.2,aimRecMlt:.3,recoilAnim:{time:200,recoilTweenY:.32},rumble:.4,icnPad:-8,expScale:1.85},{name:"Combat Knife",icon:"icon_0",melee:!0,noSkins:!0,canThrow:!0,aimLean:.01,holdW:.9,swapWiggle:.3,sound:"melee",insX:.1,inspAnim:{arZ:.3,arX:.6,arY:-2.2,apZ:-1.3,apX:-.1,apY:1,wpZ:-.19,wpY:-.4,wrY:-.2},anim:function(e,t,i,n){if(1==i){e.handAnimInd=-1*(e.handAnimInd||1);var r=!1;e.meleeAnim.anim&&(e.meleeAnim.anim.stop(),r=2<=e.meleeAnim.armM),e.resetMeleeAnim();var a=-1.2,s=.7,o=-.4;r?(a+=.1,e.meleeAnim.weaR=a,o+=.8,e.meleeAnim.armR=o,s+=.2,e.meleeAnim.weaM=s,e.meleeAnim.flipW=Math.PI):a-=.4,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:o,lArm:1,armT:r?-.2:-.8,armY:-3,armM:r?-10:13,armE:-2,weaR:a,weaM:s},220*(r?1.3:1)).easing(t.Easing.Cubic.Out).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:0,armT:0,armY:0,lArm:0,armM:0,armE:0,weaR:0,weaM:0,flipW:0},350).easing(t.Easing.Cubic.Out).start()})).start()}else if(2==i){e.handAnimInd=-1*(e.handAnimInd||1),e.meleeAnim.anim&&e.meleeAnim.anim.stop(),e.resetMeleeAnim();var l=e.handAnimInd?"lArm":"";l={};1==e.handAnimInd?l.lArm=-2.7:l.rArm=-2.7,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to(l,10).easing(t.Easing.Linear.None).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({lArm:0,rArm:0},150).easing(t.Easing.Linear.None).delay(100).start()})).start()}else 3==i&&(e.meleeAnim.anim&&e.meleeAnim.anim.stop(),e.resetMeleeAnim(),e.meleeAnim.armR=-1.3,e.meleeAnim.armM=1.7,e.meleeAnim.armE=1.1,e.meleeAnim.armY=2.9,e.meleeAnim.armT=1,e.meleeAnim.armS=1.7,e.meleeAnim.weaR=-.6,e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armY:-9,armS:-.1,armE:-7.5,armM:-1.5,lArm:.5,weaR:-3},200-200*(n||1)+300).easing(t.Easing.Cubic.Out).onComplete((function(){e.meleeAnim.anim=new t.Tween(e.meleeAnim).to({armR:0,armT:0,armY:0,lArm:0,armM:0,armS:0,armE:0,weaR:0},350).easing(t.Easing.Cubic.Out).start()})).start())},type:2,swapTime:250,aimSpd:100,rate:250,dmg:50,dmgDrop:0,range:15,spdMlt:1.1,spread:100,leftHoldY:-.82,leftHoldX:1.5,rightHoldX:-1.5,rightHoldY:-.82,leftHoldZ:-.5,rightHoldZ:-.5,xOff:0,yOff:-.6,zOff:-3.6,xOrg:1e-4,yOrg:-.6,zOrg:-3.6,zRM:.35,zoom:1.2,leanMlt:.8,recoil:.006,recoilR:.01,recover:.98,recoverF:.98,rumble:.4,rumbleDur:150,icnPad:-10},{name:"Crossbow",src:"weapon_14",icon:"icon_14",sound:"weapon_14",noSpread:!1,akimbo:!1,secondary:!1,noAim:!1,nInsp:!0,nRing:!0,nAuto:!0,noAo:!0,physRang:0,physPow:0,nCase:!0,nMuz:!0,attach:0,attachYOff:-.1,attachZOff:.75,kill:["",75],type:0,projectile:{mat:"BASIC",color:16777179,spd:.68,dontPred:!0,lookDir:!0,scale:.7,dmg:200,length:10,range:1500},swapTime:200,aimSpd:120,spdMlt:1,ammo:1,reload:900,dmg:100,hsMlt:1.5,pierce:0,dmgDrop:0,scale:.0007303348040201011,leftHoldY:-.33,rightHoldY:-.28,leftHoldZ:2.2,leftHoldX:0,rightHoldZ:.9,xOff:1,yOff:-1,zOff:-1.4,xOrg:0,yOrg:-.72,zOrg:-.7,cLean:.1,cRot:.1,zRot:.9,cDrop:.2,holdW:.5,muzOff:2.2,muzOffY:.1,muzID:3,muzMlt:1.1,jYMlt:.95,range:700,rate:150,spread:120,zoom:1.4,leanMlt:.3,recoil:.007,recoilR:.01,recover:.985,recoverY:.996,recoverF:.98,recoilZ:4,recoilAnim:{time:300,recoilTweenY:.1},rumble:.5,icnPad:9},{name:"Famas",src:"weapon_15",icon:"icon_15",sound:"weapon_15",akimbo:!1,noSpread:!1,secondary:!1,noAim:!1,noAo:!0,nAuto:!0,projectile:{disable:!0,mat:"BASIC",color:16777179,dmg:28,spd:2.4,lookDir:!0,grav:1e-4,scale:1.4,length:10,range:3e3,snd:0},physRang:0,physPow:0,burst:{c:3,r:90},swapWiggle:.6,attach:0,attachYOff:-.1,attachZOff:-.5,zRot:1,type:0,swapTime:300,aimSpd:130,spdMlt:.95,ammo:30,rate:280,reload:1200,dmg:28,hsMlt:1.5,pierce:1,range:900,dmgDrop:5,scale:.0008858419597989991,leftHoldY:-.45,rightHoldY:-.5,leftHoldZ:.72,rightHoldZ:-.75,holdW:1,xOff:1,yOff:-.86,yRot:.0018,zOff:-3,xOrg:0,yOrg:-1.14,zOrg:-2,cLean:.2,cRot:.2,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzOff:4.9,muzOffY:-.05,muzMlt:1.4,spread:90,minSpread:5,zoom:1.5,leanMlt:1.5,recoil:.003,recoilR:.02,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.32,recoilZ:5.5,recoilZM:.05,aimRecMlt:.65,recoilAnim:{time:300,recoilTweenY:.06,recoilTweenZ:.1},jumpYM:.6,rumble:.5,expScale:.9,icnPad:9},{name:"Sawed Off",src:"weapon_16",icon:"icon_16",sound:"weapon_6",noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nAuto:!0,nCase:!0,nRing:!0,secondary:!0,minRec:20,swapWiggle:.4,shine:35,type:1,physRang:36,physPow:.1,swapTime:200,aimSpd:100,spdMlt:1,ammo:1,reload:1100,dmg:12,hsMlt:1.5,dmgDrop:12,scale:1,rightHoldX:.1,leftHoldY:-.5,rightHoldY:-.6,leftHoldZ:.4,rightHoldZ:-1.5,holdW:1,xOff:.95,yOff:-.65,zOff:-3.8,xOrg:0,yOrg:-.3,zOrg:-2.8,cLean:.2,cRot:.2,cDrop:.1,jYMlt:.2,inspectR:.1,inspectM:1.9,muzOff:6,muzMlt:1.8,range:210,rate:400,innac:110,spread:120,shots:5,cSpread:[.01,.05,-.17,-.22,-.3,.31,.32,.28,.3,-.2],minSpread:20,zoom:1.25,leanMlt:1.6,recoil:.02,recoilR:.015,recover:.99,recoverF:.97,recoilZ:2.1,recoilZM:.32,aimRecMlt:.3,recoilYM:1,recoilAnim:{time:340,recoilTweenY:.35},jumpYM:.5,rumble:.8,icnPad:10,expScale:1},{name:"Auto Pistol",src:"weapon_17",icon:"icon_17",sound:"weapon_17",noSpread:!1,akimbo:!1,secondary:!0,noAim:!1,nAuto:!1,minRec:30,noAo:!0,physRang:0,physPow:0,noHeadShot:!0,kill:["",50],type:1,swapTime:200,aimSpd:100,spdMlt:1,ammo:15,reload:1e3,dmg:16,hsMlt:1.5,pierce:.95,dmgDrop:2,scale:.0003158947055276376,leftHoldY:-1.1,rightHoldY:-.62,leftHoldZ:-.3,rightHoldZ:-.32,rightHoldX:.13,holdW:1.35,xOff:1.2,yOff:-.6,zOff:-3.7,xOrg:0,yRot:-.005,yOrg:-.23,zOrg:-3.9,cLean:.3,cRot:.3,inspectR:.35,inspectM:.9,muzOff:2,muzMlt:1.1,range:700,rate:100,spread:150,jYMlt:.5,zoom:1.3,leanMlt:1.6,recoil:.004,recoilR:.01,recover:.98,recoverY:.99,recoverF:.98,recoilYM:.2,aimRecMlt:.4,recoilZ:3.8,recoilZM:-.4,recoilAnim:{time:200,recoilTweenY:.28},rumble:.8,icnPad:-10,expScale:1.55},{name:"Bomb",src:"weapon_18",icon:"icon_18",sound:"weapon_18",transp:!0,bomb:!0,equipment:!0,nInsp:!0,noAim:!0,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,type:3,aimSpd:140,swapTime:250,spdMlt:.65,scale:.63,holdW:1.2,zoom:1,rot:[0,Math.PI/2,-.4],leftHoldY:-.3,rightHoldY:-.3,leftHoldZ:.33,rightHoldX:-.82,leftHoldX:.82,rightHoldZ:.33,xOff:0,yOff:-.8,zOff:-3.5,xOrg:1e-4,yOrg:1e-4,zOrg:1e-4,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9},{name:"Blaster",src:"weapon_19",icon:"icon_19",sound:"weapon_19",secondary:!1,noSpread:!1,akimbo:!1,noAim:!1,noAo:!0,nCase:!0,nAuto:!1,physRang:0,physPow:0,swapWiggle:.3,attach:0,attachYOff:-.07,attachZOff:-.73,zRot:1,type:0,kill:["",75],swapTime:300,aimSpd:130,spdMlt:.95,ammo:16,rate:160,reload:1600,dmg:1,projectile:{mat:"BASIC",color:9109499,spd:1,grav:0,nImp:!0,lookDir:!0,scale:.7,dmg:35,length:10,range:500},hsMlt:1.5,pierce:1,range:700,dmgDrop:5,scale:.0007946847095477368,leftHoldY:-.8,rightHoldY:-.6,leftHoldZ:1.2,rightHoldZ:-1.25,holdW:.75,xOff:.7,yOff:-.76,zOff:-3,rotOff:-.05,rotOffA:-.02,aimOffY:.042,yRot:.0018,xOrg:0,yOrg:-.52,zOrg:-2.3,cLean:.2,cRot:.2,cDrop:.1,inspectR:.1,inspectM:1.5,caseZOff:-1.7,caseYOff:-.2,muzID:3,muzOff:5.1,muzOffY:-.08,muzMlt:1.4,spread:100,minSpread:5,zoom:1.6,leanMlt:1.5,recoil:.003,recoilR:.05,recover:.978,recoverY:.995,recoverF:.975,jYMlt:.9,recoilYM:.4,recoilZ:5.7,recoilZM:-.05,aimRecMlt:.7,recoilAnim:{time:300,recoilTweenY:.07,recoilTweenZ:.1},jumpYM:.6,rumble:.5,icnPad:5},{name:"Build Tool",src:"weapon_20",icon:"icon_20",sound:"weapon_20",aimSound:"paper_1",swapSnd:"paper_1",build:!0,equipment:!0,nInsp:!0,noAim:!1,noAo:!0,nCase:!0,noCross:!0,nMuz:!0,side:2,type:3,aimSpd:100,aimLean:1e-6,swapTime:200,spdMlt:.9,scale:1.2,holdW:1.3,zoom:1.1,rate:300,range:50,rot:[0,Math.PI/2,-.4],leftHoldY:.6,rightHoldY:.6,leftHoldZ:.1,rightHoldX:-2.2,leftHoldX:2.2,rightHoldZ:.1,xOff:0,yOff:-2.6,zOff:-3.5,xOrg:1e-5,yOrg:-3.8,zOrg:-3.2,cLean:0,cRot:0,cDrop:.12,jYMlt:.95,spread:120,recover:.98,recoverF:.98,leanMlt:.3,icnPad:9}],e.exports.findWeaponBySrc=function(t){for(var i=0;i<e.exports.length;++i)if(e.exports[i].src=="weapon_"+t)return e.exports[i];return null},e.exports.findIndexBySrc=function(t){for(var i=0;i<e.exports.length;++i)if(e.exports[i].src==t)return i;return null};for(var i=[],n=0;n<e.exports.length;++n)e.exports[n].id=n,e.exports[n].melee||e.exports[n].equipment||i.push(n);e.exports.onlyWeapons=i},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var n,r;e.exports=function(e,t,a,s){var o=this;a&&(n=i(28),r=i(17)),this.textures=[{name:"WALL",src:"wall_0"},{name:"DIRT",src:"dirt_0"},{name:"FLOOR",src:"floor_0"},{name:"GRID",src:"grid_0"},{name:"GREY",src:"grey_0"},{name:"DEFAULT",src:"default"},{name:"ROOF",src:"roof_0"},{name:"FLAG",src:"flag_0"},{name:"GRASS",src:"grass_1"},{name:"CHECK",src:"check_0"},{name:"LINES",src:"lines_0"},{name:"BRICK",src:"brick_0"},{name:"LINK",src:"link_0",trans:!0},{name:"LIQUID",src:"liquid_0",trans:!0},{name:"GRAIN",src:"grain_0"},{name:"FABRIC",src:"fabric_0"},{name:"TILE",src:"tile_0"}],this.getTextureIdByName=function(e){e=e.toUpperCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].name==e)return t;return 0},this.getTextureByName=function(e){e=e.toUpperCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].name==e)return this.textures[t];return null},this.textureExist=function(e){e=e.toUpperCase();for(var t=0;t<this.textures.length;t++)if(this.textures[t].name==e)return!0;return!1},this.prefabs=[{name:"CUBE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),editFaces:!0,editFog:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],hasHealth:!0,scalable:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,editPen:!0,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canStretch:!0,canWallJump:!0,canTrans:!0},{name:"CRATE",src:"crate_0",scale:6,isProp:!0,gen:e=>o.loadObj(e,"models/crate_0.obj","textures/crate_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"BARREL",src:"barrel_0",scale:4,mlt:1,isProp:!0,CP:-1,gen:e=>o.loadObj(e,"models/barrel_0.obj","textures/barrel_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"LADDER",src:"cube_0",scale:.5,width:3.2,genGeo:async e=>o.generateLadder(e,e.direction),notTechnical:!0,defaultSize:[2,10,4],scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,hideBoundingBox:!1,editOpac:!0,texturable:!0,assetTextures:!0,customDirection:!0,castShadow:!0,receiveShadow:!0,canStretch:!0,canTrans:!0},{name:"PLANE",src:"cube_0",genGeo:async e=>o.generatePlane(e,e.size[0],e.size[2]),hasHealth:!0,defaultSize:[4,.01,4],movingTexture:!0,frameTexture:!0,dontRound:!0,scalable:!0,canTerrain:!0,edgeNoise:!0,scaleWithSize:!0,editColor:!0,editPen:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,canInterface:!0,canStretch:!0,canWallJump:!0,canTrans:!0},{name:"SPAWN_POINT",src:"cube_0",genGeo:async(e,t)=>o.generateSpawn(e,t),notTechnical:!0,notStyleable:!0,scalable:!1,alwaysSee:!0,tool:!0,scaleWithSize:!1,teamable:!0,noTexture:!0,opacity:1e-5,customDirection:!0,dontRound:!0},{name:"CAMERA_POSITION",src:"cube_0",editorGen:e=>o.generateSprite(e,"img/crosshair.png",5),notTechnical:!0,notStyleable:!0,defaultSize:[2,2,2],scalable:!1,alwaysSee:!0,tool:!0,scaleWithSize:!1},{name:"VEHICLE",src:"vehicle_0",scale:20,gen:e=>o.loadObj(e,"models/vehicle_0.obj","textures/vehicle_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,emiss:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"STACK",src:"stack_0",scale:6,isProp:!0,gen:e=>o.loadObj(e,"models/stack_0.obj","textures/stack_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"RAMP",src:"cube_0",genGeo:async e=>o.generateRamp(e,e.direction),notTechnical:!0,defaultSize:[10,5,10],movingTexture:!0,frameTexture:!0,scalable:!0,scaleWithSize:!1,hideBoundingBox:!1,boostable:!0,editColor:!0,editEmissive:!0,texturable:!0,assetTextures:!0,shootable:!0,customDirection:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0,editOpac:!0,canStretch:!0,canTrans:!0},{name:"SCORE_ZONE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,customScore:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:16776960,tool:!0},{name:"BILLBOARD",src:"cube_0",genGeo:async e=>o.generateBillboard(0,0,0,...e.size),hasHealth:!0,defaultSize:[40,.01,10],lineCol:16776960,dontRound:!0,scalable:!0,canTerrain:!0,scaleWithSize:!0,hideBoundingBox:!1,castShadow:!0,receiveShadow:!0,doubleSide:!0,canInterface:!0,canWallJump:!0},{name:"DEATH_ZONE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notTechnical:!0,notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:16711680,tool:!0},{name:"PARTICLES",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),customDirection:!0,notTechnical:!0,defaultSize:[20,20,20],editColor:!0,scalable:!0,noTexture:!0,opacity:.3,lineCol:3080191,tool:!0},{name:"OBJECTIVE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),objectiveLink:!0,notTechnical:!0,notStyleable:!0,defaultSize:[50,50,50],scalable:!0,noTexture:!0,opacity:.2,lineCol:13107455,tool:!0},{name:"TREE",src:"tree_0",scale:10,gen:e=>o.loadObj(e,"models/tree_0.obj","textures/tree_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"CONE",src:"cone_0",scale:4,isProp:!0,noBake:!0,CPY:-.5,CP:-2,gen:e=>o.loadObj(e,"models/cone_0.obj","textures/cone_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"CONTAINER",src:"container_0",scale:7,gen:e=>o.loadObj(e,"models/container_0.obj","textures/container_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"GRASS",src:"grass_0",scale:32,gen:e=>o.loadObj(e,"models/grass_0.obj","textures/grass_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,noDetail:!0,editColor:!0,editOpac:!0,complex:!0,doubleSide:!0,transparent:!0,receiveShadow:!0,canInterface:!0,frameT:180,frames:4,alphaTest:.02},{name:"CONTAINERR",src:"containerr_0",scale:7,gen:e=>o.loadObj(e,"models/containerr_0.obj","textures/containerr_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"ACIDBARREL",src:"acidbarrel_0",scale:4,isProp:!0,gen:e=>o.loadObj(e,"models/acidbarrel_0.obj","textures/acidbarrel_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,emiss:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"DOOR",src:"door_0",scale:5,gen:e=>o.loadObj(e,"models/door_0.obj","textures/door_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"WINDOW",src:"window_0",scale:6,gen:e=>o.loadObj(e,"models/window_0.obj","textures/window_0.png",e.mSize||this.scale,e.color,"mesh"),noDetail:!0,hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,transparent:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"FLAG",src:"cube_0",genGeo:async(e,t)=>o.generateFlag(e,t),notTechnical:!0,notStyleable:!0,noDetail:!0,defaultSize:[e.flagZoneS,e.flagZoneH,e.flagZoneS],scalable:!1,tool:!0,scaleWithSize:!1,lineCol:13107455,teamable:!0,noDefault:!0},{name:"GATE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),canUndo:!0,interact:!0,customScore:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,teamable:!0,lineCol:16711935,texturable:!0,assetTextures:!0,tool2:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canWallJump:!0,canTrans:!0},{name:"CHECK_POINT",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,teamable:!0,noTexture:!0,opacity:.3,lineCol:252613,tool:!0,customDirection:!0},{name:"WEAPON_PICKUP",src:"cube_0",genGeo:async(e,t)=>o.generateWeapon(e,t),notStyleable:!0,interact:!0,customScore:!0,teamable:!0,defaultSize:[e.pickupZoneX,e.pickupZoneH,e.pickupZoneZ],scalable:!1,tool:!0,scaleWithSize:!1,lineCol:3595263,noTexture:!0,texturable:!1,opacity:.1},{name:"TELEPORTER",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,defaultSize:[10,10,10],teamable:!0,scalable:!0,noTexture:!0,opacity:.3,lineCol:11665392,tool:!0,customDirection:!0,optionalDirection:!0},{name:"TEDDY",src:"teddy_0",scale:6,isProp:!0,CPY:-3,CP:-3.6,gen:e=>o.loadObj(e,"models/teddy_0.obj","textures/teddy_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,noDetail:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"TRIGGER",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),hasSound:!0,canTargetInterface:!0,hasHealth:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,teamable:!0,lineCol:16711935,texturable:!0,assetTextures:!0,tool2:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0,canTrans:!0},{name:"SIGN",src:"cube_0",noCol:!0,genGeo:async e=>o.generateSign(e,0,0,0,...e.size),notTechnical:!0,movingTexture:!0,hasText:!0,defaultSize:[40,.01,10],forceCollision:!0,lineCol:16776960,scalable:!0,scaleWithSize:!0,hideBoundingBox:!1,tool:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0},{name:"DEPOSIT_BOX",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,forceCollision:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,teamable:!0,lineCol:16711935,texturable:!0,assetTextures:!0,tool2:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canWallJump:!0,canTrans:!0},{name:"LIGHT_CONE",src:"cube_0",noCol:!0,genGeo:async(e,t)=>o.generateCone(...e.size,t),notTechnical:!0,defaultSize:[10,10,10],movingTexture:!0,noDetail:!0,scalable:!0,noCollision:!0,scaleWithSize:!1,editOpac:!0,editColor:!0,lineCol:16711935,castShadow:!0,receiveShadow:!0,complex:!0,doubleSide:!0,blending:2,fakeScale:!0},{name:"SPECTATE_CAM",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),objectiveLink:!0,isCam:!0,notTechnical:!0,notStyleable:!0,defaultSize:[10,10,10],scalable:!1,tool:!0,scaleWithSize:!1},{name:"SPHERE",src:"cube_0",noCol:!0,genGeo:async(e,t)=>o.generateSphere(...e.size,t),editFog:!0,notTechnical:!0,movingTexture:!0,frameTexture:!0,defaultSize:[5,5,5],scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,noCollision:!0,texturable:!0,assetTextures:!0,canTrans:!0},{name:"PLACEHOLDER",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,noExport:!0,tool:!0,opacity:.1,lineCol:0},{name:"CARDB",src:"cardb_0",scale:5,isProp:!0,CPY:-2.5,CP:-2,gen:e=>o.loadObj(e,"models/cardb_0.obj","textures/cardb_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"PALLET",src:"pallet_0",scale:6,isProp:!0,CPY:-5,gen:e=>o.loadObj(e,"models/pallet_0.obj","textures/pallet_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"LIQUID",src:"cube_0",noCol:!0,genGeo:async e=>o.generateLiquid(e,e.size[0],e.size[2]),noCollision:!0,notTechnical:!0,defaultSize:[25,.01,25],movingTexture:!0,dontRound:!0,scalable:!0,canTerrain:!0,scaleWithSize:!0,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,doubleSide:!0},{name:"SOUND_EMITTER",src:"cube_0",noCol:!0,genGeo:async(e,t)=>o.generateSphere(...e.size,t),hasSound:!0,notTechnical:!0,notStyleable:!0,defaultSize:[5,5,5],hideBoundingBox:!1,noCollision:!0,tool:!0,wireframe:!0,assetSounds:!0},{name:"EVENT",src:"event_0",scale:2,gen:e=>o.loadObj(e,"models/event_0.obj","textures/event_0.png",e.mSize||this.scale,e.color,"mesh"),noExport:!0,localOnly:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0},{name:"TERMINAL",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),localOnly:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],hasHealth:!0,scalable:!0,editAmb:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,editPen:!0,texturable:!0,assetTextures:!0,tool2:!0,interact2:!0,castShadow:!0,receiveShadow:!0,hasBorder:!0,canInterface:!0,canWallJump:!0,canTrans:!0},{name:"PREMIUM_ZONE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:16498733,tool:!0,hasBorder:!0},{name:"VERIFIED_ZONE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0},{name:"CUSTOM_ASSET",src:"model",scale:1,custom:!0,gen:e=>o.loadObj(e,"model.obj","model.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,complex:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,hasSpin:!0,hasSpinDir:!0,canWallJump:!0},{name:"BOMB_SITE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notTechnical:!0,notStyleable:!0,defaultSize:[25,25,25],scalable:!0,noTexture:!0,opacity:.2,lineCol:9600493,tool:!0},{name:"BOOST_PAD",src:"cube_0",scale:4,genGeo:async(e,t)=>o.generatePad(e,t),notTechnical:!0,notStyleable:!0,defaultSize:[10,.5,10],scalable:!1,tool:!0,scaleWithSize:!1,lineCol:13107455,noDefault:!0,bounce:!0},{name:"TEAM_ZONE",src:"cube_0",genGeo:async(e,t)=>o.generateCube(e,t),notStyleable:!0,defaultSize:[10,10,10],scalable:!0,teamable:!0,noTexture:!0,opacity:.3,lineCol:4244735,tool:!0,hasBorder:!0},{name:"CYLINDER",src:"cube_0",genGeo:async(e,t)=>o.generateCylinder(e,t),canInterface:!0,hasHealth:!0,movingTexture:!0,frameTexture:!0,defaultSize:[10,10,10],scalable:!0,scaleWithSize:!1,editColor:!0,editEmissive:!0,editOpac:!0,hideBoundingBox:!1,texturable:!0,assetTextures:!0,castShadow:!0,receiveShadow:!0,hasSpin:!0,fakeScale:!0,doubleSide:!0,canTrans:!0},{name:"POLICE",src:"police_0",scale:4,mlt:1,gen:e=>o.loadObj(e,"models/police_0.obj","textures/police_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"CAGE",src:"cage_0",scale:6,isProp:!0,gen:e=>o.loadObj(e,"models/cage_0.obj","textures/cage_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"EBARREL",src:"ebarrel_0",scale:4,mlt:1,isProp:!0,CP:-1,gen:e=>o.loadObj(e,"models/ebarrel_0.obj","textures/ebarrel_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,complex:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"SHOWCASE",src:null,scale:1,mlt:1,noCol:!0,noCollision:!0,gen:e=>o.loadItem(e),editColor:!0,complex:!0,editOpac:!0,dontRound:!0,hasSpin:!0,hasSpinDir:!0,castShadow:!0,receiveShadow:!0},{name:"POINT_LIGHT",src:"cube_0",noCol:!0,genGeo:async(e,t)=>o.generatePointLight(...e.size,t),notTechnical:!0,noTexture:!0,wireframe:!0,tool:!0,defaultSize:[5,5,5],editColor:!0,hideBoundingBox:!1,noCollision:!0,light:!0,noDetail:!0},{name:"GHOST",src:"ghost_0",scale:4,isProp:!0,gen:e=>o.loadObj(e,"models/ghost_0.obj","textures/ghost_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,emiss:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"BOT",src:"ghost_0",ai:!0,scale:4,gen:e=>o.loadObj(e,"models/ghost_0.obj","textures/ghost_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,dontRound:!0,complex:!0,teamable:!0,castShadow:!0,receiveShadow:!0,transparent:!0,customScore:!0,canInterface:!0,canTargetInterface:!0},{name:"PUMPKIN",src:"pumpkin_0",scale:4,mlt:1,isProp:!0,gen:e=>o.loadObj(e,"models/pumpkin_0.obj","textures/pumpkin_0.png",e.mSize||this.scale,e.color,"mesh"),emiss:!0,hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"RUNE",src:"rune_0",noCol:!0,genGeo:async e=>o.generateRune(e,e.size[0],e.size[2]),defaultSize:[20,.01,20],notTechnical:!0,movingTexture:!0,scalable:!0,noCollision:!0,scaleWithSize:!0,editOpac:!0,editColor:!0,editEmissive:!0,lineCol:16711935,castShadow:!1,receiveShadow:!0,complex:!0,doubleSide:!0,fakeScale:!0,alphaTest:.9,canWallJump:!0},{name:"SKELETON",src:"skeleton_0",scale:4,mlt:1,isProp:!0,gen:e=>o.loadObj(e,"models/skeleton_0.obj","textures/skeleton_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0},{name:"KNIGHT",src:"knight_0",scale:4,mlt:1,isProp:!0,gen:e=>o.loadObj(e,"models/knight_0.obj","textures/knight_0.png",e.mSize||this.scale,e.color,"mesh"),hasHealth:!0,editColor:!0,editOpac:!0,dontRound:!0,castShadow:!0,receiveShadow:!0,canInterface:!0,canWallJump:!0}];for(var l=0;l<this.prefabs.length;l++)this.prefabs[l].id=l;if(this.getPrefabIdByName=function(e){e=e.toUpperCase();for(var t=0;t<this.prefabs.length;t++)if(this.prefabs[t].name==e)return t;return 0},this.getPrefabByName=function(e){e=e.toUpperCase();for(var t=0;t<this.prefabs.length;t++)if(this.prefabs[t].name==e)return this.prefabs[t];return null},this.prefabExist=function(e){e=e.toUpperCase();for(var t=0;t<this.prefabs.length;t++)if(this.prefabs[t].name==e)return!0;return!1},a){let i=new a.TextureLoader,l=new a.LoadingManager,u=new a.OBJLoader(l),f=new a.GLTFLoader(l);window.loadedGeos=[],this.createMesh=function(e,n,r,s,o,l,c,d,p,h){var u;r&&(u=i.load(t[h?"userAssetsUrl":"assetsUrl"](r),t=>{t.wrapS=a.RepeatWrapping,t.wrapT=a.RepeatWrapping,t.repeat.set(1,1),t.repeat.set(e.prefab.frames?1/e.prefab.frames:e.prefab.repeatX||1,e.prefab.repeatY||1),t.minFilter=a.NearestFilter,t.magFilter=a.NearestFilter,t.needsUpdate=!0}));var f=new a.StrippedLambertMaterial({map:u,vertexColors:a.VertexColors,color:o||"#ffffff",shininess:60,specular:2697513,alphaTest:h&&e.assetID.includes("a")?.02:e.prefab.alphaTest||0});h&&(n.computeBoundingBox(),l=-n.boundingBox.getCenter().y*s);n.computeFaceNormals(),n.computeVertexNormals();var m=new a.Mesh(n,f);return m.scale.setScalar(s||1),m.position.y+=l,m.rotateX(c||0),m.rotateY(d||0),p?(e[p]&&(e.remove(e[p]),e[p]=null),e[p]=m,e.add(e[p])):e.add(m),m},this.loadObj=function(e,i,n,r,s,l=null,c=0,d=0,p=0){return new Promise(h=>{var m=e.assetID&&e.assetID.length,g=null,y="obj";if(m){var v=e.assetID.replace(/[^\d]/g,"");e.assetID.includes("g")&&(y="gltf"),i=v+"/model."+y,n=v+"/model.png",g=function(e){KE.updateProgress((e.loaded/e.total*100).round(0))}}var w=window.loadedGeos[i+y];w?h(o.createMesh(e,w,n,r,s,c,d,p,l,m)):(w=new a.BufferGeometry,("gltf"==y?f:u).load(t[m?"userAssetsUrl":"assetsUrl"](i),t=>{if(t.scene&&(t=t.scene),1<t.children.length){for(var u=new a.Geometry,f=0;f<t.children.length;++f)if(t.children[f])if("Object3D"!=t.children[f].type)t.children[f].updateMatrix(),u.merge((new a.Geometry).fromBufferGeometry(t.children[f].geometry),t.children[f].matrix,f);else{for(var g=new a.Geometry,v=0;v<t.children[f].children.length;++v)t.children[f].children[v]&&t.children[f].children[v].geometry&&"Object3D"!=t.children[f].children[v].type&&(t.children[f].children[v].updateMatrix(),g.merge((new a.Geometry).fromBufferGeometry(t.children[f].children[v].geometry),t.children[f].children[v].matrix,v));g.groupsNeedUpdate=!0,u.copy((new a.BufferGeometry).fromGeometry(g))}u.groupsNeedUpdate=!0,w.copy((new a.BufferGeometry).fromGeometry(u))}else if("Object3D"==t.children[0].type&&!t.children[0].geometry&&t.children[0].children){for(u=new a.Geometry,f=0;f<t.children[0].children.length;++f)t.children[0].children[f]&&t.children[0].children[f].geometry&&(t.children[0].children[f].updateMatrix(),u.merge((new a.Geometry).fromBufferGeometry(t.children[0].children[f].geometry),t.children[0].children[f].matrix,f));u.groupsNeedUpdate=!0,w.copy((new a.BufferGeometry).fromGeometry(u))}else w.copy(t.children[0].geometry);window.loadedGeos[i+y]=w,h(o.createMesh(e,w,n,r,s,c,d,p,l,m))},g))})},this.loadItem=function(e){var i=r.skins[e.itemID||0],a=(i.type||r.previews[i.weapon],n[i.weapon-1]||{}),s=r.types[i.type||0]+(i.type?i.id:i.weapon)+(null==i.mid?"":"_"+i.mid),o=null==i.mid?i.type&&3==i.type?i.pat?i.tex:"melee/melee_"+(i.id||0)+(i.tex?"_"+i.tex:""):i.type?i.tex?r.types[i.type||0]+i.id+"_"+i.tex:null:i.tex?i.tex:"weapons/skins/weapon_"+i.weapon+"_"+i.id:t.getReModel(r,i);return this.loadObj(e,"models/"+s+".obj","textures/"+(o||s)+".png",(e.mSize||1)*(i.mScl||a.scale||1),e.color,"mesh")},this.generateSprite=function(e,t,i){let n=(new a.TextureLoader).load(t);n.magFilter=a.NearestFilter;let r=new a.SpriteMaterial({map:n,color:"#ffffff"}),s=new a.Sprite(r);i&&s.scale.set(i,i,1),e.add(s)},this.generatePlane=function(e,t,i){var n=s.generatePlane(i,t,{scale:e.texStretch?0:1,tess:e.bakeAcc||0},0,0,0);return n=(new a.BufferGeometry).fromGeometry(n),(n=a.BufferGeometryUtils.mergeVertices(n)).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateRune=function(e,t,i){var n=s.generatePlane(i,t,{scale:0},0,0,0);return n=(new a.BufferGeometry).fromGeometry(n),(n=a.BufferGeometryUtils.mergeVertices(n)).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateLiquid=function(e,t,i){var n=s.generatePlane(i,t,{scale:1,tilesX:e.tilesX||10,tilesZ:e.tilesZ||10},0,0,0);return(n=(new a.Geometry).copy(n)).scale(t,i,1),n.rotateX(-Math.PI/2),n},this.generateCube=function(e){var[t,i,n]=e.size,r=s.generateCube(e.faces||[1,1,1,1,1,1],t,i,n,{scale:e.texStretch?0:1,tess:e.prefab.tool?0:e.bakeAcc||0});return r=(new a.BufferGeometry).fromGeometry(r),(r=a.BufferGeometryUtils.mergeVertices(r)).scale(t,i,n),r.translate(0,-i/2,0),r},this.generateSphere=function(e,t,i,n){var r=s.generateSphere(e,t,i,{scale:1,amb:n,useScale:!0});return r=(new a.BufferGeometry).fromGeometry(r)},this.generatePointLight=function(e,t,i,n){var r=s.generateSphere(e,t,i,{scale:1,amb:n,useScale:!0});return r=(new a.BufferGeometry).fromGeometry(r)},this.generateCone=function(e,t,i){var n=s.generateCone(t,{scale:1,useScale:!0}),r=new a.Mesh(n),o=Math.min(e,i)/2;r.scale.set(o,t,o),r.updateMatrix();var l=new a.Geometry;return l.merge(r.geometry,r.matrix),l=(new a.BufferGeometry).fromGeometry(l)},this.generateCylinder=function(e){var[t,i,n]=e.size,r=s.generateCylinder({scale:1,useScale:!0,open:!!e.openEnded}),o=new a.Mesh(r),l=Math.min(t,n)/2;o.scale.set(l,i,l),o.updateMatrix();var c=new a.Geometry;return c.merge(o.geometry,o.matrix),c=(new a.BufferGeometry).fromGeometry(c)},this.generateRamp=function(e,t){var i,[n,r,o]=e.size,l=new a.Geometry;i=0-r/2;var c=0!=(t=t*Math.PI/2)&&t!=Math.PI;return((e,t,i,n,r,o,c,d,p)=>{d=d||{};var h=new a.Mesh(s.generatePlane(2*o,n,d));h.position.set(e,t+r/2,i),o*=2;var u=Math.sqrt(r*r+o*o);h.scale.set(n,u,2),h.rotateY(-Math.PI/2-c),h.rotateX(Math.asin(r/u)-Math.PI/2),h.rotateZ(p||0),h.updateMatrix(),l.merge(h.geometry,h.matrix)})(0,i,0,c?n:o,r,(c?o:n)/2,t,{scale:e.texStretch?0:1,tess:e.bakeAcc||0}),l=(new a.BufferGeometry).fromGeometry(l),l=a.BufferGeometryUtils.mergeVertices(l)};let m=(e,t,i,n,r,o,l,c,d,p)=>{(l=l||{}).premultipliedAlpha=!0;var h=new a.Mesh(s.generatePlane(o,r,l,t,i,n));h.position.set(t,i,n),h.rotateY(c||0),h.rotateX((d||0)-Math.PI/2),h.rotateZ(p||0),h.scale.set(2*r,2*o,1),h.updateMatrix(),e.merge(h.geometry,h.matrix)},g=(e,t,i,n,r,o,l,c,d)=>{d=d||{};var p=new a.Mesh(s.generateCube(c,r,o,l,d));return p.position.set(t,i,n),p.rotation.set(d.yR||0,d.xR||0,d.zR||0),p.scale.set(r,o,l),e instanceof a.Geometry?(p.updateMatrix(),e.merge(p.geometry,p.matrix)):e.add(p),p},y=(e,t,i,n,r,o,l,c)=>{c=c||{};var d=new a.Mesh(s.generateSphere(r,o,l,c));return d.position.set(t,i+o/2,n),d.rotation.set(c.yR||0,c.xR||0,c.zR||0),d.scale.set(r/2,o/2,l/2),e instanceof a.Geometry?(d.updateMatrix(),e.merge(d.geometry,d.matrix)):e.add(d),d},v=(e,t,i,n,r,o,l,c)=>{c=c||{};var d=new a.Mesh(s.generateCylinder(c)),p=Math.min(r,l)/2;return d.scale.set(p,o,p),d.position.set(t,i,n),d.rotation.set(c.yR||0,c.xR||0,c.zR||0),e instanceof a.Geometry?(d.updateMatrix(),e.merge(d.geometry,d.matrix)):e.add(d),d};this.generateLadder=function(i,n){var[r,s,o]=i.size,l=new a.Geometry;n=n*Math.PI/2;let c={x:0+e.ladderScale*Math.cos(n),z:0+e.ladderScale*Math.sin(n),y:0-s/2};g(l,c.x+e.ladderWidth*Math.sin(n),c.y,c.z+e.ladderWidth*Math.cos(n),2*e.ladderScale,s+2,2*e.ladderScale,[1,1,1,1,1,1],{scale:i.texStretch?1:.02}),g(l,c.x-e.ladderWidth*Math.sin(n),c.y,c.z-e.ladderWidth*Math.cos(n),2*e.ladderScale,s+2,2*e.ladderScale,[1,1,1,1,1,1],{scale:i.texStretch?1:.02});for(var d=Math.floor(s/6),p=0;p<d;++p)m(l,c.x,c.y+6*(p+1)+t.randFloat(-1,1),c.z,e.ladderWidth,e.ladderScale,{scale:i.texStretch?1:.02},-n+Math.PI/2,Math.PI/2,t.randFloat(-.1,.1));return l=(new a.BufferGeometry).fromGeometry(l),l=a.BufferGeometryUtils.mergeVertices(l)},this.generateBillboard=function(e,t,i,n,r,o){var l=s.generatePlane(o,n,{},e,t,i);return(l=(new a.BufferGeometry).fromGeometry(l)).scale(n,o,1),l.rotateX(-Math.PI/2),l},this.generateSign=function(e,t,i,n,r,o,l){var c=s.generatePlane(l,r,{},t,i,n);return(c=(new a.BufferGeometry).fromGeometry(c)).scale(r,l,1),c.rotateX(-Math.PI/2),c},this.generateFlag=function(t,i){var n=parseInt(t.team||0);o.loadObj(t,"models/crystal_0.obj","textures/crystal_"+n+".png",e.flagScale,"#ffffff",null,e.flagOff/2);var r=s.generateCube([1,1,0,0,1,1],...t.size,{scale:1,amb:i,useScale:!0,transparent:!0,depthWrite:!1,side:2});return r=(new a.BufferGeometry).fromGeometry(r)},this.generatePad=function(e,t){o.loadObj(e,"models/pad_0.obj","textures/pad_0.png",4,"#ffffff",null,-.5);var i=s.generateCube([0,0,0,0,0,0],10,.5,10,{scale:1,amb:t,useScale:!0,transparent:!0,depthWrite:!1,side:2});return i=(new a.BufferGeometry).fromGeometry(i)},this.generateWeapon=function(e,t){var[i,r,l]=e.size;let c=s.generateCube([1,1,1,1,1,1],i,r,l,{scale:1,amb:t,useScale:!0});return c=(new a.BufferGeometry).fromGeometry(c),o.loadObj(e,"models/weapons/"+n[e.weaponId].src+".obj","textures/weapons/"+n[e.weaponId].src+".png",1*n[e.weaponId].scale,"#ffffff","wepMesh",-.5,-1.6,0),c},this.generateSpawn=function(e,t){var i=e.cmpSpwn?16776960:1==e.team?65535:2==e.team?16711680:"#ffffff";o.loadObj(e,"models/spawn_0.obj","textures/spawn_0.png",1,i,"spwnMesh",-5.5,0,-((e.direction||0)+1)*Math.PI/2);let n=s.generateCube([1,1,1,1,1,1],7,11,7,{scale:1,amb:t,transparent:!0,useScale:!0,depthWrite:!1,side:2});return n=(new a.BufferGeometry).fromGeometry(n),n},this.generateBorder=function(e,t,i){var n=new a.Geometry,r=new a.SphereGeometry(.5,32,32),s=new a.Mesh(r);return s.scale.set(e,t,i),s.updateMatrix(),n.merge(s.geometry,s.matrix),n=(new a.BufferGeometry).fromGeometry(n)},this.generateGrass=function(e,t,i){let n=new a.Geometry,r=2*Math.PI*Math.random(),o=new a.Mesh(s.generatePlane(e,t,{}));o.scale.set(e,t,i),o.rotateY(r*(Math.PI/2)),o.updateMatrix(),n.merge(o.geometry,o.matrix);let l=new a.Mesh(s.generatePlane(e,t,{}));return l.scale.set(e,t,i),l.rotateY((r+1)*(Math.PI/2)),l.updateMatrix(),n.merge(l.geometry,l.matrix),n=(new a.BufferGeometry).fromGeometry(n),n};var c=["#969953","#646639","#999153"],d=[{name:"Square Oak",height:58,scales:[4,5],rar:[6,7,8,9,10],gen:function(e,t,i,n,r){y(r.clutterMesh,e[0],e[1]+t-1,e[2],90,100,90,{src:"default",shadows:!0,vNoise:.36,xR:i,coat:n.cot,colr:n.col||c[i%c.length]})}},{name:"Big Oak",height:70,scales:[6,6.2],rar:[5],gen:function(e,t,i,n,r){y(r.clutterMesh,e[0],e[1]+t-1,e[2],130,100,130,{src:"default",shadows:!0,vNoise:.3,xR:i,coat:n.cot,colr:n.col||c[i%c.length]})}},{name:"Tall Italian",height:37,scales:[3,3.2],rar:[1,2,3,4],gen:function(e,t,i,n,r){y(r.clutterMesh,e[0],e[1]+t-6,e[2],33,80,33,{src:"default",shadows:!0,vNoise:.3,xR:i,coat:n.cot,colr:n.col||c[i%c.length]})}},{name:"Honey Oak",height:100,scales:[4,5],rar:[0],gen:function(e,t,i,n,r){y(r.clutterMesh,e[0],e[1]+t-1,e[2],55,56,55,{src:"default",shadows:!0,vNoise:.35,xR:i,coat:n.cot,colr:n.col||"#616037"}),g(r.clutterMesh,e[0]+10,e[1]+t/1.5+5,e[2],22,3,2,[1,1,1,1,1,1],{src:"default",colr:"#665547",zR:.4,shadows:!0,amb:.5}),y(r.clutterMesh,e[0]+20,e[1]+t/1.5,e[2],22,20,22,{src:"default",shadows:!0,vNoise:.25,coat:n.cot,colr:n.col||"#616037"})}}];this.addTREE=function(e,t,i){for(var n=Math.round(Math.abs((e[0]+e[2])%10)),r=0;r<d.length;++r)if(0<=d[r].rar.indexOf(n)){tmpTree=d[r];break}if(tmpTree){var a=tmpTree.height-2*n,s=tmpTree.scales[n%tmpTree.scales.length];g(i.clutterMesh,e[0],e[1],e[2],s,a+20,s,[1,1,0,0,1,1],{src:"default",colr:"#665547",shadows:!0,amb:.5}),tmpTree.gen(e,a,n,t,i)}},this.addSTUMP=function(e,t,i){g(i.clutterMesh,e[0],e[1],e[2],4,80,4,[1,1,1,0,1,1],{src:"default",colr:"#665547",shadows:!0,amb:.5}),g(i.clutterMesh,e[0],e[1]+30,e[2]+10,2,3,22,[1,1,1,1,1,1],{src:"default",colr:"#665547",yR:-.5,shadows:!0,amb:.5}),g(i.clutterMesh,e[0]+10,e[1]+50,e[2],22,3,2,[1,1,1,1,1,1],{src:"default",colr:"#665547",zR:.4,shadows:!0,amb:.5})},this.addBUSH=function(e,t,i){var n=e[3],r=Math.round(Math.abs((e[0]+e[2])%10)),a=2==n?.5:1;y(i.clutterMesh,e[0],e[1]-6*a,e[2],29*a,21*a,28*a,{src:"default",colr:t.col||"#646639",vNoise:.3,coat:t.cot,xR:r,shadows:!0})},this.addGRASS=function(e,t,i,n){},this.addLOOT=function(e,t,i){var n=Math.round(Math.abs((e[0]+e[2])%3));g(i.clutterMesh,e[0]+6,e[1],e[2]+15,18,1,3,[1,1,1,0,1,1],{src:"default",colr:"#665547",xR:.86,shadows:!0,amb:.5}),(0==n||1==n)&&v(i.clutterMesh,e[0],e[1],e[2],7,7,9,{src:"default",colr:"#9e2b2b",shadows:!0}),(2==n||1==n)&&v(i.clutterMesh,e[0]-7,e[1],e[2]+12,7,7,9,{src:"default",colr:"#2b769e",shadows:!0})};var p=[{scl:25,hei:20,nois:.2,col:"#707070"},{scl:50,hei:30,nois:.3,col:"#545454"},{scl:13,hei:10,nois:.15,col:"#707070",noCol:!0},{scl:10,hei:10,nois:.1,col:"#545454",noCol:!0}];this.addROCK=function(e,t,i){var n=e[1]-7,r=Math.round(Math.abs((e[0]+e[2])%10)),a=p[r%p.length];y(i.clutterMesh,e[0],n,e[2],a.scl,a.hei,a.scl,{src:"default",colr:a.col,vNoise:a.nois,noAmb:!0,coat:t.cot,shadows:!0})},this.addTerrObj=function(e,i,n,r){var a={col:null,cot:null},s=n.BIOME_INDEXES[e[3]],l=n.MAP_OBJS[i];l&&s&&(l.biomeCoats&&l.biomeCoats[s]&&(a.cot=l.biomeCoats[s]),l.biomeCols&&l.biomeCols[s]&&(a.col=l.biomeCols[s][t.randInt(0,l.biomeCols[s].length-1)])),o["add"+i](e,a,n,r)};let w=e=>({src:e});this.getImageTexture=e=>{var t=new a.Texture(e);return t.wrapS=a.RepeatWrapping,t.wrapT=a.RepeatWrapping,t.repeat.set(1,1),t.minFilter=a.NearestFilter,t.magFilter=a.NearestFilter,t.needsUpdate=!0,t};var h=[];this.loadTexturePrefab=function(n,r=null){if(r.prefab.hasText)r.defaultMaterial.map=o.getImageTexture(t.createCanvasText(r.size[0],r.size[2],r.text||"Hello World",r.fsize||10,r.fcolor||"#000",r.bcolor||"#fff",!r.backVisible,r.tAlign||0));else if(r.texturePrefab.src||r.assetTexture&&r.prefab.assetTextures){let l=r.assetTexture&&r.prefab.assetTextures,c=l?w(r.assetTexture+"/texture"):o.getTextureByName(n);if(c="BILLBOARD"==r.objType?w("pubs/b_"+(r.poster||t.randInt(1,e.billboardCnt))):c,c="FLAG"==r.objType?w("zone_r"):c,c="LIGHT_CONE"==r.objType?w("lightcone_"+(r.fullcone?1:0)):c,c="SPECTATE_CAM"==r.objType?w("spectatecam_0"):c,c="RUNE"==r.objType?w("rune_0"):c,"default"==c.src)return r.defaultMaterial.map=void 0;if(h[c.src])r.defaultMaterial.map=h[c.src].clone(),r.defaultMaterial.map.needsUpdate=!0,r.defaultMaterial.map.offset.x=r.texOffX||0,r.defaultMaterial.map.offset.y=r.texOffY||0,r.defaultMaterial.map.repeat.set(r.frameCount?1/r.frameCount:1,1),r.defaultMaterial.needsUpdate=!0;else if(c.src.startsWith("custom_")){var s=new a.Texture(o.missingTexture);s.wrapS=a.RepeatWrapping,s.wrapT=a.RepeatWrapping,s.repeat.set(1,1),s.minFilter=c.filter||a.NearestFilter,s.magFilter=c.filter||a.NearestFilter,s.offset.x=r.texOffX||0,s.offset.y=r.texOffY||0,s.needsUpdate=!0,h[c.src]=s,r.defaultMaterial.map=s,r.defaultMaterial.needsUpdate=!0}else i.load(l?t.userAssetsUrl(c.src+".png"):t.assetsUrl("/textures/"+c.src+".png"),e=>{e.wrapS=a.RepeatWrapping,e.wrapT=a.RepeatWrapping,e.repeat.set(r.frameCount?1/r.frameCount:1,1),e.minFilter=c.filter||a.NearestFilter,e.magFilter=c.filter||a.NearestFilter,e.offset.x=r.texOffX||0,e.offset.y=r.texOffY||0,e.needsUpdate=!0,h[c.src]=e,r.defaultMaterial.map=e,r.defaultMaterial.needsUpdate=!0},void 0,(function(){var e=new a.Texture(o.missingTexture);e.wrapS=a.RepeatWrapping,e.wrapT=a.RepeatWrapping,e.repeat.set(1,1),e.minFilter=c.filter||a.NearestFilter,e.magFilter=c.filter||a.NearestFilter,e.offset.x=r.texOffX||0,e.offset.y=r.texOffY||0,e.needsUpdate=!0,h[c.src]=e,r.defaultMaterial.map=e,r.defaultMaterial.needsUpdate=!0}))}else r.defaultMaterial.map=void 0},this.missingTexture=new Image,this.missingTexture.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACAgMAAAAP2OW3AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxQTFRF/wDbAAAAAAAA/wDbC5gN/AAAAAR0Uk5T/P/9/02rixUAAAAMSURBVHicYxBg2AAAAOQAwSeo6FcAAAAASUVORK5CYII="}}},function(e,t,i){var n=i(3);const r=i(1);i(2);var a={};e.exports.getColor=function(e,t){var i=e+"-"+(t||""),r=a[i];if(!r){r=new n.Color(e),t&&r.multiplyScalar(t);var s={};r.getHSL(s),s.s=Math.min(1,1.5*s.s),r.setHSL(s.h,s.s,s.l),a[i]=r}return r},e.exports.colorize=function(t,i,n){i=n||e.exports.getColor(i);for(var r=0;r<t.faces.length;++r)t.faces[r].vertexColors[0]=i,t.faces[r].vertexColors[1]=i,t.faces[r].vertexColors[2]=i};var s,o=function(e,t,i,r){for(var a,s=new n.Vector2(t,i).multiplyScalar(r||1),o=0;o<e.faceVertexUvs.length;o++){a=e.faceVertexUvs[o];for(var l=0;l<a.length;l++)for(var c,d=0;3>d;d++)(c=a[l][d].multiply(s)).x=.5+c.x-s.x/2}},l=function(e,t,i,n,r,a){return e>=i-r&&e<=i+r&&t>=n-a&&t<=n+a},c=[],d=["a","b","c","d"];e.exports.generatePlane=function(t,i,a,p,h,u){t*=a.ratio||1;var f=(a.scale?t+"_"+i+"_":"")+(a.scale||"s")+(a.tilesX||"x")+(a.tilesZ||"z")+(a.noise?p+"_"+h+"_"+u:"n")+(null==a.colr?"c":a.colr)+(a.dark||"d")+(a.tess||"td");if(!(s=c[f])){var m=a.tilesX||1,g=a.tilesZ||1;if(a.tess&&(m=Math.min(r.maxSegs,Math.max(1,Math.ceil(t/a.tess))),g=Math.min(r.maxSegs,Math.max(1,Math.ceil(i/a.tess)))),s=new n.PlaneGeometry(1,1,m,g),a.noise){for(var y={},v=a.margin||0,w=0;w<s.vertices.length;++w){var b=s.vertices[w].x,x=s.vertices[w].y;if(!a.pinEdges||-.5!=b&&.5!=b&&-.5!=x&&.5!=x)if(a.objects){for(var S=0;S<a.objects.length;++S)if(a.objects[S].y-a.objects[S].height<=h+.1&&a.objects[S].y+a.objects[S].height>h+a.noise&&l(u+-x*t*2,p+b*i*2,a.objects[S].z,a.objects[S].x,a.objects[S].length+v,a.objects[S].width+v)){s.vertices[w].z=Math.random()*a.noise+1,y[w]=e.exports.getColor(a.colr,.6);break}}else s.vertices[w].z=Math.random()*a.noise;y[w]||(y[w]=e.exports.getColor(a.colr))}for(w=0;w<s.faces.length;w++){for(var M=s.faces[w],T=0,_=0;3>_;_++)M.vertexColors[_]=y[M[d[_]]],0>=s.vertices[M[d[_]]].z&&T++;3<=T&&delete s.faces[w]}s.faces=s.faces.filter((function(e){return e})),s.elementsNeedUpdate=!0}else e.exports.colorize(s,null,e.exports.getColor(a.colr||"#ffffff",a.dark||1));a.scale&&o(s,i/r.worldUV,t/r.worldUV,a.scale),s.computeVertexNormals(),c[f]=s}return s};var p=[];e.exports.generateCube=function(t,i,a,l,c){t=t||[1,1,1,1,1,1],c.flipp=(i>a||l>a)&&"floor_0"==c.src,c.flippW=i>l&&"floor_0"==c.src;for(var d=(c.scale?i+"_"+a+"_"+l+"_":"")+(null==c.colr?"":c.colr)+(c.scale||"")+(c.flippW?"flw":"fnw")+(c.flipp?"fl":"fn")+(c.useScale||"")+(c.tess||"td")+(c.noAmb||"na"),h=0;h<t.length;++h)d+="_"+t[h];if(!(s=p[d])){c.colr=null==c.colr?"#ffffff":c.colr;var u=hSeg=lSeg=1;c.tess&&(u=Math.min(r.maxSegs,Math.max(1,Math.ceil(i/c.tess))),hSeg=Math.min(r.maxSegs,Math.max(1,Math.ceil(a/c.tess))),lSeg=Math.min(r.maxSegs,Math.max(1,Math.ceil(l/c.tess))));var f,m,g=!1;c.tess||c.noAmb||(g=!0),g&&(f=e.exports.getColor(c.colr),m=c.amb?e.exports.getColor(c.colr,.7):f),s=new n.Geometry;var y,v=[];t[0]&&((y=new n.PlaneGeometry(1,1,lSeg,hSeg)).rotateY(Math.PI/2),c.flipp&&y.rotateX(Math.PI/2),y.translate(.5,.5,0),g&&(y.faces[0].vertexColors=[f,m,f],y.faces[1].vertexColors=[m,m,f]),c.scale&&o(y,(c.flipp?a:l)/r.worldUV,(c.flipp?l:a)/r.worldUV,c.scale),v.push(y)),t[1]&&((y=new n.PlaneGeometry(1,1,lSeg,hSeg)).rotateY(-Math.PI/2),c.flipp&&y.rotateX(Math.PI/2),y.translate(-.5,.5,0),g&&(y.faces[0].vertexColors=[f,m,f],y.faces[1].vertexColors=[m,m,f]),c.scale&&o(y,(c.flipp?a:l)/r.worldUV,(c.flipp?l:a)/r.worldUV,c.scale),v.push(y)),t[2]&&((y=new n.PlaneGeometry(1,1,u,lSeg)).rotateX(-Math.PI/2),c.flippW&&y.rotateY(Math.PI/2),y.translate(0,1,0),g&&(y.faces[0].vertexColors=[f,f,f],y.faces[1].vertexColors=[f,f,f]),c.scale&&o(y,(c.flippW?l:i)/r.worldUV,(c.flippW?i:l)/r.worldUV,c.scale),v.push(y)),t[3]&&((y=new n.PlaneGeometry(1,1,u,lSeg)).rotateX(Math.PI/2),c.flippW&&y.rotateY(Math.PI/2),y.translate(0,0,0),g&&(y.faces[0].vertexColors=[m,m,m],y.faces[1].vertexColors=[m,m,m]),c.scale&&o(y,(c.flippW?l:i)/r.worldUV,(c.flippW?i:l)/r.worldUV,c.scale),v.push(y)),t[4]&&(y=new n.PlaneGeometry(1,1,u,hSeg),c.flipp&&y.rotateZ(Math.PI/2),y.translate(0,.5,.5),g&&(y.faces[0].vertexColors=[f,m,f],y.faces[1].vertexColors=[m,m,f]),c.scale&&o(y,(c.flipp?a:i)/r.worldUV,(c.flipp?i:a)/r.worldUV,c.scale),v.push(y)),t[5]&&((y=new n.PlaneGeometry(1,1,u,hSeg)).rotateY(Math.PI),c.flipp&&y.rotateZ(Math.PI/2),y.translate(0,.5,-.5),g&&(y.faces[0].vertexColors=[f,m,f],y.faces[1].vertexColors=[m,m,f]),c.scale&&o(y,(c.flipp?a:i)/r.worldUV,(c.flipp?i:a)/r.worldUV,c.scale),v.push(y));for(h=0;h<v.length;h++)s.merge(v[h],new n.Matrix4);c&&c.useScale&&(s.scale(i,a,l),s.translate(0,-a/2,0)),g||e.exports.colorize(s,null,e.exports.getColor(c.colr)),s.mergeVertices(),p[d]=s}return s};var h=[];e.exports.generateCone=function(t,i){var r=(i.useScale||"u")+(i.closC||"c")+(i.sides||"s")+(null==i.colr?"co":i.colr)+(i.dark||"d")+(i.vNoise||"v");if(!(s=h[r])){if(s=new n.ConeGeometry(1,1,i.sides||10,1,!i.closC),i&&!i.useScale&&s.translate(0,.5,0),i&&i.vNoise){for(var a,o=0;o<s.vertices.length;++o)a=Math.random()*i.vNoise,s.vertices[o].x+=a,s.vertices[o].y+=a,s.vertices[o].z+=a;s.verticesNeedUpdate=!0}e.exports.colorize(s,null,e.exports.getColor(i.colr||"#ffffff",i.dark||1)),h[r]=s}return s};var u=[];e.exports.generateSphere=function(t,i,r,a){var o=(a.scale?t+"_"+i+"_"+r+"_":"")+(null==a.colr?"c":a.colr)+(a.scale||"s")+(a.useScale||"u")+(a.vNoise||"v")+(a.coat||"o");if(!(s=u[o])){if(a.colr=null==a.colr?"#ffffff":a.colr,s=new n.SphereGeometry(1,12,8),a&&a.vNoise){for(var l,c=0;c<s.vertices.length;++c)l=Math.random()*a.vNoise,s.vertices[c].x+=l,s.vertices[c].y+=l,s.vertices[c].z+=l;s.verticesNeedUpdate=!0}if(a&&a.useScale&&s.scale(t/2,i/2,r/2),e.exports.colorize(s,null,e.exports.getColor(a.colr||"#ffffff",a.dark||1)),a.coat)for(c=0;c<s.faces.length;++c)if(.5<=s.faces[c].normal.y){var d=e.exports.getColor(a.coat);s.faces[c].vertexColors[0]=d,s.faces[c].vertexColors[1]=d,s.faces[c].vertexColors[2]=d}u[o]=s}return s};var f=[];e.exports.generateCylinder=function(t){var i=(null==t.colr?"c":t.colr)+(t.useScale||"u")+(t.sides||"s")+(t.open||"o")+(t.vNoise||"v");if(!(s=f[i])){if(t.colr=null==t.colr?"#ffffff":t.colr,s=new n.CylinderGeometry(1,1,1,t.sides||12,1,t.open||!1),t&&t.vNoise){for(var r,a=0;a<s.vertices.length;++a)r=Math.random()*t.vNoise,s.vertices[a].x+=r,s.vertices[a].y+=r,s.vertices[a].z+=r;s.verticesNeedUpdate=!0}t&&!t.useScale&&s.translate(0,.5,0),e.exports.colorize(s,null,e.exports.getColor(t.colr||"#ffffff",1)),f[i]=s}return s}},,function(e,t){},function(e,t,i){t.encode=i(19).encode,t.decode=i(24).decode,t.Encoder=i(46).Encoder,t.Decoder=i(47).Decoder,t.createCodec=i(48).createCodec,t.codec=i(49).codec},function(e,t,i){(function(t){function i(e){return e&&e.isBuffer&&e}e.exports=i(void 0!==t&&t)||i(this.Buffer)||i("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,i(21).Buffer)},function(e,t,i){"use strict";t.byteLength=function(e){var t=c(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){for(var t,i=c(e),n=i[0],s=i[1],o=new a(function(e,t,i){return 3*(t+i)/4-i}(0,n,s)),l=0,d=0<s?n-4:n,p=0;p<d;p+=4)t=r[e.charCodeAt(p)]<<18|r[e.charCodeAt(p+1)]<<12|r[e.charCodeAt(p+2)]<<6|r[e.charCodeAt(p+3)],o[l++]=255&t>>16,o[l++]=255&t>>8,o[l++]=255&t;return 2===s&&(t=r[e.charCodeAt(p)]<<2|r[e.charCodeAt(p+1)]>>4,o[l++]=255&t),1===s&&(t=r[e.charCodeAt(p)]<<10|r[e.charCodeAt(p+1)]<<4|r[e.charCodeAt(p+2)]>>2,o[l++]=255&t>>8,o[l++]=255&t),o},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,a=[],s=16383,o=0,l=i-r;o<l;o+=s)a.push(p(e,o,o+s>l?l:o+s));return 1===r?(t=e[i-1],a.push(n[t>>2]+n[63&t<<4]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[63&t>>4]+n[63&t<<2]+"=")),a.join("")};for(var n=[],r=[],a="undefined"==typeof Uint8Array?Array:Uint8Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function d(e){return n[63&e>>18]+n[63&e>>12]+n[63&e>>6]+n[63&e]}function p(e,t,i){for(var n,r=[],a=t;a<i;a+=3)n=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]),r.push(d(n));return r.join("")}r[45]=62,r[95]=63},function(e,t,i){var n=i(0);function r(e){return Array(e)}(t=e.exports=r(0)).alloc=r,t.concat=n.concat,t.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},function(e,t,i){var n=i(0),r=n.global;function a(e){return new r(e)}(t=e.exports=n.hasBuffer?a(0):[]).alloc=n.hasBuffer&&r.alloc||a,t.concat=n.concat,t.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return r.from&&1!==r.from.length?r.from(e):new r(e)}},function(e,t,i){var n=i(0);function r(e){return new Uint8Array(e)}(t=e.exports=n.hasArrayBuffer?r(0):[]).alloc=r,t.concat=n.concat,t.from=function(e){if(n.isView(e)){var i=e.byteOffset,r=e.byteLength;(e=e.buffer).byteLength!==r&&(e.slice?e=e.slice(i,i+r):(e=new Uint8Array(e)).byteLength!==r&&(e=Array.prototype.slice.call(e,i,i+r)))}else{if("string"==typeof e)return n.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},function(e,t){t.copy=function(e,t,i,n){var r;i||(i=0),n||0===n||(n=this.length),t||(t=0);var a=n-i;if(e===this&&i<t&&t<n)for(r=a-1;0<=r;r--)e[r+t]=this[r+i];else for(r=0;r<a;r++)e[r+t]=this[r+i];return a},t.toString=function(e,t,i){var n=this,r=0|t;i||(i=n.length);for(var a="",s=0;r<i;)128>(s=n[r++])?a+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[r++]:224==(240&s)?s=(15&s)<<12|(63&n[r++])<<6|63&n[r++]:240==(248&s)&&(s=(7&s)<<18|(63&n[r++])<<12|(63&n[r++])<<6|63&n[r++]),65536<=s?(s-=65536,a+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):a+=String.fromCharCode(s));return a},t.write=function(e,t){for(var i=this,n=t||(t|=0),r=e.length,a=0,s=0;s<r;)128>(a=e.charCodeAt(s++))?i[n++]=a:2048>a?(i[n++]=192|a>>>6,i[n++]=128|63&a):55296>a||57343<a?(i[n++]=224|a>>>12,i[n++]=128|63&a>>>6,i[n++]=128|63&a):(a=65536+(a-55296<<10|e.charCodeAt(s++)-56320),i[n++]=240|a>>>18,i[n++]=128|63&a>>>12,i[n++]=128|63&a>>>6,i[n++]=128|63&a);return n-t}},function(e,t,i){t.setExtPackers=function(e){e.addExtPacker(14,Error,[p,l]),e.addExtPacker(1,EvalError,[p,l]),e.addExtPacker(2,RangeError,[p,l]),e.addExtPacker(3,ReferenceError,[p,l]),e.addExtPacker(4,SyntaxError,[p,l]),e.addExtPacker(5,TypeError,[p,l]),e.addExtPacker(6,URIError,[p,l]),e.addExtPacker(10,RegExp,[d,l]),e.addExtPacker(11,Boolean,[c,l]),e.addExtPacker(12,String,[c,l]),e.addExtPacker(13,Date,[Number,l]),e.addExtPacker(15,Number,[c,l]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,s),e.addExtPacker(20,Uint16Array,s),e.addExtPacker(21,Int32Array,s),e.addExtPacker(22,Uint32Array,s),e.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,s),e.addExtPacker(26,ArrayBuffer,s),e.addExtPacker(29,DataView,s)),r.hasBuffer&&e.addExtPacker(27,a,r.from)};var n,r=i(0),a=r.global,s=r.Uint8Array.from,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function l(e){return n||(n=i(19).encode),n(e)}function c(e){return e.valueOf()}function d(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function p(e){var t={};for(var i in o)t[i]=e[i];return t}},function(e,t,i){var n=i(5),r=i(11),a=r.Uint64BE,s=r.Int64BE,o=i(0),l=i(10),c=i(43),d=i(22).uint8,p=i(8).ExtBuffer,h="undefined"!=typeof Uint8Array,u="undefined"!=typeof Map,f=[];f[1]=212,f[2]=213,f[4]=214,f[8]=215,f[16]=216,t.getWriteType=function(e){function t(e,t){if(null===t)return i(e,t);if(w(t))return b(e,t);if(n(t))return function(e,t){var i=t.length;g[16>i?144+i:65535>=i?220:221](e,i);for(var n=e.codec.encode,r=0;r<i;r++)n(e,t[r])}(e,t);if(a.isUint64BE(t))return function(e,t){g[207](e,t.toArray())}(e,t);if(s.isInt64BE(t))return function(e,t){g[211](e,t.toArray())}(e,t);var r=e.codec.getExtPacker(t);return r&&(t=r(t)),t instanceof p?function(e,t){var i=t.buffer,n=i.length,r=f[n]||(255>n?199:65535>=n?200:201);g[r](e,n),d[t.type](e),e.send(i)}(e,t):void x(e,t)}function i(e,t){g[192](e,t)}function r(e,t){var i=t.length;g[255>i?196:65535>=i?197:198](e,i),e.send(t)}function m(e,t){var i=Object.keys(t),n=i.length;g[16>n?128+n:65535>=n?222:223](e,n);var r=e.codec.encode;i.forEach((function(i){r(e,i),r(e,t[i])}))}var g=c.getWriteToken(e),y=e&&e.useraw,v=h&&e&&e.binarraybuffer,w=v?o.isArrayBuffer:o.isBuffer,b=v?function(e,t){r(e,new Uint8Array(t))}:r,x=u&&e&&e.usemap?function(e,t){if(!(t instanceof Map))return m(e,t);var i=t.size;g[16>i?128+i:65535>=i?222:223](e,i);var n=e.codec.encode;t.forEach((function(t,i){n(e,i),n(e,t)}))}:m;return{boolean:function(e,t){g[t?195:194](e,t)},function:i,number:function(e,t){var i=0|t;t===i?g[-32<=i&&127>=i?255&i:0<=i?255>=i?204:65535>=i?205:206:-128<=i?208:-32768<=i?209:210](e,i):g[203](e,t)},object:y?function(e,i){return w(i)?function(e,t){var i=t.length;g[32>i?160+i:65535>=i?218:219](e,i),e.send(t)}(e,i):void t(e,i)}:t,string:function(e){return function(t,i){var n=i.length,r=5+3*n;t.offset=t.reserve(r);var a=t.buffer,s=e(n),o=t.offset+s;n=l.write.call(a,i,o);var c=e(n);if(s!==c){var d=o+n;l.copy.call(a,a,o+c-s,o,d)}g[1===c?160+n:3>=c?215+c:219](t,n),t.offset+=n}}(y?function(e){return 32>e?1:65535>=e?3:5}:function(e){return 32>e?1:255>=e?2:65535>=e?3:5}),symbol:i,undefined:i}}},function(e,t,i){var n=i(9),r=i(11),a=r.Uint64BE,s=r.Int64BE,o=i(22).uint8,l=i(0),c=l.global,d=l.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c&&!c.TYPED_ARRAY_SUPPORT,p=l.hasBuffer&&c.prototype||{};function h(){var e=o.slice();return e[196]=u(196),e[197]=f(197),e[198]=m(198),e[199]=u(199),e[200]=f(200),e[201]=m(201),e[202]=g(202,4,p.writeFloatBE||w,!0),e[203]=g(203,8,p.writeDoubleBE||b,!0),e[204]=u(204),e[205]=f(205),e[206]=m(206),e[207]=g(207,8,y),e[208]=u(208),e[209]=f(209),e[210]=m(210),e[211]=g(211,8,v),e[217]=u(217),e[218]=f(218),e[219]=m(219),e[220]=f(220),e[221]=m(221),e[222]=f(222),e[223]=m(223),e}function u(e){return function(t,i){var n=t.reserve(2),r=t.buffer;r[n++]=e,r[n]=i}}function f(e){return function(t,i){var n=t.reserve(3),r=t.buffer;r[n++]=e,r[n++]=i>>>8,r[n]=i}}function m(e){return function(t,i){var n=t.reserve(5),r=t.buffer;r[n++]=e,r[n++]=i>>>24,r[n++]=i>>>16,r[n++]=i>>>8,r[n]=i}}function g(e,t,i,n){return function(r,a){var s=r.reserve(t+1);r.buffer[s++]=e,i.call(r.buffer,a,s,n)}}function y(e,t){new a(this,t,e)}function v(e,t){new s(this,t,e)}function w(e,t){n.write(this,e,t,!1,23,4)}function b(e,t){n.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?function(){var e=h();return e[202]=g(202,4,w),e[203]=g(203,8,b),e}():d||l.hasBuffer&&e&&e.safe?function(){var e=o.slice();return e[196]=g(196,1,c.prototype.writeUInt8),e[197]=g(197,2,c.prototype.writeUInt16BE),e[198]=g(198,4,c.prototype.writeUInt32BE),e[199]=g(199,1,c.prototype.writeUInt8),e[200]=g(200,2,c.prototype.writeUInt16BE),e[201]=g(201,4,c.prototype.writeUInt32BE),e[202]=g(202,4,c.prototype.writeFloatBE),e[203]=g(203,8,c.prototype.writeDoubleBE),e[204]=g(204,1,c.prototype.writeUInt8),e[205]=g(205,2,c.prototype.writeUInt16BE),e[206]=g(206,4,c.prototype.writeUInt32BE),e[207]=g(207,8,y),e[208]=g(208,1,c.prototype.writeInt8),e[209]=g(209,2,c.prototype.writeInt16BE),e[210]=g(210,4,c.prototype.writeInt32BE),e[211]=g(211,8,v),e[217]=g(217,1,c.prototype.writeUInt8),e[218]=g(218,2,c.prototype.writeUInt16BE),e[219]=g(219,4,c.prototype.writeUInt32BE),e[220]=g(220,2,c.prototype.writeUInt16BE),e[221]=g(221,4,c.prototype.writeUInt32BE),e[222]=g(222,2,c.prototype.writeUInt16BE),e[223]=g(223,4,c.prototype.writeUInt32BE),e}():h()}},function(e,t,i){t.setExtUnpackers=function(e){e.addExtUnpacker(14,[o,c(Error)]),e.addExtUnpacker(1,[o,c(EvalError)]),e.addExtUnpacker(2,[o,c(RangeError)]),e.addExtUnpacker(3,[o,c(ReferenceError)]),e.addExtUnpacker(4,[o,c(SyntaxError)]),e.addExtUnpacker(5,[o,c(TypeError)]),e.addExtUnpacker(6,[o,c(URIError)]),e.addExtUnpacker(10,[o,l]),e.addExtUnpacker(11,[o,d(Boolean)]),e.addExtUnpacker(12,[o,d(String)]),e.addExtUnpacker(13,[o,d(Date)]),e.addExtUnpacker(15,[o,d(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,d(Int8Array)),e.addExtUnpacker(18,d(Uint8Array)),e.addExtUnpacker(19,[p,d(Int16Array)]),e.addExtUnpacker(20,[p,d(Uint16Array)]),e.addExtUnpacker(21,[p,d(Int32Array)]),e.addExtUnpacker(22,[p,d(Uint32Array)]),e.addExtUnpacker(23,[p,d(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[p,d(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,d(Uint8ClampedArray)),e.addExtUnpacker(26,p),e.addExtUnpacker(29,[p,d(DataView)])),r.hasBuffer&&e.addExtUnpacker(27,d(a))};var n,r=i(0),a=r.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function o(e){return n||(n=i(24).decode),n(e)}function l(e){return RegExp.apply(null,e)}function c(e){return function(t){var i=new e;for(var n in s)i[n]=t[n];return i}}function d(e){return function(t){return new e(t)}}function p(e){return new Uint8Array(e).buffer}},function(e,t,i){var n=i(26);function r(e){var t,i=Array(256);for(t=0;127>=t;t++)i[t]=a(t);for(t=128;143>=t;t++)i[t]=o(t-128,e.map);for(t=144;159>=t;t++)i[t]=o(t-144,e.array);for(t=160;191>=t;t++)i[t]=o(t-160,e.str);for(i[192]=a(null),i[193]=null,i[194]=a(!1),i[195]=a(!0),i[196]=s(e.uint8,e.bin),i[197]=s(e.uint16,e.bin),i[198]=s(e.uint32,e.bin),i[199]=s(e.uint8,e.ext),i[200]=s(e.uint16,e.ext),i[201]=s(e.uint32,e.ext),i[202]=e.float32,i[203]=e.float64,i[204]=e.uint8,i[205]=e.uint16,i[206]=e.uint32,i[207]=e.uint64,i[208]=e.int8,i[209]=e.int16,i[210]=e.int32,i[211]=e.int64,i[212]=o(1,e.ext),i[213]=o(2,e.ext),i[214]=o(4,e.ext),i[215]=o(8,e.ext),i[216]=o(16,e.ext),i[217]=s(e.uint8,e.str),i[218]=s(e.uint16,e.str),i[219]=s(e.uint32,e.str),i[220]=s(e.uint16,e.array),i[221]=s(e.uint32,e.array),i[222]=s(e.uint16,e.map),i[223]=s(e.uint32,e.map),t=224;255>=t;t++)i[t]=a(t-256);return i}function a(e){return function(){return e}}function s(e,t){return function(i){var n=e(i);return t(i,n)}}function o(e,t){return function(i){return t(i,e)}}t.getReadToken=function(e){var t=n.getReadFormat(e);return e&&e.useraw?function(e){var t,i=r(e).slice();for(i[217]=i[196],i[218]=i[197],i[219]=i[198],t=160;191>=t;t++)i[t]=o(t-160,e.bin);return i}(t):r(t)}},function(e,t,i){t.Encoder=a;var n=i(27),r=i(20).EncodeBuffer;function a(e){return this instanceof a?void r.call(this,e):new a(e)}a.prototype=new r,n.mixin(a.prototype),a.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},a.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},function(e,t,i){t.Decoder=a;var n=i(27),r=i(25).DecodeBuffer;function a(e){return this instanceof a?void r.call(this,e):new a(e)}a.prototype=new r,n.mixin(a.prototype),a.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},a.prototype.push=function(e){this.emit("data",e)},a.prototype.end=function(e){this.decode(e),this.emit("end")}},function(e,t,i){i(12),i(7),t.createCodec=i(6).createCodec},function(e,t,i){i(12),i(7),t.codec={preset:i(6).preset}},function(e,t){e.exports=[{id:"ffa",name:"Free for All",alias:"ffa"},{id:"tdm",name:"Team Deathmatch",endStats:["sid","name","score","kills","deaths","assists","reward"],alias:"tdm",teams:!0},{id:"point",name:"Hardpoint",alias:"point",endStats:["sid","name","score","kills","deaths","objective","reward"],objective:!0,teams:!0,gameStart:function(e){e.activeObjective=-1,e.nextObjective(null,!0)}},{id:"ctf",name:"Capture the Flag",alias:"ctf",endStats:["sid","name","score","kills","deaths","caps","reward"],onKill:function(e,t,i){e.dropFlag(i.flag)},flags:!0,teams:!0,noScoreC:!0},{id:"bhop",name:"Parkour",alias:"bhop",sendR:5,endStats:["sid","name","score","deaths"],noKick:!0,friendly:!0},{id:"hide",name:"Hide & Seek",alias:"hide",endStats:["sid","name","score","found","reward"],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return 0<t?1:2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return 0<t}],minPlayers:2,waitTimers:[{time:1e4,msg:"picking seeker in ",trigger:function(e){e.pickSeeker()}},{time:45e3,msg:"releasing seeker in ",trigger:function(e){e.releaseSeeker()}}],spdMlt:{1:.8},teams:!0,teamOptions:["Hiders","Seekers"],killConv:!0,noKick:!0,showTeam:!0,convTeam:2,convWord:"found",noWeap:!0,friendly:!0,hideNames:!0},{id:"infect",name:"Infected",alias:"infect",endStats:["sid","name","score","kills","infected","reward"],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return 0<t?1:2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return 0<t}],minPlayers:2,waitTimers:[{time:2e4,msg:"infection in ",trigger:function(e){e.infectRandom()}}],teamClass:{2:9},spdMlt:{2:1.15},killConv:!0,noKick:!0,teams:!0,teamOptions:["Survivors","Infected"],convWord:"infected",convTeam:2},{id:"race",name:"Race",alias:"race",sendR:5,endStats:["sid","name","score","time"],gameTime:0,showMS:!0,timed:!0,endSort:function(e,t){return e.score===t.score&&e.gameTimer&&t.gameTimer?e.gameTimer-t.gameTimer:t.score-e.score},gameStart:function(e){e.lockMove(),e.targetScore=0;for(var t=0;t<e.map.manager.objects.length;++t)e.map.manager.objects[t].score&&(e.targetScore+=e.map.manager.objects[t].scoreP)},condition:[function(e){for(var t=0;t<e.players.list.length;++t)e.players.list[t].score>=e.targetScore&&!e.players.list[t].timer&&(e.players.list[t].timer=e.lastTimer,e.players.list[t].gameTimer=e.gameTimer,e.waitTimers||(e.waitTimers=[{time:1e4,contTime:!0,msg:"race ends in ",trigger:function(e){e.gameTimer="skip"}}]));return!0}],waitTimers:[{time:15e3,msg:"race starting in ",trigger:function(e){e.unlockMove()}}],noWeap:!0,friendly:!0},{id:"lms",name:"Last Man Standing",alias:"lms",endStats:["sid","name","score","kills","deaths","assists"],noRegen:!0,noKick:!0,teams:!0,lives:1,winCondition:function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)if(0<e.players.list[n].lives){var r=e.players.list[n].lives;1==e.players.list[n].team?t+=r:i+=r}return t>i?1:2},gameTime:3e5},{id:"simon",name:"Simon Says",alias:"simon",endStats:["sid","name","score","reward"],condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return 0<t}],minPlayers:3,waitTimers:[{time:1e4,msg:"starts in ",trigger:function(e){e.pickSimon()}}],teams:!0,teamOptions:["Followers","Simon"],noKick:!0,teamSee:["Followers","Simon"]},{id:"gun",name:"Gun Game",alias:"gun",endStats:["sid","name","weapon","kills","melees","setbacks","reward"],leaderStat:"weaponTier",endSort:function(e,t){return e.weaponTier===t.weaponTier&&e.kills&&t.kills?e.kills-t.kills:t.weaponTier-e.weaponTier},winCondition:function(e){for(var t=0,i=null,n=0;n<e.players.list.length;++n)(null==i||e.players.list[n].weaponTier>t)&&(t=e.players.list[n].weaponTier,i=e.players.list[n]);return 0==t?null:i},condition:[function(e){for(var t=0;t<e.players.list.length;++t)if(e.players.list[t].weaponTier>=e.mode.weaponOrder.length)return!1;return!0}],onKill:function(e,t,i,n,r){n&&n!=i?e.weaponConfig[null==r.wId?n.loadout[n.weaponIndex]:r.wId].melee?(e.decreaseWeapon(i),n.weaponTier==e.mode.weaponOrder.length-1&&e.increaseWeapon(n,r)):e.increaseWeapon(n,r):e.decreaseWeapon(i),t&&e.players.syncLeaders()},startingLoadout:[2],keepLoadout:!0,rewardMlt:50,noReward:!0,noAssists:!0,noStreaks:!0,minPlayers:2,noWeap:!0,noPickups:!0,weaponOrder:[2,16,10,4,11,5,3,9,1,14,6,0,7,8,13,15,12]},{id:"prop",name:"Prop Hunt",alias:"prop",genID:"p",tickR:20,endStats:["sid","name","score","kills"],noRegen:!0,noKick:!0,teams:!0,lives:1,winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&1==e.players.list[i].team&&t++;return 0<t?1:2},condition:[function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)0<e.players.list[n].lives&&e.players.list[n].active&&(1==e.players.list[n].team?t++:i++);return 1<=t&&1<=i}],minPlayers:2,waitTimers:[{time:1e4,msg:"locking seekers in ",trigger:function(e){e.lockSeekers()}},{time:3e4,msg:"releasing seekers in ",noJoin:!0,trigger:function(e){e.releaseSeeker()}}],teams:!0,teamOptions:["Prop","Seekers"],teamSort:!0,showTeam:!0,hideNames:!0},{id:"boss",name:"Boss Hunt",alias:"boss",winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&2==e.players.list[i].team&&t++;return 0<t?2:1},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&2==e.players.list[i].team&&t++;return 0<t}],waitTimers:[{time:15e3,msg:"picking boss in ",trigger:function(e){e.pickBoss()}}],teams:!0,teamOptions:["Heros","Boss"],noReward:!0,minPlayers:2},{id:"ranked",name:"Ranked",alias:"ranked",noReward:!0,preventCustomGames:!0,endStats:["sid","name","score","kills","deaths","MMR"],isRanked:!0,noKick:!0,needAll:!0,infEndTimer:!0,objective:!0,teams:!0,forceSpawn:15,waitTimers:[{time:1e4,msg:"starts in ",trigger:function(e){e.unlockMove()}}],gameStart:function(e){e.lockMove(),e.activeObjective=-1,e.nextObjective(null,!0)}},{id:"ranked",name:"Ranked",alias:"ranked",noReward:!0,preventCustomGames:!0,endStats:["sid","name","score","kills","deaths","MMR"],isRanked:!0,noKick:!0,needAll:!0,infEndTimer:!0,noRegen:!0,killSort:!0,forceSpawn:15,winCondition:function(e){for(var t=0,i=null,n=0;n<e.players.list.length;++n)(null==i||e.players.list[n].kills>t)&&(t=e.players.list[n].kills,i=e.players.list[n]);return 0==t?null:i},condition:[function(e){for(var t=0;t<e.players.list.length;++t)if(10<=e.players.list[t].kills)return!1;return!0}],waitTimers:[{time:1e4,msg:"starts in ",trigger:function(e){e.unlockMove()}}],gameStart:function(e){e.lockMove()}},{id:"stalk",name:"Stalker",alias:"stalk",endStats:["sid","name","score","reward"],genID:"st",ambInd:5,minPlayers:2,fogD:250,fogC:1842204,skyCol:1842204,lightCol:855309,ambCol:1513239,lives:1,condition:[function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)0<e.players.list[n].lives&&(1==e.players.list[n].team?t++:2==e.players.list[n].team&&i++);return 1<=t&&1<=i}],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)e.players.list[i].active&&2==e.players.list[i].team&&t++;return 0<t?2:1},waitTimers:[{time:15e3,msg:"picking stalker in ",trigger:function(e){e.pickStalker()}}],onMelee:function(e,t,i){var n=t&&i&&2==t.team;return n&&(e.triggerImgSound("scare_0","scare_0",i),e.players.changeHealth(t,null,-40)),n},hideNames:!0,noReward:!0,noKick:!0,teams:!0,teamOptions:["Living","Stalker"],spdMlt:{1:.65}},{id:"king",name:"King of the Hill",alias:"king",endStats:["sid","name","score","kills","deaths","objective","reward"],objective:!0,noScoreK:!0,objScore:20,gameStart:function(e){e.activeObjective=-1,e.nextObjective(null,!0)}},{id:"oinc",name:"One in the Chamber",alias:"oinc",endStats:["sid","name","kills","deaths","melees"],leaderStat:"lives",endSort:function(e,t){return e.lives===t.lives&&e.kills&&t.kills?t.kills-e.kills:t.lives-e.lives},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)0<e.players.list[i].lives&&t++;return 1<t}],winCondition:function(e){for(var t=0;t<e.players.list.length;++t)if(0<e.players.list[t].lives)return e.players.list[t];return null},waitTimers:[{time:1e4,msg:"starts in ",trigger:function(e){e.unlockMove()}},{time:100,msg:"",noJoin:!0,trigger:function(){}}],gameStart:function(e){e.lockMove()},onKill:function(e,t,i,n){n&&n!=i&&(n.ammos[0]++,7<n.ammos[0]&&(n.ammos[0]=7),t.send(n.id,"uamo",n.ammos)),t&&e.players.syncLeaders()},forceSpawn:3,lives:3,maxHealth:10,forceClass:10,ammoLimit:1,noReloads:!0,hideNames:!0,noReward:!0,noAssists:!0,noStreaks:!0,minPlayers:2,noPickups:!0},{id:"trade",name:"Trade",sendR:5,endStats:["sid","name","score"],alias:"trade",noKick:!0,canTrade:!0,friendly:!0,gameTime:0},{id:"kc",name:"Kill Confirmed",alias:"kc",endStats:["sid","name","score","kills","deaths","confirms","denies","reward"],endSort:function(e,t){return e.confirms===t.confirms&&e.kills&&t.kills?t.kills-e.kills:t.confirms-e.confirms},winCondition:function(e){for(var t,i=0,n=0,r=0;r<e.players.list.length;++r)t=e.players.list[r].confirms,1==e.players.list[r].team?i+=t:n+=t;return i>n?1:2},condition:[function(e){for(var t,i=0,n=0,r=0;r<e.players.list.length;++r)t=e.players.list[r].confirms,1==e.players.list[r].team?i+=t:n+=t;return!(i>=e.mode.tagLimit||n>=e.mode.tagLimit)}],onKill:function(e,t,i){e.dropSpawnable(0,i)},tagLimit:65,teams:!0,noScoreC:!0},{id:"def",name:"Defuse",alias:"def",site:!0,endStats:["sid","name","score","kills","deaths","reward"],lives:1,noRegen:!0,teams:!0,hitBoxPad:.5,gameStart:function(e){e.warmupReset(),e.lockMove()},realMov:!0,winCondition:function(e){for(var t,i=0,n=0;n<e.players.list.length;++n){if(t=e.players.list[n].team,e.players.list[n].diffuses)return t;e.players.list[n].active&&(1==t?i++:2==t&&0)}return 0<i?1:2},condition:[function(e){for(var t=0,i=e.activeBomb?1:0,n=0;n<e.players.list.length;++n){if(e.players.list[n].diffuses)return!1;0<e.players.list[n].lives&&(1==e.players.list[n].team?t++:i++)}return 1<=t&&1<=i}],onKill:function(e,t,i,n){var r=i.loadout.indexOf(17);if(-1<r)if(n&&n!=i)i.weaponIndex=r,e.players.dropWeapon(i);else{if(null==i.lastPicked[17])return;var a=e.players.findEmptyPickup(i.lastPicked[17],!0);if(a){var s=[a.orgX,a.orgY,a.orgZ];e.updatePickup(a.uid,17,null,!0,s),t.broadcast("game"+e.sid,"inat",-1,null,null,a.uid,17,!0,null,s)}}},waitTimers:[{time:1e4,comp:!0,noClear:!0,msg:"match starting in ",trigger:function(e,t,i){for(var n=0;n<e.players.list.length;++n)e.players.list[n].spectating?e.players.list[n].lives=0:i.send(e.players.list[n].id,"gmsg",2==e.players.list[n].team?"DESTROY THE OBJECTIVE":"DEFEND THE OBJECTIVE");e.unlockMove()}}]},{id:"shrp",name:"Sharp Shooter",alias:"shrp",endStats:["sid","name","score","kills","deaths","reward"],objWep:!0,gameStart:function(e){e.activeObjective=0,e.nextWeapon(null,!0)},forceClass:9},{id:"trai",name:"Traitor",alias:"trai",lives:1,teams:!0,noDeadChat:!0,noKillFeed:!0,teamOptions:["Innocent","Traitor"],teamColors:["#37ad47","#d13838"],showTeam:!0,noRegen:!0,fakeNames:!0,noScoreK:!0,dmgTeam:!0,winCondition:function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)if(0<e.players.list[n].lives){var r=e.players.list[n].lives;1==e.players.list[n].team?t+=r:i+=r}return t>i?1:2},condition:[function(e){for(var t=0,i=0,n=0;n<e.players.list.length;++n)0<e.players.list[n].lives&&e.players.list[n].active&&(1==e.players.list[n].team?t++:i++);return 1<=t&&1<=i}],waitTimers:[{time:15e3,msg:"picking traitors in ",trigger:function(e){e.pickTraitors()}}],onKill:function(e,t,i){e.waitTimers||e.AI.spawn(null,0,i.name+"'s Ghost",i.x,i.y,i.z)},noReward:!0,minPlayers:3},{id:"raid",name:"Raid",alias:"raid",sendR:5,endStats:["sid","name","score","time","dmg","reward"],showMS:!0,noRegen:!0,lives:1,gameTime:36e4,minPlayers:1,waitTimers:[{time:2e4,msg:"starting in "}],winCondition:function(e){for(var t=0,i=0;i<e.players.list.length;++i)0<e.players.list[i].lives&&t++;return 0<e.gameTimerP&&0<t?1:2},condition:[function(e){for(var t=0,i=0;i<e.players.list.length;++i)0<e.players.list[i].lives&&e.players.list[i].active&&t++;return 0<t}],onEnd:function(e,t){if(!(0>=e.gameTimerP))for(var i,n=0;n<e.players.list.length;++n)!(i=e.players.list[n]).timer&&i.active&&(i.timer=t.getTime(e.mode.gameTime-(e.gameTimerP||0)),i.gameTimer=e.mode.gameTime-(e.gameTimerP||0),i.account&&0<i.gameTimer&&e.isCustom)},noWeap:!0,friendly:!0,noClan:!0,noFreeCam:!0,specMaxD:25},{id:"blitz",name:"Blitz",alias:"blitz",endStats:["sid","name","score","kills","deaths","caps"],onKill:function(e,t,i){e.dropFlag(i.flag)},rush:!0,flags:!0,teams:!0,noScoreC:!0}]},function(e,t){e.exports=function(e){return{computeTangents:function(t){function i(e,t,i){m.fromArray(o,3*e),g.fromArray(o,3*t),y.fromArray(o,3*i),v.fromArray(c,2*e),w.fromArray(c,2*t),b.fromArray(c,2*i),g.sub(m),y.sub(m),w.sub(v),b.sub(v);var n=1/(w.x*b.y-b.x*w.y);isFinite(n)&&(x.copy(g).multiplyScalar(b.y).addScaledVector(y,-w.y).multiplyScalar(n),S.copy(y).multiplyScalar(w.x).addScaledVector(g,-b.x).multiplyScalar(n),h[e].add(x),h[t].add(x),h[i].add(x),u[e].add(S),u[t].add(S),u[i].add(S))}function n(e){L.fromArray(l,3*e),I.copy(L),E=h[e],R.copy(E),R.sub(L.multiplyScalar(L.dot(E))).normalize(),k.crossVectors(I,E),A=k.dot(u[e]),C=0>A?-1:1,p[4*e]=R.x,p[4*e+1]=R.y,p[4*e+2]=R.z,p[4*e+3]=C}var r=t.index,a=t.attributes;if(null!==r&&void 0!==a.position&&void 0!==a.normal&&void 0!==a.uv){var s=r.array,o=a.position.array,l=a.normal.array,c=a.uv.array,d=o.length/3;void 0===a.tangent&&t.setAttribute("tangent",new e.BufferAttribute(new Float32Array(4*d),4));for(var p=a.tangent.array,h=[],u=[],f=0;f<d;f++)h[f]=new e.Vector3,u[f]=new e.Vector3;var m=new e.Vector3,g=new e.Vector3,y=new e.Vector3,v=new e.Vector2,w=new e.Vector2,b=new e.Vector2,x=new e.Vector3,S=new e.Vector3,M=t.groups;0===M.length&&(M=[{start:0,count:s.length}]);f=0;for(var T=M.length;f<T;++f)for(var _=D=(P=M[f]).start,O=D+P.count;_<O;_+=3)i(s[_+0],s[_+1],s[_+2]);var C,E,A,R=new e.Vector3,k=new e.Vector3,L=new e.Vector3,I=new e.Vector3;for(f=0,T=M.length;f<T;++f){var P,D;for(_=D=(P=M[f]).start,O=D+P.count;_<O;_+=3)n(s[_+0]),n(s[_+1]),n(s[_+2])}}else console.error("THREE.BufferGeometryUtils: .computeTangents() failed. Missing required attributes (index, position, normal or uv)")},mergeBufferGeometries:function(t,i){for(var n=null!==t[0].index,r=new Set(Object.keys(t[0].attributes)),a=new Set(Object.keys(t[0].morphAttributes)),s={},o={},l=t[0].morphTargetsRelative,c=new e.BufferGeometry,d=0,p=0;p<t.length;++p){var h=t[p],u=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var f in h.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[f]&&(s[f]=[]),s[f].push(h.attributes[f]),u++}if(u!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". Make sure all geometries have the same number of attributes."),null;if(l!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var f in h.morphAttributes){if(!a.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[f]&&(o[f]=[]),o[f].push(h.morphAttributes[f])}if(c.userData.mergedUserData=c.userData.mergedUserData||[],c.userData.mergedUserData.push(h.userData),i){var m;if(n)m=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+p+". The geometry must have either an index or a position attribute"),null;m=h.attributes.position.count}c.addGroup(d,m,p),d+=m}}if(n){var g,y=0,v=[];for(p=0;p<t.length;++p){g=t[p].index;for(var w=0;w<g.count;++w)v.push(g.getX(w)+y);y+=t[p].attributes.position.count}c.setIndex(v)}for(var f in s){var b=this.mergeBufferAttributes(s[f]);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" attribute."),null;c.setAttribute(f,b)}for(var f in o){var x=o[f][0].length;if(0===x)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[f]=[];var S;for(p=0;p<x;++p){S=[];for(w=0;w<o[f].length;++w)S.push(o[f][w][p]);var M=this.mergeBufferAttributes(S);if(!M)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" morphAttribute."),null;c.morphAttributes[f].push(M)}}return c},mergeBufferAttributes:function(t){for(var i,n,r,a,s=0,o=0;o<t.length;++o){if((a=t[o]).isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===i&&(i=a.array.constructor),i!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=a.normalized),r!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=a.array.length}var l=new i(s),c=0;for(o=0;o<t.length;++o)l.set(t[o].array,c),c+=t[o].array.length;return new e.BufferAttribute(l,n,r)},interleaveAttributes:function(t){for(var i,n=0,r=0,a=0,s=t.length;a<s;++a){if(u=t[a],void 0===i&&(i=u.array.constructor),i!==u.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;n+=u.array.length,r+=u.itemSize}var o=new e.InterleavedBuffer(new i(n),r),l=0,c=[],d=["getX","getY","getZ","getW"],p=["setX","setY","setZ","setW"],h=0;for(s=t.length;h<s;h++){var u,f=(u=t[h]).itemSize,m=u.count,g=new e.InterleavedBufferAttribute(o,f,l,u.normalized);c.push(g),l+=f;for(var y=0;y<m;y++)for(var v=0;v<f;v++)g[p[v]](y,u[d[v]](y))}return c},estimateBytesUsed:function(e){var t=0;for(var i in e.attributes){var n=e.getAttribute(i);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}var r=e.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0},mergeVertices:function(t,i=1e-4){i=Math.max(i,Number.EPSILON);for(var n={},r=t.getIndex(),a=t.getAttribute("position"),s=r?r.count:a.count,o=0,l=Object.keys(t.attributes),c={},d={},p=[],h=["getX","getY","getZ","getW"],u=0,f=l.length;u<f;u++){c[b=l[u]]=[],(_=t.morphAttributes[b])&&(d[b]=Array(_.length).fill().map(()=>[]))}var m=Math.log10(1/i),g=Math.pow(10,m);for(u=0;u<s;u++){var y=r?r.getX(u):u,v="",w=0;for(f=l.length;w<f;w++)for(var b=l[w],x=(T=t.getAttribute(b)).itemSize,S=0;S<x;S++)v+=~~(T[h[S]](y)*g)+",";if(v in n)p.push(n[v]);else{for(w=0,f=l.length;w<f;w++){b=l[w];var M,T=t.getAttribute(b),_=t.morphAttributes[b],O=(x=T.itemSize,c[b]),C=d[b];for(S=0;S<x;S++)if(M=h[S],O.push(T[M](y)),_)for(var E=0,A=_.length;E<A;E++)C[E].push(_[E][M](y))}n[v]=o,p.push(o),o++}}const R=t.clone();for(u=0,f=l.length;u<f;u++){b=l[u];var k=t.getAttribute(b),L=new k.array.constructor(c[b]);T=new e.BufferAttribute(L,k.itemSize,k.normalized);if(R.setAttribute(b,T),b in d)for(w=0;w<d[b].length;w++){var I=t.morphAttributes[b][w],P=(L=new I.array.constructor(d[b][w]),new e.BufferAttribute(L,I.itemSize,I.normalized));R.morphAttributes[b][w]=P}}return R.setIndex(p),R},toTrianglesDrawMode:function(t,i){if(i===e.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(i===e.TriangleFanDrawMode||i===e.TriangleStripDrawMode){var n=t.getIndex();if(null===n){var r=[],a=t.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var s=0;s<a.count;s++)r.push(s);t.setIndex(r),n=t.getIndex()}var o=n.count-2,l=[];if(i===e.TriangleFanDrawMode)for(s=1;s<=o;s++)l.push(n.getX(0)),l.push(n.getX(s)),l.push(n.getX(s+1));else for(s=0;s<o;s++)0==s%2?(l.push(n.getX(s)),l.push(n.getX(s+1)),l.push(n.getX(s+2))):(l.push(n.getX(s+2)),l.push(n.getX(s+1)),l.push(n.getX(s)));l.length/3!=o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=t.clone();return c.setIndex(l),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",i),t}}}},function(e,t){e.exports=[{name:"Triggerman",loadout:[1],secondary:!0,colors:[10975328,4013373,2302755,2631720,7098434,12566463],health:100,segs:6,speed:1.05},{name:"Hunter",loadout:[0],secondary:!0,colors:[10975328,8083261,6506290,2631720,6506290,4008733],health:60,segs:5,speed:1.05},{name:"Run N Gun",loadout:[3],wallJ:!0,colors:[10975328,4088706,3099491,2631720,6506290,1715002],health:100,segs:6,speed:1.18},{name:"Spray N Pray",loadout:[6],txts:["Calling in the Big Guns?","Remember - No Russian.","Pesky Snipers..."],colors:[10975328,5793865,4806204,2631720,2631720,3160103],health:170,segs:7,regen:.05,speed:.95},{name:"Vince",loadout:[5],txts:["..."],secondary:!0,colors:[8412234,5526119,4144461,2631720,2631720,2697267],health:90,segs:6,speed:1},{name:"Detective",loadout:[4],txts:["I'm onto something"],colors:[10975328,7360054,4410462,2631720,6506290,4140062],health:100,segs:6,speed:1},{name:"Marksman",loadout:[7],secondary:!0,colors:[10975328,5793865,4806204,2631720,2631720,2699298],health:90,segs:6,speed:1},{name:"Rocketeer",loadout:[8],txts:["..."],secondary:!0,colors:[10975328,5793865,4806204,2631720,7098434,2831140],health:130,segs:7,speed:.86},{name:"Agent",loadout:[9],wallJ:!0,colors:[10975328,4013373,2302755,2631720,2631720,12566463],health:100,segs:6,speed:1.2},{name:"Runner",txts:["You sure about this?","...","Oh boy","I don't know about this...","Not me again..."],loadout:[12],wallJ:!0,colors:[10975328,4013373,2302755,2631720,2631720,2302755],health:120,segs:6,throwChrg:600,regen:.2,speed:1},{name:"Deagler",hide:!0,loadout:[10],colors:[10975328,4013373,2302755,2631720,2631720,2302755],health:60,segs:5,speed:1},{name:"Bowman",loadout:[13],secondary:!0,colors:[10975328,9530450,6308654,2631720,2631720,4666663],health:100,segs:6,speed:1},{name:"Commando",loadout:[14],secondary:!0,colors:[10975328,4013373,2302755,2631720,10050604,1513239],health:100,segs:6,speed:1},{name:"Trooper",wallJ:!0,loadout:[18],colors:[10975328,12436169,12436169,3026478,2631720,3026478],health:100,segs:6,speed:1},{name:"Survivor",wallJ:!0,hide:!0,noSleeve:!0,loadout:[19],colors:[10975328,10975328,10975328,10975328,7098434,10975328],health:150,segs:6,speed:.8}]},,function(e,t,i){var n=i(1),r=i(18),a=i(3);a.BufferGeometryUtils=i(51)(a);var s=i(55),o=i(60),l=new(i(30))(n);WebGLRenderingContext.prototype.getProgramInfoLog=function(){return""},WebGLRenderingContext.prototype.getShaderInfoLog=function(){return""},"undefined"!=typeof WebGL2RenderingContext&&(WebGL2RenderingContext.prototype.getProgramInfoLog=function(){return""},WebGL2RenderingContext.prototype.getShaderInfoLog=function(){return""}),e.exports=function(t,n,a,c,d,p,h,u){function f(e){if(!(e=e||"")||!e.length)return null;var t;e=(e=(e=e.replace(/\./gm,",0.")).replace(/\[,/gm,"[")).replace(/\$/gm,'"$');try{t=JSON.parse(e)}catch(e){return null}for(var i in t)if(t.hasOwnProperty(i)){for(var n,r=[],a=0;a<t[i].length;++a)if("string"==typeof(n=t[i][a])){n=parseInt(n.replace("$",""));for(var s=t[i][a-1],o=0;o<n;++o)r.push(s)}else if(1>n)r.push(n);else for(o=0;o<n;++o)r.push(1);t[i]=r,r.length}return t}this.ShaderMesh=i(61)(t,n,c,this),this.shaderRendering=u,this.ShaderMesh.enabled=!!u,t.ImageUtils.crossOrigin="",this.GEOS=i(31);var m=new t.LoadingManager,g=new t.OBJLoader(m),y=new t.GLTFLoader(m);this.isMobile=!1,this.singlePlayer=!1,this.cubeGeo=new t.BoxGeometry(1,1,1),this.getCubeMesh=function(){return new t.Mesh(this.cubeGeo)};var v=new t.PlaneGeometry(1,1);new t.CylinderGeometry(.1,1,1,4,1,!1,Math.PI/4).computeFlatVertexNormals();var w=new t.TextureLoader;new t.MeshBasicMaterial({color:"#ffffff"}),new t.MeshBasicMaterial({color:65280});this.invisMat=new t.MeshBasicMaterial,this.invisMat.visible=!1;var b,x={},S={},M={},T={};this.movTextures=[],this.movMeshes=[],this.pulsMats=[],this.rgbMats=[],this.liquids=[],this.frameMats=[],this.pulsVal=0,this.liquidVal=0;var _=this,O={};this.tmpMouse=new t.Vector2,this.frustum=new t.Frustum;const C=this.frustum.containsPoint;this.frustum.containPoint=C,this.frustum.containsPoint=new Proxy(this.frustum.containsPoint,{apply:function(){return!1}});var E=new t.Matrix4;this.camera=new t.PerspectiveCamera(0,window.innerWidth/window.innerHeight,.1,6e3),Object.freeze(this.camera.scale),this.fpsCamera=new t.PerspectiveCamera(c.fov,window.innerWidth/window.innerHeight,.1,200),Object.freeze(this.fpsCamera.scale),Object.freeze(this.fpsCamera.quaternion),Object.freeze(this.fpsCamera.position),Object.freeze(this.fpsCamera.rotation),this.fpsCamera.layers.set(1),this.camera.add(this.fpsCamera),this.weaponOffX=1,this.weaponOffY=1,this.weaponOffZ=1,this.weaponADSOffY=1,this.weaponLean=1,this.weaponBob=1,this.liquidUpd=0,this.liquidFreq=50,this.hideADS=0,this.showHands=!0,this.softShad=!1,this.highResShad=!1,this.ambientShad=1,this.mapDet=!1,this.aimAnim=!0,this.renderDst=0,this.reticleIndex=0,this.lowSpec=!1,this.noTex=!1,this.customRatio=null,this.aspectRatio="",this.aimFov=!0,this.adsFovMlt=1,this.objectAnim=!0,this.rarityAnim=!0,this.screenShake=!0,this.textureAnim=!0,this.weaponShine=!0,this.lighting=1,this.roundArms=!1,this.minimap=null,this.aimRecticle={image:new Image,loaded:!1,opacity:0,opacMlt:1,height:680,width:680,display:!1,custom:!1,savedCustom:""},this.aimRecticle.image.onload=()=>this.aimRecticle.loaded=!0,this.aimRecticle.image.src=n.assetsUrl("/textures/scopes/scope_0.png"),this.aimDot={image:new Image,loaded:!1,opacity:0,width:20,height:20,display:!1,custom:!1,savedCustom:""},this.aimDot.image.onload=()=>this.aimDot.loaded=!0,this.aimDot.image.src=n.assetsUrl("/textures/reticles/reticle_0.png"),this.missingTexture=new Image,this.missingTexture.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACAgMAAAAP2OW3AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxQTFRF/wDbAAAAAAAA/wDbC5gN/AAAAAR0Uk5T/P/9/02rixUAAAAMSURBVHicYxBg2AAAAOQAwSeo6FcAAAAASUVORK5CYII=",this.init=function(i,n){this.clearPendingMeshes(),this.pendingGIs={},this.scene=new t.Scene,this.backgroundScene=new t.Scene,this.skyDome=null,i.skyDome&&n&&null==n.skyCol&&(this.skyDome=s.fromConfig(this,i),this.backgroundScene.add(this.skyDome)),e.exports.initScene.apply(this,[i,n]),this.initShaders()},this.getRes=function(){var e=n.isString(this.aspectRatio)?this.aspectRatio.split("x"):[];return(parseInt(e[0])||window.innerWidth)/(parseInt(e[1])||window.innerHeight)};var A=0;if(this.flash=function(e,t){d.showFlash=!0,d.flashX=e,d.flashY=1-t,A=1},this.updateLightMap=function(e){this.skyLight&&(this.skyLight.shadow.camera.right=e.shadWidth,this.skyLight.shadow.camera.left=-e.shadWidth,this.skyLight.shadow.camera.top=e.shadLength,this.skyLight.shadow.camera.bottom=-e.shadLength)},!h){var R=-1<navigator.userAgent.toLowerCase().indexOf("firefox");if(this.renderer=new t[R?"WebGL1Renderer":"WebGLRenderer"]({powerPreference:"high-performance",antialias:"true"==getSavedVal("kro_setngss_antiAlias")}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.type=t.BasicShadowMap,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement),!1===this.renderer.capabilities.isWebGL2)this.shaderRendering=!1,this.ShaderMesh.enabled=!1,this.ShaderMesh.supported=!1;else{for(var k={},L=["build_0","build_1","build_2","build_3"],I=l.textures.length-1+L.length,P=0,D=function(){++P>=I&&_.ShaderMesh.updateTextureMap(k)},B=0;B<l.textures.length;B++)"default"==(b=l.textures[B]).src||(k[b.src]=w.load(n.assetsUrl("/textures/"+b.src+".png"),D));for(B=0;B<L.length;B++)k[L[B]]=w.load(n.assetsUrl("/textures/"+L[B]+".png"),D)}}this.postprocessing={composer:null,enabled:!0,active:!1,shader:t.CopyShader},this.initShaders=function(){if(this.skyDome){var e=new t.RenderPass(this.backgroundScene,this.camera);e.layer=0,e.clear=!1}var i=new t.RenderPass(this.scene,this.camera);this.skyDome&&(i.layer=0),this.skyDome&&(i.clear=!1);var n=new t.RenderPass(this.scene,this.camera);n.layer=2,n.clear=!1;var r=new t.RenderPass(this.scene,this.fpsCamera);r.clear=!1,r.clearDepth=!0;var a=new t.ShaderPass(this.postprocessing.shader);this.postprocessing.composer=new t.EffectComposer(this.renderer,void 0,this),this.skyDome&&this.postprocessing.composer.addPass(e),this.postprocessing.composer.addPass(i),this.postprocessing.composer.addPass(n),this.postprocessing.composer.addPass(r),this.postprocessing.composer.addPass(a),this.resizeShaders()},this.shaderInputs=[],this.updateShaderPass=function(e){this.shaderInputs.length=0;try{for(var i in e.uniforms.resolution&&(e.uniforms.resolution={value:new t.Vector2(window.innerWidth,window.innerHeight)}),null==e.uniforms.tDiffuse&&(e.uniforms.tDiffuse=this.postprocessing.composer.renderTarget.texture),e.uniforms)(b=e.uniforms[i]).user&&(b.toggle?this.shaderInputs.push({name:i,toggle:!0}):this.shaderInputs.push({name:i,min:parseFloat(b.min)||0,max:parseFloat(b.max)||0,step:parseFloat(b.step)||0}));if(this.postprocessing.shader={defines:Object.assign({},e.defines),fragmentShader:e.fragmentShader,uniforms:e.uniforms,vertexShader:e.vertexShader},!this.postprocessing.composer)return void(this.postprocessing.active=!0);var n=new t.ShaderPass(this.postprocessing.shader)}catch(e){return}this.postprocessing.composer.replacePass(n,this.skyDome?4:3),this.postprocessing.active=!0},this.resizeShaders=function(){if(this.postprocessing.composer){var e=this.renderer.getPixelRatio(),t=Math.floor(window.innerWidth/e)||1,i=Math.floor(window.innerHeight/e)||1;this.postprocessing.composer.setSize(t,i)}},this.shadows=!0,this.updateShadowMap=function(){this.shadows&&(this.renderer.shadowMap.needsUpdate=!0)},this.toggleShadQual=function(e){this.renderer.shadowMap.type=e?t.PCFSoftShadowMap:t.BasicShadowMap,this.skyLight&&(this.renderer.setRenderTarget(this.skyLight.shadow.map),this.renderer.clear(),this.renderer.setRenderTarget(null)),this.updateShadowMap()},this.toggleShadowMap=function(e){e?(this.shadows=!0,this.updateShadowMap()):(this.shadows=!1,this.skyLight&&(this.renderer.setRenderTarget(this.skyLight.shadow.map),this.renderer.clear(),this.renderer.setRenderTarget(null)))},this.dynamicShadows=!1,this.toggleShadowAuto=function(e){this.dynamicShadows=e,this.renderer.shadowMap.autoUpdate=e,this.updateShadowMap()},this.frustumSize=1e3,this.changeCams=function(e){this.camera=2==e?new t.OrthographicCamera(this.frustumSize*this.getRes()/-2,this.frustumSize*this.getRes()/2,this.frustumSize/2,this.frustumSize/-2,.1,6e3):new t.PerspectiveCamera(0,window.innerWidth/window.innerHeight,.1,6e3),Object.freeze(this.camera.scale),this.camera.add(this.fpsCamera)},this.zoomVal=1,this.zoom=function(e){this.aimFov||(e=1),this.zoomVal=e,this.updateCamFOV(),this.fpsCamera.fov=this.fpsFov/e,this.fpsCamera.updateProjectionMatrix()},this.fovMult=function(e){this.fovMlt!=e&&(this.fovMlt=e,this.updateCamFOV())},this.setFPSFov=function(e){this.fpsFov=e,this.fpsCamera.fov=e,this.fpsCamera.updateProjectionMatrix()},this.setFPSFov(c.fov),this.fovMlt=1,this.updateCamFOV=function(){this.camera.fov=this.fov/this.zoomVal*this.fovMlt,this.camera.updateProjectionMatrix()},this.setFov=function(e){this.fov=e,this.updateCamFOV()},this.setFov(c.fov),this.resize=function(){"PerspectiveCamera"==this.camera.type?this.camera.aspect=this.getRes():(this.camera.left=-this.frustumSize*this.getRes()/2,this.camera.right=this.frustumSize*this.getRes()/2,this.camera.top=this.frustumSize/2,this.camera.bottom=-this.frustumSize/2),this.camera.updateProjectionMatrix(),this.fpsCamera.aspect=this.getRes(),this.fpsCamera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.resizeShaders()},this.resMltV=1,this.setResMlt=function(e){this.resMltV=e,this.renderer.setPixelRatio(window.devicePixelRatio*this.resMltV),this.renderer.setSize(window.innerWidth,window.innerHeight)},this.updateFrustum=function(){this.frustum.setFromProjectionMatrix(E.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse))};var z=0,j=0;this.shakeX=0,this.shakeY=0,this.updateShake=function(e){j&&this.screenShake&&(j*=Math.pow(.99,e),z+=n.randFloat(-Math.PI,Math.PI),this.shakeY=Math.sin(z)*j,this.shakeX=Math.cos(z)*j,.01>=j&&(j=0,this.shakeX=this.shakeY=0))},this.shake=function(e){j=e},this.render=function(e,i){if(this.scene||i){if(this.textureAnim){for(var r=0;r<this.movTextures.length;++r)(b=this.movTextures[r]).tex.offset&&(b.tex.offset[0==b.movD?"x":"y"]+=b.mov*e);for(r=0;r<this.movMeshes.length;++r)(b=this.movMeshes[r])&&b.mesh&&(b.type?(b.bobAnim=(b.bobAnim||0)+b.tim*e,b.mesh.position[b.axis]=b.orgP+.55*Math.sin(b.bobAnim)):b.mesh["rotate"+b.axis](b.tim*e));this.pulsVal+=.003*e;var a;for(r=0;r<this.pulsMats.length;++r)a=1.5*(Math.sin(this.pulsVal)/2+.5),a+=this.pulsMats[r].minGlo||0,this.pulsMats[r].mat.emissiveIntensity=a;for(r=0;r<this.frameMats.length;++r)(b=this.frameMats[r]).dur-=e,0>=b.dur&&(b.dur=b.orgDur,b.cur++,b.cur>=b.num&&(b.cur=0),b.mat.map&&(b.mat.map.offset.x=b.cur%b.num/b.num));for(r=0;r<this.rgbMats.length;++r)(b=this.rgbMats[r]).dlt+=e*b.mlt,360<=b.dlt&&(b.dlt=0),b.mat&&"MeshBasicMaterial"!=b.mat.type&&(b.mat[b.type?"color":"emissive"]=new t.Color(n.hexFromHue(Math.round(b.dlt))))}if(this.objectAnim&&(this.liquidVal+=.003*e,this.liquidUpd-=e,0>=this.liquidUpd)){this.liquidUpd=this.liquidFreq;for(r=0;r<this.liquids.length;++r){b=this.liquids[r];for(var s=0;s<b.mesh.geometry.vertices.length;s++)b.mesh.geometry.vertices[s].z=b.hght*Math.sin(s/5+this.liquidVal*b.spd/4);b.mesh.geometry.verticesNeedUpdate=!0,b.mesh.geometry.computeVertexNormals()}}i||(this.renderer.clear(),this.camera.layers.set(0),this.skyDome&&this.camera.getWorldPosition(this.skyDome.position),this.postprocessing.composer&&this.postprocessing.enabled&&this.postprocessing.active?this.postprocessing.composer.render(e):(this.skyDome&&(this.renderer.render(this.backgroundScene,this.camera),this.renderer.clearDepth()),this.renderer.render(this.scene,this.camera),this.camera.layers.set(2),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.scene,this.fpsCamera)),d.showFlash&&(0>=A&&(A=0,d.showFlash=!1),A-=e),this.updateShake(e))}},this.updateTexture=function(e,i,n){n=n||{};var r=0;for(var a in S)a.includes("sad")||a.substring(0,e.length+2)==e+"mt"&&(r++,S[a].image=i,S[a].needsUpdate=!0);if(!r){var s=new t.Texture(i);M[e]=s,M[e].needsUpdate=!0}},this.loadTexture=function(e,i,r,a){var s=i+(null==(r=r||{}).movT?"mt":"mt"+r.movT)+(null==r.movD?"md":r.movD)+(r.fontSize||"fs")+(r.fcolr||"fc")+(r.bcolr||"bc")+(r.noBVis||"bv")+(r.text||"txt")+(r.tAlign||"ta")+(r.showAd?"sad":"nad")+(r.tId||"ctx")+(r.texOffX||"tox")+(r.texOffY||"toy")+(r.normal||"n")+(r.spec||"spec")+(r.asset||"as")+(r.umid||"umid")+(r.texRot||"tr");if(S[s])S[s].mats?S[s].mats.push({t:a,m:e}):(e[a||"map"]=S[s],r.frames&&1==e.map.repeat.x&&(e.map.repeat.x=1/r.frames),e.needsUpdate=!0);else if(S[s]={mats:[{t:a,m:e}]},M[i]){(l=M[i]).wrapS=t.RepeatWrapping,l.wrapT=t.RepeatWrapping,l.repeat.set(r.frames?1/r.frames:r.repeatX||1,r.repeatY||1),l.minFilter=r.tFilter||t.NearestFilter,l.magFilter=r.tFilter||t.NearestFilter,l.offset.x=r.texOffX||0,l.offset.y=r.texOffY||0,l.rotation=r.texRot||0,l.needsUpdate=!0;for(var o=0;o<S[s].mats.length;++o)S[s].mats[o].m[S[s].mats[o].t||"map"]=l,S[s].mats[o].m.needsUpdate=!0;S[s]=l,r.movT&&this.movTextures.push({tex:l,mov:r.movT,movD:r.movD||0})}else if(a&&r.noEmisTex);else if(r.canvas){(l=new t.Texture(r.canvas)).wrapS=t.RepeatWrapping,l.wrapT=t.RepeatWrapping,l.repeat.set(r.repeatX||1,r.repeatY||1),l.minFilter=r.tFilter||t.NearestFilter,l.magFilter=r.tFilter||t.NearestFilter,l.needsUpdate=!0;for(o=0;o<S[s].mats.length;++o)S[s].mats[o].m[S[s].mats[o].t||"map"]=l,S[s].mats[o].m.needsUpdate=!0;S[s]=l,r.movT&&this.movTextures.push({tex:l,mov:r.movT,movD:r.movD||0})}else if("string"==typeof i&&i.includes("custom_")){if(!a){var l;(l=new t.Texture(_.missingTexture)).wrapS=t.RepeatWrapping,l.wrapT=t.RepeatWrapping,l.repeat.set(r.frames?1/r.frames:r.repeatX||1,r.repeatY||1),l.minFilter=r.tFilter||t.NearestFilter,l.magFilter=r.tFilter||t.NearestFilter,l.offset.x=r.texOffX||0,l.offset.y=r.texOffY||0,l.rotation=r.texRot||0,l.needsUpdate=!0;for(o=0;o<S[s].mats.length;++o)S[s].mats[o].m[S[s].mats[o].t||"map"]=l,S[s].mats[o].m.needsUpdate=!0;S[s]=l,r.movT&&this.movTextures.push({tex:l,mov:r.movT,movD:r.movD||0})}}else"string"!=typeof i||i.includes("default")||w.load(r.asset?n.userAssetsUrl(i+".png"):n.assetsUrl("/textures/"+i+".png",!1,r.local),e=>{e.wrapS=t.RepeatWrapping,e.wrapT=t.RepeatWrapping,e.repeat.set(r.frames?1/r.frames:r.repeatX||1,r.repeatY||1),e.minFilter=r.tFilter||t.NearestFilter,e.magFilter=r.tFilter||t.NearestFilter,e.offset.x=r.texOffX||0,e.offset.y=r.texOffY||0,e.rotation=r.texRot||0,e.needsUpdate=!0;for(var i=0;i<S[s].mats.length;++i)S[s].mats[i].m[S[s].mats[i].t||"map"]=e,S[s].mats[i].m.needsUpdate=!0;S[s]=e,r.movT&&this.movTextures.push({tex:e,mov:r.movT,movD:r.movD||0})},void 0,(function(){if(!a){var e=new t.Texture(this.missingTexture);e.wrapS=t.RepeatWrapping,e.wrapT=t.RepeatWrapping,e.repeat.set(r.frames?1/r.frames:r.repeatX||1,r.repeatY||1),e.minFilter=r.tFilter||t.NearestFilter,e.magFilter=r.tFilter||t.NearestFilter,e.offset.x=r.texOffX||0,e.offset.y=r.texOffY||0,e.rotation=r.texRot||0,e.needsUpdate=!0;for(var i=0;i<S[s].mats.length;++i)S[s].mats[i].m[S[s].mats[i].t||"map"]=e,S[s].mats[i].m.needsUpdate=!0;S[s]=e,r.movT&&this.movTextures.push({tex:e,mov:r.movT,movD:r.movD||0})}}));return e},this.getMat=function(e,i){i=i||{},0==_.lighting&&i.mat!=t.SpriteMaterial&&(i.mat=t.MeshBasicMaterial),2==_.lighting&&i.mat!=t.SpriteMaterial&&(i.mat=t.MeshPhongMaterial),i.forceMat&&(i.mat=i.forceMat);var n=(i.texSrc||e)+(i?(i.rotation||"x")+(i.noFog||"y")+(i.umid||"umid")+(i.opacity||"z")+(i.color||"b")+(i.mat?"ma":"nm")+(i.ao||"a")+(i.emissive||"e")+(i.glowText||"g")+(null==i.movT?"mt":i.movT)+(null==i.movD?"md":i.movD)+(null==i.canvas?"":"canvas")+(null==i.pulsT?"npt":"pt"+i.pulsT)+(i.normal||"n")+(i.spec||"spec")+(i.alph||"alph")+(i.asset||"as")+ +(null==i.frames?"nfr":"fr"+i.frames)+(null==i.frameT?"nfrt":"frt"+i.frameT)+(null==i.rAnim?"nra":"ra"+i.rAnim)+(null==i.rAnimA?"nraa":"raa"+i.rAnimA)+(null==i.rAnimT?"nrt":"rt"+i.rAnimT)+(i.texRot||"tr")+(null==i.depthWrite?"d":i.depthWrite)+(i.fontSize||"fs")+(i.fcolr||"fc")+(i.bcolr||"bc")+(i.noBVis||"bv")+(i.text||"txt")+(i.tAlign||"ta")+(i.showAd?"sad":"nad")+(i.rgb?"rgb":"nrgb")+(i.rgbS?"rgbS":"nrgbS")+(i.rgbT||"rgbT")+(i.texOffX||"tox")+(i.texOffY||"toy")+(i.itemID||"itemID")+(i.wireframe?"wf":"nwf"):""),r=x[n];return r||(null!=i.shaderId&&o[i.shaderId]?(r=new t.ShaderToyMaterial(o[i.shaderId].code,i),null!=i.side&&(r.side=i.side)):r=new(i.mat?i.mat:t.StrippedLambertMaterial)(i),i&&i.rgb&&(r.dithering=!0),i.canvas&&this.loadTexture(r,n,i),e&&"default"!=e&&this.loadTexture(r,i.texSrc||e,i),i&&i.emissive&&this.loadTexture(r,(i.glowText&&i.texSrc||e)+(i.sameGlow?"":"_e"),i,"emissiveMap"),i&&i.ao&&(this.loadTexture(r,e+"_ao",i,"aoMap"),r.aoMapIntensity=1.3),i&&i.normal&&this.loadTexture(r,e+"_n",i,"normalMap"),i&&i.spec&&this.loadTexture(r,e+"_s",i,"specularMap"),i&&i.alph&&this.loadTexture(r,e+"_a",i,"alphaMap"),("default"==e||i&&i.rgb&&!i.rgbT)&&(r.vertexColors=t.VertexColors),i&&i.noFog&&(r.fog=!1),r.hasOwnProperty("shading")&&(r.shading=t.SmoothShading),x[n]=r,i.pulsT&&this.pulsMats.push({mat:r,pul:i.pulsT,minGlo:i.minGlo}),i.frames&&i.frameT&&!i.noAutoAnim&&!this.frameMats.find(t=>t.src==(i&&i.texSrc||e))&&this.frameMats.push({mat:r,src:i&&i.texSrc||e,num:i.frames,cur:0,dur:i.frameT,orgDur:i.frameT}),i.rgb&&this.rgbMats.push({mat:r,mlt:i.rgbS||.3,type:i.rgbT||0,dlt:0})),r},this.genColorCube=function(e,i,n,r,a,s){for(var o=(s=s||{}).us?"us":"ns",l=0;l<r.length;++l){for(var c=0;c<r[l].length;++c)o+=r[l][c]+"_";o+="|"}var d=T[o];if(!d){d=new t.Geometry;var p=.5+(a||0);for(l=0;l<r.length;++l){var h=r[l][1],u=r[l][2]||1;if(r[l][5])p-=h;else{if(s.us){s.cyl?(f=_.GEOS.generateCylinder({colr:r[l][0],fAmb:r[l][4],amb:r[l][3]}),u/=2):f=_.GEOS.generateCube([1,1,1,1,1,1],1,1,1,{colr:r[l][0],fAmb:r[l][4],noAmb:s.noAmb,amb:r[l][3]}),(m=new t.Mesh(f)).scale.set(u,h,u),this.moveMesh(m,0,p-h,0)}else{var f=new t.BoxGeometry(u,h,u);_.GEOS.colorize(f,r[l][0]),m=new t.Mesh(f),this.moveMesh(m,0,p-h/2,0)}this.merge(d,m),p-=h}}T[o]=d}var m=new t.Mesh(d,this.getMat(s.src||"default",s));return this.scaleMesh(m,e,i,n),m};var N={};this.genLeg=function(e,i,n,r){(r=r||{}).us=r.det;var a=c.legScale,s=null;if(r.crouch){var o=(r.texSrc||"default")+(i+"-")+n+"-"+(r.crouch||"")+"-"+(r.rgb?"rgb":"")+(null==r.movT?"mt":r.movT)+(null==r.movD?"md":r.movD);if(!(s=N[o])){var l=c.legHeight/2,d=a/2,p=[.5,2],h=this.genColorCube(a,l,a,[[i,1]],0,{us:r.det});this.moveMesh(h,0,-l/2*Math.cos(p[1]),-l/2*Math.sin(p[1])),this.rotateMesh(h,0,p[1],0);var u=Math.sqrt(d*d+d*d-2*d*d*Math.cos(p[0]-p[1])),f=2*Math.sqrt(d*d-u/2*(u/2)),m=this.genColorCube(a,u,f,[[i,1]],0,{us:r.det});this.moveMesh(m,0,-l*Math.cos(p[1]),-l*Math.sin(p[1])),this.rotateMesh(m,0,(p[1]+p[0])/2,0);var g=this.genColorCube(a,l,a,[[i,.5,1,.8],[n,.5]],0,{us:r.det});this.moveMesh(g,0,-l*Math.cos(p[1])-l/2*Math.cos(p[0]),-l*Math.sin(p[1])-l/2*Math.sin(p[0])),this.rotateMesh(g,0,p[0],0);s=new t.Geometry;this.merge(s,h),this.merge(s,m),this.merge(s,g),N[o]=s}s=t.BufferGeometryUtils.mergeVertices((new t.BufferGeometry).fromGeometry(s)),s=new t.Mesh(s,this.getMat(r.texSrc||"default",r)),this.moveMesh(s,c.legScale/2*(e?-1:1),c.legHeight-c.crouchDst+.5,0)}else s=this.genColorCube(a,c.legHeight,a,[[i,.75,1],[n,.25]],-.5,r),this.moveMesh(s,c.legScale/2*(e?-1:1),c.legHeight,0);return s.receiveShadow=!0,s.castShadow=this.dynamicShadows,s};var F={};this.genBody=function(e,i){var n=((i=i||{}).texSrc||"default")+(i.shirtCol+"-")+i.pantsCol+"-"+i.hairCol+"-"+i.skinCol+"-"+(i.rgb?"rgb":"")+"-"+(i.noHead?"nh":"")+"-"+(i.noChest?"nc":"")+(null==i.movT?"mt":i.movT)+(null==i.movD?"md":i.movD),r=F[n];if(!r){r=new t.Geometry;var a=c.playerHeight-c.headScale-c.legHeight,s=this.genColorCube(c.chestWidth,a,c.chestScale,[[i.shirtCol,.8,1,.8,void 0,!!i.noChest],[i.pantsCol,.2,1.05]],0,{us:e});if(this.moveMesh(s,0,a/2,0),this.merge(r,s),!i.noHead){var o=this.genColorCube(c.headScale,c.headScale,c.headScale,[[i.hairCol,.2,1,.6],[i.skinCol,.8]],0,{us:e});this.moveMesh(o,0,c.playerHeight-c.headScale/2-c.legHeight,0),this.merge(r,o)}r=t.BufferGeometryUtils.mergeVertices((new t.BufferGeometry).fromGeometry(r)),F[n]=r}var l=new t.Mesh(r,this.getMat(i.texSrc||"default",i));return l.receiveShadow=!0,l.castShadow=this.dynamicShadows,l};var H={};this.genArms=function(e,i,n,r){var a=((r=r||{}).texSrc||"default")+e.name+"-"+r.shirtCol+"-"+r.sleeveCol+"-"+r.skinCol+"-"+r.leftHand+"-"+n+"-"+(i||0)+"-"+(r.rgb?"rgb":"")+(null==r.movT?"mt":r.movT)+(null==r.movD?"md":r.movD)+(r.armS?r.armS:"")+"-"+(r.noSleeve?1:0)+(r.leftHoldY||0)+(r.rightHoldY||0),s=H[a];if(!s){s=new t.Geometry;var o=(-c.chestWidth+c.armScale/2-c.armInset)*(n?e.holdW||.4:1);i&&1!=i||this.merge(s,this.genArm(o,c.armOff,e,!r.leftHand,r.shirtCol,r.sleeveCol,r.skinCol,n,r)),i&&2!=i||this.merge(s,this.genArm(-o,c.armOff,e,r.leftHand,r.shirtCol,r.sleeveCol,r.skinCol,n,r)),s=t.BufferGeometryUtils.mergeVertices((new t.BufferGeometry).fromGeometry(s)),H[a]=s}return(s=new t.Mesh(s,this.getMat(r.texSrc||"default",r))).position.z+=n&&e.hDstOff||0,s.receiveShadow=!0,s.castShadow=!n&&this.highResShad,s},this.genArm=function(e,i,r,a,s,o,l,d,p){var h=a?p.leftHoldY||r.leftHoldY:p.rightHoldY||r.rightHoldY,u=a?r.leftHoldZ:p.rightHoldZ||r.rightHoldZ,f=p.leftHand?-1:1;u+=d&&r.hDstOff||0;var m=(a?r.leftHoldX||0:r.rightHoldX||0)*f,g=c.armScale*(d?.68:1)*(p.armS||1),y=Math.min(c.uArmLength+c.lArmLength-.01,n.getD3D(e,i,0,(r.xOff*f-m)*(a&&r.akimbo?-1:1),r.yOff+h,r.zOff-u)),v=n.getAnglesSSS(y,c.uArmLength,c.lArmLength),w=Math.PI/2;if(!d){var b=this.genColorCube(g,c.uArmLength,g,[[s,1]],0,{us:d,cyl:_.roundArms});this.moveMesh(b,0,-c.uArmLength/2*Math.cos(w),-c.uArmLength/2*Math.sin(w)),this.rotateMesh(b,0,w,0);var x=g/2,S=Math.sqrt(x*x+x*x-2*x*x*Math.cos(Math.PI+v[0]+Math.PI/2)),M=2*Math.sqrt(x*x-S/2*(S/2)),T=this.genColorCube(g,S,M,[[s,1]],0,{us:d,cyl:_.roundArms});this.moveMesh(T,0,-c.uArmLength*Math.cos(w),-c.uArmLength*Math.sin(w)),this.rotateMesh(T,0,(w+v[0])/2,0)}var O=this.genColorCube(g,c.lArmLength,g,[[s,.65,1,.6],[o,.15,p.noSleeve?1:1.1],[l,.2,1,.5,!0]],0,{us:d,noAmb:p.noSleeve,cyl:_.roundArms}),C=c.lArmLength/2;this.moveMesh(O,0,-c.uArmLength*Math.cos(w)-C*Math.cos(v[0]),-c.uArmLength*Math.sin(w)-C*Math.sin(v[0])),this.rotateMesh(O,0,v[0],0);var E=new t.Geometry;if(d){var A=this.genColorCube(g,20,g,[[s,1]],0,{us:d,noAmb:!0,cyl:_.roundArms});this.moveMesh(A,0,-c.uArmLength*Math.cos(w)- -10*Math.cos(v[0]),-c.uArmLength*Math.sin(w)- -10*Math.sin(v[0])),this.rotateMesh(A,0,v[0],0),this.merge(E,A)}else this.merge(E,b),this.merge(E,T);return this.merge(E,O),E=new t.Mesh(E),this.moveMesh(E,e-r.xOff*f,i-r.yOff,-r.zOff),E.rotation.order="YXZ",E.rotation.x=-v[1]-n.getDir(0,i,r.zOff-u,r.yOff+h),E.rotation.y=n.getDir(-e,0,(a&&r.akimbo?1:-1)*(r.xOff*f-m),r.zOff-u)-Math.PI/2,E},this.addCube=function(e,i,r,a,s,o,l,c){var d;return c=c||{},(p.isMobile||_.dontGI())&&(c.tess=0),c.noShader||!this.ShaderMesh.enabled||c.src&&!c.src.includes("default")&&!k[c.src]?(!_.dontGI()&&(e+=1e-5*n.randInt(-100,100),i+=1e-5*n.randInt(-100,100),r+=1e-5*n.randInt(-100,100)),d=new t.Mesh(_.GEOS.generateCube(l,a,s,o,c)),this.moveMesh(d,e,i,r),d.rotation.set(c.yR||0,c.xR||0,c.zR||0),d.scale.set(a,s,o),this.noTex&&!c.forceTex&&(c.src="default"),!c.autoMatrix&&(d.matrixAutoUpdate=!1),c.src&&!c.noGroup?this.meshGroup(d,c):this.add(d,c)):d=this.ShaderMesh.addCube(e,i,r,a,s,o,c),d},this.addPointLight=function(e,i,n,r){if(2==_.lighting){r=r||{};var a=new t.PointLight(r.colr||"#f2f8fc",r.intensity||1,r.distance||0,r.decay||1);a.position.set(e,i,n),this.add(a)}},this.addCone=function(e,i,n,r,a,s,o){if(!this.noTex){o=o||{};var l=new t.Mesh(_.GEOS.generateCone(a,o)),c=Math.min(r,s)/2;return l.scale.set(c,a,c),this.moveMesh(l,e,i,n),l.rotation.set(o.yR||0,o.xR||0,o.zR||0),o.src&&!o.noGroup?this.meshGroup(l,o):this.add(l,o),l}},this.addCylinder=function(e,i,n,r,a,s,o){if(!this.noTex){o=o||{};var l=new t.Mesh(_.GEOS.generateCylinder(o)),c=Math.min(r,s)/2;return l.scale.set(c,a,c),this.moveMesh(l,e,i,n),l.rotation.set(o.yR||0,o.xR||0,o.zR||0),o.rAnim&&this.movMeshes.push({mesh:l,tim:o.rAnim,axis:(o.rAnimA||"y").toUpperCase()}),o.src&&!o.noGroup?this.meshGroup(l,o):this.add(l,o),l}},this.addSphere=function(e,i,n,r,a,s,o){o=o||{};var l=new t.Mesh(_.GEOS.generateSphere(r,a,s,o));return this.moveMesh(l,e,i+a/2,n),l.rotation.set(o.yR||0,o.xR||0,o.zR||0),l.scale.set(r/2,a/2,s/2),o.src&&!o.noGroup?this.meshGroup(l,o):this.add(l,o),l};var G=[];this.addSpray=function(e,i,r,a,s,o,l,d){d=d||{},b=null;for(var p=0;p<G.length;++p)if(G[p].sid==e){b=G[p];break}b||(!0,(b={}).sid=e,b.is3D=!!d.is3D,d.is3D?b.mesh=this.loadMesh({local:d.local,src:"sprays/"+(d.id||0),opacity:d.opacity,side:d.doubleSide?t.DoubleSide:t.FrontSide,transparent:d.transparent||1!=d.opacity,shadows:!1,shadowsR:!0,vertexColors:t.VertexColors,frames:d.frames,frameT:d.frameT,rgb:d.rgb,rgbS:d.rgbS,rgbT:d.rgbT,sameGlow:d.sameGlow,glowText:d.glow||d.sameGlow,emissive:d.glow||d.sameGlow?"#ffffff":null,pulsT:d.pulsT,rAnim:d.rAnim,rAnimA:d.rAnimA,alphaTest:d.alphaTest||0},r,a,s,[-90,0,0],d.scl||1,this.scene):(b.mesh=new t.Mesh(v),b.mesh.scale.set(c.sprayScale,c.sprayScale,1),b.mesh.receiveShadow=!0,this.add(b.mesh)),G.push(b)),b.is3D?b.src!=d.src&&(b.mesh.material.map&&b.mesh.material.map.dispose(),this.scene.remove(b.mesh),b.mesh=this.loadMesh({local:d.local,src:"sprays/"+(d.id||0),opacity:d.opacity,side:d.doubleSide?t.DoubleSide:t.FrontSide,transparent:d.transparent||1!=d.opacity,shadows:!1,shadowsR:!0,vertexColors:t.VertexColors,frames:d.frames,frameT:d.frameT,rgb:d.rgb,rgbS:d.rgbS,rgbT:d.rgbT,sameGlow:d.sameGlow,glowText:d.glow||d.sameGlow,emissive:d.glow||d.sameGlow?"#ffffff":null,pulsT:d.pulsT,rAnim:d.rAnim,rAnimA:d.rAnimA,alphaTest:d.alphaTest||0},r,a,s,[0,0,0],4*(d.scl||1),this.scene)):b.mesh.material=this.getMat("sprays/"+(d.id||0),{local:d.local,depthWrite:!1,opacity:d.opacity,transparent:!0,frames:d.frames,frameT:d.frameT,movT:d.movT,movD:d.movD,rgb:d.rgb,rgbS:d.rgbS,rgbT:d.rgbT,sameGlow:d.sameGlow,glowText:d.glow||d.sameGlow,emissive:d.glow||d.sameGlow?"#ffffff":null,pulsT:d.pulsT,rAnim:d.rAnim,rAnimA:d.rAnimA}),this.moveMesh(b.mesh,r,a,s),b.mesh.rotation.y=n.toRad((b.is3D?-90:0)+o),b.mesh.rotation.x=n.toRad(b.is3D?0:l)},this.clearSprays=function(){for(var e=0;e<G.length;++e)G[e]&&G[e].mesh.material.map&&G[e].mesh.material.map.dispose(),this.scene.remove(G[e].mesh);G.length=0},this.addPlane=function(e,i,n,r,a,s,o,l,c){if(s=s||{},(p.isMobile||_.dontGI())&&(s.tess=0),s.premultipliedAlpha=!0,s.noShader||!this.ShaderMesh.enabled||s.src&&!s.src.includes("default")&&!k[s.src]){r=2*(r||0),a=2*(a||0);d=new t.Mesh(_.GEOS.generatePlane(a,r,s,e,i,n));s.euler&&(d.rotation.order=s.euler),this.moveMesh(d,e,i,n),d.rotateY(o||0),d.rotateX((l||0)-Math.PI/2),d.rotateZ(c||0),d.scale.set(r,a,1),this.noTex&&(s.src="default"),s.dontAdd?s.src&&(d.material=this.getMat(s.src,s)):s.src&&!s.noGroup?this.meshGroup(d,s):this.add(d,s)}else var d=this.ShaderMesh.addPlane(e,i,n,r,a,s,o,l,c);return d},this.addGrass=function(e,i,n,r,a,s,o){o=o||{};let l=new t.Geometry,c=2*Math.PI*Math.random(),d=new t.Mesh(_.GEOS.generatePlane(r,a,o));d.rotateY(c*(Math.PI/2)),this.merge(l,d);let p=new t.Mesh(_.GEOS.generatePlane(r,a,o));p.rotateY((c+1)*(Math.PI/2)),this.merge(l,p);let h=new t.Mesh(l);return this.moveMesh(h,e,i+a/2,n),h.rotation.set(o.yR||0,o.xR||0,o.zR||0),h.scale.set(r,a,s),o.src&&!o.noGroup?this.meshGroup(h,o):this.add(h,o),h},this.addRamp=function(e,i,n,r,a,s,o,l,c){l=l||{};var d=new t.Mesh(_.GEOS.generatePlane(2*s,r,l));this.moveMesh(d,e,i+a/2,n),s*=2;var p=Math.sqrt(a*a+s*s);return d.scale.set(r,p,2),d.rotateY(-Math.PI/2-o),d.rotateX(Math.asin(a/p)-Math.PI/2),d.rotateZ(c||0),this.noTex&&(l.src="default"),l.src&&!l.noGroup?this.meshGroup(d,l):this.add(d,l),d};var U=[],W=[];this.loadMesh=function(e,i,r,a,s,o,l,c){(e=e||{}).fileExt=e.fileExt||"obj";var d=this.getMat(e.src,e),p=U[e.src+e.fileExt];if(p){if(e.centerZ){p.computeBoundingBox();var h=p.boundingBox.getCenter();l.translateZ(h.x*o)}}else{p=c?new t.Geometry:new t.BufferGeometry,U[e.src+e.fileExt]=p;var u=null;e.asset&&(u=function(e){_.updateProgress((e.loaded/e.total*100).round(0))}),("gltf"==e.fileExt?y:g).load(e.asset?n.userAssetsUrl(e.src+"."+e.fileExt):n.assetsUrl("/models/"+e.src+"."+e.fileExt,!1,e.localM),(function(i){i.scene&&(i=i.scene);var n=i.children[0].geometry;if(1<i.children.length){for(var r=new t.Geometry,a=0;a<i.children.length;++a)if(i.children[a])if("Object3D"!=i.children[a].type)i.children[a].updateMatrix(),r.merge((new t.Geometry).fromBufferGeometry(i.children[a].geometry),i.children[a].matrix,a);else{for(var s=new t.Geometry,h=0;h<i.children[a].children.length;++h)i.children[a].children[h]&&i.children[a].children[h].geometry&&"Object3D"!=i.children[a].children[h].type&&(i.children[a].children[h].updateMatrix(),s.merge((new t.Geometry).fromBufferGeometry(i.children[a].children[h].geometry),i.children[a].children[h].matrix,h));s.groupsNeedUpdate=!0,r.copy((new t.BufferGeometry).fromGeometry(s))}r.groupsNeedUpdate=!0,n=(new t.BufferGeometry).fromGeometry(r)}else if("Object3D"==i.children[0].type&&!i.children[0].geometry&&i.children[0].children){for(r=new t.Geometry,a=0;a<i.children[0].children.length;++a)i.children[0].children[a]&&i.children[0].children[a].geometry&&(i.children[0].children[a].updateMatrix(),r.merge((new t.Geometry).fromBufferGeometry(i.children[0].children[a].geometry),i.children[0].children[a].matrix,a));r.groupsNeedUpdate=!0,n=(new t.BufferGeometry).fromGeometry(r)}if(n=t.BufferGeometryUtils.mergeVertices(n),e.asset){n.computeBoundingBox();var u=n.boundingBox.getCenter();n.translate(0,-u.y,0)}if(p.copy(c?(new t.Geometry).fromBufferGeometry(n):n),e.uv2&&p.setAttribute("uv2",new t.BufferAttribute(p.attributes.uv.array,2)),c){if(W[e.src+e.fileExt]&&W[e.src+e.fileExt].length){var f=new t.Geometry;for(a=0;a<W[e.src+e.fileExt].length;++a)_.merge(f,W[e.src+e.fileExt][a]);var m=new t.Mesh((new t.BufferGeometry).fromGeometry(f),d);m.isModel=!0,_.add(m,e)}W[e.src+e.fileExt]&&(W[e.src+e.fileExt].length=0,W[e.src+e.fileExt].loaded=!0)}if(e.centerZ){p.computeBoundingBox();u=p.boundingBox.getCenter();l.translateZ(u.x*o)}}),u)}var f=new t.Mesh(p,d);if(f.receiveShadow=!e.noShadow,f.castShadow=e.shadows,"object"==typeof s?(f.rotation.x=f.xR=s[0]||0,f.rotation.y=f.yR=s[1]||0,f.rotation.z=f.zR=s[2]||0):f.rotation.y=s||0,f.isModel=!0,f.xP=i,f.yP=r,f.zP=a,_.moveMesh(f,i,r,a),_.scaleMesh(f,o||1,o||1,o||1),e.rAnim){var m={mesh:f,tim:e.rAnim,type:e.rAnimT,axis:(e.rAnimA||"y")[e.rAnimT?"toLowerCase":"toUpperCase"]()};m.type&&(m.orgP=f.position[m.axis]),this.movMeshes.push(m)}return c?W[e.src+e.fileExt]?W[e.src+e.fileExt].loaded?this.meshGroup(f,e):W[e.src+e.fileExt].push(f):W[e.src+e.fileExt]=[f]:l.add(f),f},this.loadGeo=function(e,i){(e=e||{}).fileExt=e.fileExt||"obj";var r=U[e.src+e.fileExt];return r?i(e,r):(r=new t.BufferGeometry,U[e.src+e.fileExt]=r,void("gltf"==e.fileExt?y:g).load(e.asset?n.userAssetsUrl(e.src+"."+e.fileExt):n.assetsUrl("/models/"+e.src+"."+e.fileExt,!1,e.localM),(function(n){n.scene&&(n=n.scene);var a=n.children[0].geometry;if(1<n.children.length){for(var s=new t.Geometry,o=0;o<n.children.length;++o)if(n.children[o])if("Object3D"!=n.children[o].type)n.children[o].updateMatrix(),s.merge((new t.Geometry).fromBufferGeometry(n.children[o].geometry),n.children[o].matrix,o);else{for(var l=new t.Geometry,c=0;c<n.children[o].children.length;++c)n.children[o].children[c]&&n.children[o].children[c].geometry&&"Object3D"!=n.children[o].children[c].type&&(n.children[o].children[c].updateMatrix(),l.merge((new t.Geometry).fromBufferGeometry(n.children[o].children[c].geometry),n.children[o].children[c].matrix,c));l.groupsNeedUpdate=!0,s.copy((new t.BufferGeometry).fromGeometry(l))}s.groupsNeedUpdate=!0,a=(new t.BufferGeometry).fromGeometry(s)}else if("Object3D"==n.children[0].type&&!n.children[0].geometry&&n.children[0].children){for(s=new t.Geometry,o=0;o<n.children[0].children.length;++o)n.children[0].children[o]&&n.children[0].children[o].geometry&&(n.children[0].children[o].updateMatrix(),s.merge((new t.Geometry).fromBufferGeometry(n.children[0].children[o].geometry),n.children[0].children[o].matrix,o));s.groupsNeedUpdate=!0,a=(new t.BufferGeometry).fromGeometry(s)}a=t.BufferGeometryUtils.mergeVertices(a),r.copy(a),i(e,r)})))},this.assetProgress=null,this.updateProgress=function(e){h||(_.assetProgress="Loading "+e+"%",100<=e&&(_.assetProgress=null),p.updatePlayInstructions())},this.loadSprite=function(e,i){var n=this.getMat(e.src,e),r=new t.Sprite(n);return r.yP=0,r.xP=0,r.zP=0,r.position.set(0,c.playerHeight/2,0),r.scale.set(c.playerHeight,c.playerHeight,1),i.add(r),r},this.clearPendingMeshes=function(){for(var e in W)W.hasOwnProperty(e)&&W[e]&&(W[e].length=0)},this.updateMesh=function(e,i){if(!e.toLowerCase().startsWith("event_0")){var n=g.parse(i),r=new t.BufferGeometry;U[e+"obj"]=r,r.copy(n.children[0].geometry),r.needsUpdate=!0}},this.merge=function(e,t,i){t.updateMatrix(),e.merge(t.geometry,t.matrix,i)},this.genObj3D=function(e,i,n){var r=new t.Object3D;return this.moveMesh(r,e||0,i||0,n||0),r},this.meshGroup=function(e,i){var r=n.getMeshGroupIndex(i,this.noTex);O[r]||(O[r]=new t.Geometry,O[r].data=i,O[r].isModel=e.isModel,O[r].indx=r),e.updateMatrix(),O[r].merge(e.geometry,e.matrix)},this.addMeshGroups=function(){for(var e in O)if(O.hasOwnProperty(e)){var i;(i=O[e].isModel?new t.Mesh((new t.BufferGeometry).fromGeometry(O[e])):new t.Mesh(t.BufferGeometryUtils.mergeVertices((new t.BufferGeometry).fromGeometry(O[e])))).groupSrc=O[e].data.src,i.visible=!Y[i.groupSrc],i.matrixAutoUpdate=!1,i.isModel=O[e].isModel,i.indx=O[e].indx,this.add(i,O[e].data)}O={}};var V={};this.applyGI=function(e){this.fetchGI((function(t){if(t){var i=(_.groupData.id||"-")+"_"+_.groupData.index;if(t.wait)V[i]||(V[i]=[]),V[i].push(e);else{if(V[i])for(var n=0;n<V[i].length;++n)_.updateGI(V[i][n],t);V[i]={},_.updateGI(e,t)}}}))},this.dontGI=function(){return!_.groupData.hasLM&&_.groupData.custom||!_.ambientShad||p.isMobile};var K="";new t.Vector3,this.lightmaps=[],this.fetchGI=function(e){if(_.singlePlayer){if(!c.isProd){var t=getSavedVal("lightmap");return t&&(K=t),localStorage.removeItem("lightmap"),e(f(K))}}else _.dontGI()||(_.groupData.custom?_.lightmaps["c"+_.groupData.id]?e(_.lightmaps["c"+_.groupData.id]):(_.lightmaps["c"+_.groupData.id]={wait:!0},fetch("https://user-assets.krunker.io/m"+_.groupData.id+"/lightmap.txt?v="+n.randInt(1,1e7)).then(e=>e.text()).then(t=>{t=f(t),_.lightmaps["c"+_.groupData.id]=t,e(t)}).catch(e=>{c.isProp||console.log("LIGHTMAP ERROR",e)})):null==_.lightmaps[_.groupData.index]?(_.lightmaps[_.groupData.index]={wait:!0},fetch("/lightmaps/lightmap_"+_.groupData.index+".txt?v="+r).then(e=>e.text()).then(t=>{(t=f(t))&&(t.illumMlt=c.illumMO[_.groupData.index]||1,_.lightmaps[_.groupData.index]=t||null,e(t))}).catch(e=>{c.isProp||console.log("LIGHTMAP ERROR",e)})):e(_.lightmaps[_.groupData.index]))},this.updateGI=function(e,t){if(e&&e.indx&&t[e.indx]&&"Mesh"==e.type&&"BufferGeometry"==e.geometry.type&&e.geometry.attributes&&e.geometry.attributes.color){e.updateMatrixWorld();for(var i=e.geometry.attributes.color.array,n=e.geometry.attributes.position.array,r=0,a=0;a<n.length;a+=3){r=a/3;var s=t[e.indx][r];null!=(s=1-Math.min(1,(1-s)*((_.ambientShad||1)*(t.illumMlt||1))))&&(i[a]*=s,i[a+1]=i[a+1]*s,i[a+2]=i[a+2]*s)}e.geometry.attributes.color.needsUpdate=!0}},this.finalizeInstanceGroups=function(){this.ShaderMesh.enabled&&this.ShaderMesh.finalize()},this.clearInstances=function(){this.ShaderMesh.reset()};var Y={};this.toggleMeshGroup=function(e,i){Y[e]=!i,this.scene&&this.scene.traverse((function(n){n instanceof t.Mesh&&(n.groupSrc==e||n.dSrc==e)&&(n.visible=i)}))},this.add=function(e,t){t&&(e.castShadow=t.shadows,e.receiveShadow=t.shadows||t.shadowsR,e.material=this.getMat(this.noTex&&!t.forceTex?"default":t.src,t),e.dSrc=t.src,e.indx=n.getMeshGroupIndex(t,this.noTex)),this.scene.add(e),this.updateShadowMap(),t&&t.skipGI||this.applyGI(e)},this.remove=function(e){this.scene.remove(e)},this.moveMesh=function(e,t,i,n){e&&(null!=t&&(e.position.x=t),null!=i&&(e.position.y=i),null!=n&&(e.position.z=n))},this.scaleMesh=function(e,t,i,n){e.scale.set(t,i,n)},this.rotateMesh=function(e,t,i,n){e&&((t||0==t)&&(e.rotation.y=t),(i||0==i)&&(e.rotation.x=i),(n||0==n)&&(e.rotation.z=n))},this.reset=function(){W=[],V={},O={},x={},S={},M={},U=[],instances.length=0,this.movTextures.length=0,this.movMeshes.length=0,this.frameMats.length=0,this.rgbMats.length=0,this.pulsMats.length=0,this.pulsVal=0,this.liquidVal=0,this.liquids.length=0}},e.exports.initScene=function(e,t){if(e,t,(t&&null!=t.ambCol||e.ambient)&&(this.ambientLight=new a.AmbientLight(t&&null!=t.ambCol?t.ambCol:e.ambient,null==e.ambientI?n.ambIntensity:e.ambientI),this.ambientLight.layers.enable(1),this.ambientLight.layers.enable(2),this.ambientLight.name="ambLight",!this.scene.getObjectByName("ambLight")&&this.scene.add(this.ambientLight)),t&&null!=t.lightCol||e.light){this.skyLight=new a.DirectionalLight(t&&null!=t.lightCol?t.lightCol:e.light,null==e.lightI?n.lightIntensity:e.lightI),this.skyLight.name="skyLight",this.skyLight.layers.enable(1),this.skyLight.layers.enable(2),this.scene.getObjectByName("skyLight")||this.scene.add(this.skyLight);var i=Math.PI*((null==e.sunAngY?n.sunAngleY:e.sunAngY)/-180),r=Math.PI*((null==e.sunAngX?n.sunAngleX:e.sunAngX)/-180),s=null==e.lightD?n.lightDistance:e.lightD;this.skyLight.position.x=s*Math.cos(r),this.skyLight.position.y=s*Math.sin(r)*Math.sin(i),this.skyLight.position.z=s*Math.sin(r)*Math.cos(i),this.skyLight.castShadow=!0;var o=this.highResShad?4096:e.shadowR||n.shadowRes;this.skyLight.shadow.mapSize.width=o,this.skyLight.shadow.mapSize.height=o,this.skyLight.shadow.camera.far=e.shadowD||n.shadowDst,this.skyLight.shadow.bias=-4e-4}this.scene.fog=new a.Fog(t&&null!=t.fogC?t.fogC:e.fog,1,t&&null!=t.fogD?t.fogD:e.fogD),this.scene.fog.ogFar=this.scene.fog.far,this.renderer&&this.renderer.setClearColor(t&&null!=t.skyCol?t.skyCol:e.sky)},e.exports.regenSky=function(e,t){this.renderer.setClearColor(t&&null!=t.skyCol?t.skyCol:e.sky)}},function(e,t,i){const n=i(13),r=i(3);i(2);var a;const s=[{stp:0,col:null},{stp:.5,col:null},{stp:1,col:null}];class o extends r.Object3D{static fromConfig(e,t){return new o(e,t.skyDomeCol0,t.skyDomeCol1,t.skyDomeCol2,t.skyDomeEmis,t.skyDomeTex,t.skyDomeMovD,t.skyDomeMovT)}constructor(e,t,i,o,l,c,d,p){super();var h={src:"sky_6",emissive:l||null,movT:null!=p&&p/1e6,movD:d};a=new r.MeshBasicMaterial({color:"#ffffff",depthWrite:!1,flatShading:!1,vertexColors:r.VertexColors,side:r.BackSide,transparent:!0}),c&&(e.loadTexture(a,h.src,h),h.emissive&&e.loadTexture(a,h.src+"_e",h,"emissiveMap")),s[0].col=new r.Color(t||n.skyDome[0]),s[1].col=new r.Color(i||n.skyDome[1]),s[2].col=new r.Color(o||n.skyDome[2]);let u=new r.SphereGeometry(50,32,32);u.computeBoundingBox();let f=u.boundingBox,m=(new r.Vector3).subVectors(f.max,f.min),g=["a","b","c"],y=new r.Vector3,v=0;for(let e,t=0;t<s.length-1;t++){e=s[t+1].stp-s[t].stp;for(let i,n=0;n<u.faces.length;n++){i=u.faces[n];for(var w=0;3>w;w++)v=y.subVectors(u.vertices[i[g[w]]],f.min).divide(m).y,v=1-v,v>=s[t].stp&&v<=s[t+1].stp&&(i.vertexColors[w]=s[t].col.clone().lerp(s[t+1].col,(v-s[t].stp)/e))}}u.computeVertexNormals(!0),u.computeFaceNormals(),this.baseMesh=new r.Mesh(u,a),this.baseMesh.doubleSided=!1,this.add(this.baseMesh)}}e.exports=o},function(e,t){e.exports=function(e){return function(){function t(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1);i&&(i.inherited||0>=i.groupCount)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0===i?this.smooth:i.smooth,groupStart:void 0===i?0:i.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){return 0<this.materials.length?this.materials[this.materials.length-1]:void 0},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&1<this.materials.length)for(var i=this.materials.length-1;0<=i;i--)0>=this.materials[i].groupCount&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var i=parseInt(e,10);return 3*(0<=i?i-1:i+t/3)},parseNormalIndex:function(e,t){var i=parseInt(e,10);return 3*(0<=i?i-1:i+t/3)},parseUVIndex:function(e,t){var i=parseInt(e,10);return 2*(0<=i?i-1:i+t/2)},addVertex:function(e,t,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addFaceNormal:function(e,t,i){var n=this.vertices,r=this.object.geometry.normals;o.fromArray(n,e),l.fromArray(n,t),c.fromArray(n,i),p.subVectors(c,l),d.subVectors(o,l),p.cross(d),p.normalize(),r.push(p.x,p.y,p.z),r.push(p.x,p.y,p.z),r.push(p.x,p.y,p.z)},addColor:function(e,t,i){var n=this.colors,r=this.object.geometry.colors;void 0!==n[e]&&r.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&r.push(n[t+0],n[t+1],n[t+2]),void 0!==n[i]&&r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,a,s,o,l){var c=this.vertices.length,d=this.parseVertexIndex(e,c),p=this.parseVertexIndex(t,c),h=this.parseVertexIndex(i,c);if(this.addVertex(d,p,h),this.addColor(d,p,h),void 0!==s&&""!==s){var u=this.normals.length;d=this.parseNormalIndex(s,u),p=this.parseNormalIndex(o,u),h=this.parseNormalIndex(l,u),this.addNormal(d,p,h)}else this.addFaceNormal(d,p,h);if(void 0!==n&&""!==n){var f=this.uvs.length;d=this.parseUVIndex(n,f),p=this.parseUVIndex(r,f),h=this.parseUVIndex(a,f),this.addUV(d,p,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,i=0,n=e.length;i<n;i++)this.addVertexPoint(this.parseVertexIndex(e[i],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,a=e.length;r<a;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));var s=0;for(a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],n))}};return e.startObject("",!1),e}function i(t){this.manager=void 0===t?e.DefaultLoadingManager:t,this.materials=null}var n=/^[og]\s*(.+)?/,r=/^mtllib /,a=/^usemtl /,s=/^usemap /,o=new e.Vector3,l=new e.Vector3,c=new e.Vector3,d=new e.Vector3,p=new e.Vector3;return i.prototype={constructor:i,load:function(t,i,n,r){var a=this,s=new e.FileLoader(a.manager);s.setPath(this.path),s.load(t,(function(e){try{i(a.parse(e))}catch(e){r?r(e):console.error(e),a.manager.itemError(t)}}),n,r)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(i){console.time("OBJLoader");var o=new t;-1!==i.indexOf("\r\n")&&(i=i.replace(/\r\n/g,"\n")),-1!==i.indexOf("\\\n")&&(i=i.replace(/\\\n/g,""));for(var l=i.split("\n"),c="",d="",p=[],h="function"==typeof"".trimLeft,u=0,f=l.length;u<f;u++)if(c=l[u],0!==(c=h?c.trimLeft():c.trim()).length&&"#"!==(d=c.charAt(0)))if("v"===d){var m=c.split(/\s+/);switch(m[0]){case"v":o.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),7<=m.length?o.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6])):o.colors.push(void 0,void 0,void 0);break;case"vn":o.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":o.uvs.push(parseFloat(m[1]),parseFloat(m[2]))}}else if("f"===d){for(var g,y=c.substr(1).trim().split(/\s+/),v=[],w=0,b=y.length;w<b;w++)if(0<(g=y[w]).length){var x=g.split("/");v.push(x)}var S=v[0];for(w=1,b=v.length-1;w<b;w++){var M=v[w],T=v[w+1];o.addFace(S[0],M[0],T[0],S[1],M[1],T[1],S[2],M[2],T[2])}}else if("l"===d){var _=c.substring(1).trim().split(" "),O=[],C=[];if(-1===c.indexOf("/"))O=_;else for(var E,A=0,R=_.length;A<R;A++)""!==(E=_[A].split("/"))[0]&&O.push(E[0]),""!==E[1]&&C.push(E[1]);o.addLineGeometry(O,C)}else if("p"===d){var k=c.substr(1).trim().split(" ");o.addPointGeometry(k)}else if(null!==(p=n.exec(c))){var L=(" "+p[0].substr(1).trim()).substr(1);o.startObject(L)}else if(a.test(c))o.object.startMaterial(c.substring(7).trim(),o.materialLibraries);else if(r.test(c))o.materialLibraries.push(c.substring(7).trim());else if(s.test(c));else{if("s"!==d){if("\0"===c)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+c+'"')}if(1<(p=c.split(" ")).length){var I=p[1].trim().toLowerCase();o.object.smooth="0"!==I&&"off"!==I}else o.object.smooth=!0;(K=o.object.currentMaterial())&&(K.smooth=o.object.smooth)}o.finalize();var P=new e.Group;if(P.materialLibraries=[].concat(o.materialLibraries),1==(1!==o.objects.length||0!==o.objects[0].geometry.vertices.length))for(u=0,f=o.objects.length;u<f;u++){var D=o.objects[u],B=D.geometry,z=D.materials,j="Line"===B.type,N="Points"===B.type,F=!1;if(0!==B.vertices.length){var H;(X=new e.BufferGeometry).setAttribute("position",new e.Float32BufferAttribute(B.vertices,3)),0<B.normals.length&&X.setAttribute("normal",new e.Float32BufferAttribute(B.normals,3)),0<B.colors.length&&(F=!0,X.setAttribute("color",new e.Float32BufferAttribute(B.colors,3))),!0===B.hasUVIndices&&X.setAttribute("uv",new e.Float32BufferAttribute(B.uvs,2));for(var G=[],U=0,W=z.length;U<W;U++){var V=(q=z[U]).name+"_"+q.smooth+"_"+F,K=o.materials[V];if(null!==this.materials)if(K=this.materials.create(q.name),!j||!K||K instanceof e.LineBasicMaterial){if(N&&K&&!(K instanceof e.PointsMaterial)){var Y=new e.PointsMaterial({size:10,sizeAttenuation:!1});e.Material.prototype.copy.call(Y,K),Y.color.copy(K.color),Y.map=K.map,K=Y}}else{var Z=new e.LineBasicMaterial;e.Material.prototype.copy.call(Z,K),Z.color.copy(K.color),K=Z}void 0===K&&((K=j?new e.LineBasicMaterial:N?new e.PointsMaterial({size:1,sizeAttenuation:!1}):new e.MeshPhongMaterial).name=q.name,K.flatShading=!q.smooth,K.vertexColors=F,o.materials[V]=K),G.push(K)}if(1<G.length){var q;for(U=0,W=z.length;U<W;U++)q=z[U],X.addGroup(q.groupStart,q.groupCount,U);H=j?new e.LineSegments(X,G):N?new e.Points(X,G):new e.Mesh(X,G)}else H=j?new e.LineSegments(X,G[0]):N?new e.Points(X,G[0]):new e.Mesh(X,G[0]);H.name=D.name,P.add(H)}}else if(0<o.vertices.length){var X;K=new e.PointsMaterial({size:1,sizeAttenuation:!1});(X=new e.BufferGeometry).setAttribute("position",new e.Float32BufferAttribute(o.vertices,3)),0<o.colors.length&&(X.setAttribute("color",new e.Float32BufferAttribute(o.colors,3)),K.vertexColors=!0);var J=new e.Points(X,K);P.add(J)}return console.timeEnd("OBJLoader"),P}},i}()}},function(e,t){e.exports=function(e){return function(){function t(t){e.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new s(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new o(e)})),this.register((function(e){return new r(e)})),this.register((function(e){return new d(e)}))}function i(){var e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}function n(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=A.MSFT_TEXTURE_DDS,this.ddsLoader=e}function r(e){this.parser=e,this.name=A.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=A.KHR_MATERIALS_UNLIT}function s(e){this.parser=e,this.name=A.KHR_MATERIALS_CLEARCOAT}function o(e){this.parser=e,this.name=A.KHR_MATERIALS_TRANSMISSION}function l(e){this.parser=e,this.name=A.KHR_TEXTURE_BASISU}function c(e){this.parser=e,this.name=A.EXT_TEXTURE_WEBP,this.isSupported=null}function d(e){this.name=A.EXT_MESHOPT_COMPRESSION,this.parser=e}function p(t){this.name=A.KHR_BINARY_GLTF,this.content=null,this.body=null;var i=new DataView(t,0,12);if(this.header={magic:e.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},"glTF"!==this.header.magic)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n,r=new DataView(t,12),a=0;a<r.byteLength;){n=r.getUint32(a,!0),a+=4;var s=r.getUint32(a,!0);if(a+=4,s===k.JSON){var o=new Uint8Array(t,12+a,n);this.content=e.LoaderUtils.decodeText(o)}else if(s===k.BIN){var l=12+a;this.body=t.slice(l,l+n)}a+=n}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=A.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function u(){this.name=A.KHR_TEXTURE_TRANSFORM}function f(t){e.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var i={specular:{value:(new e.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(var t in i)e.uniforms[t]=i[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\ttexelSpecular = sRGBToLinear( texelSpecular );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\nmaterial.specularColor = specularFactor;")},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function m(){return{name:A.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return f},extendParams:function(t,i,n){var r=i.extensions[this.name];t.color=new e.Color(1,1,1),t.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var s=r.diffuseFactor;t.color.fromArray(s),t.opacity=s[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(t,"map",r.diffuseTexture)),t.emissive=new e.Color(0,0,0),t.glossiness=void 0===r.glossinessFactor?1:r.glossinessFactor,t.specular=new e.Color(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;a.push(n.assignTexture(t,"glossinessMap",o)),a.push(n.assignTexture(t,"specularMap",o))}return Promise.all(a)},createMaterial:function(t){var i=new f(t);return i.fog=!0,i.color=t.color,i.map=void 0===t.map?null:t.map,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=void 0===t.aoMap?null:t.aoMap,i.aoMapIntensity=1,i.emissive=t.emissive,i.emissiveIntensity=1,i.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,i.bumpMap=void 0===t.bumpMap?null:t.bumpMap,i.bumpScale=1,i.normalMap=void 0===t.normalMap?null:t.normalMap,i.normalMapType=e.TangentSpaceNormalMap,t.normalScale&&(i.normalScale=t.normalScale),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=void 0===t.specularMap?null:t.specularMap,i.specular=t.specular,i.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,i.glossiness=t.glossiness,i.alphaMap=null,i.envMap=void 0===t.envMap?null:t.envMap,i.envMapIntensity=1,i.refractionRatio=.98,i}}}function g(){this.name=A.KHR_MESH_QUANTIZATION}function y(t,i,n,r){e.Interpolant.call(this,t,i,n,r)}function v(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function w(t){return void 0===t.DefaultMaterial&&(t.DefaultMaterial=new e.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e.FrontSide})),t.DefaultMaterial}function b(e,t,i){for(var n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function x(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function S(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(i=0,n=r.length;i<n;i++)e.morphTargetDictionary[r[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function M(e){var t=e.extensions&&e.extensions[A.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+T(t.attributes):e.indices+":"+T(e.attributes)+":"+e.mode}function T(e){for(var t="",i=Object.keys(e).sort(),n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function _(t,n){this.json=t||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new i,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?new e.ImageBitmapLoader(this.options.manager):new e.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function O(t,i,n){var r=i.attributes,a=new e.Box3;if(void 0!==r.POSITION){var s=(f=n.json.accessors[r.POSITION]).min,o=f.max;if(void 0!==s&&void 0!==o){a.set(new e.Vector3(s[0],s[1],s[2]),new e.Vector3(o[0],o[1],o[2]));var l=i.targets;if(void 0!==l){for(var c,d=new e.Vector3,p=new e.Vector3,h=0,u=l.length;h<u;h++)if(void 0!==(c=l[h]).POSITION){var f;s=(f=n.json.accessors[c.POSITION]).min,o=f.max;void 0!==s&&void 0!==o?(p.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),p.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),p.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),d.max(p)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}a.expandByVector(d)}t.boundingBox=a;var m=new e.Sphere;a.getCenter(m.center),m.radius=a.min.distanceTo(a.max)/2,t.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function C(e,t,i){function n(t,n){return i.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}var r=t.attributes,a=[];for(var s in r){var o=U[s]||s.toLowerCase();o in e.attributes||a.push(n(r[s],o))}if(void 0!==t.indices&&!e.index){var l=i.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return x(e,t),O(e,t,i),Promise.all(a).then((function(){return void 0===t.targets?e:function(e,t,i){for(var n=!1,r=!1,a=0,s=t.length;a<s&&(void 0!==(o=t[a]).POSITION&&(n=!0),void 0!==o.NORMAL&&(r=!0),!n||!r);a++);if(!n&&!r)return Promise.resolve(e);var o,l=[],c=[];for(a=0,s=t.length;a<s;a++){if(o=t[a],n){var d=void 0===o.POSITION?e.attributes.position:i.getDependency("accessor",o.POSITION);l.push(d)}if(r){d=void 0===o.NORMAL?e.attributes.normal:i.getDependency("accessor",o.NORMAL);c.push(d)}}return Promise.all([Promise.all(l),Promise.all(c)]).then((function(t){var i=t[0],a=t[1];return n&&(e.morphAttributes.position=i),r&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,i)}))}function E(t,i){var n=t.getIndex();if(null===n){var r=[],a=t.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var s=0;s<a.count;s++)r.push(s);t.setIndex(r),n=t.getIndex()}var o=n.count-2,l=[];if(i===e.TriangleFanDrawMode)for(s=1;s<=o;s++)l.push(n.getX(0)),l.push(n.getX(s)),l.push(n.getX(s+1));else for(s=0;s<o;s++)0==s%2?(l.push(n.getX(s)),l.push(n.getX(s+1)),l.push(n.getX(s+2))):(l.push(n.getX(s+2)),l.push(n.getX(s+1)),l.push(n.getX(s)));l.length/3!=o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=t.clone();return c.setIndex(l),c}t.prototype=Object.assign(Object.create(e.Loader.prototype),{constructor:t,load:function(t,i,n,r){var a,s=this;a=""===this.resourcePath?""===this.path?e.LoaderUtils.extractUrlBase(t):this.path:this.resourcePath,this.manager.itemStart(t);var o=function(e){r?r(e):console.error(e),s.manager.itemError(t),s.manager.itemEnd(t)},l=new e.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(e){try{s.parse(e,a,(function(e){i(e),s.manager.itemEnd(t)}),o)}catch(e){o(e)}}),n,o)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(t,i,r,s){var o,l={},c={};if("string"==typeof t)o=t;else if(e.LoaderUtils.decodeText(new Uint8Array(t,0,4))===R){try{l[A.KHR_BINARY_GLTF]=new p(t)}catch(e){return void(s&&s(e))}o=l[A.KHR_BINARY_GLTF].content}else o=e.LoaderUtils.decodeText(new Uint8Array(t));var d=JSON.parse(o);if(void 0===d.asset||2>d.asset.version[0])s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var f=new _(d,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(var y,v=0;v<this.pluginCallbacks.length;v++)c[(y=this.pluginCallbacks[v](f)).name]=y,l[y.name]=!0;if(d.extensionsUsed)for(v=0;v<d.extensionsUsed.length;++v){var w=d.extensionsUsed[v],b=d.extensionsRequired||[];w===A.KHR_MATERIALS_UNLIT?l[w]=new a:w===A.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS?l[w]=new m:w===A.KHR_DRACO_MESH_COMPRESSION?l[w]=new h(d,this.dracoLoader):w===A.MSFT_TEXTURE_DDS?l[w]=new n(this.ddsLoader):w===A.KHR_TEXTURE_TRANSFORM?l[w]=new u:w===A.KHR_MESH_QUANTIZATION?l[w]=new g:0<=b.indexOf(w)&&void 0===c[w]&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}f.setExtensions(l),f.setPlugins(c),f.parse(r,s)}}});var A={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};r.prototype._markDefs=function(){for(var e,t=this.parser,i=this.parser.json.nodes||[],n=0,r=i.length;n<r;n++)(e=i[n]).extensions&&e.extensions[this.name]&&void 0!==e.extensions[this.name].light&&t._addNodeRef(this.cache,e.extensions[this.name].light)},r.prototype._loadLight=function(t){var i=this.parser,n="light:"+t,r=i.cache.get(n);if(r)return r;var a,s=i.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t],l=new e.Color(16777215);void 0!==o.color&&l.fromArray(o.color);var c=void 0===o.range?0:o.range;switch(o.type){case"directional":(a=new e.DirectionalLight(l)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new e.PointLight(l)).distance=c;break;case"spot":(a=new e.SpotLight(l)).distance=c,o.spot=o.spot||{},o.spot.innerConeAngle=void 0===o.spot.innerConeAngle?0:o.spot.innerConeAngle,o.spot.outerConeAngle=void 0===o.spot.outerConeAngle?Math.PI/4:o.spot.outerConeAngle,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+o.type+'".')}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=i.createUniqueName(o.name||"light_"+t),r=Promise.resolve(a),i.cache.add(n,r),r},r.prototype.createNodeAttachment=function(e){var t=this,i=this.parser,n=i.json.nodes[e],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return i._getNodeRef(t.cache,r,e)}))},a.prototype.getMaterialType=function(){return e.MeshBasicMaterial},a.prototype.extendParams=function(t,i,n){var r=[];t.color=new e.Color(1,1,1),t.opacity=1;var a=i.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var s=a.baseColorFactor;t.color.fromArray(s),t.opacity=s[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(t,"map",a.baseColorTexture))}return Promise.all(r)},s.prototype.getMaterialType=function(t){var i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?e.MeshPhysicalMaterial:null},s.prototype.extendMaterialParams=function(t,i){var n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(i.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&a.push(n.assignTexture(i,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(i.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&a.push(n.assignTexture(i,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(a.push(n.assignTexture(i,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){var o=s.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new e.Vector2(o,o)}return Promise.all(a)},o.prototype.getMaterialType=function(t){var i=this.parser.json.materials[t];return i.extensions&&i.extensions[this.name]?e.MeshPhysicalMaterial:null},o.prototype.extendMaterialParams=function(e,t){var i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=[],a=n.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&r.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)},l.prototype.loadTexture=function(e){var t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var r=n.extensions[this.name],a=i.images[r.source],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&0<=i.extensionsRequired.indexOf(this.name))throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,s)},c.prototype.loadTexture=function(e){var t=this.name,i=this.parser,n=i.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;var a=r.extensions[t],s=n.images[a.source],o=s.uri?i.options.manager.getHandler(s.uri):i.textureLoader;return this.detectSupport().then((function(r){if(r)return i.loadTextureImage(e,s,o);if(n.extensionsRequired&&0<=n.extensionsRequired.indexOf(t))throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)}))},c.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},d.prototype.loadBufferView=function(e){var t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){var n=i.extensions[this.name],r=this.parser.getDependency("buffer",n.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&0<=t.extensionsRequired.indexOf(this.name))throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,a.ready]).then((function(e){var t=n.byteOffset||0,i=n.byteLength||0,r=n.count,s=n.byteStride,o=new ArrayBuffer(r*s),l=new Uint8Array(e[0],t,i);return a.decodeGltfBuffer(new Uint8Array(o),r,s,l,n.mode,n.filter),o}))}return null};var R="glTF",k={JSON:1313821514,BIN:5130562};h.prototype.decodePrimitive=function(e,t){var i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(var c in a){var d=U[c]||c.toLowerCase();s[d]=a[c]}for(c in e.attributes){d=U[c]||c.toLowerCase();if(void 0!==a[c]){var p=i.accessors[e.attributes[c]],h=N[p.componentType];l[d]=h,o[d]=!0===p.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var i in e.attributes){var n=e.attributes[i],r=o[i];void 0!==r&&(n.normalized=r)}t(e)}),s,l)}))}))},u.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},f.prototype=Object.create(e.MeshStandardMaterial.prototype),f.prototype.constructor=f,f.prototype.copy=function(t){return e.MeshStandardMaterial.prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},y.prototype=Object.create(e.Interpolant.prototype),y.prototype.constructor=y,y.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=0;r!==n;r++)t[r]=i[e*n*3+n+r];return t},y.prototype.beforeStart_=y.prototype.copySampleValue_,y.prototype.afterEnd_=y.prototype.copySampleValue_,y.prototype.interpolate_=function(e,t,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=3*s,l=n-t,c=(i-t)/l,d=c*c,p=d*c,h=e*o,u=h-o,f=-2*p+3*d,m=p-d,g=0;g!==s;g++){var y=a[u+g+s],v=a[u+g+2*s]*l,w=a[h+g+s],b=a[h+g]*l;r[g]=(1-f)*y+(m-d+c)*v+f*w+m*b}return r};var L=0,I=1,P=2,D=3,B=4,z=5,j=6,N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},F={9728:e.NearestFilter,9729:e.LinearFilter,9984:e.NearestMipmapNearestFilter,9985:e.LinearMipmapNearestFilter,9986:e.NearestMipmapLinearFilter,9987:e.LinearMipmapLinearFilter},H={33071:e.ClampToEdgeWrapping,33648:e.MirroredRepeatWrapping,10497:e.RepeatWrapping},G={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},W={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},V={CUBICSPLINE:void 0,LINEAR:e.InterpolateLinear,STEP:e.InterpolateDiscrete},K="OPAQUE",Y="MASK",Z="BLEND";return _.prototype.setExtensions=function(e){this.extensions=e},_.prototype.setPlugins=function(e){this.plugins=e},_.prototype.parse=function(e,t){var i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:i,userData:{}};b(r,a,n),x(a,n),e(a)})).catch(t)},_.prototype._markDefs=function(){for(var e,t=this.json.nodes||[],i=this.json.skins||[],n=this.json.meshes||[],r=0,a=i.length;r<a;r++)for(var s=0,o=(e=i[r].joints).length;s<o;s++)t[e[s]].isBone=!0;for(var l,c=0,d=t.length;c<d;c++)void 0!==(l=t[c]).mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)},_.prototype._addNodeRef=function(e,t){void 0===t||(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},_.prototype._getNodeRef=function(e,t,i){if(1>=e.refs[t])return i;var n=i.clone();return n.name+="_instance_"+e.uses[t]++,n},_.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var i,n=0;n<t.length;n++)if(i=e(t[n]))return i},_.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var i,n=[],r=0;r<t.length;r++)(i=e(t[r]))&&n.push(i);return n},_.prototype.getDependency=function(e,t){var i=e+":"+t,n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n},_.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return i.getDependency(e,n)}))),this.cache.add(e,t)}return t},_.prototype.loadBuffer=function(e){var t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[A.KHR_BINARY_GLTF].body);var n=this.options;return new Promise((function(e,r){i.load(v(t.uri,n.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},_.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)}))},_.prototype.loadAccessor=function(t){var i=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0===r.bufferView?a.push(null):a.push(this.getDependency("bufferView",r.bufferView)),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(t){var a,s,o=t[0],l=G[r.type],c=N[r.componentType],d=c.BYTES_PER_ELEMENT,p=r.byteOffset||0,h=void 0===r.bufferView?void 0:n.bufferViews[r.bufferView].byteStride,u=!0===r.normalized;if(h&&h!==d*l){var f=Math.floor(p/h),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+f+":"+r.count,g=i.cache.get(m);g||(a=new c(o,f*h,r.count*h/d),g=new e.InterleavedBuffer(a,h/d),i.cache.add(m,g)),s=new e.InterleavedBufferAttribute(g,l,p%h/d,u)}else a=null===o?new c(r.count*l):new c(o,p,r.count*l),s=new e.BufferAttribute(a,l,u);if(void 0!==r.sparse){var y=G.SCALAR,v=N[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,x=new v(t[1],w,r.sparse.count*y),S=new c(t[2],b,r.sparse.count*l);null!==o&&(s=new e.BufferAttribute(s.array.slice(),s.itemSize,s.normalized));for(var M,T=0,_=x.length;T<_;T++)if(M=x[T],s.setX(M,S[T*l]),2<=l&&s.setY(M,S[T*l+1]),3<=l&&s.setZ(M,S[T*l+2]),4<=l&&s.setW(M,S[T*l+3]),5<=l)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}return s}))},_.prototype.loadTexture=function(e){var t,i,n=this.json,r=this.options,a=n.textures[e],s=a.extensions||{};return(t=s[A.MSFT_TEXTURE_DDS]?n.images[s[A.MSFT_TEXTURE_DDS].source]:n.images[a.source]).uri&&(i=r.manager.getHandler(t.uri)),i||(i=s[A.MSFT_TEXTURE_DDS]?this.extensions[A.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,i)},_.prototype.loadTextureImage=function(t,i,n){var r=this,a=this.json,s=this.options,o=a.textures[t],l=self.URL||self.webkitURL,c=i.uri,d=!1,p=!0;return"image/jpeg"===i.mimeType&&(p=!1),void 0!==i.bufferView&&(c=r.getDependency("bufferView",i.bufferView).then((function(e){if("image/png"===i.mimeType){var t=new DataView(e,25,1).getUint8(0,!1);p=6===t||4===t||3===t}d=!0;var n=new Blob([e],{type:i.mimeType});return c=l.createObjectURL(n)}))),Promise.resolve(c).then((function(t){return new Promise((function(i,r){var a=i;!0===n.isImageBitmapLoader&&(a=function(t){i(new e.CanvasTexture(t))}),n.load(v(t,s.path),a,void 0,r)}))})).then((function(i){!0===d&&l.revokeObjectURL(c),i.flipY=!1,o.name&&(i.name=o.name),p||(i.format=e.RGBFormat);var n=(a.samplers||{})[o.sampler]||{};return i.magFilter=F[n.magFilter]||e.LinearFilter,i.minFilter=F[n.minFilter]||e.LinearMipmapLinearFilter,i.wrapS=H[n.wrapS]||e.RepeatWrapping,i.wrapT=H[n.wrapT]||e.RepeatWrapping,r.associations.set(i,{type:"textures",index:t}),i}))},_.prototype.assignTexture=function(e,t,i){var n=this;return this.getDependency("texture",i.index).then((function(r){if(void 0===i.texCoord||0==i.texCoord||"aoMap"===t&&1==i.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),n.extensions[A.KHR_TEXTURE_TRANSFORM]){var a=void 0===i.extensions?void 0:i.extensions[A.KHR_TEXTURE_TRANSFORM];if(a){var s=n.associations.get(r);r=n.extensions[A.KHR_TEXTURE_TRANSFORM].extendTexture(r,a),n.associations.set(r,s)}}e[t]=r}))},_.prototype.assignFinalMaterial=function(t){var i=t.geometry,n=t.material,r=void 0!==i.attributes.tangent,a=void 0!==i.attributes.color,s=void 0===i.attributes.normal,o=!0===t.isSkinnedMesh,l=0<Object.keys(i.morphAttributes).length,c=l&&void 0!==i.morphAttributes.normal;if(t.isPoints){var d="PointsMaterial:"+n.uuid,p=this.cache.get(d);p||(p=new e.PointsMaterial,e.Material.prototype.copy.call(p,n),p.color.copy(n.color),p.map=n.map,p.sizeAttenuation=!1,this.cache.add(d,p)),n=p}else if(t.isLine){d="LineBasicMaterial:"+n.uuid;var h=this.cache.get(d);h||(h=new e.LineBasicMaterial,e.Material.prototype.copy.call(h,n),h.color.copy(n.color),this.cache.add(d,h)),n=h}if(r||a||s||o||l){d="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(d+="specular-glossiness:"),o&&(d+="skinning:"),r&&(d+="vertex-tangents:"),a&&(d+="vertex-colors:"),s&&(d+="flat-shading:"),l&&(d+="morph-targets:"),c&&(d+="morph-normals:");var u=this.cache.get(d);u||(u=n.clone(),o&&(u.skinning=!0),r&&(u.vertexTangents=!0),a&&(u.vertexColors=!0),s&&(u.flatShading=!0),l&&(u.morphTargets=!0),c&&(u.morphNormals=!0),this.cache.add(d,u),this.associations.set(u,this.associations.get(n))),n=u}n.aoMap&&void 0===i.attributes.uv2&&void 0!==i.attributes.uv&&i.setAttribute("uv2",i.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),t.material=n},_.prototype.getMaterialType=function(){return e.MeshStandardMaterial},_.prototype.loadMaterial=function(t){var i,n=this,r=this.json,a=this.extensions,s=r.materials[t],o={},l=s.extensions||{},c=[];if(l[A.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var d=a[A.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=d.getMaterialType(),c.push(d.extendParams(o,s,n))}else if(l[A.KHR_MATERIALS_UNLIT]){var p=a[A.KHR_MATERIALS_UNLIT];i=p.getMaterialType(),c.push(p.extendParams(o,s,n))}else{var h=s.pbrMetallicRoughness||{};if(o.color=new e.Color(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){var u=h.baseColorFactor;o.color.fromArray(u),o.opacity=u[3]}void 0!==h.baseColorTexture&&c.push(n.assignTexture(o,"map",h.baseColorTexture)),o.metalness=void 0===h.metallicFactor?1:h.metallicFactor,o.roughness=void 0===h.roughnessFactor?1:h.roughnessFactor,void 0!==h.metallicRoughnessTexture&&(c.push(n.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),c.push(n.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),i=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),c.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,o)}))))}!0===s.doubleSided&&(o.side=e.DoubleSide);var m=s.alphaMode||K;return m===Z?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,m===Y&&(o.alphaTest=void 0===s.alphaCutoff?.5:s.alphaCutoff)),void 0!==s.normalTexture&&i!==e.MeshBasicMaterial&&(c.push(n.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new e.Vector2(1,1),void 0!==s.normalTexture.scale&&o.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&i!==e.MeshBasicMaterial&&(c.push(n.assignTexture(o,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(o.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&i!==e.MeshBasicMaterial&&(o.emissive=(new e.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&i!==e.MeshBasicMaterial&&c.push(n.assignTexture(o,"emissiveMap",s.emissiveTexture)),Promise.all(c).then((function(){var r;return r=i===f?a[A.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new i(o),s.name&&(r.name=s.name),r.map&&(r.map.encoding=e.sRGBEncoding),r.emissiveMap&&(r.emissiveMap.encoding=e.sRGBEncoding),x(r,s),n.associations.set(r,{type:"materials",index:t}),s.extensions&&b(a,r,s),r}))},_.prototype.createUniqueName=function(t){for(var i=e.PropertyBinding.sanitizeNodeName(t||""),n=1;this.nodeNamesUsed[i];++n)i=t+"_"+n;return this.nodeNamesUsed[i]=!0,i},_.prototype.loadGeometries=function(t){function i(e){return r[A.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then((function(t){return C(t,e,n)}))}for(var n=this,r=this.extensions,a=this.primitiveCache,s=[],o=0,l=t.length;o<l;o++){var c,d=t[o],p=M(d),h=a[p];if(h)s.push(h.promise);else c=d.extensions&&d.extensions[A.KHR_DRACO_MESH_COMPRESSION]?i(d):C(new e.BufferGeometry,d,n),a[p]={primitive:d,promise:c},s.push(c)}return Promise.all(s)},_.prototype.loadMesh=function(t){for(var i,n=this,r=this.json,a=this.extensions,s=r.meshes[t],o=s.primitives,l=[],c=0,d=o.length;c<d;c++)i=void 0===o[c].material?w(this.cache):this.getDependency("material",o[c].material),l.push(i);return l.push(n.loadGeometries(o)),Promise.all(l).then((function(i){for(var r=i.slice(0,i.length-1),l=i[i.length-1],c=[],d=0,p=l.length;d<p;d++){var h,u=l[d],f=o[d],m=r[d];if(f.mode===B||f.mode===z||f.mode===j||void 0===f.mode)!0!==(h=!0===s.isSkinnedMesh?new e.SkinnedMesh(u,m):new e.Mesh(u,m)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),f.mode===z?h.geometry=E(h.geometry,e.TriangleStripDrawMode):f.mode===j&&(h.geometry=E(h.geometry,e.TriangleFanDrawMode));else if(f.mode===I)h=new e.LineSegments(u,m);else if(f.mode===D)h=new e.Line(u,m);else if(f.mode===P)h=new e.LineLoop(u,m);else{if(f.mode!==L)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);h=new e.Points(u,m)}0<Object.keys(h.geometry.morphAttributes).length&&S(h,s),h.name=n.createUniqueName(s.name||"mesh_"+t),x(h,s),f.extensions&&b(a,h,f),n.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var g=new e.Group;for(d=0,p=c.length;d<p;d++)g.add(c[d]);return g}))},_.prototype.loadCamera=function(t){var i,n=this.json.cameras[t],r=n[n.type];return r?("perspective"===n.type?i=new e.PerspectiveCamera(e.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(i=new e.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(i.name=this.createUniqueName(n.name)),x(i,n),Promise.resolve(i)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")},_.prototype.loadSkin=function(e){var t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return i.inverseBindMatrices=e,i}))},_.prototype.loadAnimation=function(t){for(var i=this.json.animations[t],n=[],r=[],a=[],s=[],o=[],l=0,c=i.channels.length;l<c;l++){var d=i.channels[l],p=i.samplers[d.sampler],h=d.target,u=void 0===h.node?h.id:h.node,f=void 0===i.parameters?p.input:i.parameters[p.input],m=void 0===i.parameters?p.output:i.parameters[p.output];n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",f)),a.push(this.getDependency("accessor",m)),s.push(p),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(s),Promise.all(o)]).then((function(n){for(var r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],c=[],d=0,p=r.length;d<p;d++){var h=r[d],u=a[d],f=s[d],m=o[d],g=l[d];if(void 0!==h){var v;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,W[g.path]){case W.weights:v=e.NumberKeyframeTrack;break;case W.rotation:v=e.QuaternionKeyframeTrack;break;case W.position:case W.scale:default:v=e.VectorKeyframeTrack}var w=h.name?h.name:h.uuid,b=void 0===m.interpolation?e.InterpolateLinear:V[m.interpolation],x=[];W[g.path]===W.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(w);var S=f.array;if(f.normalized){var M;if(S.constructor===Int8Array)M=1/127;else if(S.constructor===Uint8Array)M=1/255;else if(S.constructor==Int16Array)M=1/32767;else{if(S.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");M=1/65535}for(var T=new Float32Array(S.length),_=0,O=S.length;_<O;_++)T[_]=S[_]*M;S=T}var C;for(_=0,O=x.length;_<O;_++)C=new v(x[_]+"."+W[g.path],u.array,S,b),"CUBICSPLINE"===m.interpolation&&(C.createInterpolant=function(e){return new y(this.times,this.values,this.getValueSize()/3,e)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(C)}}var E=i.name?i.name:"animation_"+t;return new e.AnimationClip(E,void 0,c)}))},_.prototype.loadNode=function(t){var i=this.json,n=this.extensions,r=this,a=i.nodes[t],s=a.name?r.createUniqueName(a.name):"";return function(){var e=[];return void 0!==a.mesh&&e.push(r.getDependency("mesh",a.mesh).then((function(e){var t=r._getNodeRef(r.meshCache,a.mesh,e);return void 0!==a.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,i=a.weights.length;t<i;t++)e.morphTargetInfluences[t]=a.weights[t]})),t}))),void 0!==a.camera&&e.push(r.getDependency("camera",a.camera).then((function(e){return r._getNodeRef(r.cameraCache,a.camera,e)}))),r._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(i){var o;if((o=!0===a.isBone?new e.Bone:1<i.length?new e.Group:1===i.length?i[0]:new e.Object3D)!==i[0])for(var l=0,c=i.length;l<c;l++)o.add(i[l]);if(a.name&&(o.userData.name=a.name,o.name=s),x(o,a),a.extensions&&b(n,o,a),void 0!==a.matrix){var d=new e.Matrix4;d.fromArray(a.matrix),o.applyMatrix4(d)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return r.associations.set(o,{type:"nodes",index:t}),o}))},_.prototype.loadScene=function(){function t(i,n,r,a){var s=r.nodes[i];return a.getDependency("node",i).then((function(t){return void 0===s.skin?t:a.getDependency("skin",s.skin).then((function(e){for(var t=[],n=0,r=(i=e).joints.length;n<r;n++)t.push(a.getDependency("node",i.joints[n]));return Promise.all(t)})).then((function(n){return t.traverse((function(t){if(t.isMesh){var r,a=[],s=[],o=0;for(n.length;void 0>o;o++)if(r=n[o]){a.push(r);var l=new e.Matrix4;void 0!==i.inverseBindMatrices&&l.fromArray(i.inverseBindMatrices.array,16*o),s.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[o]);t.bind(new e.Skeleton(a,s),t.matrixWorld)}})),t}));var i})).then((function(e){n.add(e);var i=[];if(s.children)for(var o,l=s.children,c=0,d=l.length;c<d;c++)o=l[c],i.push(t(o,e,r,a));return Promise.all(i)}))}return function(i){var n=this.json,r=this.extensions,a=this.json.scenes[i],s=new e.Group;a.name&&(s.name=this.createUniqueName(a.name)),x(s,a),a.extensions&&b(r,s,a);for(var o=a.nodes||[],l=[],c=0,d=o.length;c<d;c++)l.push(t(o[c],s,n,this));return Promise.all(l).then((function(){return s}))}}(),t}()}},function(e,t,i){var n=i(59);e.exports=function(e){e.StrippedLambertMaterial=function(t){let i=new e.ShaderMaterial({name:"lambert-stripped",uniforms:e.UniformsUtils.merge([e.ShaderLib.lambert.uniforms]),lights:!0,fog:!0,vertexShader:"\n                #define LAMBERT\n                varying vec3 vLightFront;\n                varying vec3 vIndirectFront;\n                #ifdef DOUBLE_SIDED\n                    varying vec3 vLightBack;\n                    varying vec3 vIndirectBack;\n                #endif\n                #include <common>\n                #include <uv_pars_vertex>\n                #include <uv2_pars_vertex>\n                // #include <envmap_pars_vertex>\n                #include <bsdfs>\n                #include <lights_pars_begin>\n                #include <color_pars_vertex>\n                #include <fog_pars_vertex>\n                // #include <morphtarget_pars_vertex>\n                // #include <skinning_pars_vertex>\n                #include <shadowmap_pars_vertex>\n                // #include <logdepthbuf_pars_vertex>\n                // #include <clipping_planes_pars_vertex>\n                void main() {\n                    #include <uv_vertex>\n                    #include <uv2_vertex>\n                    #include <color_vertex>\n                    #include <beginnormal_vertex>\n                    // #include <morphnormal_vertex>\n                    // #include <skinbase_vertex>\n                    // #include <skinnormal_vertex>\n                    #include <defaultnormal_vertex>\n                    #include <begin_vertex>\n                    // #include <morphtarget_vertex>\n                    // #include <skinning_vertex>\n                    #include <project_vertex>\n                    // #include <logdepthbuf_vertex>\n                    // #include <clipping_planes_vertex>\n                    #include <worldpos_vertex>\n                    // #include <envmap_vertex>\n                    #include <lights_lambert_vertex>\n                    #include <shadowmap_vertex>\n                    #include <fog_vertex>\n                }\n                ",fragmentShader:"\n                uniform vec3 diffuse;\n                uniform vec3 emissive;\n                uniform float opacity;\n\n                varying vec3 vLightFront;\n                varying vec3 vIndirectFront;\n\n                #ifdef DOUBLE_SIDED\n                    varying vec3 vLightBack;\n                    varying vec3 vIndirectBack;\n                #endif\n\n\n                #include <common>\n                #include <packing>\n                // #include <dithering_pars_fragment>\n                #include <color_pars_fragment>\n                #include <uv_pars_fragment>\n                #include <uv2_pars_fragment>\n                #include <map_pars_fragment>\n                // #include <alphamap_pars_fragment>\n                #include <aomap_pars_fragment>\n                #include <lightmap_pars_fragment>\n                #include <emissivemap_pars_fragment>\n                // #include <envmap_pars_fragment>\n                #include <bsdfs>  // Shading functions\n                #include <lights_pars_begin>\n                #include <fog_pars_fragment>\n                #include <shadowmap_pars_fragment>\n                #include <shadowmask_pars_fragment>\n                // #include <specularmap_pars_fragment>\n                // #include <logdepthbuf_pars_fragment>\n                // #include <clipping_planes_pars_fragment>\n\n                void main() {\n\n                    // #include <clipping_planes_fragment>\n\n                    vec4 diffuseColor = vec4( diffuse, opacity );\n                    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n                    vec3 totalEmissiveRadiance = emissive;\n\n                    // #include <logdepthbuf_fragment>\n                    #include <map_fragment>\n                    #include <color_fragment>\n                    // #include <alphamap_fragment>\n                    #include <alphatest_fragment>\n                    // #include <specularmap_fragment>\n                    #include <emissivemap_fragment>\n\n                    // accumulation\n                    reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n                    #ifdef DOUBLE_SIDED\n\n                        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n                    #else\n\n                        reflectedLight.indirectDiffuse += vIndirectFront;\n\n                    #endif\n\n                    #include <lightmap_fragment>\n\n                    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n                    #ifdef DOUBLE_SIDED\n\n                        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n                    #else\n\n                        reflectedLight.directDiffuse = vLightFront;\n\n                    #endif\n\n                    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n                    // modulation\n                    #include <aomap_fragment>\n\n                    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n                    // #include <envmap_fragment>\n\n                    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n                    // #include <tonemapping_fragment>\n                    // #include <encodings_fragment>\n                    #include <fog_fragment>\n                    #include <premultiplied_alpha_fragment>\n                    // #include <dithering_fragment>\n                }\n                    "});return Object.assign(i,new e.MeshLambertMaterial(t)),i.isMeshLambertMaterial=!0,i.setValues(t),i},e.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texel = texture2D( tDiffuse, vUv );\n\tgl_FragColor = opacity * texel;\n}"},e.EffectComposer=function(t,i,n){if(this.renderer=t,void 0===i){var r={minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat,stencilBuffer:!1},a=t.getSize(new e.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=a.width,this._height=a.height,(i=new e.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,r)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=i.width,this._height=i.height;this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.RENDER=n,this.passes=[],void 0===e.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===e.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new e.ShaderPass(e.CopyShader),this.clock=new e.Clock},Object.assign(e.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},replacePass:function(e,t){this.passes[t]=e,e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var i,n,r=this.renderer.getRenderTarget(),a=!1,s=this.passes.length;for(n=0;n<s;n++)if(!1!==(i=this.passes[n]).enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),i.render(this.renderer,this.writeBuffer,this.readBuffer,t,a,this.RENDER),i.needsSwap){if(a){var o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==e.MaskPass&&(i instanceof e.MaskPass?a=!0:i instanceof e.ClearMaskPass&&(a=!1))}this.renderer.setRenderTarget(r)},reset:function(t){if(void 0===t){var i=this.renderer.getSize(new e.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=i.width,this._height=i.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(i,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}),e.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(e.Pass.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),e.Pass.FullScreenQuad=function(){var t=new e.OrthographicCamera(-1,1,1,-1,0,1),i=new e.PlaneBufferGeometry(2,2),n=function(t){this._mesh=new e.Mesh(i,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}(),e.ShaderPass=function(t,i){e.Pass.call(this),this.textureID=void 0===i?"tDiffuse":i,t instanceof e.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=e.UniformsUtils.clone(t.uniforms),this.material=new e.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.clock=new e.Clock,this.fsQuad=new e.Pass.FullScreenQuad(this.material)},new e.Vector2,e.ShaderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.ShaderPass,render:function(e,t,i,n,r,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),null==this.uniforms.time?this.uniforms.time={type:"1f",value:this.clock.getElapsedTime()}:this.uniforms.time.value=this.clock.getElapsedTime(),null==this.uniforms.delta?this.uniforms.delta={type:"1f",value:n}:this.uniforms.delta.value=n,null==this.uniforms.mouse?this.uniforms.mouse={value:a.tmpMouse}:this.uniforms.mouse.value=a.tmpMouse,null==this.uniforms.frame?this.uniforms.frame={value:1}:this.uniforms.frame.value++,this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}),e.RenderPass=function(t,i,n,r,a){e.Pass.call(this),this.scene=t,this.camera=i,this.layer=0,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0===a?0:a,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},e.RenderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.RenderPass,render:function(e,t,i){var n,r,a,s=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(n=e.getClearColor().getHex(),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.layer&&this.camera.layers.set(this.layer),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(n,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=s}});class t extends e.RawShaderMaterial{constructor(i,n){var r=n||{};r.aspectRatio=r.aspectRatio||2;let a=1500/r.aspectRatio;r.width=1500,r.hieght=a;let s=t.retriveUsedUniforms(i);var o=new e.Clock;super({vertexShader:"\n        attribute vec3 position;\n        attribute vec2 uv;\n        uniform mat4 projectionMatrix;\n        uniform mat4 modelViewMatrix;\n        varying vec2 vUv;\n        void main () {\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            vUv=uv;\n        }\n    ",fragmentShader:""}),(s.iTime||s.iTimeDelta||s.iFrame||s.iDate)&&((s.iTime||s.iTimeDelta)&&(this.clock=o),this.registerUpdate());let l=this.createUniformsObject(s,r);this.uniforms=l.prof;var c="\n        precision highp float;\n        uniform vec2 iResolution;\n        varying vec2 vUv;\n        vec4 texture(sampler2D sampler, vec2 coord){\n            return texture2D(sampler,  coord);\n        }\n        void  mainImage( out vec4,  vec2 fragCoord );\n        void main () {\n            vec4 outfrag;\n            mainImage(outfrag,iResolution*vUv);\n            gl_FragColor = outfrag;\n        }\n    \n"+l.code+"\n"+i;this.fragmentShader=c}registerUpdate(){setTimeout(()=>this.update(),0)}update(){if(this.uniforms.iTime&&(this.uniforms.iTime.value=this.clock.getElapsedTime()),this.uniforms.iTimeDelta&&(this.uniforms.iTimeDelta.value=this.clock.getDelta()),this.uniforms.iFrame&&++this.uniforms.iFrame.value,this.uniforms.iDate){let t=new Date,i=t.getSeconds()+60*t.getMinutes()+3600*t.getHours();this.uniforms.iDate.value=new e.Vector4(t.getFullYear(),t.getMonth(),t.getDay(),i)}if(this.uniforms.iChannelResolution){let t=t=>{this.uniforms["iChannel"+t]&&this.uniforms["iChannel"+t].value.image&&(this.uniforms.iChannelResolution.value[t]=new e.Vector3(this.uniforms["iChannel"+t].value.image.width,this.uniforms["iChannel"+t].value.image.height))};for(let e=0;4>e;e++)t(e)}requestAnimationFrame(()=>{this.update()})}static retriveUsedUniforms(e){let t=e.replace(n(),""),i={};return["iTime","iTimeDelta","iResolution","iFrame","iChannelTime[4]","iChannelResolution","iChannel0","iChannel1","iChannel2","iChannel3","iDate","iMouse"].forEach(e=>{t.includes(e)&&(i[e]=!0)}),i}createUniformsObject(t,i){function n(e){if(t["iChannel"+e]){let t=i.map?i.map:null;t=Array.isArray(t)?t[e]:t,r["iChannel"+e]={type:"t",value:t},a+="uniform sampler2D "+["iChannel"+e]+";\n"}}let r={},a="";t.iResolution&&(r.iResolution={value:new e.Vector2(i.width,i.hieght)}),t.iTime&&(r.iTime={type:"1f",value:this.clock.getElapsedTime()},a+="uniform float iTime;\n"),t.iDate&&(r.iDate={value:new e.Vector4},a+="uniform vec4 iDate;\n"),t.iTimeDelta&&(r.iTimeDelta={type:"1f",value:this.clock.getDelta()},a+="uniform float iTimeDelta;\n"),t.iFrame&&(r.iFrame={type:"1i",value:0},a+="uniform int iFrame;\n"),t.iMouse&&(r.iMouse={value:new e.Vector4(i.width/2,i.hieght/2,i.width/2,i.hieght/2)},a+="uniform vec4 iMouse;\n"),t.iChannelResolution&&(r.iChannelResolution={type:"v3v",value:[new e.Vector3,new e.Vector3,new e.Vector3,new e.Vector3]},a+="uniform vec3 iChannelResolution[4];\n");for(let e=0;4>e;e++)n(e);return{prof:r,code:a}}}e.ShaderToyMaterial=t,e.SAOShader={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new e.Vector2(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new e.Matrix4},cameraInverseProjectionMatrix:{value:new e.Matrix4},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#include <common>\nvarying vec2 vUv;\n#if DIFFUSE_TEXTURE == 1\nuniform sampler2D tDiffuse;\n#endif\nuniform sampler2D tDepth;\n#if NORMAL_TEXTURE == 1\nuniform sampler2D tNormal;\n#endif\nuniform float cameraNear;\nuniform float cameraFar;\nuniform mat4 cameraProjectionMatrix;\nuniform mat4 cameraInverseProjectionMatrix;\nuniform float scale;\nuniform float intensity;\nuniform float bias;\nuniform float kernelRadius;\nuniform float minResolution;\nuniform vec2 size;\nuniform float randomSeed;\n// RGBA depth\n#include <packing>\nvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t#if DIFFUSE_TEXTURE == 1\n\treturn texture2D( tDiffuse, vUv );\n\t#else\n\treturn vec4( 1.0 );\n\t#endif\n}\nfloat getDepth( const in vec2 screenPosition ) {\n\t#if DEPTH_PACKING == 1\n\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t#else\n\treturn texture2D( tDepth, screenPosition ).x;\n\t#endif\n}\nfloat getViewZ( const in float depth ) {\n\t#if PERSPECTIVE_CAMERA == 1\n\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t#else\n\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t#endif\n}\nvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\tclipPosition *= clipW; // unprojection.\n\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n}\nvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t#if NORMAL_TEXTURE == 1\n\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t#else\n\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n\t#endif\n}\nfloat scaleDividedByCameraFar;\nfloat minResolutionMultipliedByCameraFar;\nfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\tfloat viewDistance = length( viewDelta );\n\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n}\n// moving costly divides into consts\nconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\nconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\nfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t// precompute some variables require in getOcclusion.\n\tscaleDividedByCameraFar = scale / cameraFar;\n\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\tvec2 radiusStep = radius;\n\tfloat occlusionSum = 0.0;\n\tfloat weightSum = 0.0;\n\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\tradius += radiusStep;\n\t\tangle += ANGLE_STEP;\n\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\tcontinue;\n\t\t}\n\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\tweightSum += 1.0;\n\t}\n\tif( weightSum == 0.0 ) discard;\n\treturn occlusionSum * ( intensity / weightSum );\n}\nvoid main() {\n\tfloat centerDepth = getDepth( vUv );\n\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\tdiscard;\n\t}\n\tfloat centerViewZ = getViewZ( centerDepth );\n\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\tgl_FragColor = getDefaultColor( vUv );\n\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n}"},e.UnpackDepthRGBAShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\n#include <packing>\nvoid main() {\n\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\tgl_FragColor = vec4( vec3( depth ), opacity );\n}"},e.DepthLimitedBlurShader={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new e.Vector2(512,512)},sampleUvOffsets:{value:[new e.Vector2(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"#include <common>\nuniform vec2 size;\nvarying vec2 vUv;\nvarying vec2 vInvSize;\nvoid main() {\n\tvUv = uv;\n\tvInvSize = 1.0 / size;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#include <common>\n#include <packing>\nuniform sampler2D tDiffuse;\nuniform sampler2D tDepth;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform float depthCutoff;\nuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\nuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\nvarying vec2 vUv;\nvarying vec2 vInvSize;\nfloat getDepth( const in vec2 screenPosition ) {\n\t#if DEPTH_PACKING == 1\n\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t#else\n\treturn texture2D( tDepth, screenPosition ).x;\n\t#endif\n}\nfloat getViewZ( const in float depth ) {\n\t#if PERSPECTIVE_CAMERA == 1\n\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t#else\n\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t#endif\n}\nvoid main() {\n\tfloat depth = getDepth( vUv );\n\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\tdiscard;\n\t}\n\tfloat centerViewZ = -getViewZ( depth );\n\tbool rBreak = false, lBreak = false;\n\tfloat weightSum = sampleWeights[0];\n\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\t\tfloat sampleWeight = sampleWeights[i];\n\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\t\tif( ! rBreak ) {\n\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\tweightSum += sampleWeight;\n\t\t}\n\t\tsampleUv = vUv - sampleUvOffset;\n\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\t\tif( ! lBreak ) {\n\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\tweightSum += sampleWeight;\n\t\t}\n\t}\n\tgl_FragColor = diffuseSum / weightSum;\n}"},e.BlurShaderUtils={createSampleWeights:function(e,t){for(var i=function(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)},n=[],r=0;r<=e;r++)n.push(i(r,t));return n},createSampleOffsets:function(e,t){for(var i=[],n=0;n<=e;n++)i.push(t.clone().multiplyScalar(n));return i},configure:function(t,i,n,r){t.defines.KERNEL_RADIUS=i,t.uniforms.sampleUvOffsets.value=e.BlurShaderUtils.createSampleOffsets(i,r),t.uniforms.sampleWeights.value=e.BlurShaderUtils.createSampleWeights(i,n),t.needsUpdate=!0}},e.SAOPass=function(t,i,n,r,a){(e.Pass.call(this),this.scene=t,this.camera=i,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=void 0!==n&&n,this.supportsNormalTexture=void 0!==r&&r,this.originalClearColor=new e.Color,this.oldClearColor=new e.Color,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=void 0===a?new e.Vector2(256,256):new e.Vector2(a.x,a.y),this.saoRenderTarget=new e.WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new e.WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:e.NearestFilter,magFilter:e.NearestFilter,format:e.RGBAFormat}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension)&&((n=new e.DepthTexture).type=e.UnsignedShortType,n.minFilter=e.NearestFilter,n.maxFilter=e.NearestFilter,this.beautyRenderTarget.depthTexture=n,this.beautyRenderTarget.depthBuffer=!0);this.depthMaterial=new e.MeshDepthMaterial,this.depthMaterial.depthPacking=e.RGBADepthPacking,this.depthMaterial.blending=e.NoBlending,this.normalMaterial=new e.MeshNormalMaterial,this.normalMaterial.blending=e.NoBlending,void 0===e.SAOShader&&console.error("THREE.SAOPass relies on THREE.SAOShader"),this.saoMaterial=new e.ShaderMaterial({defines:Object.assign({},e.SAOShader.defines),fragmentShader:e.SAOShader.fragmentShader,vertexShader:e.SAOShader.vertexShader,uniforms:e.UniformsUtils.clone(e.SAOShader.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrix).invert(),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=e.NoBlending,void 0===e.DepthLimitedBlurShader&&console.error("THREE.SAOPass relies on THREE.DepthLimitedBlurShader"),this.vBlurMaterial=new e.ShaderMaterial({uniforms:e.UniformsUtils.clone(e.DepthLimitedBlurShader.uniforms),defines:Object.assign({},e.DepthLimitedBlurShader.defines),vertexShader:e.DepthLimitedBlurShader.vertexShader,fragmentShader:e.DepthLimitedBlurShader.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=e.NoBlending,this.hBlurMaterial=new e.ShaderMaterial({uniforms:e.UniformsUtils.clone(e.DepthLimitedBlurShader.uniforms),defines:Object.assign({},e.DepthLimitedBlurShader.defines),vertexShader:e.DepthLimitedBlurShader.vertexShader,fragmentShader:e.DepthLimitedBlurShader.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=e.NoBlending,void 0===e.CopyShader&&console.error("THREE.SAOPass relies on THREE.CopyShader"),this.materialCopy=new e.ShaderMaterial({uniforms:e.UniformsUtils.clone(e.CopyShader.uniforms),vertexShader:e.CopyShader.vertexShader,fragmentShader:e.CopyShader.fragmentShader,blending:e.NoBlending}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=e.CustomBlending,this.materialCopy.blendSrc=e.DstColorFactor,this.materialCopy.blendDst=e.ZeroFactor,this.materialCopy.blendEquation=e.AddEquation,this.materialCopy.blendSrcAlpha=e.DstAlphaFactor,this.materialCopy.blendDstAlpha=e.ZeroFactor,this.materialCopy.blendEquationAlpha=e.AddEquation,void 0===e.UnpackDepthRGBAShader&&console.error("THREE.SAOPass relies on THREE.UnpackDepthRGBAShader"),this.depthCopy=new e.ShaderMaterial({uniforms:e.UniformsUtils.clone(e.UnpackDepthRGBAShader.uniforms),vertexShader:e.UnpackDepthRGBAShader.vertexShader,fragmentShader:e.UnpackDepthRGBAShader.fragmentShader,blending:e.NoBlending}),this.fsQuad=new e.Pass.FullScreenQuad(null)},e.SAOPass.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4},e.SAOPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.SAOPass,render:function(t,i,n){if(this.renderToScreen&&(this.materialCopy.blending=e.NoBlending,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),1!==this.params.output){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var r=t.autoClear;t.autoClear=!1,t.setRenderTarget(this.depthRenderTarget),t.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;var a=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=a,this.hBlurMaterial.uniforms.depthCutoff.value=a,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(e.BlurShaderUtils.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new e.Vector2(0,1)),e.BlurShaderUtils.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new e.Vector2(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),t.setClearColor(0),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(t,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1));var s=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,s=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),s.blending=0===this.params.output?e.CustomBlending:e.NoBlending,this.renderPass(t,s,this.renderToScreen?null:n),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=r}},renderPass:function(e,t,i,n,r){this.originalClearColor.copy(e.getClearColor());var a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,null!=n&&(e.setClearColor(n),e.setClearAlpha(r||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)},renderOverride:function(e,t,i,n,r){this.originalClearColor.copy(e.getClearColor());var a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,n=t.clearColor||n,r=t.clearAlpha||r,null!=n&&(e.setClearColor(n),e.setClearAlpha(r||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)},setSize:function(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrix).invert(),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}})}},function(e,t,i){"use strict";var n=e.exports=function(){return new RegExp("(?:"+n.line().source+")|(?:"+n.block().source+")","gm")};n.line=function(){return/(?:^|\s)\/\/(.+?)$/gm},n.block=function(){return/\/\*([\S\s]*?)\*\//gm}},function(e,t){e.exports=[{name:"Rainbow Hex",code:"\n\t#define c30 0.86602540378\n\t#define hm  1.33333333333\n\t#define grid 16.0\n\t#define smooth 0.02\n\t#define timeScale 0.1\n\tvec2 hex(vec2 v){\n\t\tfloat yc = abs(mod(v.x + floor((v.y*hm + 0.5))*(c30 / 2.0),c30) / c30 - 0.5);\n\t\tfloat y = floor(v.y*hm + yc);\n\t\tfloat x = floor(v.x/c30 + 0.5 + fract(y /  2.0))- fract(y / 2.0);\n\t\treturn vec2(x*c30,y /hm + 1.0/(hm * 4.0));\n\t}\n\tvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\t    float wave =  texture(iChannel0, vec2(0.0,1.0)).x;\n\t\tfloat wave2 = texture(iChannel0, vec2(0.0,.1)).x;\n\t\tvec2 uv = fragCoord.xy / vec2(iResolution.y,iResolution.y);\n\t  \tuv.x -= .5;\n\t    float rt = iTime * timeScale;\n\t    vec2 gv = hex(uv*grid)/grid;\n\t    vec2 mv = gv - 0.5;\n\t    vec2 rv = vec2(((atan(mv.x,mv.y)/3.141526) + cos(iTime + wave2)) / 2.0, length(mv * sin(iTime + wave2)));\n\t    float fv = fract((rv.x- rt) * cos(gv.x /20.0) * 2.0 + rv.y * 2.0);\n\t    float dist = length(uv - gv) * grid;\n\t    float dist2 = 1.0 - smoothstep(-smooth,0.0,dist - c30/2.);\n\t    dist += fv + wave2;\n\t    dist += cos(wave / 2.);\n\t    dist = smoothstep(0.5,0.5 + smooth,fract(dist));\n\t    float finCol = float(0.5);\n\t    finCol = mix(finCol, dist, dist2);\n\t\tfragColor = vec4(finCol) + vec4(cos(iTime + dist2 + wave2) + wave2, sin(fv * wave) * .5, sin(uv.x * 3.),  1.0);\n\t}"},{name:"Heart",code:"\n\t#define POINT_COUNT 8\n\n\tvec2 points[POINT_COUNT];\n\tconst float speed = -0.5;\n\tconst float len = 0.25;\n\tconst float scale = 0.012;\n\tfloat intensity = 1.3;\n\tfloat radius = 0.015;\n\tfloat sdBezier(vec2 pos, vec2 A, vec2 B, vec2 C){\n\t    vec2 a = B - A;\n\t    vec2 b = A - 2.0*B + C;\n\t    vec2 c = a * 2.0;\n\t    vec2 d = A - pos;\n\t    float kk = 1.0 / dot(b,b);\n\t    float kx = kk * dot(a,b);\n\t    float ky = kk * (2.0*dot(a,a)+dot(d,b)) / 3.0;\n\t    float kz = kk * dot(d,a);\n\t    float res = 0.0;\n\t    float p = ky - kx*kx;\n\t    float p3 = p*p*p;\n\t    float q = kx*(2.0*kx*kx - 3.0*ky) + kz;\n\t    float h = q*q + 4.0*p3;\n\t    if(h >= 0.0){\n\t        h = sqrt(h);\n\t        vec2 x = (vec2(h, -h) - q) / 2.0;\n\t        vec2 uv = sign(x)*pow(abs(x), vec2(1.0/3.0));\n\t        float t = uv.x + uv.y - kx;\n\t        t = clamp( t, 0.0, 1.0 );\n\t        vec2 qos = d + (c + b*t)*t;\n\t        res = length(qos);\n\t    }else{\n\t        float z = sqrt(-p);\n\t        float v = acos( q/(p*z*2.0) ) / 3.0;\n\t        float m = cos(v);\n\t        float n = sin(v)*1.732050808;\n\t        vec3 t = vec3(m + m, -n - m, n - m) * z - kx;\n\t        t = clamp( t, 0.0, 1.0 );\n\t        vec2 qos = d + (c + b*t.x)*t.x;\n\t        float dis = dot(qos,qos);\n\t        res = dis;\n\t        qos = d + (c + b*t.y)*t.y;\n\t        dis = dot(qos,qos);\n\t        res = min(res,dis);\n\t        qos = d + (c + b*t.z)*t.z;\n\t        dis = dot(qos,qos);\n\t        res = min(res,dis);\n\t        res = sqrt( res );\n\t    }\n\t    return res;\n\t}\n\tvec2 getHeartPosition(float t){\n\t    return vec2(16.0 * sin(t) * sin(t) * sin(t),\n\t                -(13.0 * cos(t) - 5.0 * cos(2.0*t)\n\t                - 2.0 * cos(3.0*t) - cos(4.0*t)));\n\t}\n\tfloat getGlow(float dist, float radius, float intensity){\n\t    return pow(radius/dist, intensity);\n\t}\n\tfloat getSegment(float t, vec2 pos, float offset){\n\t\tfor(int i = 0; i < POINT_COUNT; i++){\n\t        points[i] = getHeartPosition(offset + float(i)*len + fract(speed * t) * 6.28);\n\t    }\n\t    vec2 c = (points[0] + points[1]) / 2.0;\n\t    vec2 c_prev;\n\t\tfloat dist = 10000.0;\n\t    for(int i = 0; i < POINT_COUNT-1; i++){\n\t        c_prev = c;\n\t        c = (points[i] + points[i+1]) / 2.0;\n\t        dist = min(dist, sdBezier(pos, scale * c_prev, scale * points[i], scale * c));\n\t    }\n\t    return max(0.0, dist);\n\t}\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\t    vec2 uv = fragCoord/iResolution.xy;\n\t    float widthHeightRatio = iResolution.x/iResolution.y;\n\t    vec2 centre = vec2(0.5, 0.5);\n\t    vec2 pos = centre - uv;\n\t    pos.y /= widthHeightRatio;\n\t    pos.y += 0.03;\n\t    float t = iTime;\n\t    float dist = getSegment(t, pos, 0.0);\n\t    float glow = getGlow(dist, radius, intensity);\n\t    vec3 col = vec3(0.0);\n\t    col += 10.0*vec3(smoothstep(0.006, 0.003, dist));\n\t    col += glow * vec3(1.0,0.05,0.3);\n\t    dist = getSegment(t, pos, 3.4);\n\t    glow = getGlow(dist, radius, intensity);\n\t    col += 10.0*vec3(smoothstep(0.006, 0.003, dist));\n\t    col += glow * vec3(0.1,0.4,1.0);\n\t    col = 1.0 - exp(-col);\n\t    col = pow(col, vec3(0.4545));\n\t    fragColor = vec4(col,1.0);\n\t}\n\t"},{name:"Glob",code:"\n\tvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n\tvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n\tvec4 snoise(vec3 v){\n\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n\t// First corner\n\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n\t// Other corners\n\t  vec3 g = step(x0.yzx, x0.xyz);\n\t  vec3 l = 1.0 - g;\n\t  vec3 i1 = min( g.xyz, l.zxy );\n\t  vec3 i2 = max( g.xyz, l.zxy );\n\n\t  //  x0 = x0 - 0. + 0.0 * C\n\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n\t// Permutations\n\t  i = mod(i, 289.0 );\n\t  vec4 p = permute( permute( permute(\n\t             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n\t           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n\t// Gradients\n\t// ( N*N points uniformly over a square, mapped onto an octahedron.)\n\t  float n_ = 1.0/7.0; // N=7\n\t  vec3  ns = n_ * D.wyz - D.xzx;\n\n\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n\t  vec4 x_ = floor(j * ns.z);\n\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t  vec4 h = 1.0 - abs(x) - abs(y);\n\n\t  vec4 b0 = vec4( x.xy, y.xy );\n\t  vec4 b1 = vec4( x.zw, y.zw );\n\n\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t  vec4 sh = -step(h, vec4(0.0));\n\n\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n\t  vec3 p0 = vec3(a0.xy,h.x);\n\t  vec3 p1 = vec3(a0.zw,h.y);\n\t  vec3 p2 = vec3(a1.xy,h.z);\n\t  vec3 p3 = vec3(a1.zw,h.w);\n\n\t//Normalise gradients\n\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t  p0 *= norm.x;\n\t  p1 *= norm.y;\n\t  p2 *= norm.z;\n\t  p3 *= norm.w;\n\n\n\t// Mix final noise value\n\tvec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t    vec4 m2 = m * m;\n\t    vec4 m4 = m2 * m2;\n\n\t    vec4 pdotx = vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3));\n\n\t    vec4 temp = m2 * m * pdotx;\n\t    vec3 grad = -8.0 * (temp.x * x0 + temp.y * x1 + temp.z * x2 + temp.w * x3);\n\t    grad += m4.x * p0 + m4.y * p1 + m4.z * p2 + m4.w * p3;\n\n\t    return 42.0 * vec4(grad, dot(m4, pdotx));\n\t}\n\n\tmat3 fromEuler(vec3 ang) {\n\t\tvec2 a1 = vec2(sin(ang.x), cos(ang.x));\n\t\tvec2 a2 = vec2(sin(ang.y), cos(ang.y));\n\t\tvec2 a3 = vec2(sin(ang.z), cos(ang.z));\n\t\treturn mat3(\n\t\t\tvec3(a1.y * a3.y + a1.x * a2.x * a3.x, a1.y * a2.x * a3.x + a3.y * a1.x, -a2.y * a3.x),\n\t\t\tvec3(-a2.y * a1.x, a1.y * a2.y, a2.x),\n\t\t\tvec3(a3.y * a1.x * a2.x + a1.y * a3.x, a1.x * a3.x - a1.y * a3.y * a2.x, a2.y * a3.y)\n\t\t);\n\t}\n\n\n\tvoid mainVR(out vec4 fragColor, in vec2 fragCoord, in vec3 pos, in vec3 dir) {\n\t    float stepSize = 0.2;\n\t    dir = normalize(dir);\n\n\t    vec3 planeNormal = vec3(0.0, 0.0, 1.0);\n\n\t    vec3 travel = vec3(0.0, 0.0, iTime * 2.4);\n\t    pos += travel;\n\t\tvec3 startPos = pos;\n\n\n\t    if(dot(dir, startPos) > 0.0) {\n\t\t    pos += dir / dot(dir, planeNormal) * stepSize * (-1.0 + fract(-(dot(startPos, planeNormal)) / stepSize));\n\t    } else {\n\t\t    pos += dir / dot(dir, planeNormal) * stepSize * fract(-(dot(startPos, planeNormal)) / stepSize);\n\t    }\n\n\t    vec3 col = vec3(0.0);\n\n\t    for(float i = 0.0; i < 42.0; i++) {\n\t        pos += dir * stepSize / abs(dot(dir, planeNormal));\n\t        vec4 n = snoise(pos * 0.3 + vec3(0.5, 0.5, 0.5));\n\t        float p = n.w + sin(iTime * 3.0) * 0.05 + 0.5;\n\t        float dist = length(startPos - pos);\n\t        float ampl = 1.0 / (abs(dot(dir, planeNormal)) + 0.1);\n\t        //float ampl = 1.0 / (abs(dot(dir, n.xyz)) + 0.0);\n\t        float glow = 1.0 / (p * p + 0.0003 * ampl) * ampl * ampl;\n\t        float distanceFadeout = 1.0 / exp(0.6 * dist + 0.5);\n\t        float nearbyFadeout = 1.0 - exp(-0.3 * dist);\n\t        float c = glow * nearbyFadeout * distanceFadeout;\n\t        col += abs(vec3(dir.x, dir.y, dir.z)) * c * 0.01;\n\t    }\n\t\tfragColor = vec4(col, 1.0);\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord) {\n\t\tvec2 p = (2.0 * fragCoord.xy - iResolution.xy) / min(iResolution.x, iResolution.y);\n\n\t\tvec3 ang = vec3(0.0,  3.14159265 * 1.0, 3.1415926535 * 2.0);\n\n\t    vec3 dir = normalize(vec3(p.xy, -1.0 + length(p) * 0.25)) * fromEuler(ang);\n\n\t    mainVR(fragColor, fragCoord, vec3(0.0), dir);\n\t}\n\n\t"},{name:"Purple Plasma",code:"\n\t#define PI 3.1415926\n\n\tfloat pat(vec2 uv,float p,float q,float s,float glow)\n\t{\n\t    float z = cos(q * PI * uv.x) * cos(p * PI * uv.y) + cos(q * PI * uv.y) * cos(p * PI * uv.x);\n\n\t    z += sin(iTime*4.0 + uv.x+uv.y * s)*0.5;    // +wobble\n\t    float dist=abs(z)*(1.0/glow);\n\t    return dist;\n\t}\n\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t       vec2 uv = (fragCoord.xy - 0.5 * iResolution.xy) / iResolution.y;\n\t    float d = pat(uv, 5.0, 2.0, 35.0, 0.35);        // layer1\n\t    if (iMouse.z>0.5)\n\t        d *= pat(uv, 1.0, 4.0, 55.0, 0.45);        // layer2\n\n\t    vec3 col = vec3(1.25,0.45,1.25)*0.5/d;\n\t    fragColor = vec4(col,1.0);\n\t}\n\t"},{name:"Eyes",code:"\n\t#define thick   0.04\n\t#define smooth  (16.0 / iResolution.x)\n\t#define PI      3.1415926535\n\t#define S(x) smoothstep(-smooth, smooth, x)\n\t#define SR(x, y) smoothstep(-smooth * y, smooth * y, x)\n\t#define scalex 13.\n\t#define scaley 13.\n\t#define scx (scalex * PI * 2.)\n\n\t//Palettes by Inigo Quilez http://www.iquilezles.org/www/articles/palettes/palettes.htm\n\tvec3 pal( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d )\n\t{\n\t    return a + b*cos( 6.28318*(c*t+d) );\n\t}\n\n\tvec3 pal1(in float t){\n\t    return pal(t, vec3(0.5,0.5,0.5),vec3(0.5,0.5,0.5),vec3(1.0,1.0,1.0),vec3(0.0,0.33,0.67)) ;\n\t}\n\n\tfloat rand(vec3 v){\n\t    return fract(cos(dot(v,vec3(13.46543,67.1132,123.546123)))*43758.5453);\n\t}\n\n\tfloat rand(vec2 v){\n\t    return fract(sin(dot(v,vec2(5.11543,71.3177)))*43758.5453);\n\t}\n\n\tfloat rand(float v){\n\t    return fract(sin(v * 71.3132)*43758.5453);\n\t}\n\n\tvec2 rand2(vec2 v){\n\t    return vec2(\n\t        fract(sin(dot(v,vec2(5.11543,71.3132)))*43758.5453),\n\t        fract(sin(dot(v,vec2(7.3113,21.5723)))*31222.1234)\n\t        );\n\t}\n\tvec2 rotate(vec2 st, float angle){\n\t    float c = cos(angle);\n\t    float s = sin(angle);\n\t    return mat2(c, -s, s, c) * st;\n\t}\n\tfloat smrand(float v){\n\t    float vv = floor(v);\n\t    return mix(rand(vv),rand(vv+1.0),fract(v));\n\t}\n\n\tvec3 eye(vec2 fst, vec2 cst, vec2 mouse){\n\t    float noise = rand(cst);\n\n\t    float nt = iTime*2.0 * (noise + 0.8 ) +noise * 100.0;\n\t    float fnt = floor(nt);\n\t    vec2 noise2 = rand2(cst + vec2(fnt));\n\t    vec2 noise22 = rand2(cst + vec2(fnt + 1.));\n\t    float pinoise = noise2.x * PI * 2.0;\n\t    float pinoise2 = noise22.x * PI * 2.0;\n\t    float move = 1.0 - (cos(fract(nt)*PI)+1.0) /2.0;\n\t    move = pow(move,4.0);\n\n\t    float eyeOpen = (sin(iTime*2.0 + noise * 100.0) + 1.0) / 2.0;\n\t    eyeOpen = 1.0 - pow(eyeOpen, 3.0);\n\t\teyeOpen = 1.0;\n\n\t    float col = (sin(fst.x) + 1.)/2.0;\n\t    //col = pow(col,0.9);\n\t    float col2 = col* eyeOpen + fst.y*2.1 - 0.1;\n\t    col = col* eyeOpen - fst.y*2.1 - 0.1;\n\t    float cs1 = min(col - 0.1, col2- 0.1);\n\t    float cs2 = S(cs1);\n\t    col = S(min(col, col2));\n\n\t    float grad = min(eyeOpen * 1., 1.);\n\t    //float grad = min(1.0 - pow(1.0 -abs(fst.y),10.) + 0.3,1.0);\n\n\t    vec2 loc = vec2(fract(fst.x/PI/2.0 + PI*2.0) - 0.53,fst.y*iResolution.y/iResolution.x);\n\n\t    vec2 pin2 = mix(vec2(cos(pinoise),sin(pinoise))*((noise2.y +1.0) / 2.0),\n\t                    vec2(cos(pinoise2),sin(pinoise2))*((noise22.y +1.0) / 2.0),move);\n\t    pin2 *= 0.25;\n\t    pin2 =  mix(pin2, mouse, max(-0.05,0.));\n\n\t    float lloc = length(loc);\n\t    float irisn = mix(1.0,mix(noise2.x, noise22.x, move),0.25);\n\t    float iris = length(loc - pin2 * (0.5 -lloc) );\n\t    float irisWhite = length(loc - pin2 * (0.2 -lloc) );\n\t    float irisDark = SR(length(loc - pin2 * (0.4 -lloc) ) - 0.05 * irisn,0.5);\n\t    float irisShadow = SR(-irisWhite + 0.07,15.);\n\t    irisWhite = SR(-irisWhite + 0.03,1.4);\n\n\t    vec3 irisColor = irisDark *pal1( irisShadow + nt/10.0);\n\t    irisColor = max(irisColor, irisWhite*0.9);\n\t    vec3 baseCol = vec3(SR(-lloc+ .25,15.));\n\t    baseCol = baseCol + 0.25*pal1( baseCol.x + nt/10.0);\n\n\t    vec3 finCol = mix(baseCol, irisColor, S(-iris + 0.15));\n\t    finCol = mix(pal1(noise + nt/10.0) * grad,finCol, cs2);\n\t    finCol = min(finCol, col);\n\n\t    return finCol;\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\t    vec2 st = (fragCoord.xy)/ iResolution.xy;\n\n\t    float fsty = fract(st.y * scaley) - 0.5;\n\t    float fsty2 = fract(st.y * scaley  + 0.5) - 0.5;\n\t    float csty = floor(st.y * scaley);\n\t    float csty2 = floor(st.y * scaley + 0.5);\n\t    float cstx = floor(st.x * scalex);\n\t    float cstx2 = floor(st.x * scalex + 0.5);\n\t    vec2 cst = vec2(cstx,csty);\n\t    vec2 cst2 = vec2(cstx2,csty2 + 1234.);\n\t    vec2 fst = vec2(st.x * scx - 0.5 * PI, fsty);\n\t    vec2 fst2 = vec2(st.x * scx + 0.5 * PI, fsty2);\n\n\n\t    vec2 m1 = vec2((cstx + 0.5)/scalex, (csty + 0.5)/scaley);\n\t    vec2 m2 = vec2((cstx2 + 0.5)/scalex, (csty2 + 0.5)/scaley);\n\n\t    vec3 col = eye(fst, cst, m1);\n\t    vec3 col2 = eye(fst2, cst2, m2);\n\t    col = max(col,col2);\n\t    col += 0.1 * (rand(fragCoord.xy/3.0 + iTime)-0.5);\n\t    //col -= 0.1 * (rand(fragCoord.xy/3.0 + iTime + 100.0));\n\n\t    fragColor = vec4(col, 1.0);\n\t}\n\t"},{name:"Blobs",id:5,code:"\n\t#define scale 1.2\n\tvec2 hash (in vec2 p) {\n\t  p = vec2 (dot (p, vec2 (127.1, 311.7)),\n\t            dot (p, vec2 (269.5, 183.3)));\n\n\t  return -1. + 2.*fract (sin (p)*43758.5453123);\n\t}\n\n\tfloat noise (in vec2 p) {\n\t  const float K1 = .366025404;\n\t  const float K2 = .211324865;\n\n\t  vec2 i = floor (p + (p.x + p.y)*K1);\n\n\t  vec2 a = p - i + (i.x + i.y)*K2;\n\t  vec2 o = step (a.yx, a.xy);\n\t  vec2 b = a - o + K2;\n\t  vec2 c = a - 1. + 2.*K2;\n\n\t  vec3 h = max (.5 - vec3 (dot (a, a), dot (b, b), dot (c, c) ), .0);\n\n\t  vec3 n = h*h*h*h*vec3 (dot (a, hash (i + .0)),\n\t                         dot (b, hash (i + o)),\n\t                         dot (c, hash (i + 1.)));\n\n\t  return dot (n, vec3 (70.));\n\t}\n\n\tfloat fbm(vec2 pos, float tm)\n\t{\n\t    vec2 offset = vec2(cos(tm), 0.0);\n\t    float aggr = 0.0;\n\n\t    aggr += noise(pos);\n\t    aggr += noise(pos + offset) * 0.5;\n\t    aggr += noise(pos + offset.yx) * 0.25;\n\t    aggr += noise(pos - offset) * 0.125;\n\t    aggr += noise(pos - offset.yx) * 0.0625;\n\n\t    aggr /= 1.0 + 0.5 + 0.25 + 0.125 + 0.0625;\n\n\t    return (aggr * 0.5) + 0.5;\n\t}\n\n\tvec3 lightning(vec2 pos, float offset)\n\t{\n\t    vec3 col = vec3(0.0);\n\n     vec2 f = vec2(-iTime * 0.25 , 0.0 );\n\n\t    for (int i = 0; i < 3; i++)\n\t    {\n\t        float time = iTime +float(i);\n\t        float d1 = abs(offset * 0.03 / (0.0 + offset - fbm((pos + f) * 3.0, time)));\n\t        float d2 = abs(offset * 0.03 / (0.0 + offset - fbm((pos + f) * 2.0, 0.9 * time + 10.0)));\n\t        col += vec3(d1 * vec3(0.1, 0.3, 0.8));\n\t        col += vec3(d2 * vec3(0.7, 0.3, 0.5));\n\t    }\n\n\t    return col;\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t    vec2 uv = -1. + 2. * fragCoord / iResolution.xy;\n\t    uv.x *= iResolution.x / iResolution.y;\n\t    uv *= scale;\n\t    //float dist = length(uv) - 0.25;\n\t    float dist = 0.;\n\n\t    vec3 n = lightning(uv, dist + 0.4);\n\t    vec3 col = vec3(0.0);\n\n\t    col += n;\n\n\n\t    fragColor = vec4(col, 1.0);\n\t}\n\t"},{name:"RGB Blobs",id:6,code:"\n\t#define scale 1.\n\tfloat plasma(vec2 p, float iso, float fade)\n\t{\n\t\tfloat c = 0.0;\n\t\tfor (float i=1.0; i<10.0; ++i) {\n\t\t\tfloat f1 = i / 0.6;\n\t\t\tfloat f2 = i / 0.3;\n\t\t\tfloat f3 = i / 0.7;\n\t\t\tfloat f4 = i / 0.5;\n\t\t\tfloat s1 = i / 2.0;\n\t\t\tfloat s2 = i / 4.0;\n\t\t\tfloat s3 = i / 3.0;\n\t\t\tc += sin(p.x * f1 + iTime) * s1 + sin(p.y * f2 + 0.5 * iTime) * s2 + sin(p.x * f3 + p.y * f4 - 1.5 * iTime) * s3;\n\t\t}\n\t\t//c = mod(clamp(c, -1.0, 1.0), 0.5) * 2.0;\n\t\tc = mod(c, 16.0) * 0.5 - 7.0;\n\t\tif (c < iso) {\n\t\t\treturn 0.0;\n\t\t}\n\t\telse {\n\t\t\tif (c > 0.5) c = 1.0 - c;\n\t\t\tc *= 2.0;\n\t\t\treturn c * fade;\n\t\t}\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\n\t\tvec2 pos = (( fragCoord.xy / iResolution.xy ) - vec2(0.5)) * vec2(iResolution.x / iResolution.y, 1.0);\n\t\tpos.xy *= scale;\n\n\t\tfloat c = 0.0;\n\t\tfor (float i=0.0; i<27.0; ++i)\n\t\t{\n\t\t\tfloat patazoom = mod(0.5 * iTime, 1.0);\n\t\t\tfloat zoom = 1.0 + i - patazoom;\n\t\t\tvec2 trans = vec2(sin(iTime * 0.3) * 0.5, sin(iTime * 0.4) * 0.2);\n\t\t\tc = plasma(pos * zoom + trans, 0.0, 2.0 / (1.0 + i - patazoom));\n\t\t\tif (c> 0.001) break;\n\t\t}\n\t\tfragColor = vec4(c * pos.x, c * pos.y, c * abs(pos.x + pos.y), 0.5) * 2.0;\n\n\t}\n\t"},{name:"IDK",id:7,code:"\n\t#define  PI  3.1415\n\t#define TAU  2.*PI\n\t#define   K  .05\n\t#define RECUR 45.\n\t#define BASE_SIZE 1.\n\n\t#define CS(a)                vec2(cos(a),sin(a))\n\t#define r(a)                 mat2(cos(a+vec4(0,11,33,0)))\n\t#define palette(t,a,b,c,d)  ( a + b*cos( TAU*(c*t+d) ) )\n\t#define det(a,b)             determinant(mat2(a,b))\n\n\tvec2 intersect(vec2 a, vec2 b, vec2 p, vec2 q) { // does what ?\n\t      vec2 d = vec2(det(a,b),det(p,q));\n\t      return d * inverse(mat2(a-b,p-q));\n\t    }\n\tfloat sdSegment( vec2 p, vec2 a, vec2 b ) {\n\t    p -= a, b -= a;\n\t    float h = clamp( dot(p,b)/dot(b,b), 0., 1. );\n\t    return length( p - b*h );\n\t}\n\n\tvoid mainImage(out vec4 O, vec2 u )\n\t{\n\t    float t = iTime,  d = 0.;\n\t    vec2  R = iResolution.xy,\n\t         uv = ( 2.*u -  R ) / R.y  + .1* CS(t);\n\t    uv *= r( 3.*sin(atan(uv.x,uv.y)*.45) );\n\t    vec2 id = sign( mod(uv,2.) - .5 );\n\t    uv = fract(uv)-.5;\n\t    uv*= id / BASE_SIZE;\n\n\t    float  f = fract(t),\n\t       stepT = TAU / ( 6. + 2.*cos(floor(t)+f*f) );\n\n\t    vec3 col = vec3(0);\n\t    for(float j=0.; j<1.; j+= 1./RECUR) {\n\t        for(float i=0.; i <= TAU; i += stepT )\n\t            d += smoothstep(.018,.003, sdSegment(uv, CS(i), CS(i+stepT) ));\n\n\t        vec2 ipoint = intersect( vec2(0), CS(K), CS(stepT), CS(0.));\n\t        uv *= r(K) / length(ipoint) ;\n\t        col += d* palette(j + mod(iTime*.2,2.),.5,.5,1.,vec3(.5, .1, .33)) ;\n\t    }\n\n\t    O = vec4( col / RECUR, 1);\n\t}\n\t"},{name:"IDK",id:8,code:"\n\tprecision highp float;\n\n\n\tmat2 rot(float a) {\n\t    float c = cos(a), s = sin(a);\n\t    return mat2(c,s,-s,c);\n\t}\n\n\tconst float pi = acos(-1.0);\n\tconst float pi2 = pi*2.0;\n\n\tvec2 pmod(vec2 p, float r) {\n\t    float a = atan(p.x, p.y) + pi/r;\n\t    float n = pi2 / r;\n\t    a = floor(a/n)*n;\n\t    return p*rot(-a);\n\t}\n\n\tfloat box( vec3 p, vec3 b ) {\n\t    vec3 d = abs(p) - b;\n\t    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\n\t}\n\n\tfloat ifsBox(vec3 p) {\n\t    for (int i=0; i<5; i++) {\n\t        p = abs(p) - 1.0;\n\t        p.xy *= rot(iTime*0.3);\n\t        p.xz *= rot(iTime*0.1);\n\t    }\n\t    p.xz *= rot(iTime);\n\t    return box(p, vec3(0.4,0.8,0.3));\n\t}\n\n\tfloat map(vec3 p, vec3 cPos) {\n\t    vec3 p1 = p;\n\t    p1.x = mod(p1.x-5., 10.) - 5.;\n\t    p1.y = mod(p1.y-5., 10.) - 5.;\n\t    p1.z = mod(p1.z, 16.)-8.;\n\t    p1.xy = pmod(p1.xy, 5.0);\n\t    return ifsBox(p1);\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\t    vec2 p = (fragCoord.xy * 2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);\n\n\t    vec3 cPos = vec3(0.0,0.0, -3.0 * iTime);\n\t    // vec3 cPos = vec3(0.3*sin(iTime*0.8), 0.4*cos(iTime*0.3), -6.0 * iTime);\n\t    vec3 cDir = normalize(vec3(0.0, 0.0, -1.0));\n\t    vec3 cUp  = vec3(sin(iTime), 1.0, 0.0);\n\t    vec3 cSide = cross(cDir, cUp);\n\n\t    vec3 ray = normalize(cSide * p.x + cUp * p.y + cDir);\n\n\t    // Phantom Mode https://www.shadertoy.com/view/MtScWW by aiekick\n\t    float acc = 0.0;\n\t    float acc2 = 0.0;\n\t    float t = 0.0;\n\t    for (int i = 0; i < 99; i++) {\n\t        vec3 pos = cPos + ray * t;\n\t        float dist = map(pos, cPos);\n\t        dist = max(abs(dist), 0.02);\n\t        float a = exp(-dist*3.0);\n\t        if (mod(length(pos)+24.0*iTime, 30.0) < 3.0) {\n\t            a *= 2.0;\n\t            acc2 += a;\n\t        }\n\t        acc += a;\n\t        t += dist * 0.5;\n\t    }\n\n\t    vec3 col = vec3(acc * 0.01, acc * 0.011 + acc2*0.002, acc * 0.012+ acc2*0.005);\n\t    fragColor = vec4(col, 1.0 - t * 0.03);\n\t}\t"},{name:"IDK",id:9,code:"\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n\t    vec2 uv =  (2.0 * fragCoord - iResolution.xy) / min(iResolution.x, iResolution.y);\n\n\t    for(float i = 1.0; i < 10.0; i++){\n\t        uv.x += 0.6 / i * cos(i * 2.5* uv.y + iTime);\n\t        uv.y += 0.6 / i * cos(i * 1.5 * uv.x + iTime);\n\t    }\n\n\t    fragColor = vec4(vec3(0.1)/abs(sin(iTime-uv.y-uv.x)),1.0);\n\t}\n\t"},{name:"IDK",id:10,code:"\n\t#define pi 3.14159265359\n\n\t#define float2 vec2\n\t#define float3 vec3\n\t#define float4 vec4\n\n\n\tfloat saw(float x)\n\t{\n\t    return abs(fract(x)-0.5)*2.0;\n\t}\n\n\tfloat dw(float2 p, float2 c, float t)\n\t{\n\t    return sin(length(p-c)-t);\n\t}\n\n\tfloat dw1(float2 uv)\n\t{\n\t    float v=0.0;\n\t    float t=iTime*2.0;\n\t    v+=dw(uv,float2(sin(t*0.07)*30.0,cos(t*0.04)*20.0),t*1.3);\n\t    v+=dw(uv,float2(cos(t*0.13)*30.0,sin(t*0.14)*20.0),t*1.6+1.0);\n\t    v+=dw(uv,float2( 18,-15),t*0.7+2.0);\n\t    v+=dw(uv,float2(-18, 15),t*1.1-1.0);\n\t    return v/4.0;\n\t}\n\n\tfloat fun(float x, float y)\n\t{\n\t\treturn dw1(float2(x-0.5,y-0.5)*80.0);\n\t}\n\n\tfloat3 duv(float2 uv)\n\t{\n\t    float x=uv.x;\n\t    float y=uv.y;\n\t    float v=fun(x,y);\n\t    float d=1.0/400.0;\n\t\tfloat dx=(v-fun(x+d,y))/d;\n\t\tfloat dy=(v-fun(x,y+d))/d;\n\t    float a=atan(dx,dy)/pi/2.0;\n\t    return float3(v,0,(v*4.0+a));\n\t}\n\n\tvoid mainImage( out float4 fragColor, in float2 fragCoord )\n\t{\n\t\tfloat2 uv = fragCoord.xy/iResolution.x;\n\t    float3 h=duv(uv);\n\t    float sp=saw(h.z+iTime*1.3);\n\t    //sp=(sp>0.5)?0.3:1.0;\n\t    sp=clamp((sp-0.25)*2.0,0.5,1.0);\n\t    fragColor = float4((h.x+0.5)*sp, (0.3+saw(h.x+0.5)*0.6)*sp, (0.6-h.x)*sp, 1.0);\n\t}\n\t"},{name:"IDK",id:11,code:"\n\tfloat pi = atan(1.0)*4.0;\n\tfloat tau = atan(1.0)*8.0;\n\n\n\n\tfloat epsilon = 1e-3;\n\tfloat infinity = 1e6;\n\n\t//Settings\n\t#define BORDER_COLOR vec3(0.05, 0.20, 1.00)\n\n\t#define BRIGHTNESS 0.004\n\t#define THICKNESS  0.002\n\n\t//Checks if a and b are approximately equal.\n\tbool ApproxEqual(float a, float b)\n\t{\n\t    return abs(a - b) <= epsilon;\n\t}\n\n\t//Distance to a line segment,\n\tfloat dfLine(vec2 start, vec2 end, vec2 uv, float scale)\n\t{\n\t\tstart *= scale;\n\t\tend *= scale;\n\n\t\tvec2 line = end - start;\n\t\tfloat frac = dot(uv - start,line) / dot(line,line);\n\t\treturn distance(start + line * clamp(frac, 0.0, 1.0), uv);\n\t}\n\n\n\tfloat dfBorder(vec2 uv, float scale)\n\t{\n\t    float dist = infinity;\n\n\t    vec2 pt1 = vec2(0.,2.86),\n\t         pt2=vec2(1.86,2.86),\n\t         pt3=vec2(2.43,4.63),\n\t         pt4=vec2(3.,2.86),\n\t         pt5=vec2(4.86,2.86),\n\t         pt6=vec2(3.36,1.77),\n\t         pt7=vec2(3.93,0.),\n\t         pt8=vec2(2.43,1.10),\n\t         pt9=vec2(0.93,0.),\n\t         pt10=vec2(1.51,1.77);\n\n\t\tdist = min(dist, dfLine(pt1, pt2, uv, scale));\n\t    dist = min(dist, dfLine(pt2, pt3, uv, scale));\n\t    dist = min(dist, dfLine(pt3, pt4, uv, scale));\n\t    dist = min(dist, dfLine(pt4, pt5, uv, scale));\n\t    dist = min(dist, dfLine(pt5, pt6, uv, scale));\n\t    dist = min(dist, dfLine(pt6, pt7, uv, scale));\n\t    dist = min(dist, dfLine(pt7, pt8, uv, scale));\n\t    dist = min(dist, dfLine(pt8, pt9, uv, scale));\n\t    dist = min(dist, dfLine(pt9, pt10, uv, scale));\n\t    dist = min(dist, dfLine(pt10, pt1, uv, scale));\n\n\n\t    return dist;\n\t}\n\n\n\tvec3 DrawStar(vec2 uv, vec3 color, float ind)\n\t{\n\t\tfloat dist = 0.0;\n\t    float shade = 0.0;\n\t\tfloat scale = -ind + mod(iTime-ind,8.)*2. / 6.0;\n\t    if(scale >= 0. /*&& scale < 1.0*/)\n\t    {\n\t        vec2 offs = vec2(5.0, 4.5) * scale/2.0;\n\n\t        float bright_bord = BRIGHTNESS * min(1.0, 1.0 - sin(0.5 * pi * 50.0) / (0.5 * pi * 1.3));\n\n\n\t        //Border\n\t        dist = dfBorder(uv + offs, scale);\n\n\t        shade = bright_bord / max(epsilon, dist - THICKNESS);\n\n\t    return color * shade;\n\t    }\n\n\t    return vec3(0.,0.,0.);\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t\tvec2 aspect = iResolution.xy / iResolution.y;\n\t\tvec2 uv = fragCoord.xy / iResolution.y - aspect/2.0;\n\n\t    vec3 color = vec3(0);\n\n\t    for(float i=0.;i<20.;i++)\n\t    {\n\t    color += DrawStar(uv, vec3(0.86-mod(i,10.)*0.2,0.0,0.48+0.02*mod(i,10.)), 0.1*i);\n\t    }\n\n\n\t\tfragColor = vec4(color , 1.0);\n\t}\n\n\t"},{name:"IDK",id:12,code:'\n\t// "Rainbow Snake" by Martijn Steinrucken aka BigWings - 2015\n\t// Email:countfrolic@gmail.com Twitter:@The_ArtOfCode\n\t// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\t#define SIZE 10.\n\t#define PI 3.1415\n\n\t#define MOD3 vec3(.1031,.11369,.13787)\n\tfloat hash12(vec2 p) {\n\t     // From https://www.shadertoy.com/view/4djSRW\n\t\t// Dave Hoskins\n\t\tvec3 p3  = fract(vec3(p.xyx) * MOD3);\n\t    p3 += dot(p3, p3.yzx + 19.19);\n\t    return fract((p3.x + p3.y) * p3.z);\n\t}\n\n\tfloat brightness(vec2 uv, vec2 id) {\n\t    // returns the brightness of a scale, based on its id\n\t\tfloat t = iTime;\n\t    float n = hash12(id);\n\t    float c = mix(0.7, 1., n);\t\t\t\t// random variation\n\n\t    float x = abs(id.x-SIZE*.5);\n\t    float stripes = sin(x*.65+sin(id.y*.5)+.3)*.5+.5;\t\t// pattern\n\t    stripes = pow(stripes, 4.);\n\t    c *= 1.-stripes*.5;\n\n\t    float y = floor(uv.y*SIZE);\n\t    float twinkle = sin(t+n*6.28)*.5 +.5;\n\t    twinkle = pow(twinkle, 40.);\n\t    c += twinkle*.5;\n\n\t    return c;\n\t}\n\n\tfloat spokes(vec2 uv, float spikeFrequency) {\n\t\t// creates spokes radiating from the top of the scale\n\n\t    vec2 p = vec2(0., 1.);\n\t    vec2 d = p-uv;\n\t    float l = length(d);\n\t    d /= l;\n\n\t    vec2 up = vec2(1., 0.);\n\n\t    float c = dot(up, d);\n\t    c = abs(sin(c*spikeFrequency));\n\t    c *= l;\n\n\t    return c;\n\t}\n\n\tvec4 ScaleInfo(vec2 uv, vec2 p, vec3 shape) {\n\n\t    float spikeAmount = shape.x;\n\t    float spikeFrequency = shape.y;\n\t    float sag = shape.z;\n\n\t    uv -= p;\n\n\t    uv = uv*2.-1.;\n\n\t    float d2 = spokes(uv, spikeFrequency);\n\n\t    uv.x *= 1.+uv.y*sag;\n\n\t\tfloat d1 = dot(uv, uv);\t\t\t\t\t// distance to the center of the scale\n\n\t    float threshold = 1.;//sin(iTime)*.5 +.5;\n\n\t    float d = d1+d2*spikeAmount;\n\n\t    float f = 0.05;//fwidth(d);\n\t    float c = smoothstep(threshold, threshold-f, d);\n\n\t    return vec4(d1, d2, d, c);\n\t}\n\n\tvec4 ScaleCol(vec2 uv, vec2 p, vec4 i) {\n\n\t    vec3 col1 = vec3(.1, .3, .2);\n\t    vec3 col2 = vec3(.8, .5, .2);\n\t    vec3 baseCol = vec3(.1, .3, .2)*3.;\n\t    uv-=p;\n\n\t    float grad = 1.-uv.y;\n\t    float col = grad+i.x;\n\t    col = col*.2+.5;\n\n\t    vec4 c = vec4(col*baseCol, i.a);\n\n\t    c.rgb = mix(c.rgb, col1, i.y*i.x*.5);\t\t// add spokes\n\t    c.rgb = mix(c.rgb, col2, i.x);\t\t\t\t// add edge highlights\n\n\t    c = mix(vec4(0.), c, i.a);\n\n\t    float fade = 0.3;\n\t    float shadow = smoothstep(1.+fade, 1., i.z);\n\n\t\tc.a = mix(shadow*.25, 1., i.a);\n\n\t    return c;\n\t}\n\n\n\tvec4 Scale(vec2 uv, vec2 p, vec3 shape) {\n\n\t    vec4 info = ScaleInfo(uv, p, shape);\n\t    vec4 c = ScaleCol(uv, p, info);\n\n\t    return c;\n\t}\n\n\tvec4 ScaleTex(vec2 uv, vec2 uv2, vec3 shape) {\n\t    // id = a vec2 that is unique per scale, can be used to apply effects on a per-scale basis\n\t    // shape = a vec3 describing the shape of the scale:\n\t    //\t\t\tx = the amount of spikyness, can go negative to bulge spikes the opposite way\n\t    //\t\t\ty = the number of spikes\n\t    //          z = the taper of the scale (0=round -1=top wider 1=bottom wider)\n\n\t    vec2 id = floor(uv2);\n\t    uv2 -= id;\n\n\t    // need to render a bunch of scales per pixel, so they can overlap\n\t    vec4 rScale = Scale(uv2, vec2(.5, 0.01), shape);\n\t   \tvec4 lScale = Scale(uv2, vec2(-.5, 0.01), shape);\n\t    vec4 bScale = Scale(uv2, vec2(0., -0.5), shape);\n\t    vec4 tScale = Scale(uv2, vec2(0., 0.5), shape);\n\t    vec4 t2Scale = Scale(uv2, vec2(1., 0.5), shape);\n\n\t    // every scale has a slightly different brightness + pattern\n\t    rScale.rgb *= brightness(uv, id+vec2(1.,0.));\n\t    lScale.rgb *= brightness(uv, id+vec2(0.,0.));\n\n\t    bScale.rgb *= brightness(uv, id+vec2(0.,0.));\n\n\t    tScale.rgb *= brightness(uv, id+vec2(0.,1.));\n\t    t2Scale.rgb *= brightness(uv, id+vec2(2.,1.));\n\n\t    // start with base color and alpha blend in all of the scales\n\t    vec4 c =  vec4(.1, .3, .2,1.);\n\t    c = mix(c, bScale, bScale.a);\n\t    c = mix(c, rScale, rScale.a);\n\t    c = mix(c, lScale, lScale.a);\n\t    c = mix(c, tScale, tScale.a);\n\t    c = mix(c, t2Scale, t2Scale.a);\n\n\t   // c.rg = uv;\n\t   // c.b = 0.;\n\t    return c;\n\t}\n\n\tvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n\t{\n\t    float aspect = iResolution.x/iResolution.y;\n\n\t\tvec2 uv = fragCoord.xy / iResolution.xy;  // get uvs in 0 to 1 range\n\t    vec2 m = iMouse.xy/iResolution.xy;\n\t    m = m*2. - 1.;\n\t    float t = iTime;\n\n\n\n\t   \tuv.x += sin(t+uv.y)*.1;\n\n\t    uv.x*=2.;\n\n\t    uv -=.5;\n\n\n\t    vec2 uv2 = uv * SIZE;\t\t\t\t\t\t// uv2 -2.5 - 2.5\n\t    uv2.y -= t;\n\t    uv +=.5;\n\n\t    float grad = (uv2.y+12.5)/15.;\t\t\t\t// goes from 0-1\n\n\t    vec3 center = vec3(.6, 1., -.8);  \t\t\t// scale shape settings for center -> amount frequency sag\n\t    vec3 outside = vec3(0.1, 8., -.9);  \t\t// settings for side\n\n\t    float sideFade = pow(uv.x-1.,2.);\n\t    vec3 shape = mix(center, outside, sideFade);// morph between scale shapes\n\n\t   // shape = mix(center, outside, 1.);\n\n\n\n\t    vec4 c = ScaleTex(uv, uv2, shape);\t\t\t// sample scales\n\t    c = mix(c, vec4(c.g), sideFade);\t\t\t// fade color towards the edges\n\n\t    t*=.1;\t\t\t\t\t\t\t\t\t\t// rainbow....\n\t    c.r += sin(t)*.4;\n\t    c.g -= abs(sin(t*1.324))*.435;\n\t    c.b += sin(t*0.324)*.3;\n\n\n\t    fragColor = vec4(c);\n\t}\n\n\n\t'}]},function(e,t,i){e.exports=function(e,t,n,r){var a=i(62)(e),s=i(63)(e),o="lambert",l=e.ShaderLib[o].fragmentShader;l=(l=(l=(l=(l=(l="\n        uniform sampler2D texture1;\n        varying vec3 vertexColor;\n        varying vec3 vertexEmissive;\n        varying float vertexOpacity;\n        varying float vertexVisible;\n        varying float vertexTex;\n        varying vec2 vertexTexOff;\n        varying float vertexAlphaTest;\n    "+l).replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n        if (vertexVisible == 0.0) discard;\n        vec4 diffuseColor = vec4( vertexColor, vertexOpacity );\n    ")).replace(" = emissive;"," = vertexEmissive;")).replace("#include <map_fragment>","\n        if (vertexTex > 0.0) {\n            vec4 texelColor = texture2D( texture1, vertexTexOff );\n            diffuseColor *= texelColor;\n        }\n    ")).replace("#include <color_fragment>","")).replace("#include <alphatest_fragment>","if ( diffuseColor.a < vertexAlphaTest ) discard;");var c=e.ShaderLib[o].vertexShader;c=(c="\n        attribute vec3 iOffset;\n        attribute vec3 iScale;\n        attribute vec4 iRotation;\n        attribute vec3 iColor;\n        attribute vec3 iEmissive;\n        attribute vec4 iTexOff;\n        attribute float iTex;\n        attribute float iOpacity;\n        attribute float iVisible;\n        attribute float iAlphaTest;\n        varying vec3 vertexColor;\n        varying vec3 vertexEmissive;\n        varying float vertexTex;\n        varying vec2 vertexTexOff;\n        varying float vertexVisible;\n        varying float vertexOpacity;\n        varying float vertexAlphaTest;\n\n        vec3 applyTRS( vec3 position, vec3 translation, vec4 quaternion, vec3 scale ) {\n            position *= scale;\n            position += 2.0 * cross( quaternion.xyz, cross( quaternion.xyz, position ) + quaternion.w * position );\n            return position + translation;\n        }\n    "+c).replace("#include <project_vertex>","\n        // COLOR:\n        vertexColor = iColor;\n        vertexEmissive = iEmissive;\n        vertexOpacity = iOpacity;\n        vertexAlphaTest = iAlphaTest;\n\n        // TEXTURE ATLASS OFFSET:\n        vertexTexOff = vec2(uv.x * (iTexOff[1] - iTexOff[0]) + iTexOff[0],\n            uv.y * (iTexOff[2] - iTexOff[3]) + iTexOff[3]);\n\n        // TEXTURE SRC:\n        vertexTex = iTex;\n\n        // VISIBILITY:\n        vertexVisible = iVisible;\n\n        // POSITION:\n        vec3 vPosition = applyTRS( transformed, iOffset, iRotation, iScale );\n        transformed = vPosition;\n        vec4 mvPosition = modelViewMatrix * vec4( vPosition, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\n    ");let d=new e.BoxBufferGeometry(1,1,1);d.translate(0,.5,0);let p=new e.PlaneBufferGeometry(1,1,1,1);class h extends e.Mesh{constructor(t,i,n){super(),this.name="ShaderMesh",this.uniforms=e.UniformsUtils.clone(e.ShaderLib[o].uniforms),this.uniforms.texture1={type:"t",value:h.merger.texture},this.frustumCulled=!1,this.material=new e.ShaderMaterial({fragmentShader:l,vertexShader:c,uniforms:this.uniforms,lights:!0,dithering:!0,side:e.DoubleSide,fog:!0,shading:e.FlatShading,depthPacking:e.RGBADepthPacking,vertexColors:e.VertexColors,transparent:!1}),this.geometry=(new e.InstancedBufferGeometry).copy(i||d),this.geometry.instanceCount=n?15e3:t.length,this.numInstances=this.geometry.instanceCount,this.iColors=new Float32Array(3*this.numInstances),this.iEmissives=new Float32Array(3*this.numInstances),this.iAlphaTests=new Float32Array(1*this.numInstances),this.iOffsets=new Float32Array(3*this.numInstances),this.iScales=new Float32Array(3*this.numInstances),this.iRotations=new Float32Array(4*this.numInstances),this.iOpacitys=new Float32Array(1*this.numInstances),this.iVisibles=new Float32Array(1*this.numInstances),this.iTexOffs=new Float32Array(4*this.numInstances),this.iTexs=new Float32Array(1*this.numInstances),this.geometry.setAttribute("iColor",new e.InstancedBufferAttribute(this.iColors,3,!1)),this.geometry.setAttribute("iEmissive",new e.InstancedBufferAttribute(this.iEmissives,3,!1)),this.geometry.setAttribute("iAlphaTest",new e.InstancedBufferAttribute(this.iAlphaTests,1,!1)),this.geometry.setAttribute("iOffset",new e.InstancedBufferAttribute(this.iOffsets,3,!1)),this.geometry.setAttribute("iScale",new e.InstancedBufferAttribute(this.iScales,3,!1)),this.geometry.setAttribute("iRotation",new e.InstancedBufferAttribute(this.iRotations,4,!1)),this.geometry.setAttribute("iOpacity",new e.InstancedBufferAttribute(this.iOpacitys,1,!1)),this.geometry.setAttribute("iVisible",new e.InstancedBufferAttribute(this.iVisibles,1,!1)),this.geometry.setAttribute("iTexOff",new e.InstancedBufferAttribute(this.iTexOffs,4,!1)),this.geometry.setAttribute("iTex",new e.InstancedBufferAttribute(this.iTexs,1,!1)),this.geometry.attributes.iVisible.setDynamic(!0),this.objects=[];for(let e=0;e<t.length;e++)t[e].src&&h.updateTextureOffsets(t[e]),this.objects.push(new s(e,{color:this.iColors,emissive:this.iEmissives,alphaTest:this.iAlphaTests,position:this.iOffsets,scale:this.iScales,rotation:this.iRotations,opacity:this.iOpacitys,visible:this.iVisibles,textureOffset:this.iTexOffs,texture:this.iTexs},t[e]));this.castShadow=!0,this.receiveShadow=!0,this.customDepthMaterial=u}addObj(e){var t=this.objects.findIndex(e=>0==e.active);-1<t?this.objects[t]=new s(t,{color:this.iColors,emissive:this.iEmissives,alphaTest:this.iAlphaTests,position:this.iOffsets,scale:this.iScales,rotation:this.iRotations,opacity:this.iOpacitys,visible:this.iVisibles,textureOffset:this.iTexOffs,texture:this.iTexs},e):(t=this.objects.length,this.objects.push(new s(t,{color:this.iColors,emissive:this.iEmissives,alphaTest:this.iAlphaTests,position:this.iOffsets,scale:this.iScales,rotation:this.iRotations,opacity:this.iOpacitys,visible:this.iVisibles,textureOffset:this.iTexOffs,texture:this.iTexs},e))),this.geoUpdate()}geoUpdate(){this.geometry.attributes.iColor.needsUpdate=!0,this.geometry.attributes.iEmissive.needsUpdate=!0,this.geometry.attributes.iAlphaTest.needsUpdate=!0,this.geometry.attributes.iOffset.needsUpdate=!0,this.geometry.attributes.iScale.needsUpdate=!0,this.geometry.attributes.iRotation.needsUpdate=!0,this.geometry.attributes.iOpacity.needsUpdate=!0,this.geometry.attributes.iVisible.needsUpdate=!0,this.geometry.attributes.iTexOff.needsUpdate=!0,this.geometry.attributes.iTex.needsUpdate=!0}remObj(e){this.objects.filter(t=>t.uid==e).forEach(e=>{e.dispose()}),this.geometry.attributes.iVisible.needsUpdate=!0}updateTextures(){this.objects.filter(e=>e.data.src).forEach(e=>{h.updateTextureOffsets(e.data),e.updateTexture()}),this.geometry.attributes.iTexOff.needsUpdate=!0,this.geometry.attributes.iTex.needsUpdate=!0}clear(){for(let e=0;e<this.objects.length;e++)this.objects[e].dispose();this.geoUpdate()}clean(){this.geometry.dispose()}dispose(){this.geometry.dispose(),this.material.dispose()}}var u=new e.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,alphaTest:.5,blending:e.NoBlending});return u.onBeforeCompile=e=>{e.vertexShader="\n            #define DEPTH_PACKING 3201\n            attribute vec3 iOffset;\n            attribute vec3 iScale;\n            attribute vec4 iRotation;\n            attribute float iVisible;\n            varying float vertexVisible;\n\n            vec3 applyTRS( vec3 position, vec3 translation, vec4 quaternion, vec3 scale ) {\n                position *= scale;\n                position += 2.0 * cross( quaternion.xyz, cross( quaternion.xyz, position ) + quaternion.w * position );\n                return position + translation;\n            }\n        "+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <project_vertex>","\n            vertexVisible = iVisible;\n            transformed = applyTRS( transformed, iOffset, iRotation, iScale );\n            vec4 mvPosition = vec4( transformed, 1.0 );\n            mvPosition = modelMatrix * mvPosition;\n            mvPosition = modelViewMatrix * mvPosition;\n            gl_Position = projectionMatrix * mvPosition;\n        "),e.fragmentShader="\n            #define DEPTH_PACKING 3201\n            varying float vertexVisible;\n        "+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("#include <clipping_planes_fragment>","\n            if (vertexVisible == 0.0) discard;\n            #include <clipping_planes_fragment>\n        ")},h.enabled=!1,h.supported=!0,h.finalized=!1,h.merger={texture:null,ranges:{}},h.CUBES={instances:[],mesh:null},h.PLANES={instances:[],mesh:null},h.BUILDS=null,h.MODELS={},h.addBuild=function(e,i,n,a,s,o,l){if(h.supported){if(l.src=l.src||"",l.src.includes("default")&&(l.src=null),l.src=l.src||null,l.model){l.colr="#ffffff",i+=s/2;var c=!1;h.MODELS[l.src]?c=h.MODELS[l.src].pending:(c=!0,h.MODELS[l.src]={pending:!0,pendingObjs:[],mesh:null},r.loadGeo(l,(function(e,t){h.MODELS[e.src].mesh=new h([],t,!0),r.add(h.MODELS[e.src].mesh);for(var i=0;i<h.MODELS[e.src].pendingObjs.length;i++)h.MODELS[e.src].mesh.addObj(h.MODELS[e.src].pendingObjs[i]);h.MODELS[e.src].pending=!1,h.MODELS[e.src].pendingObjs.length=0})))}else h.BUILDS||(h.BUILDS=new h([],d,!0),r.add(h.BUILDS));h.updateTextureOffsets(l);var p={type:l.type||0,x:e,y:i,z:n,uid:l.uid,src:l.src,color:l.colr,emissive:l.emissive,w:l.model?1:a,h:l.model?1:s,l:l.model?1:o,opacity:t.limitMM(l.opacity,0,1),dir:l.dir,xR:l.xR,yR:l.yR,zR:l.zR,texOff:l.texOff,tex:l.tex};if(2==p.type){var u=0!=p.dir&&p.dir!=Math.PI,f=Math.sqrt(s*s+o*o);l.model?u?p.xR=-p.dir:p.zR=p.dir/2:(p.h=2,p.y=i+s/2-1,p.w=u?a:f,p.l=u?f:a,p[u?"yR":"zR"]=Math.asin(s/f)-Math.PI/2,0>=p.dir&&(p[u?"yR":"zR"]*=-1))}l.model?c?h.MODELS[l.src].pendingObjs.push(p):h.MODELS[l.src].mesh.addObj(p):h.BUILDS.addObj(p)}},h.removeBuild=function(e,t){return t&&t.model&&h.MODELS[t.src]&&h.MODELS[t.src].mesh?void h.MODELS[t.src].mesh.remObj(e):void(h.BUILDS&&h.BUILDS.remObj(e))},h.addPlane=function(e,i,n,r,a,s,o,l,c){return s.src=s.src||"",s.src.includes("default")&&(s.src=null),s.src=s.src||null,h.PLANES.instances.push({type:1,x:e,y:i,z:n,src:s.src,color:s.colr,emissive:s.emissive,w:r,l:a,h:1,opacity:t.limitMM(s.opacity,0,1),xR:o,yR:l,zR:c,texOff:[0,0,0,0],tex:0}),h.PLANES.instances.length-1},h.addRamp=function(e,i,n,r,a,s,o,l,c){l.src=l.src||"",l.src.includes("default")&&(l.src=null),l.src=l.src||null;var d=Math.sqrt(a*a+s*s);return h.PLANES.instances.push({type:1,x:e,y:i+a/2,z:n,src:l.src,color:l.colr,emissive:l.emissive,w:r,l:d,h:2,opacity:t.limitMM(l.opacity,0,1),xR:-Math.PI/2-o,yR:Math.asin(a/d),zR:c||0,ramp:!0,texOff:[0,0,0,0],tex:0}),h.PLANES.instances.length-1},h.addCube=function(e,i,n,r,a,s,o){return o.src=o.src||"",o.src.includes("default")&&(o.src=null),o.src=o.src||null,h.CUBES.instances.push({type:0,x:e,y:i,z:n,sid:o.sid,src:o.src,color:o.colr,emissive:o.emissive,w:r,h:a,l:s,opacity:t.limitMM(o.opacity,0,1),xR:o.xR,yR:o.yR,zR:o.zR,texOff:[0,0,0,0],tex:0}),h.CUBES.instances.length-1},h.reset=function(){h.CUBES.mesh&&r.scene.remove(h.CUBES.mesh),h.CUBES.mesh=null,h.CUBES.instances.length=0,h.PLANES.mesh&&r.scene.remove(h.PLANES.mesh),h.PLANES.mesh=null,h.PLANES.instances.length=0,h.BUILDS&&r.scene.remove(h.BUILDS),h.BUILDS=null},h.finalize=function(){h.finalized=!0,h.CUBES.instances.length&&(h.CUBES.mesh=new h(h.CUBES.instances,d),h.CUBES.instances.length=0,r.add(h.CUBES.mesh)),h.PLANES.instances.length&&(h.PLANES.mesh=new h(h.PLANES.instances,p),h.PLANES.instances.length=0,r.add(h.PLANES.mesh))},h.visibility=function(e,t){0==e.type?(h.CUBES.mesh.objects[parseInt(e.meshRef)].visibility(t),h.CUBES.mesh.geometry.attributes.iVisible.needsUpdate=!0):1==e.type&&(h.PLANES.mesh.objects[parseInt(e.meshRef)].visibility(t),h.PLANES.mesh.geometry.attributes.iVisible.needsUpdate=!0)},h.updateTextureMap=function(e){var t=new a(e);if(h.merger.texture=t.mergedTexture,h.merger.ranges=t.ranges,h.finalized&&(h.CUBES.mesh&&(h.CUBES.mesh.material.uniforms.texture1.value=h.merger.texture,h.CUBES.mesh.material.uniforms.texture1.needsUpdate=!0,h.CUBES.mesh.updateTextures()),h.PLANES.mesh&&(h.PLANES.mesh.material.uniforms.texture1.value=h.merger.texture,h.PLANES.mesh.material.uniforms.texture1.needsUpdate=!0,h.PLANES.mesh.updateTextures())),h.BUILDS&&(h.BUILDS.material.uniforms.texture1.value=h.merger.texture,h.BUILDS.material.uniforms.texture1.needsUpdate=!0,h.BUILDS.updateTextures()),h.MODELS)for(var i in h.MODELS)h.MODELS[i].mesh&&(h.MODELS[i].mesh.material.uniforms.texture1.value=h.merger.texture,h.MODELS[i].mesh.material.uniforms.texture1.needsUpdate=!0,h.MODELS[i].mesh.updateTextures())},h.updateTextureOffsets=function(e){if(h.merger.ranges[e.src]){e.texOff=[...Object.values(h.merger.ranges[e.src])];var t=.5/e.texOff[4];e.texOff[0]+=t,e.texOff[1]-=t,e.texOff[2]-=t,e.texOff[3]+=t,e.texOff.length=4,e.tex=1}else e.texOff=[0,0,0,0],e.tex=0},h}},function(e,t){e.exports=function(e){var t=function(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this.finalX=e+i,this.finalY=t+n};t.prototype.set=function(e,t,i,n,r,a){return this.x=e,this.y=t,this.finalX=i,this.finalY=n,this.width=r,this.height=a,this},t.prototype.fits=function(e){var t=e.image.width,i=e.image.height;return!!(t<=this.width&&i<=this.height)},t.prototype.fitsPerfectly=function(e){var t=e.image.width,i=e.image.height;return t==this.width&&i==this.height},t.prototype.overlaps=function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y};var i=function(i){if(this.MAX_TEXTURE_SIZE=4096,i){for(var n in this.dataURLs={},i){var r=i[n];if(r instanceof e.CompressedTexture)throw new Error("CompressedTextures are not supported.");if(void 0===r.image.toDataURL){var a=document.createElement("canvas");a.width=r.image.naturalWidth,a.height=r.image.naturalHeight,a.getContext("2d").drawImage(r.image,0,0),this.dataURLs[n]=a.toDataURL()}else this.dataURLs[n]=r.image.toDataURL()}this.canvas=document.createElement("canvas"),this.textureCount=0,this.maxWidth=0,this.maxHeight=0;var s="";for(n in i){this.textureCount++,(c=i[n]).area=c.image.width*c.image.height,c.image.width>this.maxWidth&&(this.maxWidth=c.image.width),c.image.height>this.maxHeight&&(this.maxHeight=c.image.height),s+=n+","}s=s.substring(0,s.length-1),this.textureCache={},this.node={},this.node.rectangle=new t(0,0,this.maxWidth*this.textureCount,this.maxHeight*this.textureCount),this.textureOffsets={},this.allNodes=[],this.insert(this.node,this.findNextTexture(i),i),this.ranges={};var o=this.calculateImageSize(i);this.canvas.width=o.width,this.canvas.height=o.height;var l=this.canvas.getContext("2d");for(n in this.context=l,this.textureOffsets){for(var c=i[n],d=this.textureOffsets[n].x,p=this.textureOffsets[n].y,h=c.image.width,u=c.image.height,f=p;f<p+u;f+=u)for(var m=d;m<d+h;m+=h)l.drawImage(c.image,m,f,h,u);var g={};g.startU=d/o.width,g.endU=(d+h)/o.width,g.startV=1-p/o.height,g.endV=1-(p+u)/o.height,g.width=h,this.ranges[n]=g}this.makeCanvasPowerOfTwo(),this.mergedTexture=new e.CanvasTexture(this.canvas),this.mergedTexture.wrapS=e.ClampToEdgeWrapping,this.mergedTexture.wrapT=e.ClampToEdgeWrapping,this.mergedTexture.minFilter=e.NearestFilter,this.mergedTexture.magFilter=e.NearestFilter,this.mergedTexture.needsUpdate=!0}};return i.prototype.isTextureAlreadyInserted=function(e,t){var i=t[e],n=this.dataURLs[e];for(var r in t)if(r!=e){var a=t[r];if(n==this.dataURLs[r]&&a.offset.x==i.offset.x&&a.offset.y==i.offset.y&&a.offset.z==i.offset.z&&a.repeat.x==i.repeat.x&&a.repeat.y==i.repeat.y&&a.flipX==i.flipX&&a.flipY==i.flipY&&a.wrapS==i.wrapS&&a.wrapT==i.wrapT&&this.textureOffsets[r])return this.textureOffsets[r]}return!1},i.prototype.insert=function(e,i,n){var r=n[i],a=this.isTextureAlreadyInserted(i,n);if(a)return this.textureOffsets[i]=a,void(null==(k=this.findNextTexture(n))||this.insert(e,k,n));var s=r.image.width,o=r.image.height;if(e.upperNode){for(var l,c=this.maxWidth*this.textureCount+this.maxHeight*this.textureCount,d=0,p=!1,h=0;h<this.allNodes.length;h++)if(!(l=this.allNodes[h]).textureName&&l.rectangle.fits(r)){this.textureOffsets[i]={x:l.rectangle.x,y:l.rectangle.y};var u=this.calculateImageSize(n),f=u.width+u.height;if(f<c&&u.width<=this.MAX_TEXTURE_SIZE&&u.height<=this.MAX_TEXTURE_SIZE){var m=!1;for(var g in this.textureOffsets)if(g!=i){var y=l.rectangle,v=this.textureOffsets[g].x,w=this.textureOffsets[g].y,b=n[g].image,x=new t(y.x,y.y,s,o),S=new t(v,w,b.width,b.height);x.overlaps(S)&&(m=!0)}m||(c=f,d=this.allNodes[h],p=!0)}delete this.textureOffsets[i]}if(!p)throw new Error("Error: Try to use smaller textures.");if(this.textureOffsets[i]={x:d.rectangle.x,y:d.rectangle.y},d.textureName=i,!d.children){var M={};(R={}).upperNode=d,M.upperNode=d,d.children=[R,M];var T=d.rectangle.x,_=d.rectangle.y,O=this.maxWidth*this.textureCount,C=this.maxHeight*this.textureCount;R.rectangle=new t(T+s,_,O-(T+s),C-_),M.rectangle=new t(T,_+o,O-T,C-(_+o)),this.allNodes.push(R),this.allNodes.push(M)}null==(k=this.findNextTexture(n))||this.insert(e,k,n)}else{var E=e.rectangle.width,A=e.rectangle.height;e.textureName=i;var R;M={};(R={}).upperNode=e,M.upperNode=e,e.children=[R,M],R.rectangle=new t(s,0,E-s,o),M.rectangle=new t(0,o,E,A-o),this.textureOffsets[i]={x:e.rectangle.x,y:e.rectangle.y};var k,L=e.children[0];this.allNodes=[e,R,M],null==(k=this.findNextTexture(n))||this.insert(L,k,n)}},i.prototype.makeCanvasPowerOfTwo=function(e){var t=!1;e||(e=this.canvas,t=!0);var i=e.width,n=e.height,r=Math.pow(2,Math.round(Math.log(i)/Math.log(2))),a=Math.pow(2,Math.round(Math.log(n)/Math.log(2))),s=document.createElement("canvas");s.width=r,s.height=a,s.getContext("2d").drawImage(e,0,0,r,a),t&&(this.canvas=s)},i.prototype.calculateImageSize=function(e){var t=0,i=0;for(var n in this.textureOffsets){var r=e[n],a=r.image.width,s=r.image.height,o=this.textureOffsets[n].x,l=this.textureOffsets[n].y;o+a>t&&(t=o+a),l+s>i&&(i=l+s)}return{width:t,height:i}},i.prototype.findNextTexture=function(e){var t,i=-1;for(textureName in e){var n=e[textureName];!this.textureCache[textureName]&&n.area>i&&(i=n.area,t=textureName)}return-1==i?null:(this.textureCache[t]=!0,t)},i.prototype.rescale=function(e,t){var i=document.createElement("canvas");return i.width=e.width*t,i.height=e.height*t,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),i},i}},function(e,t){e.exports=function(e){let t=new e.BoxBufferGeometry(1,1,1);t.translate(0,.5,0);let i=new e.Mesh(t),n=new e.Mesh(new e.BoxBufferGeometry(1,1,1)),r=new e.PlaneBufferGeometry(1,1,1,1),a=new e.Mesh(r);return class{constructor(t,i,n){this.index=t,this.buffers=i,this.data=n,this.uid=n.uid,this.offsets={position:3*t,rotation:4*t,color:3*t,emissive:3*t,alphaTest:1*t,scale:3*t,opacity:1*t,visible:1*t,textureOffset:4*t,texture:1*t},this.rotation=new e.Quaternion,this.position=new e.Vector3,this.scale=new e.Vector3,this.visible=1,this.textureOffset=[0,0,0,0],this.texture=0,this.color=new e.Color,this.emissive=new e.Color,this.alphaTest=0,this.opacity=1,this.active=!0,this.inUse=!0,this.init()}init(){this.color.set(this.data.color||"#ffffff"),this.color.toArray(this.buffers.color,this.offsets.color),this.emissive.set(this.data.emissive||"#000000"),this.emissive.toArray(this.buffers.emissive,this.offsets.emissive),this.textureOffset=this.data.texOff,this.buffers.textureOffset[this.offsets.textureOffset]=this.textureOffset[0],this.buffers.textureOffset[this.offsets.textureOffset+1]=this.textureOffset[1],this.buffers.textureOffset[this.offsets.textureOffset+2]=this.textureOffset[2],this.buffers.textureOffset[this.offsets.textureOffset+3]=this.textureOffset[3],this.texture=this.data.tex,this.buffers.texture[this.offsets.texture]=this.texture,this.alphaTest=this.data.alphaTest?this.data.alphaTest:0,this.buffers.alphaTest[this.offsets.alphaTest]=this.alphaTest,this.opacity=this.data.opacity||1,this.buffers.opacity[this.offsets.opacity]=this.opacity,this.visible=~~(this.data.visible||1),this.buffers.visible[this.offsets.visible]=this.visible,this.data.model?(n.position.set(this.data.x||0,this.data.y||0,this.data.z||0),n.rotation.set(this.data.yR||0,this.data.xR||0,this.data.zR||0),n.quaternion.normalize(),this.rotation.copy(n.quaternion),this.position.copy(n.position),this.position.toArray(this.buffers.position,this.offsets.position),this.rotation.toArray(this.buffers.rotation,this.offsets.rotation),this.scale.set(this.data.w||1,this.data.h||1,this.data.l||1),this.scale.toArray(this.buffers.scale,this.offsets.scale)):1==this.data.type?(a.position.set(this.data.x||0,this.data.y||0,this.data.z||0),a.rotation.set((this.data.yR||0)-Math.PI/2,this.data.xR||0,this.data.zR||0),a.quaternion.normalize(),this.rotation.copy(a.quaternion),this.position.copy(a.position),this.position.toArray(this.buffers.position,this.offsets.position),this.rotation.toArray(this.buffers.rotation,this.offsets.rotation),this.scale.set(2*(this.data.w||1),2*(this.data.l||1),this.data.h||1),this.scale.toArray(this.buffers.scale,this.offsets.scale)):(i.position.set(this.data.x||0,this.data.y||0,this.data.z||0),i.rotation.set(this.data.yR||0,this.data.xR||0,this.data.zR||0),i.quaternion.normalize(),this.rotation.copy(i.quaternion),this.position.copy(i.position),this.position.toArray(this.buffers.position,this.offsets.position),this.rotation.toArray(this.buffers.rotation,this.offsets.rotation),this.scale.set(this.data.w||1,this.data.h||1,this.data.l||1),this.scale.toArray(this.buffers.scale,this.offsets.scale))}visibility(e){this.visible=~~e,this.buffers.visible[this.offsets.visible]=this.visible}updateTexture(){this.textureOffset=this.data.texOff,this.buffers.textureOffset[this.offsets.textureOffset]=this.textureOffset[0],this.buffers.textureOffset[this.offsets.textureOffset+1]=this.textureOffset[1],this.buffers.textureOffset[this.offsets.textureOffset+2]=this.textureOffset[2],this.buffers.textureOffset[this.offsets.textureOffset+3]=this.textureOffset[3],this.texture=this.data.tex,this.buffers.texture[this.offsets.texture]=this.texture}dispose(){this.active=!1,this.inUse=!1,this.visible=0,this.buffers.visible[this.offsets.visible]=this.visible}}}},function(e,t){e.exports=function(e,t){var i;this.sounds=[],this.listener={},this.rate=1,this.volumes=[1,1,1,1,1,1,1,1,1],this.soundCats={nuke_0:0,siren_0:0,scare_0:0,beep_0:0,ambient_1:2,ambient_2:2,ambient_3:2,ambient_4:2,ambient_5:2,ambient_6:2,ambient_7:2,ambient_8:2,aim_0:3,aim_1:3,explosion:3,gclick_0:3,pick_0:3,pick_1:3,reload_1:3,reload_2:3,swsh_0_0:3,swsh_0_1:3,weapon_1:3,weapon_1_0:3,weapon_2:3,weapon_3:3,weapon_4:3,weapon_5:3,weapon_6:3,weapon_7:3,weapon_8:3,weapon_9:3,weapon_10:3,weapon_11:3,weapon_12:3,weapon_13:3,weapon_14:3,weapon_15:3,weapon_16:3,weapon_17:3,weapon_18:3,whizz_0:3,whizz_1:3,weapon_6_0:3,weapon_1_2:3,weapon_3_0:3,rico_1:3,rico_2:3,case_0:3,case_1:3,weapon_3_2:3,weapon_2_0:3,weapon_1_4:3,weapon_1_3:3,weapon_17:3,weapon_8_0:3,weapon_10_0:3,melee_12:3,swsh_12_0:3,swsh_12_1:3,weapon_4_0:3,melee_equip:3,melee_14:3,swsh_14_0:3,swsh_14_1:3,weapon_1_5:3,weapon_19:3,melee_19:3,swsh_19_0:3,swsh_19_1:3,weapon_11_0:3,weapon_4_1:3,weapon_4_2:3,weapon_4_3:3,weapon_7_0:3,melee_25:3,melee_25_1:3,weapon_1_6:3,weapon_7_1:3,weapon_2_1:3,weapon_1_7:3,fart_0:4,headshot_0:4,hit_0:4,impact_0:4,jump_0:4,jump_1:4,land_0:4,punch_0:4,punch_1:4,slide_0:4,spray:4,step_0:4,step_1:4,step_2:4,taunt_0:4,taunt_1:4,taunt_2:4,taunt_3:4,taunt_4:4,cough_1:4,cough_2:4,collect_1:4,bounce_0:4,build_0:4,break_wood:4,buy_0:5,buy_1:5,cheer_0:5,reward:5,store:5,tick_0:5,bo_plant:7,bo_diff:7,shoe_1:8,shoe_2:8},this.setVolume=function(e,t=0){if(null!=this.volumes[t])for(var i in this.volumes[t]=e,0==t&&Howler.volume(e),this.sounds)this.sounds[i].cat==t&&this.sounds[i].volume(this.sounds[i].vol*this.volumes[t])},this.getSound=function(t,n,r,a){var s=t+(n||"")+(window.activeHacker?"hckd":"")+(r?"asset":"");if(!(i=this.sounds[s])){var o=(r?e.userAssetsUrl(t+"/sound"):".././sound/"+(window.activeHacker?"fart_0":t))+".mp3";(i=new Howl({src:o,onload:a})).cat=r?this.soundCats[6]:this.soundCats[t]||0,this.sounds[s]=i}},this.onLoad=function(e,t,i){this.getSound(e,null,i,t)},this.play=function(e,t,n,r,a){if(this.getSound(e,null,a),this.rate&&(!n||!i.isPlaying)){i.isPlaying=!0;var s=i.play();i.vol=t||1,i.volume((t||1)*(a?this.volumes[6]:null==this.soundCats[e]?1:this.volumes[this.soundCats[e]]),s),n&&i.loop(n,s),r&&i.rate((r||1)*this.rate,s)}},this.stop=function(e){this.getSound(e),i&&(i.isPlaying=!1,i.stop())},this.endLoops=function(){for(var e in this.sounds)this.sounds[e]&&this.sounds[e]._sounds[0]._loop&&(this.sounds[e].isPlaying=!1,this.sounds[e].stop())},this.stopALL=function(){for(var e in this.sounds)this.sounds[e]&&(this.sounds[e].isPlaying=!1,this.sounds[e].stop())},this.play3Dv=function(n,r,a,s,o,l,c,d,p){var h=1-e.getD3D(r,a,s,d.x,d.y,d.z)/o;if(.1<h){this.getSound(n,"3dv",p);var u=i.play();l=(l||1)*h*t.otherSoundMlt,i.vol=l,i.volume(l*(p?this.volumes[6]:null==this.soundCats[n]?1:this.volumes[this.soundCats[n]]),u),i.rate(c||1,u)}},this.play3D=function(e,n,r,a,s,o,l,c,d){this.getSound(e,"3d",d);var p=i.play();.05<(s=(s||1)*t.otherSoundMlt)&&(i.vol=s,i.volume(s*(d?this.volumes[6]:null==this.soundCats[e]?1:this.volumes[this.soundCats[e]]),p),i.rate(o||1,p),i.pos(n,r,a,p),i.pannerAttr({refDistance:l||25,rolloffFactor:c||1},p))},this.play3DL=function(e,t,n,r,a,s,o,l,c){this.getSound(e,"3d",c);var d=i.play();.05<(a=a||1)&&(i.volume(a*(c?this.volumes[6]:null==this.soundCats[e]?1:this.volumes[this.soundCats[e]]),d),i.rate(s||1,d),i.pos(t,n,r,d),i.pannerAttr({refDistance:o||25,rolloffFactor:l||1,maxDistance:1e4,coneOuterGain:1},d),i.once("end",()=>{this.play3DL(e,t,n,r,a,s,o,l,c)}))},this.updateSound=function(e,t){this.soundCats[e]&&2==this.soundCats[e]&&this.stop(e),this.sounds[e]=new Howl({src:[t],format:"mp3"}),this.sounds[e+"3d"]=new Howl({src:[t],format:"mp3"}),this.sounds[e+"3dv"]=new Howl({src:[t],format:"mp3"})}}},function(e,t,i){const n=i(1).apiURL,r={apiRequest(e,t,i={}){for(let e in i)null==i[e]&&delete i[e];let r=new URLSearchParams(i).toString();return fetch(`${n}${t}${r?"?"+r:""}`).then(e=>e.json()).catch(t=>e(t,null)).then(t=>e(null,t))},listMaps(e,t,i,n){this.apiRequest(n,"/maps",{index:e,pos:t,accountId:i})},listMods(e,t,i,n){this.apiRequest(n,"/mods",{index:e,pos:t,accountId:i})},searchMap(e,t,i){this.apiRequest(i,"/search",{type:"map",val:e,cat:t})},listAssets(e,t,i,n,r){this.apiRequest(r,"/assets",{index:e,cat:n,username:i})},searchAsset(e,t,i){this.apiRequest(i,"/assets",{index:2,cat:t,val:e})},getMapPreset(e,t){this.apiRequest((function(i,n){t(e,(n=n||{}).da,n.fu)}),"/config",{mn:e})},searchMod(e,t){this.apiRequest(t,"/search",{type:"mod",val:e})},listStreams(e,t){this.apiRequest(t,"/streams",{index:e})},getPrices(e){this.apiRequest(e,"/prices")}};e.exports=r},function(e,t,i){e.exports={init:{game:i(67),social:i(68),editor:i(69)}}},function(e,t){e.exports=function(e,t,i){var n={_html:{settings:{input:{generic:function(e){return`<input type='${e.type}' name='${e.type}' id='slid_${e.key}' class='inputGrey2' placeholder='${e.placeholder}'\n                     value='${e.val}' oninput='setSetting("${e.key}", this.value)'/>`},color:function(e){return`<input type='color' name='color' id='slid_${e.key}' style='float:right' value='${e.val}'\n                     oninput='setSetting("${e.key}", this.value)'/>`},switch:function(e){return`<label class='switch' style='margin-left:10px'><input type='checkbox' onclick='setSetting("${e.key}", this.checked)'\n                     ${e.val?"checked":""}><span class='slider'></span></label>`},slider:function(e){return`<input type='number' class='sliderVal' id='slid_input_${e.key}' min='${e.min}' max='${e.max}'\n                     value='${e.val}' onkeypress='return delayExecute("${e.key}", this, ${e.delay})' style='margin-right:0px;border-width:0px'/>\n                     <div class='slidecontainer' style='${e.style||""}'><input type='range' id='slid_${e.key}' min='${e.min}' max='${e.max}' step='${e.step}'\n                     value='${e.val}' class='sliderM' oninput='setSetting("${e.key}", this.value)'></div>`},select:function(e,t){return`<select onchange='setSetting("${e.key}", this.value)' class='inputGrey2'>\n                     ${Object.keys(t).map(i=>`<option value='${i}' ${i==e.val?"selected":""}>${t[i]}</option>`)}</select>`}}}},endScreen:{tabs:{leaderboard:{name:"Leaderboard",gen:function(){return setTimeout(this.showTable),'<table id="endTable"></table>'}},performance:{name:"Performance",mode:{ids:["ffa","tdm","ctf","kc","point"],getIcon:function(){return this.ids.includes(e.mode.id)?`<img src="img/modes/${e.mode.id}.png" class="modeIcon">`:'<div class="unknownModeIcon">?</div>'}},xp:{animTime:1e3,newScoreCol:"#fff",getNewScoreProg:function(e,t){let n=1<e.level?Math.pow(e.level/i.rankVar,2):0;return t/parseInt(Math.pow((e.level+1)/i.rankVar,2)-n)*100},animateXPBar:function(e,t){let i=document.getElementsByClassName("xpEndBarB")[t];i&&(i.style.width=e+"%")}},gen:function(){let{rank:i,score:n,kills:r,deaths:a,funds:s,victory:o}=this.stats,l=(this.account?this.account.wins/this.account.games:-1==o?0:o?1:0).toFixed(2),c="<div id='endLayout'><div><div id='gameFundsLayout'><div class='gfSection'>"+`<div class="endTitle" style="text-align:center">${e.mode.name}</div>\n                     <div id="modeLayout">${this.mode.getIcon()}\n                     <div class="modeStatus" style="${-1==o?"color:var(--yellow)":o?"":"color:var(--red)"}">\n                     ${-1==o?"DRAW":o?"VICTORY":"DEFEAT"}</div></div>`+"</div><div class='gfSection'>"+`<div id="fundsLayout" style="${e.mode.ranked?"zoom:0.8":""}">\n                     <div class="fundsVal">${"NONE"==s?"NONE":s}</div></div>`+"</div></div></div><div class='endSection'><div class='endTitle'>Combat Record</div><div id='combatRecordLayout'><div class='crStat'><div class='crLabel'>Score</div><div class='crVal'>"+n+"</div></div><div id='kdLayout'><div class='crStat'><div class='crLabel'>Kills</div><div class='crVal'>"+r+"</div></div><div class='crStat'><div class='crLabel'>Deaths</div><div class='crVal'>"+a+"</div></div></div><div class='crStat'><div class='crLabel'>Rank</div><div class='crVal'>"+i+"</div></div><div class='crStat'><div class='crLabel'>SPK</div><div class='crVal'>"+(n/(r||1)||0).toFixed(2)+"</div></div><div class='crStat'><div class='crLabel'>KDR</div><div class='crVal'>"+(r/(a||1)||0).toFixed(2)+"</div></div><div class='crStat'><div class='crLabel'>W/L</div><div class='crVal'>"+l+"</div></div></div></div></div>";if(this.account){this.account.updateLevel();let e=this.xp.getNewScoreProg(this.account,n),i=e+this.account.levelProg,r=100<i;c+=`<div class="endSection" style="margin-top:10px">${"<div id='lvlLayout'><img src='./img/levels/"+t.levelIconId(this.account.level)+".png' class='xpRnk'><div class='xpLvl'>"+this.account.level+"</div><div class='xpEndBar'><div class='xpEndBarB' style='width: 0%;"+(r?"background-color:"+this.xp.newScoreCol:"")+"'></div><div class='xpEndBarB' style='width: 0%;background-color: "+this.xp.newScoreCol+";margin-left: -7px;'></div><span class='xpEndBarV blackShad'>"+t.xpBarText(this.account)+"</span></div><img src='./img/levels/"+t.levelIconId(this.account.level)+".png' class='xpRnk' style='margin-left: auto'><div class='xpLvl'>"+(this.account.level+1)+"</div></div>"}</div>`,setTimeout(()=>{this.xp.animateXPBar(r?i%100:this.account.levelProg,0)}),r||setTimeout(()=>{this.xp.animateXPBar(e,1)},this.xp.animTime)}return c}},clanwar:{name:"Clan Wars",gen:function(){var e="";if(this.isCustom)e+="<div style='text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'>Disabled in Custom matches</div>";else if(this.data&&this.account)if(this.account.clan)if(this.account.clanCon)if(this.data&&(3==this.account.clanCon||this.data[2]>=i.clanWarLives))e+="<div style='text-align:center;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'><img src='img/chals/icon_19.png' id='kiaIcon'><div style='color:var(--red);font-size:30px'>KILLED IN ACTION</div><div style='color:rgba(255, 255, 255, 0.5);font-size:20px'>Better luck next time</div></div>";else if(this.data&&2==this.account.clanCon)e+="<div style='text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'>Contract cancelled till next Clanwar</div>";else if(this.data&&1==this.account.clanCon){let t=i.clanWarLives-this.data[2],n=i.clanRegions[this.account.clanRegion-1];e+="<div id='clanwarsLayout'><div class='clanwarsSection'><div class='clanwarsTitle'>Region<div class='clanwarsSubTitle' onclick='openURL(&quot;/social.html?p=clanwars&quot;)'>World Map</div></div><div id='cwRegionOcean'><div id='cwRegionMap' style='background-size:"+n.endSize+"px;background-position:"+n.endPos[0]+"px "+n.endPos[1]+"px'></div><div id='cwRegionPoint'></div><div id='cwRegionArrow'><div><i class='material-icons' style='color:white;font-size:30px;transform:translateY(-4px)'>tour</i></div></div></div><div id='cwRegionText'>"+n.name+"</div></div><div class='clanwarsSection'><div class='clanwarsTitle'>Summary</div><div id='cwSumHolder'><div class='cwSumStat'><div class='cwSumIcon' style='background-image: url(../img/kill.svg)'></div><div class='cwSumLabel'>Total Kills</div><div class='cwSumVal' style='display: inline-block;'>"+this.data[0]+" <div class='cwSumVal' style='display: inline-block;color: #FBC02D;'>+"+this.data[1]+"</div></div></div><div class='cwSumStat'><div class='cwSumIcon'><i class='material-icons'>favorite</i></div><div class='cwSumLabel'>Lives Remaining</div><div class='cwSumVal'>"+(t+this.data[3])+" <div class='cwSumVal' style='display: inline-block;color: #eb5656;'>-"+this.data[3]+"</div></div></div></div></div></div>"}else this.data&&!this.account.clanCon&&(e+="<div style='text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'>No active contract</div>");else e+="<div style='text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'>Contract Required to Participate in Clan Wars</div>";else e+="<div style='text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'>Join a Clan to Participate in Clan Wars</div>";else e+="<div style='text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);border-radius:6px;padding:20px;'>Login to view Clan Wars</div>";return e}},medals:{name:"Medals",gen:function(){return'<div style="text-align:center;color:#fff;font-size:30px;background-color:rgba(0, 0, 0, 0.4);\n                     border-radius:6px;padding:20px;">Coming Soon!</div>'}}},init:function(e,t,i,n,r,a){this.spectating=t,this.tabs.leaderboard.showTable=a,this.tabs.performance.account=e,this.tabs.performance.stats=i,this.tabs.clanwar.isCustom=r,this.tabs.clanwar.data=n,this.tabs.clanwar.account=e,this.changeTab("leaderboard")},changeTab:function(e){this.currentTab=e,this.show()},show:function(){let e="";if(!this.spectating){for(let t in e+="<div id='tabHolder'>",this.tabs)e+=`<div class="tabHeader ${t==this.currentTab?"selected":""}"\n                  onmouseenter="playTick()" onclick="GUI.endScreen.changeTab('${t}')">${this.tabs[t].name}</div>`;e+="</div>"}let t=`<div class="endCard">${e}\n               <div class="tabBody">${this.tabs[this.currentTab].gen()}</div></div>`;endTabbedView.innerHTML=t}}};return window.GUI=t.removePrivateKeys(n),n}},function(e,t){e.exports=function(e,t,i,n){var r={_html:{settings:{input:{generic:function(e,t,i,n){return`<input type='${e}' name='${e}' id='slid_${t}' class='inputGrey2' placeholder='${n}'\n                       value='${i.val}' oninput='setSetting("${t}", this.value)'/>`},color:function(e,t){return`<input type='color' name='color' id='slid_${e}' style='float:right' value='${t.val}'\n                       oninput='setSetting("${e}", this.value)'/>`},switch:function(e,t){return`<label class='switch' style='margin-left:10px'><input type='checkbox' onclick='setSetting("${e}", this.checked)'\n                       ${t.val?"checked":""}><span class='slider'></span></label>`},slider:function(e,t,i=""){return`<input type='number' class='sliderVal' id='slid_input_${e}' min='${t.min}' max='${t.max}'\n                       value='${t.val}' onkeypress='return delayExecute("${e}", this, ${t.delay})' style='margin-right:0px;border-width:0px'/>\n                       <div class='slidecontainer' style='${i}'><input type='range' id='slid_${e}' min='${t.min}' max='${t.max}' step='${t.step}'\n                       value='${t.val}' class='sliderM' oninput='setSetting("${e}", this.value)'></div>`},select:function(e,t,i){return`<select onchange='setSetting("${e}", this.value)' class='inputGrey2'>\n                       ${Object.keys(i).map(e=>`<option value='${e}' ${e==t.val?"selected":""}>${i[e]}</option>`)}</select>`}}}},action:function(e,t){let i=r;switch(e.forEach(e=>i=i[e]),i.type){case"dropper":let e=t.parentElement.children[1],n=r.clanwars.droppers.elem;n&&(n.style.transform=null,n.classList.toggle("bounce",!1)),e.style.transform="scale(1.0) translateY(-41px)",e.classList.toggle("bounce",!0),r.clanwars.droppers.elem=e,i.onclick&&i.onclick();break;case"button":i.onclick&&i.onclick()}},_build:function(e){let t=r;return e.forEach(e=>t=t[e]),Object.keys(t).map(i=>{let n=t[i],r=`GUI.action(${JSON.stringify([...e,i]).replace(/\"/g,"'")}, this)`;switch(n.type){case"dropper":return`<div class="dropper" style="transform: translate(${n.pos[0]}px, ${n.pos[1]}px)">\n\t\t\t\t\t\t\t<div class="dropperPoint" onclick="${r}"></div>\n\t\t\t\t\t\t\t<div class="dropperArrow" onclick="${r}"><div class='dropperArrowBod'>\n\t\t\t\t\t\t\t<div class="dropperText${"rgb"==n.color?" rainbowText":""}" style="color:${n.color?n.color:"#fff"};${n.text?"":"height:25px;"}">${n.text||""}</div>\n\t\t\t\t\t\t\t<i class='material-icons' style='color:white;font-size:30px;transform:translateY(-4px)'>tour</i>\n\t\t\t\t\t\t\t</div></div></div>`;case"button":return`<div id="${n.id||""}" style="${n.style||""}" onclick="${r}">${n.html||""}</div>`;default:return""}}).join("\n")},clanwars:{filter:{settings:{increment:1e-5,min:.02,max:.03,counter:0},animation:function(){let t=r.clanwars.filter;t.settings.counter+=t.settings.increment/(t.settings.max-t.settings.min);let i=e.easeinout(t.settings.counter)*(t.settings.max-t.settings.min)+t.settings.min;t.elem.baseFrequencyX.baseVal=i,t.elem.baseFrequencyY.baseVal=2*i,(1<t.settings.counter||0>t.settings.counter)&&(t.settings.increment*=-1),requestAnimationFrame(t.animation)},init:function(){this.elem=document.getElementById("sea-filter"),this.setup||(this.setup=!0,requestAnimationFrame(this.animation))}},region:{deselect:function(){let e=r.clanwars.droppers.elem;e&&(e.style.transform=null,e.classList.toggle("bounce",!1))},show:function(t,n){let r,a,s,o=i.skins.find(e=>e&&e.limT&&"Clan Wars"==e.limT&&e.region&&e.region==t),l=e.getPreview(o,i),c="<div class='regionCard'><div style='margin-bottom:10px;'><span class='regionTitle'>"+t+"</span><div style='float:right;color:rgba(0,0,0,0.3)'>Reward: <div class='rewItemIcon' style='background-image:url(&quot;"+l+"&quot;)' onclick='openSales("+o.index+")'></div><span class='regionKR'> <span style='color:rgba(0,0,0,0.3)'>+</span> "+e.commaNumber((n?n.kr:0)||0)+"<span style='color:rgba(0,0,0,0.6)'> KR</span></span></div></div>";n&&n.list&&n.list.length?n.list.forEach((function(e,t){r="<span style='color:rgba(0,0,0,0.3)'>Kills </span><span style='margin-right:10px'>"+(e.kills||0).toLocaleString()+"</span>",a="<span style='color:rgba(0,0,0,0.3);margin-right:5px'><img src='./img/soldier_0.png' width=30 height=30style='transform:translateY(1px);image-rendering:pixelated;'></span><span style='margin-right:10px'>"+(e.soldiers||0).toLocaleString()+"</span>",s="<span style='color:rgba(0,0,0,0.3);margin-right:5px'><img src='./img/soldier_1.png' width=30 height=30 style='transform:translateY(1px);image-rendering:pixelated;'></span><span>"+(e.kia||0).toLocaleString()+"</span>",c+="<div>"+(t+1)+". <a target='_blank' href='/social.html?p=clan&q="+e.name+"' class='rName"+("rgb"==e.color?" rainbowText":"")+"'style='color:"+(e.color?e.color:"rgba(0,0,0,0.6)")+"'>["+e.name+"]</a><span style='color:rgba(0,0,0,0.3)'> Clan</span><div style='float:right'>"+r+a+s+"</div></div>"})):c+="<div class='rEmpty'>No Clans currently occupying this Region</div>",c+="</div>",clanwarsInfo.innerHTML=c}},droppers:{show:function(e){let t;this.blueprint={},n.clanRegions.forEach((i,n)=>{t=e&&e[n]&&e[n].list[0]&&e[n].list[0].name?e[n].list[0]:null,this.blueprint[n]={type:"dropper",pos:i.pos,color:t?t.color:null,text:t?`[${e[n].list[0].name}]`:null,onclick:function(){r.clanwars.region.show(i.name,e[n])}}}),dropperHolder.innerHTML=r._build(["clanwars","droppers","blueprint"])}},help:{show:function(e){let t=this;this.blueprint={icon:{type:"button",id:"clanwarsHelpIcon",html:"<div>?</div>",onclick:function(){let e="none"!=clanwarsHelpWin.style.display;clanwarsHelpWin.style.display=e?"none":null,clanwarsHelpVig.style.display=e?"none":null}},vig:{type:"button",id:"clanwarsHelpVig",style:"display:none",onclick:function(){t.blueprint.icon.onclick()}}};var i=r._build(["clanwars","help","blueprint"])+"<div id='clanwarsHelpWin' style='display:none'><div class='cwHelpHed'>Welcome to Clan Wars</div><div class='cwHelpBod'>Clan Leaders can assign up to 30 Clan Members to different Regions. Once a player is assigned to a Region,\n\t\t\t\t\t\tany kills they get in a pub match will count toward the clans overall kills in that Region.\n\t\t\t\t\t\t<div style='height:16px'></div>If a player runs out of lives (by dying in Pub Matches),\n\t\t\t\t\t\ttheir contract will end and the clan leader has to replace\n\t\t\t\t\t\tthem with another player until the next Clan War.<div style='height:16px'></div>At the end of the\n\t\t\t\t\t\tWar Period, the Clan with the most kills in a specific Region will win all the KR available in that Region.\n\t\t\t\t\t\tThe Clans with the most Kills globally, will also receive special clan tag colors:\n\t\t\t\t\t\t<div class='clanRewH' style='margin-top:20px'># 1 Clan <span style='float:right;' class='rainbowText'>[CLAN]</span></div>\n\t\t\t\t\t\t<div class='clanRewH' style='margin-top:20px'># 2-3 Clan <span style='float:right;color:#292929'>[CLAN]</span></div>\n\t\t\t\t\t\t<div class='clanRewH' style='margin-top:20px'># 4-10 Clan <span style='float:right;color:#eb3437'>[CLAN]</span></div>\n\t\t\t\t\t\t<div class='clanRewH' style='margin-top:20px'># 11-20 Clan <span style='float:right;color:#FBC02D'>[CLAN]</span></div>\n\t\t\t\t\t\t<div class='clanRewH' style='margin-top:20px'># 21-30 Clan <span style='float:right;color:#e834eb'>[CLAN]</span></div>\n\t\t\t\t\t\t<div class='clanRewH' style='margin-top:20px'># 31-50 Clan <span style='float:right;color:#349ceb'>[CLAN]</span></div>\n\t\t\t\t\t\t<div style='height:20px'></div>Remember to have fun and to follow the\n\t\t\t\t\t\t<a style='color:#00a6ff' target='_blank' href='./docs/clan.txt'>Rules</a></div></div>";clanwarsHelp.innerHTML=i,e&&setTimeout((function(){t.blueprint.icon.onclick()}))}},buttons:{show:function(e,i){var a=e.map(e=>e.list).reduce((e,t)=>[...e,...t]);this.blueprint={leader:{type:"button",id:"clanwarsLeaderIcon",html:"<div><i class='material-icons' style='color:white'>emoji_events</i></div>",onclick:function(){r.clanwars.region.deselect();let e,t="<div class='regionCard'><div style='margin-bottom:10px;'><span class='regionTitle'>Global Leaders</span></div>";if(a){var i={};a.forEach((function(e){i[e.name]?(i[e.name].kills+=e.kills,i[e.name].soldiers+=e.soldiers,i[e.name].kia+=e.kia):i[e.name]={name:e.name,color:e.color,kills:e.kills,soldiers:e.soldiers,kia:e.kia}}));var n=[];for(var s in i)i.hasOwnProperty(s)&&n.push(i[s]);var o=1;n=n.sort((e,t)=>t.kills-e.kills);for(var l=0;l<n.length;++l){e="<span style='color:rgba(0,0,0,0.3);'>Kills </span><span style='margin-right:12px'>"+(n[l].kills||0).toLocaleString()+"</span>";var c=n[l].color||"rgba(0,0,0,0.6)";t+="<div>"+o+". <a target='_blank' href='/social.html?p=clan&q="+n[l].name+"' class='rName"+("rgb"==c?" rainbowText":"")+"'style='color:"+c+"'>["+n[l].name+"]</a><span style='color:rgba(0,0,0,0.3)'> Clan</span><div style='float:right'>"+e+"<span style='color:rgba(0,0,0,0.3);margin-right:5px'><img src='./img/soldier_0.png' width=30 height=30style='transform:translateY(1px);image-rendering:pixelated;'></span><span>"+(n[l].soldiers||0).toLocaleString()+"</span><span style='color:rgba(0,0,0,0.3);margin-right:5px;margin-left:10px'><img src='./img/soldier_1.png' width=30 height=30 style='transform:translateY(1px);image-rendering:pixelated;'></span><span>"+(n[l].kia||0).toLocaleString()+"</span></div></div>",o++}}else t+="<div class='rEmpty'>No Clans Found</div>";t+="</div>",clanwarsInfo.innerHTML=t}},kills:{type:"button",id:"clanwarsPlayerKillsIcon",html:"<img src='./img/soldier_0.png' width='20' height='20' style='image-rendering:pixelated;margin:auto;position:absolute;left:0;right:0;top:0;bottom:0'>",onclick:function(){r.clanwars.region.deselect();let e="<div class='regionCard'><div style='margin-bottom:10px;'><span class='regionTitle'>Top Soldiers</span></div>";for(var a=0;a<i.length;++a){var s="<span style='color:rgba(0,0,0,0.3);'>Kills </span><span style='margin-right:15px'>"+(i[a].k||0).toLocaleString()+"</span>",o=n.clanWarLives-Math.min(parseInt(i[a].d||0),n.clanWarLives),l=t.getClanCol(i[a].c,i[a].cr,"color:rgba(0,0,0,0.6)"),c="<span style='color:rgba(0,0,0,0.3);'>Lives </span><span style='margin-right:5px'>"+o.toLocaleString()+"</span>";e+="<div "+(i[a].d>=n.clanWarLives?"style='background-color:rgba(255,0,0,0.1)'":"")+"><div style='width:5px;display:inline-block'></div>"+(a+1)+". <a target='_blank' href='/social.html?p=profile&q="+i[a].p+"'>"+i[a].p+"</a> <a target='_blank' href='/social.html?p=clan&q="+i[a].c+"' class='rName"+("rgb"==l?" rainbowText":"")+"' style='"+l+"'>["+i[a].c+"]</a><span style='float:right'>"+s+c+"</span></div>"}e+="</div>",clanwarsInfo.innerHTML=e}}},clanwarsButtons.innerHTML+=r._build(["clanwars","buttons","blueprint"])}},show:function(e,t){e=e||[],t=t||[],this.filter.init(),this.help.show(),this.buttons.show(e,t),this.droppers.show(e),clanwarsButtons.children[0].onclick()}}};return window.GUI=e.removePrivateKeys(r),r}},function(t,i){var n=function(e){if(e=e||{},this.name=e.name,this.id=e.id,this.parent=e.parent,this.type=e.type,this.pos=e.pos,this.size=e.size,this.sub=e.sub,this.closed=e.closed,this.show=e.show,this.blueprint={},this.parent){var t=this.id||this.name;this.parent.blueprint[t]={type:this.type,children:e.children||{}},this.name&&(this.parent.blueprint[t].name=this.name),this.id&&(this.parent.blueprint[t].id=this.id),this.pos&&(this.parent.blueprint[t].pos=this.pos),this.size&&(this.parent.blueprint[t].size=this.size),this.sub&&(this.parent.blueprint[t].sub=this.sub),this.closed&&(this.parent.blueprint[t].closed=!0),null!=this.show&&(this.parent.blueprint[t].show=this.show),this.blueprint=this.parent.blueprint[t].children}this.addFolder=function(e,t,i,r,a,s,o){var l={name:e,parent:this,type:r||this.type,children:t||{}};(i||this.pos)&&(l.pos=i||this.pos),(a||this.size)&&(l.size=a||this.size),o&&(l.sub=o),s&&(l.closed=!0);return new n(l)},this.addDiv=function(e,t,i,r){var a={id:e,parent:this,type:"div",children:t||{}};(i||this.size)&&(a.size=i||this.size),null!=r&&(a.show=r);return new n(a)},this.addOption=function(e,t){return this.blueprint[e]={name:e,type:this.type,pos:"option",onClick:t},this},this.add=function(e,t,i,n,r,a,s,o){var l={object:i,key:n,type:e};return s&&(l.line="wide"),r&&(l.args=r),t&&(l.name=t),o&&(l.sub=o),a&&(l.onChange=a),l.args&&("select"==e||"button"==e||"number"==e||"text"==e)&&(l.args=[l.args]),this.blueprint[t||n]=l,this},this.addPanelButton=function(e,t){var i={type:"panel_buttons",direction:t};return e?i.label=e:i.blank=!0,this.blueprint.panelButtons=i,this},this.addChildren=function(e){return this.blueprint={...e},this};var i=0;this.addRule=function(){return this.blueprint["rule"+i]={type:"rule"},i++,this},this.toJSON=function(){if(!e.parent)return this.blueprint}};t.exports=function(t,i,r,a,s,o,l,c,d){var p,h,u={_html:{panelButtons:function(e,t,i=!1){let n=`<div class="${"left"==e?"right":"left"} panelButton" style="${i?"border-bottom-right-radius:5px":""}" onclick="KE.resizable.hide(this)">\n\t\t\t\t\t<div class="hide"><i class="material-icons hide">keyboard_arrow_${e}</i></div></div>`,r=i?"<div></div>":`<div class="${"left"==e?"left":"right"} panelButton" onclick="GUI.panel.state.lock(this, '${e}')">\n\t\t\t\t\t<div class="lock""><i class="material-icons lock">lock${u.panel[e].locked?"":"_open"}</i></div></div>`,a=i?"<div></div>":`<div class='panelLabel'>${t}</div>`;return`<div class="panelButtonLayout">${"left"==e?r+a+n:n+a+r}</div>`},arrow:function(e){return`<i class="material-icons" style="transform: translateY(5px) rotate(${{up:-45,down:135,left:-135,right:45}[e]}deg)">call_made</i>`},folder:{standard:function(e,t="",i="",n=!1){return`<div id="${e.toLowerCase()}H" class="header" onclick="GUI.update.folder(this);${i}">\n\t\t\t\t\t\t<i class="material-icons">keyboard_arrow_${n?"right":"down"}</i><a>${e}</a></div><hr>\n\t\t\t\t\t\t<div id="${e.toLowerCase()}B" style="${n?"display:none":""}">${t}<hr></div>`},small:function(e,t="",i="",n=!1,r=!1){return`<div id="${e.toLowerCase()}H" class="${r?"sub":""}subheader" style="cursor: pointer"\n\t\t\t\t\t\tonclick="GUI.update.folder(this);${i}"><i class="material-icons">keyboard_arrow_${n?"right":"down"}</i><a>${e}</a></div>\n\t\t\t\t\t\t<div id="${e.toLowerCase()}B" style="${n?"display:none":""}">${t}</div>`}},line:{standard:function(e,t="",i=0){return`<div class="inlineItem"><div class="section ${["subsection","subsubsection"][i-1]||""}">${e}</div>\n\t\t\t\t\t\t<div>${t}</div></div>`},wide:function(e,t=""){return`<div>${t}</div>`}},input:{resizable:{button:function(e,t="",i){return`<div class="button" onclick="${t}">${i}</div>`},dbutton:function(e,t="",i,n){return`<div class="dbutton" onclick="${t}" id="left">${i}</div><div class="dbutton" onclick="${t}" style="margin-left: 5px;" id="right">${n}</div>`},key:function(e="",t="",i=[],n=!1){return`<div class="inlineLabel ${n?"":"disabled"}" href="#" ${n?`onclick="${t}"`:""}>${[e,...i].join(" or ")}</div>`},text:function(e="",t="",i=""){return`<input class="inlineInput" type="text" placeholder="${i}" value="${e}" oninput="${t}" onchange="GUI.update.field(this)">`},number:function(e=0,t="",i="",n="",r="",a=""){return`<input class="inlineInput" type="number" placeholder="${i}" value="${e}" min="${n}" max="${r}" step="${a}"\n\t\t\t\t\t\tonmousedown="GUI.update.number.mousedown(this)" onchange="GUI.update.field(this);GUI.update.number.change(this);${t}">`},color:function(e="#ffffff",t=""){return`<input class="color" style="background-color:${e};color:${r.stringifyColor(7829367>r.parseColor(e)?16777215:0)}"\n\t\t\t\t\t\ttype="text" spellcheck="false" value="${e}" onchange="GUI.update.field(this);GUI.update.color.change(this);${t}"\n\t\t\t\t\t\tonmousedown="GUI.update.color.mousedown(this)">`},switch:function(e=!1,t=""){return`<label class="switch" style="margin-top: 10px"><input type="checkbox"\n\t\t\t\t\t\tonclick="${t}" ${e?"checked":""}><span class="slider"></span></label>`},slider:function(e=0,t="",i=0,n=1,r=.1){return`<div style="zoom:0.7;margin-top:12px;">\n\t\t\t\t\t\t<input type="number" class="sliderVal" min="${i}" max="${n}" value="${e}"\n\t\t\t\t\t\tonchange="GUI.update.field(this);GUI.update.slider.val(this);${t}"><div class="slidecontainer"><input type="range"\n\t\t\t\t\t\tmin="${i}" max="${n}" step="${r}" value="${e}" class="sliderM" oninput="GUI.update.slider.M(this);${t}">\n\t\t\t\t\t\t</div></div>`},select:function(e=0,t="",i){return`<select onchange="${t}">${i.map(t=>`<option value="${t.value}"\n\t\t\t\t\t\t${e==t.value?"selected":""}>${t.name}</option>`)}</select>`}},fixed:{vector3:function(e,i="",n=[0,0,0],r="",a="",s=""){return`<div class="section">${e}</div><div class="vector3">\n\t\t\t\t\t\t${t.xyzKeys.map((e,t)=>`<input type="number" placeholder="${e}" min="${r}" max="${a}" step="${s}"\n\t\t\t\t\t\tonmousedown="GUI.update.number.mousedown(this)" onchange="GUI.update.field(this);GUI.update.number.change(this);${i}"\n\t\t\t\t\t\tvalue="${n[t]}">`).join("\n")}</div>`}}},toolbar:{root:function(e,t){return`<div class="toolbarItem" onmouseover="GUI.update.toolbar(this, true)" onmouseout="GUI.update.toolbar(this)">\n\t\t\t\t\t\t${e}<div class="toolbarDropDown">${t}</div></div>`},menu:function(e,t){return`<div class="toolbarDropDownItem" onmouseover="GUI.update.toolbar(this, true)" onmouseout="GUI.update.toolbar(this)">\n\t\t\t\t\t\t${e}<div class="toolbarSubDropDown" style="top: this.offsetTop">${t}</div></div>`},option:function(e,t=""){return`<div class="toolbarDropDownItem" onclick=";${t}">${e}</div>`},textarea:function(e,t=""){return`<div class="toolbarDropDownItem textarea" onclick=";${t}"><textarea class="qs_textarea" rows="5"></textarea></div>`}}},update:{folder:function(e){let t=document.getElementById(e.id.substring(0,e.id.length-1)+"B"),i="none"==t.style.display;e.children[0].innerHTML="keyboard_arrow_"+(i?"down":"right"),t.style.display=i?null:"none"},field:function(e){e.blur()},key:{choice:{},keydown:function(e){let t=u.update.key.choice;if(t.elem){1==(e=window.event||e).key.toUpperCase().length?t.callback(e.key.toUpperCase(),!0):t.callback(t.prev),t.elem=null}},mousedown:function(e){let t=u.update.key.choice;t.elem&&(e=window.event||e,t.callback(t.prev),t.elem=null)}},number:{mousedown:function(e){u.update.number.elem=e},mousemove:function(e){let t=u.update.number.elem;e=window.event||e,t&&(t.value=parseFloat(t.value)-e.movementY*(parseFloat(t.step)||1),t.min&&t.value<t.min&&(t.value=parseFloat(t.min)),t.max&&t.value>t.max&&(t.value=parseFloat(t.max)),t.onchange())},mouseup:function(){delete u.update.number.elem},change:function(e){""==e.value&&(e.value=0)}},color:{init:function(){let e=document.createElement("div");e.style.display="none",document.body.appendChild(e),u.update.color.pickr=Pickr.create({el:e,theme:"nano",comparison:!1,lockOpacity:!0,autoReposition:!1,closeOnScroll:!0,components:{preview:!1,hue:!0}}),u.update.color.pickr.on("show",(function(e,t){let i=u.update.color.elem.getBoundingClientRect(),n=i.y,r=i.x+i.width+4;n=window.innerHeight-n<t._root.app.offsetHeight?n-t._root.app.offsetHeight+i.height:n,r=window.innerWidth-r<t._root.app.offsetWidth?r-t._root.app.offsetWidth-i.width-8:r,t._root.app.style.top=n+"px",t._root.app.style.left=r+"px",t.setColor(u.update.color.elem.value)})).on("change",(function(e){let t=u.update.color.elem;t&&(t.value=e.toHEXA().toString(),t.onchange())})).on("hide",(function(){delete u.update.color.elem}))},change:function(e){let t=e.style.backgroundColor,i=t.substr(4,t.length-5).split(", ");e.value=r.isHexColor(e.value)?e.value:r.rgbToHex(...i),e.style.backgroundColor=e.value,e.style.color=r.stringifyColor(7829367>r.parseColor(e.value)?16777215:0),u.update.color.pickr.setColor(e.value)},mousedown:function(t){e=window.event||e,1===e.which&&(u.update.color.show=!0,u.update.color.elem=t,u.update.color.pickr.show())}},slider:{val:function(e){e.parentElement.children[1].children[0].value=Math.max(Math.min(e.value,e.max),e.min),e.value=e.parentElement.children[1].children[0].value},M:function(e){e.parentElement.parentElement.children[0].value=e.value}},toolbar:function(e,t){t?(e.children[0].style.display="block","toolbarSubDropDown"==e.children[0].className&&!e.children[0].style.top&&setTimeout((function(){e.children[0].style.top=e.offsetTop+"px"}),0)):e.children[0].style.display=null}},action:function(e,i){let n=u;switch(e.forEach(e=>n=n[e]),n.type){case"toolbar":if(t.quickGUI._hidden){let t=i;e.slice(e.indexOf("blueprint")+2).forEach(()=>t=t.parentElement),u.update.toolbar(t)}else"textarea"==n.pos||t.quickGUI.hide();n.onClick&&n.onClick(i);break;case"folder":let r="none"==document.getElementById(i.id.substring(0,i.id.length-1)+"B").style.display,a=[...e];a[a.indexOf("blueprint")]="folderStore";let s=u;a.forEach(e=>s=s[e]?s[e]:s[e]={}),s.closed=r;break;case"vector3":let o=[...i.parentElement.children].map(e=>parseFloat(e.value));n.object[n.key]=o,n.onChange&&n.onChange(i,o);break;case"key":let l=u.update.key.choice;l.prev=i.innerHTML,i.innerHTML="Press Any Key",l.callback=function(e,t){i.innerHTML=[e,...n.args[0]].join(" or "),t&&(n.object[n.key]=e,n.onChange&&n.onChange(i,e))},l.elem=i;break;case"dbutton":n.onChange&&n.onChange(i,null);break;default:let c="checkbox"==i.type?i.checked:["text","select-one"].includes(i.type)?i.value:parseFloat(i.value);"function"==typeof n.object[n.key]?n.object[n.key](i.id):n.object[n.key]=c,n.onChange&&n.onChange(i,c)}},_build:function(e){let i=u;return e.forEach(e=>i=i[e]),Object.keys(i).map(n=>{let r=i[n],a=`GUI.action(${JSON.stringify([...e,n]).replace(/\"/g,"'")}, this)`;switch(r.type){case"panel_buttons":return u._html.panelButtons(r.direction,r.label,r.blank);case"rule":return"<hr>";case"div":return`<div id=${r.id} ${r.show?null:'style="display: none"'}>${u._build([...e,n,"children"])}</div>`;case"toolbar":return["option","textarea"].includes(r.pos)?u._html.toolbar[r.pos](r.name,a):u._html.toolbar[r.pos](r.name,u._build([...e,n,"children"]));case"folder":let i=[...e,n];i[i.indexOf("blueprint")]="folderStore";let s=u;return i.forEach(e=>s=s[e]?s[e]:s[e]={}),t.settings.preserveFolderState&&null!=s.closed?r.closed=s.closed:s.closed=!!r.closed,u._html.folder[r.size](r.name,u._build([...e,n,"children"]),a,r.closed,r.sub);case"vector3":return u._html.input.fixed.vector3(r.name,a,r.object[r.key],r.min);default:return u._html.line[r.line||"standard"](r.name,u._html.input.resizable[r.type](r.object[r.key],a,...r.args?r.args:[]),r.sub)}}).join("\n")},_toolbar:{elem:document.getElementById("_toolbar"),show:function(){let e=[],i=[],o=[],l=[];for(let n in s.prefabs)s.prefabs[n].localOnly&&a.isProd||s.prefabs[n].custom||s.prefabs[n].noExport||""==s.prefabs[n].name||(s.prefabs[n].ai?l:s.prefabs[n].tool||s.prefabs[n].tool2?i:s.prefabs[n].gen?e:o).push({name:r.formatConstName(s.prefabs[n].name),type:"toolbar",pos:"option",onClick:function(){t.createObjects[n]()}});var c=new n({type:"toolbar",pos:"root"}),d=c.addFolder("File");d.addOption("Import Project",(function(){window.event.shiftKey?t.loadFile("importMap"):t.importMap()})),d.addOption("New Project",(function(){confirm("Are you sure you want to reset the map?")&&t.clearMap()})),d.addOption("Save Project",()=>t.save()),d.addRule(),d.addOption("Export",(function(){window.event.shiftKey&&t.copyToClipboard(t.getMapExport()),t.exportMap()})),d.addOption("Copy Export",()=>r.copyToClipboard(t.getMapExport())),d.addRule(),d.addOption("Export GLTF",()=>t.exportScene()),d.addOption("Export MTL",()=>t.exportScene2()),d.addRule(),d.addOption("Publish",()=>t.publishMap());var p=c.addFolder("Edit");p.addOption("Undo (Ctrl + Z)",()=>t.executeHistory("undo")),p.addOption("Redo (Ctrl + Y)",()=>t.executeHistory("redo")),p.addRule(),p.addOption("Delete (Del)",(function(){t.objectSelected(!0)?t.removeGroup():t.removeObject()})),p.addOption("Duplicate (Shift + R)",(function(){t.objectSelected(!0)?t.duplicateGroup():t.duplicateObject()})),p.addRule(),p.addOption("Settings...",()=>showWindow(3));var h=c.addFolder("Object");h.addOption("List",()=>u.panel.right.objectList.show()),h.addRule(),h.addFolder("Basic",o,"menu"),h.addFolder("Models",e,"menu"),h.addFolder("Tools",i,"menu"),h.addFolder("AI",l,"menu"),h.addRule(),h.addOption("Placeholder",()=>t.createPlaceholder());var f=h.addFolder("Group",null,"menu");f.addOption("Create",()=>t.advancedOptions.create()),f.addOption("Stop",()=>t.advancedOptions.stop()),f.addOption("Stop All",()=>t.advancedOptions.stopAll()),f.addRule(),f.addOption("Copy",()=>t.advancedOptions.copy()),f.addOption("Cut",()=>t.advancedOptions.cut()),f.addOption("Paste",()=>t.advancedOptions.paste()),f.addRule();var m=f.addFolder("Prefab",null,"menu"),g=m.addFolder("Import",null,"menu");g.addOption("JSON",()=>t.advancedOptions.json()),g.addOption("File",()=>t.advancedOptions.file()),m.addOption("Export",()=>t.advancedOptions.exportObj()),f.addRule(),f.addOption("Edit",()=>u.panel.right.grouping.show()),h.addRule(),h.addOption("Custom...",()=>t.createObjects[44]());var y=c.addFolder("Component");y.addOption("Environment",()=>u.panel.right.environment.show()),y.addOption("Terrain",()=>u.panel.right.terrain.show()),y.addOption("Zone",()=>u.panel.right.zone.show()),y.addOption("Scripts",()=>u.panel.right.scriptList.show()),y.addRule(),y.addOption("Tools",()=>u.panel.right.tools.show());var v=c.addFolder("Map");v.addOption("Test Map",()=>t.testMap()),v.addOption("Host Map",()=>t.testMap(!0)),v.addRule(),v.addOption("Quick Start",()=>t.quickStart()),v.addOption("Templates",()=>t.showTempls()),v.addRule(),v.addOption("Customize",()=>u.panel.right.customize.show()),v.addRule(),v.addOption("Optimizations",()=>u.panel.right.optimizations.show());var w=c.addFolder("Help");w.addOption("Controls",()=>showWindow(1)),w.addOption("Guide",()=>showWindow(8)),this.blueprint=c.toJSON(),this.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}},panel:{state:{lock:function(e,t){let i=e.children[0].children[0],n=i.innerHTML.includes("open");i.innerHTML="lock"+(n?"":"_open"),u.panel[t].locked=n},setActive:function(e){u.panel[e[1]].elem.id=e.join("_")},isActive:function(e){return u.panel[e[1]].elem.id==e.join("_")},refresh:function(e){if(!document.getElementById(e))return;let t=u;e.split("_").forEach(e=>t=t[e]),t.show&&t.show()},refreshAll:function(){return r.getObjKeys(u.panel,["state","blueprint","objKeys","folderStore","show","elem","restore"]).forEach(e=>{u.panel.state.refresh("panel_"+e.replace(/\|/g,"_"))})}},left:{elem:document.getElementsByClassName("panel")[0].children[1],restore:document.getElementsByClassName("restore")[0],essential:{show:function(){if(t.resizable.restore(u.panel.left.restore),!u.panel.left.locked||u.panel.state.isActive(this.objKeys)){let s=[],d=[];for(var e=0;e<a.gameConfig.length;e++)(p=a.gameConfig[e]).cost||(null==t.gameConfig[p.varN]&&(t.gameConfig[p.varN]=p.def),"aID"==p.varN?((p.cat?d:s).push({name:p.name+" ID",object:t.gameConfig,key:p.varN,type:"text",args:["ID"],sub:1}),(p.cat?d:s).push({line:"wide",object:t.advancedOptions,key:"selectAsset",type:"button",args:["Select Asset"],sub:1})):p.bool?(p.cat?d:s).push({name:p.name,object:t.gameConfig,key:p.varN,type:"switch",sub:1}):p.input?(p.cat?d:s).push({name:p.name,object:t.gameConfig,key:p.varN,type:"text",sub:1}):p.select?(p.cat?d:s).push({name:p.name,object:t.gameConfig,key:p.varN,type:"select",args:[p.options.map((e,t)=>({name:e,value:t}))],sub:1}):(p.cat?d:s).push({name:p.name,object:t.gameConfig,key:p.varN,type:"slider",args:[p.min,p.maxF||p.maxP||p.max,p.step],sub:1}));let f=[];for(e=0;e<c.length;e++)(p=c[e]).cost||p.preventCustomGames||(null==t.serverConfig.modes[e]&&(t.serverConfig.modes[e]=!e),f.push({name:p.name,object:t.serverConfig.modes,key:e,type:"switch",sub:1}));let m=[];for(e=0;e<l.length;e++)(p=l[e]).cost||(null==t.serverConfig.classes[e]&&(t.serverConfig.classes[e]=!0),m.push({name:p.name,object:t.serverConfig.classes,key:e,type:"switch",sub:1}));let g=[];for(e=0;e<a.serverConfig.length;e++)(p=a.serverConfig[e]).cost||p.hideE||(null==t.serverConfig.settings[p.varN]&&(t.serverConfig.settings[p.varN]=p.def),p.bool?g.push({name:p.name,object:t.serverConfig.settings,key:p.varN,type:"switch",sub:1}):p.input?g.push({name:p.name,object:t.serverConfig.settings,key:p.varN,type:"text",sub:1}):p.select?g.push({name:p.name,object:t.serverConfig.settings,key:p.varN,type:"select",args:[p.options.map((e,t)=>({name:e,value:t}))],sub:1}):g.push({name:p.name,object:t.serverConfig.settings,key:p.varN,type:"slider",args:[p.min,p.maxF||p.maxP||p.max,p.step],sub:1}));let y=[];for(var i=0;i<o.length;i++){p=o[i],y["w"+i]={name:p.name,type:"folder",size:"small",children:[],closed:!0},null==t.serverConfig.weps[i]&&(t.serverConfig.weps[i]={});for(e=0;e<a.weaponConfig.length;e++)h=a.weaponConfig[e],null==o[i][h.varN]||(null==t.serverConfig.weps[i][h.varN]&&(t.serverConfig.weps[i][h.varN]=o[i][h.varN]),h.bool?y["w"+i].children.push({name:h.name,object:t.serverConfig.weps[i],key:h.varN,type:"switch",sub:1}):y["w"+i].children.push({name:h.name,object:t.serverConfig.weps[i],key:h.varN,type:"slider",args:[h.min,h.max,h.step],sub:1}))}var r=new n({type:"folder",size:"standard"});r.addPanelButton("Essential","left"),r.add("text","Name",t.mapConfig,"name","Name"),r.add("text","Welcome Msg",t.mapConfig,"welMsg","Welcome"),r.add("text","Mod URL",t.mapConfig,"modURL","Mod URL"),r.add("button",null,t.advancedOptions,"selectMod","Select Mod",null,!0),r.add("slider","Death Height",t.mapConfig,"dthY",[-1e3,3e3,1],(function(e,i){t.mapConfig.dthY=i,t.updateDeathBarrier()})),r.addRule(),r.addFolder("Camera Settings",s,null,"folder","standard",!0),r.addFolder("Player Settings",d,null,"folder","standard",!0),r.addFolder("Game Modes",f,null,"folder","standard",!0),r.addFolder("Classes",m,null,"folder","standard",!0),r.addFolder("Game Settings",g,null,"folder","standard",!0),r.addFolder("Weapon Config",y,null,"folder","standard",!0),this.blueprint=r.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.left.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}}}},right:{elem:document.getElementsByClassName("panel")[1].children[1],restore:document.getElementsByClassName("restore")[1],blank:{show:function(){u.panel.right.locked&&!u.panel.state.isActive(this.objKeys)||(this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",blank:!0}},u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"]))}},object:{show:function(){if(u.panel.right.locked&&!u.panel.state.isActive(this.objKeys))return;this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",label:"Object"}},u.panel.right.blank.show();let e=t.transformControl.object;if(!e)return;let i=e.userData.owner;for(var n of(this.blueprint.panelButtons.label=i.name,t.configVal))t.objConfig[n]=i[n];let s={},l=t.objConfig;for(let e of t.stringifiedColors)Object.defineProperty(s,e,{get:()=>r.stringifyColor(l[e]),set:t=>l[e]=r.parseColor(t)});if(i.prefab.ai&&(this.blueprint.aiName={name:"AI Name",object:t.objConfig,key:"aiName",type:"text",args:["BOT"],onChange:function(e,t){i.aiName=t}}),(!i.prefab.tool||i.prefab.bounce)&&(this.blueprint.visible={name:"Visible",object:t.objConfig,key:"visible",type:"switch",onChange:function(e,t){i.visible=t}}),i.prefab.tool||i.prefab.forceCollision||i.prefab.noCollision||(this.blueprint.collidable={name:"Collidable",object:t.objConfig,key:"collidable",type:"switch",onChange:function(e,n){t.objCount[t.cntCheck(i)]--,i.collidable=n,t.objCount[t.cntCheck(i)]++,t.warningCheck("objects"),t.updateObjectCount()}}),i.prefab.editPen&&(this.blueprint.penetrable={name:"Penetrable",object:t.objConfig,key:"penetrable",type:"switch",onChange:function(e,t){i.penetrable=t}}),i.prefab.canWallJump&&(this.blueprint.canWallJump={name:"Wall Jumpable",object:t.objConfig,key:"canWallJump",type:"switch",onChange:function(e,t){i.canWallJump=t}}),i.prefab.boostable&&(this.blueprint.boost={name:"Boost",object:t.objConfig,key:"boost",type:"slider",args:[-10,10,.1],onChange:function(e,t){i.boost=t}}),i.prefab.bounce&&(this.blueprint.bounce={name:"Bounce",object:t.objConfig,key:"bounce",type:"slider",args:[.1,3,.1],onChange:function(e,t){i.bounce=t}},this.blueprint.crouch={name:"Crouch Reduces",object:t.objConfig,key:"crouch",type:"switch",onChange:function(e,t){i.crouch=t}}),i.prefab.edgeNoise&&(this.blueprint.edgeNoise={name:"Edge Noise",object:t.objConfig,key:"edgeNoise",type:"slider",args:[-5,5,.1],onChange:function(e,t){i.edgeNoise=t}}),i.prefab.hasBorder&&(this.blueprint.border={name:"Border",object:t.objConfig,key:"border",type:"switch",onChange:function(e,t){i.border=t}}),i.prefab.hasSpin&&(this.blueprint.spin={name:"Spin",object:t.objConfig,key:"spin",type:"slider",args:[-20,20,0],onChange:function(e,t){i.spin=t}},i.prefab.hasSpinDir&&(this.blueprint.spinAxis={name:"Spin Axis",object:t.objConfig,key:"spinAxis",type:"select",args:[[{name:"Y",value:0},{name:"X",value:1}]],onChange:function(e,t){i.defaultMesh&&i.defaultMesh.rotation.set(0,0,0),i.mesh&&i.mesh.rotation.set(0,0,0),i.spinAxis=parseInt(t)}})),"CYLINDER"==i.prefab.name&&(this.blueprint.openEnded={name:"Open Ended",object:t.objConfig,key:"openEnded",type:"switch",onChange:function(e,t){i.openEnded=t,i.regen()}}),i.prefab.customDirection&&(this.blueprint.direction={name:"Direction",object:t.objConfig,key:"direction",type:"slider",args:[0,3,1],onChange:function(e,t){i.direction=t}}),i.prefab.optionalDirection&&(this.blueprint.forceDir={name:"Force Direction",object:t.objConfig,key:"forceDir",type:"switch",onChange:function(e,t){i.forceDir=t}}),i.prefab.teamable&&(this.blueprint.teamable={name:"Team",object:t.objConfig,key:"team",type:"select",args:[i.prefab.noDefault?[{name:"Team 1",value:0},{name:"Team 2",value:1}]:[{name:"Default",value:0},{name:"Team 1",value:1},{name:"Team 2",value:2}]],onChange:function(e,t){i.team=t,("SPAWN_POINT"==i.objType||"FLAG"==i.objType)&&i.regen()}}),i.prefab.gen&&(this.blueprint.mSize={name:"Model Scale",object:t.objConfig,key:"mSize",type:"slider",args:[.1,100,.1],onChange:function(e,t){i.mSize=t,i.regenM()}}),"SHOWCASE"==i.prefab.name&&(this.blueprint.itemID={name:"Item",object:t.objConfig,key:"itemID",type:"select",args:[Object.keys(t.skinList).map(e=>({name:e,value:t.skinList[e]}))],onChange:function(e,t){i.itemID=t,i.regenM()}}),i.prefab.objectiveLink&&(this.blueprint.objectiveId={name:"Objective Id",object:t.objConfig,key:"objectiveId",type:"slider",args:[-1,10,1],onChange:function(e,t){i.objectiveId=t}}),this.blueprint.rule={type:"rule"},this.blueprint.transform={name:"Transform",type:"folder",size:"standard",children:{position:{name:"Position",object:t.objConfig,key:"pos",type:"vector3",onChange:function(e,t){i.pos=t}},rotation:{name:"Rotation",object:t.objConfig,key:"rot",type:"vector3",onChange:function(e,n){i.rot=t.degToRad(n)}}}},i.prefab.scalable&&(this.blueprint.transform.children.size={name:"Size",object:t.objConfig,key:"size",type:"vector3",min:0,onChange:function(e,t){i.size=t}}),i.prefab.notStyleable||(this.blueprint.style={name:"Style",type:"folder",size:"standard",children:{}},(i.prefab.texturable||i.prefab.movingTexture||i.prefab.frameTexture)&&(this.blueprint.style.children.texture={name:"Texture",type:"folder",size:"small",children:{},closed:!0}),i.prefab.ai&&(this.blueprint.style.children.assetID={name:"Asset ID",object:t.objConfig,key:"assetID",type:"text",args:["ID"],onChange:function(e,t){i.assetID=t,i.regenM()},sub:1},this.blueprint.style.children.customSelect={line:"wide",object:t.advancedOptions,key:"selectModel",type:"button",args:["Select Custom"]}),i.prefab.texturable&&(this.blueprint.style.children.texture.children.type={name:"Type",object:t.objConfig,key:"texture",type:"select",args:[Object.keys(t.textureList).map(e=>({name:e,value:t.textureList[e]}))],onChange:function(e,n){i.assetTexture=0,i.texture=n,t.updateObjConfigGUI()},sub:1},i.prefab.assetTextures&&(this.blueprint.style.children.texture.children.custom={name:"Asset ID",object:t.objConfig,key:"assetTexture",type:"number",args:["Texture Asset ID",0],onChange:function(e,t){i.assetTexture=t},sub:1},this.blueprint.style.children.texture.children.customSelect={line:"wide",object:t.advancedOptions,key:"selectTexture",type:"button",args:["Select Custom"]}),i.prefab.canStretch&&(this.blueprint.style.children.texture.children.stretch={name:"Stretch",object:t.objConfig,key:"texStretch",type:"switch",onChange:function(e,t){i.texStretch=t,i.regen()},sub:1}),i.prefab.canTrans&&(this.blueprint.style.children.texture.children.forceTrans={name:"Force Transparency",object:t.objConfig,key:"forceTrans",type:"switch",onChange:function(e,t){i.forceTrans=t},sub:1}),this.blueprint.style.children.texture.children.rotation={name:"Rotation",object:t.objConfig,key:"texRot",type:"slider",args:[-2,2,.1],onChange:function(e,t){i.texRot=t},sub:1},this.blueprint.style.children.texture.children.offset={name:"Offset",type:"folder",size:"small",children:{x:{name:"X",object:t.objConfig,key:"texOffX",type:"slider",args:[0,1,.1],onChange:function(e,t){i.texOffX=t},sub:2},y:{name:"Y",object:t.objConfig,key:"texOffY",type:"slider",args:[0,1,.1],onChange:function(e,t){i.texOffY=t},sub:2},rule:{type:"rule"}},sub:1}),i.prefab.movingTexture&&(this.blueprint.style.children.texture.children.movement={name:"Movement",type:"folder",size:"small",children:{speed:{name:"Speed",object:t.objConfig,key:"movingSpeed",type:"slider",args:[-20,20,.1],onChange:function(e,t){i.movingSpeed=t},sub:2},axis:{name:"Axis",object:t.objConfig,key:"movingAxis",type:"select",args:[[{name:"X",value:0},{name:"Y",value:1}]],onChange:function(e,t){i.movingAxis=t},sub:2},rule:{type:"rule"}},sub:1}),i.prefab.frameTexture&&(this.blueprint.style.children.texture.children.frame={name:"Frame Animation",type:"folder",size:"small",children:{frames:{name:"Frame Count",object:t.objConfig,key:"frameCount",type:"slider",args:[0,10,1],onChange:function(e,t){i.frameCount=t,i.frameCur=0,i.regen(!0)},sub:2},frameT:{name:"Frame Speed",object:t.objConfig,key:"frameSpeed",type:"slider",args:[0,10,.1],onChange:function(e,t){i.frameSpeed=t,i.frameDur=100*i.frameSpeed,i.frameCur=0},sub:2},rule:{type:"rule"}},sub:1}),this.blueprint.style.children.texture&&(this.blueprint.style.children.texture.children.rule={type:"rule"}),i.prefab.editColor&&(this.blueprint.style.children.color={name:"Color",object:s,key:"color",type:"color",onChange:function(e,t){i.color=t}}),i.prefab.editEmissive&&(this.blueprint.style.children.emissive={name:"Emissive",object:s,key:"emissive",type:"color",onChange:function(e,t){i.emissive=t}}),i.prefab.editOpac&&(this.blueprint.style.children.opacity={name:"Opacity",object:t.objConfig,key:"opacity",type:"slider",args:[0,1,.1],onChange:function(e,t){i.opacity=t}}),i.prefab.custom&&(this.blueprint.style.children.texSmooth={name:"Texture Smoothing",object:t.objConfig,key:"texSmooth",type:"switch",onChange:function(e,t){i.texSmooth=t}}),i.prefab.complex||i.prefab.tool||(this.blueprint.style.children.shading={name:"Shading",object:t.objConfig,key:"ambient",type:"switch",onChange:function(e,t){i.ambient=t}}),i.prefab.ai||i.prefab.tool||i.prefab.fakeScale||i.prefab.noDetail||i.prefab.noBake||"BILLBOARD"==i.prefab.name||(this.blueprint.style.children.baking={name:"Subdivision",object:t.objConfig,key:"bakeAcc",type:"slider",args:[0,50,1],onChange:function(e,t){i.bakeAcc=t,i.regen()}}),i.prefab.editFog&&(this.blueprint.style.children.fog={name:"Fog",object:t.objConfig,key:"fog",type:"switch",onChange:function(e,t){i.fog=t}}),"LIGHT_CONE"==i.objType&&(this.blueprint.style.children.lightCone={name:"Full Cone",object:t.objConfig,key:"fullcone",type:"switch",onChange:function(e,t){i.fullcone=t,i.regen(!0)}})),i.prefab.editFaces&&(this.blueprint.renderFaces={name:"Render Faces",type:"folder",size:"standard",children:{...t.faces.map((e,n)=>({name:e,object:t.objConfig.faces,key:n,type:"switch",onChange:function(){i.faces=t.objConfig.faces,i.regen()}}))}}),i.prefab.light&&(this.blueprint.lighting={name:"Lighting",type:"folder",size:"standard",children:{intensity:{name:"Intensity",object:t.objConfig,key:"intensity",type:"slider",args:[0,2,.1],onChange:function(e,t){i.intensity=t}},distance:{name:"Distance",object:t.objConfig,key:"distance",type:"slider",args:[0,1e3,.1],onChange:function(e,t){i.distance=t}},decay:{name:"Decay",object:t.objConfig,key:"decay",type:"slider",args:[0,2,.1],onChange:function(e,t){i.decay=t}},rule:{type:"rule"}}}),!i.prefab.notTechnical){let e={};"DEPOSIT_BOX"==i.objType&&(e={withdraw:{name:"Withdraw Amount",object:t.objConfig,key:"withdraw",type:"slider",args:[0,1e5,1],onChange:function(e,t){i.withdraw=t}},deposit:{name:"Deposit Amount",object:t.objConfig,key:"deposit",type:"slider",args:[0,1e5,1],onChange:function(e,t){i.deposit=t}}}),i.prefab.customScore&&(e.customScore={name:i.prefab.interact?"Amount":"Score",object:t.objConfig,key:"score",type:"slider",args:[i.prefab.interact||i.prefab.ai?0:1,1e4,1],onChange:function(e,t){i.score=t}}),("CHECK_POINT"==i.objType||"TRIGGER"==i.objType||i.prefab.ai)&&(e.singleUse={name:"Single Use",object:t.objConfig,key:"single",type:"switch",onChange:function(e,t){i.single=t}}),"TRIGGER"==i.objType&&(e.singleUseP={name:"Once Per Player",object:t.objConfig,key:"singleP",type:"switch",onChange:function(e,t){i.singleP=t}}),(i.prefab.interact||i.prefab.interact2)&&(i.prefab.interact&&(e.method={name:"Method",object:t.objConfig,key:"method",type:"select",args:[[{name:"Cost Score",value:0},{name:"Require Score",value:1},{name:"Require Kills",value:2}]],onChange:function(e,t){i.method=t}},i.prefab.canUndo&&(e.closeable={name:"Closeable",object:t.objConfig,key:"closeable",type:"switch",onChange:function(e,t){i.closeable=t}},e.startsClosed={name:"Starts Hidden",object:t.objConfig,key:"startClosed",type:"switch",onChange:function(e,t){i.startClosed=t}})),e.hidden={name:"No Popup",object:t.objConfig,key:"hidden",type:"switch",onChange:function(e,t){i.hidden=t}}),i.prefab.hasHealth&&(e.canDestroy={name:"Destructible",object:t.objConfig,key:"canDestroy",type:"switch",onChange:function(e,t){i.canDestroy=t}},"GATE"!=i.prefab.name&&(e.startDestroyed={name:"Start Destroyed",object:t.objConfig,key:"startDestroyed",type:"switch",onChange:function(e,t){i.startDestroyed=t}}),"TRIGGER"==i.prefab.name&&(e.selfDestruct={name:"Destroy On Use",object:t.objConfig,key:"selfDestruct",type:"switch",onChange:function(e,t){i.selfDestruct=t}}),e.health={name:"Health",object:t.objConfig,key:"health",type:"slider",args:[0,2e4,10],onChange:function(e,t){i.health=t}}),i.prefab.hasHealth&&(e.respawn={name:"Respawn",type:"folder",size:"small",children:{timer:{name:"Timer (s)",object:t.objConfig,key:"respawnT",type:"slider",args:[0,300,.1],onChange:function(e,t){i.respawnT=t},sub:1},random:{name:"Random",object:t.objConfig,key:"respawnR",type:"switch",onChange:function(e,t){i.respawnR=t},sub:1},rule:{type:"rule"}}}),"WEAPON_PICKUP"==i.objType&&(e.weapon={name:"Weapon",type:"folder",size:"small",children:{type:{name:"Type",object:t.objConfig,key:"weaponId",type:"select",args:[o.map((e,t)=>e.src?{name:e.name,value:t}:null).filter(e=>e)],onChange:function(e,t){i.weaponId=t,i.regen()},sub:1},replace:{name:"Replaceable",object:t.objConfig,key:"weaponReplace",type:"switch",onChange:function(e,t){i.weaponReplace=t},sub:1},random:{name:"Random",object:t.objConfig,key:"randWep",type:"switch",onChange:function(e,t){i.randWep=t},sub:1}},rule:{type:"rule"}}),("TRIGGER"==i.objType||i.prefab.ai)&&(i.prefab.ai&&(e.canTrigger={name:"Can Trigger",object:t.objConfig,key:"canTrigger",type:"switch",onChange:function(e,t){i.canTrigger=t}}),e.event={name:"Event",object:t.objConfig,key:"event",type:"select",args:[d.events.map((e,t)=>({name:e,value:t})).filter(e=>!(!i.prefab.ai||!e.name.includes("onAI"))||!("TRIGGER"!=i.objType||e.name.includes("onAI")))],onChange:function(e,t){var n=d.events[i.event]&&"onInteractKey"==d.events[i.event]||d.events[t]&&"onInteractKey"==d.events[t];i.event=t,n&&u.panel.state.refresh("panel_right_object")}},e.constantEvent={name:"Event Value",object:t.objConfig,key:"constantEvent",type:"slider",args:[0,1e4,1],onChange:function(e,t){i.constantEvent=t}},e.action={name:"Action",object:t.objConfig,key:"action",type:"select",args:[d.actions.map((e,t)=>({name:e.name,value:t}))],onChange:function(e,t){var n=d.actions[i.action]&&("Text"==d.actions[i.action].type||d.actions[i.action].custom)||d.actions[t]&&("Text"==d.actions[t].type||d.actions[t].custom);i.action=t,n&&u.panel.state.refresh("panel_right_object")}},d.actions[i.action]&&"Text"==d.actions[i.action].type?e.constantTxt={name:"Value",object:t.objConfig,key:"constantTxt",type:"text",args:["Text"],onChange:function(e,t){i.constantTxt=t}}:e.constant={name:"Action Value",object:t.objConfig,key:"constant",type:"slider",args:[-1e4,1e4,1],onChange:function(e,t){i.constant=t}},d.events[i.event]&&"onInteractKey"==d.events[i.event]&&(e.actionMethod={name:"Action Method",object:t.objConfig,key:"actionMethod",type:"select",args:[[{name:"Cost KR",value:0},{name:"Cost Score",value:1},{name:"Require Score",value:2},{name:"Require Kills",value:3}]],onChange:function(e,t){i.actionMethod=t}},e.actionCost={name:"Action Cost",object:t.objConfig,key:"actionCost",type:"slider",args:[0,1e4,1],onChange:function(e,t){i.actionCost=t}}),e.chance={name:"Action Chance (%)",object:t.objConfig,key:"chance",type:"slider",args:[0,100,1],onChange:function(e,t){i.chance=t}});let n={};"WEAPON_PICKUP"!=i.objType&&i.prefab.canInterface&&(n.id={name:"ID",object:t.objConfig,key:"interfaceId",type:"slider",args:[0,a.interfaceIDMax,1],onChange:function(e,n){var r=n!=i.interfaceId;i.interfaceId&&t.warningCheck("interface",i,-1),i.interfaceId=n,i.interfaceId&&t.warningCheck("interface",i,1),r&&t.checkConnections()},sub:1}),i.prefab.canTargetInterface&&(n.target={name:"Target",object:t.objConfig,key:"interfaceIdT",type:"slider",args:[0,1e3,1],onChange:function(e,n){var r=n!=i.interfaceIdT;i.interfaceIdT=n,r&&t.checkConnections()},sub:1}),Object.keys(n).length&&(e.interface={name:"Interface",type:"folder",size:"small",children:n}),"TELEPORTER"==i.prefab.name&&(e.node={name:"Node",object:t.objConfig,key:"node",type:"select",args:[[{name:"Sending",value:0},{name:"Receiving",value:1},{name:"Both",value:2}]],onChange:function(e,t){i.node=t}},e.channel={name:"Channel",object:t.objConfig,key:"channel",type:"slider",args:[0,100,1],onChange:function(e,t){i.channel=t}},e.momentum={name:"Stop Momentum",object:t.objConfig,key:"momentum",type:"switch",onChange:function(e,t){i.momentum=t}}),i.prefab.canBeDynamic&&(e.dynamic={name:"Dynamic",type:"folder",size:"small",children:{dynamic:{name:"Enabled",object:t.objConfig,key:"dynamic",type:"switch",onChange:function(e,t){i.dynamic=t},sub:1},gravity:{name:"Gravity",object:t.objConfig,key:"gravity",type:"slider",args:[0,5,.1],onChange:function(e,t){i.gravity=t},sub:1},rule:{type:"rule"}}}),i.prefab.ai&&(e.behavior={name:"Behavior",type:"folder",size:"small",children:{behaviorType:{name:"Behavior Type",object:t.objConfig,key:"behaviorType",type:"slider",args:[0,20,1],onChange:function(e,t){i.behaviorType=t},sub:1},speed:{name:"Speed",object:t.objConfig,key:"speed",type:"slider",args:[0,5,.1],onChange:function(e,t){i.speed=t},sub:1},turnSpd:{name:"Turn Speed",object:t.objConfig,key:"turnSpd",type:"slider",args:[0,30,1],onChange:function(e,t){i.turnSpd=t},sub:1},gravity:{name:"Gravity",object:t.objConfig,key:"gravity",type:"slider",args:[0,1,.1],onChange:function(e,t){i.gravity=t},sub:1},frate:{name:"Firerate",object:t.objConfig,key:"frate",type:"slider",args:[200,1e4,50],onChange:function(e,t){i.frate=t},sub:1},visDis:{name:"Vision Distance",object:t.objConfig,key:"visDis",type:"slider",args:[10,1e3,10],onChange:function(e,t){i.visDis=t},sub:1},xrayVis:{name:"Xray Vision",object:t.objConfig,key:"xrayVis",type:"switch",onChange:function(e,t){i.xrayVis=t},sub:1},canShoot:{name:"Can Shoot",object:t.objConfig,key:"canShoot",type:"switch",onChange:function(e,t){i.canShoot=t},sub:1},canHit:{name:"Can Hit",object:t.objConfig,key:"canHit",type:"switch",onChange:function(e,t){i.canHit=t},sub:1},projType:{name:"Projectile Type",object:t.objConfig,key:"projType",type:"slider",args:[0,5,1],onChange:function(e,t){i.projType=t},sub:1},rewardType:{name:"Reward Type",object:t.objConfig,key:"rewardType",type:"text",args:["id,id,id"],onChange:function(e,t){i.rewardType=t},sub:1},rule:{type:"rule"}}}),Object.keys(e).length&&(this.blueprint.technical={name:"Technical",type:"folder",size:"standard",children:e})}"BILLBOARD"==i.objType&&(this.blueprint.billboard={name:"Billboard",type:"folder",size:"standard",children:{poster:{name:"Poster",object:t.objConfig,key:"poster",type:"slider",args:[1,a.billboardCnt,1],onChange:function(e,t){i.poster=t,i.regen(!0)}},showAd:{name:"Show AD",object:t.objConfig,key:"showAd",type:"switch",onChange:function(e,t){i.showAd=t}},rule:{type:"rule"}}}),"PARTICLES"==i.objType&&(this.blueprint.particles={name:"Particles",type:"folder",size:"standard",children:{texture:{name:"Texture",object:t.objConfig,key:"part",type:"select",args:[Object.keys(t.particleList).map(e=>({name:e,value:t.particleList[e]}))],onChange:function(e,t){i.part=t}},blending:{name:"Blending",object:t.objConfig,key:"partB",type:"select",args:[Object.keys(t.blendingList).map(e=>({name:e,value:t.blendingList[e]}))],onChange:function(e,t){i.partB=t}},count:{name:"Count",object:t.objConfig,key:"partC",type:"slider",args:[0,300,1],onChange:function(e,t){i.partC=t}},size:{name:"Size",object:t.objConfig,key:"partS",type:"slider",args:[0,30,.1],onChange:function(e,t){i.partS=t}},scale:{name:"Scale",object:t.objConfig,key:"partSC",type:"slider",args:[-10,10,.1],onChange:function(e,t){i.partSC=t}},movement:{name:"Movement",type:"folder",size:"small",children:{speed:{name:"Speed",object:t.objConfig,key:"partSP",type:"slider",args:[-10,10,.1],onChange:function(e,t){i.partSP=t},sub:1},deceleration:{name:"Deceleration",object:t.objConfig,key:"partD",type:"slider",args:[-1,1,.1],onChange:function(e,t){i.partD=t},sub:1},gravity:{name:"Gravity",object:t.objConfig,key:"partG",type:"slider",args:[-10,10,.1],onChange:function(e,t){i.partG=t},sub:1},rule:{type:"rule"}}},rule:{type:"rule"}}}),i.prefab.hasText&&(this.blueprint.text={name:"Text",type:"folder",size:"standard",children:{content:{name:"Content",object:t.objConfig,key:"text",type:"text",args:["Content"],onChange:function(e,t){i.text=t,i.regen(!0)}},align:{name:"Align",object:t.objConfig,key:"tAlign",type:"select",args:[[{name:"Left",value:0},{name:"Center",value:1},{name:"Right",value:2}]],onChange:function(e,t){i.tAlign=t,i.regen(!0)}},font:{name:"Font",type:"folder",size:"small",children:{size:{name:"Size",object:t.objConfig,key:"fsize",type:"slider",args:[a.signFontMin,a.signFontMax,1],onChange:function(e,t){i.fsize=t,i.regen(!0)},sub:1},color:{name:"Color",object:s,key:"fcolor",type:"color",onChange:function(e,t){i.fcolor=t,i.regen(!0)},sub:1}},rule:{type:"rule"}},background:{name:"Background",type:"folder",size:"small",children:{color:{name:"Color",object:s,key:"bcolor",type:"color",onChange:function(e,t){i.bcolor=t,i.regen(!0)},sub:1},visible:{name:"Visible",object:t.objConfig,key:"backVisible",type:"switch",onChange:function(e,t){i.backVisible=t,i.regen(!0)},sub:1}}},rule:{type:"rule"}}}),"SPAWN_POINT"==i.objType&&(this.blueprint.spawnpoint={name:"Spawn Point",type:"folder",size:"standard",children:{cmpSpwn:{name:"Starting Area",object:t.objConfig,key:"cmpSpwn",type:"switch",onChange:function(e,t){i.cmpSpwn=t,i.regen()}},teamOnly:{name:"Team Only",object:t.objConfig,key:"teamOnly",type:"switch",onChange:function(e,t){i.teamOnly=t,i.regen()}},rule:{type:"rule"}}}),"LIQUID"==i.objType&&(this.blueprint.liquid={name:"Wave",type:"folder",size:"standard",children:{wave:{name:"Liquid",type:"folder",size:"small",children:{speed:{name:"Speed",object:t.objConfig,key:"wSpeed",type:"slider",args:[0,25,.1],onChange:function(e,t){i.wSpeed=t},sub:1},height:{name:"Height",object:t.objConfig,key:"wHeight",type:"slider",args:[0,5,.1],onChange:function(e,t){i.wHeight=t},sub:1},rule:{type:"rule"}}},depth:{name:"Depth",type:"folder",size:"small",children:{x:{name:"X",object:t.objConfig,key:"tilesX",type:"slider",args:[2,100,1],onChange:function(e,t){i.tilesX=t,i.regen()},sub:1},z:{name:"Z",object:t.objConfig,key:"tilesZ",type:"slider",args:[2,100,1],onChange:function(e,t){i.tilesZ=t,i.regen()},sub:1}},rule:{type:"rule"}},rule:{type:"rule"}}}),("SOUND_EMITTER"==i.objType||i.prefab.hasSound&&14==i.action)&&(this.blueprint.sound={name:"Sound",type:"folder",size:"standard",children:{type:{name:"Type",object:t.objConfig,key:"snd",type:"select",args:[Object.keys(t.soundsList).map(e=>({name:e,value:t.soundsList[e]}))],onChange:function(e,t){i.snd=t}},custom:{name:"Asset ID",object:t.objConfig,key:"assetSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){i.assetSound=t}},customSelect:{line:"wide",object:t.advancedOptions,key:"selectAudio",type:"button",args:["Select Custom"]},volume:{name:"Volume",object:t.objConfig,key:"vol",type:"slider",args:[a.emitterVolMin,a.emitterVolMax,.01],onChange:function(e,t){i.vol=t}},rate:{name:"Rate",object:t.objConfig,key:"rate",type:"slider",args:[a.emitterRateMin,a.emitterRateMax,.1],onChange:function(e,t){i.rate=t}}}},"SOUND_EMITTER"==i.objType?(this.blueprint.sound.children.dist={name:"Reference Distance",object:t.objConfig,key:"dist",type:"slider",args:[a.emitterDistMin,a.emitterDistMax,1],onChange:function(e,t){i.dist=t}},this.blueprint.sound.children.roll={name:"Roll-off",object:t.objConfig,key:"roll",type:"slider",args:[a.emitterRollMin,a.emitterRollMax,.01],onChange:function(e,t){i.roll=t}}):this.blueprint.sound.children.emitfrom={name:"Emit From",object:t.objConfig,key:"emitfrom",type:"select",args:[[{name:"Trigger",value:0},{name:"Player",value:1},{name:"Global",value:2}]],onChange:function(e,t){i.emitfrom=t}}),i.prefab.ai&&(this.blueprint.sound={name:"Sound",type:"folder",size:"standard",children:{death:{name:"Death Sound ID",object:t.objConfig,key:"deathSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){i.deathSound=t}},customDeath:{line:"wide",object:t.advancedOptions,key:"selectDeath",type:"button",args:["Select Sound"]},idle:{name:"Idle Sound ID",object:t.objConfig,key:"idleSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){i.idleSound=t}},customIdle:{line:"wide",object:t.advancedOptions,key:"selectIdle",type:"button",args:["Select Sound"]},atk:{name:"Attack Sound ID",object:t.objConfig,key:"atkSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){i.atkSound=t}},customAtk:{line:"wide",object:t.advancedOptions,key:"selectAttack",type:"button",args:["Select Sound"]},agro:{name:"Agro Sound ID",object:t.objConfig,key:"agroSound",type:"number",args:["Sound Asset ID",0],onChange:function(e,t){i.agroSound=t}},customAgro:{line:"wide",object:t.advancedOptions,key:"selectAgro",type:"button",args:["Select Sound"]}}}),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}},environment:{show:function(){if(t.resizable.restore(u.panel.right.restore),u.panel.right.locked&&!u.panel.state.isActive(this.objKeys))return;let e=["ambient","sky","light","fog"],s={},o=t.mapConfig;for(let t of e)Object.defineProperty(s,t,{get:()=>r.stringifyColor(o[t]),set:e=>o[t]=r.parseColor(e)});var l=new n({type:"folder",size:"standard"});l.addPanelButton("Environment","right"),l.add("select","Sky",t.mapConfig,"skyDome",["Solid","Gradient"].map((e,t)=>({name:e,value:t})),(function(e,i){[...e.children].forEach(e=>{document.getElementById("sky_"+e.value).style.display="none"}),document.getElementById("sky_"+i).style.display=null,t.mapConfig.skyDome=!!parseInt(i),t.regenSky()})),l.addDiv("sky_0",null,null,!t.mapConfig.skyDome).add("color","Color",s,"sky",null,(function(e,n){t.backgroundScene.background=new i.Color(n),t.regenSky()}),null,1);var c=l.addDiv("sky_1",null,null,!!t.mapConfig.skyDome),d=c.addFolder("Color",null,null,"folder","small",null,1);d.add("color","Top",t.mapConfig,"skyDomeCol0",null,(function(){t.regenSky()}),null,2),d.add("color","Middle",t.mapConfig,"skyDomeCol1",null,(function(){t.regenSky()}),null,2),d.add("color","Bottom",t.mapConfig,"skyDomeCol2",null,(function(){t.regenSky()}),null,2),c.add("switch","Cloud Texture",t.mapConfig,"skyDomeTex",null,(function(e,i){cloud.style.display=i?null:"none",t.regenSky()}),null,1);var p=l.addDiv("cloud",null,null,t.mapConfig.skyDomeTex);p.add("color","Emissive",t.mapConfig,"skyDomeEmis",null,(function(){t.regenSky()}),null,2),p.add("slider","Speed",t.mapConfig,"skyDomeMovT",[-20,20,.1],(function(){t.regenSky()}),null,2),p.add("select","Axis",t.mapConfig,"skyDomeMovD",["X","Y"].map((e,t)=>({name:e,value:t})),(function(){t.regenSky()}),null,2),l.addRule();var h=l.addFolder("Ambient");h.add("select","Sound",t.mapConfig,"ambInd",Object.keys(a.soundScapes).map(e=>({name:e,value:a.soundScapes[e]}))),h.add("number","Custom Sound ID",t.advancedOptions,"ambIndC",["Sound Asset ID",0],(function(e,i){t.mapConfig.ambIndC=i})),h.add("button",null,t.advancedOptions,"selectAmb","Select Sound",null,!0),h.add("slider","Intensity",t.mapConfig,"ambientI",[.1,3,.1],(function(e,i){t.ambientLight.intensity=i})),h.add("color","Color",s,"ambient",null,(function(e,i){t.ambientLight.color.set(i)}));var f=l.addFolder("Light");f.add("color","Color",s,"light",null,(function(e,i){t.skyLight.color.set(i),t.updateSun()})),f.add("slider","Distance",t.mapConfig,"lightD",[10,5e3,1],(function(){t.updateSun()})),f.add("slider","Intensity",t.mapConfig,"lightI",[.1,3,.1],(function(e,i){t.ambientLight.intensity=i}));var m=f.addFolder("Angle",null,null,null,"small");m.add("slider","X",t.mapConfig,"sunAngX",[0,360,1],(function(){t.updateSun()}),null,1),m.add("slider","Y",t.mapConfig,"sunAngY",[0,360,1],(function(){t.updateSun()}),null,1);var g=l.addFolder("Shadows");g.add("slider","Resolution",t.mapConfig,"shadowR",[128,4096,1]),g.add("slider","Distance",t.mapConfig,"shadowD",[128,4096,1]);var y=l.addFolder("Weather").addFolder("Fog",null,null,null,"small");y.add("color","Color",s,"fog",null,(function(e,i){t.scene.fog.color.set(i)}),null,2),y.add("slider","Distance",t.mapConfig,"fogD",[10,15e3,1],(function(e,i){t.scene.fog.far=i}),null,2),this.blueprint=l.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}},terrain:{show:function(){if(t.resizable.restore(u.panel.right.restore),!u.panel.right.locked||u.panel.state.isActive(this.objKeys)){var e=new n({type:"folder",size:"standard"});e.addPanelButton("Terrain","right"),e.add("text","Seed",t.mapConfig,"terrainSeed","Seed",()=>t.regenTerrain()),e.add("button",null,t.mapConfig,"terrainSeed","Generate Random",(function(){t.mapConfig.terrainSeed=Math.random().toString(36).substring(4),u.panel.state.refresh("panel_right_terrain"),t.regenTerrain()}),!0,1),e.add("text","Tree Seed",t.mapConfig,"terrainTSeed","Seed",()=>t.regenTerrain()),e.add("button",null,t.mapConfig,"terrainTSeed","Generate Random",(function(){t.mapConfig.terrainTSeed=Math.random().toString(36).substring(4),u.panel.state.refresh("panel_right_terrain"),t.regenTerrain()}),!0,1),e.add("select","Easing",t.mapConfig,"terrainEase",t.EASE_LIST.map((e,t)=>({name:e,value:t})),(function(){u.panel.state.refresh("panel_right_terrain"),t.regenTerrain()}),null,1),e.addRule();var i=e.addFolder("Dimensions");i.add("slider","Width",t.mapConfig,"terrainWidth",[a.minTerrainSize,a.maxTerrainSize,1],()=>t.regenTerrain()),i.add("slider","Length",t.mapConfig,"terrainHeight",[a.minTerrainSize,a.maxTerrainSize,1],()=>t.regenTerrain()),i.add("slider","Height",t.mapConfig,"terrainMntMlt",[a.minMountainMlt,a.maxMountainMlt,.05],()=>t.regenTerrain());var r=e.addFolder("Style").addFolder("Color",null,null,null,"small");r.add("color","Snow",t.mapConfig,"terrainSnwCol",null,()=>t.regenTerrain(),null,1),r.add("color","Mountain",t.mapConfig,"terrainMntCol",null,()=>t.regenTerrain(),null,1),r.add("color","Grass",t.mapConfig,"terrainGrsCol",null,()=>t.regenTerrain(),null,1),r.add("color","Dirt",t.mapConfig,"terrainDrtCol",null,()=>t.regenTerrain(),null,1),r.add("color","Sand",t.mapConfig,"terrainSndCol",null,()=>t.regenTerrain(),null,1),this.blueprint=e.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}}},zone:{show:function(){if(t.resizable.restore(u.panel.right.restore),!u.panel.right.locked||u.panel.state.isActive(this.objKeys)){var e=new n({type:"folder",size:"standard"});e.addPanelButton("Zone","right"),e.add("switch","Enabled",t.mapConfig,"zone",null,()=>t.regenZone()),e.add("slider","Speed",t.mapConfig,"zoneSpeed",[a.minShrinkSpeed,a.maxShrinkSpeed,.1]),e.add("switch","Random Endpoint",t.mapConfig,"zoneRnd",null,()=>t.regenZone()),e.addRule();var i=e.addFolder("Dimensions");i.add("slider","Size",t.mapConfig,"zoneSize",[a.minZoneSize,a.maxZoneSize,10],()=>t.regenZone()),i.add("slider","Height",t.mapConfig,"zoneHeight",[a.minZoneHeight,a.maxZoneHeight,10],()=>t.regenZone());var r=e.addFolder("Style").addFolder("Color",null,null,null,"small");r.add("color","Top",t.mapConfig,"zoneCol0",null,()=>t.regenZone(),null,1),r.add("color","Middle",t.mapConfig,"zoneCol1",null,()=>t.regenZone(),null,1),r.add("color","Bottom",t.mapConfig,"zoneCol2",null,()=>t.regenZone(),null,1),this.blueprint=e.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}}},customize:{show:function(){if(t.resizable.restore(u.panel.right.restore),u.panel.right.locked&&!u.panel.state.isActive(this.objKeys))return;let e={},i=["scaleMap"];for(let n of i)Object.defineProperty(e,n,{get:()=>t.xyzKeys.map(e=>t.advancedOptions[n+e]),set:e=>t.xyzKeys.forEach((i,r)=>{t.advancedOptions[n+i]=e[r]})});var r=new n({type:"folder",size:"standard"});r.addPanelButton("Customize","right");var a=r.addFolder("Timelapse");a.add("slider","Timer",t.advancedOptions,"timelapseMS",[100,5e3,1]),a.add("switch","Follow Objects",t.advancedOptions,"timelapseFollow"),a.add("button",null,t.advancedOptions,"timelapseMap","Execute",null,!0);var s=r.addFolder("Transform");s.add("vector3","Scale",e,"scaleMap"),s.add("button",null,t.advancedOptions,"scaleMap","Scale",null,!0),s.add("select","Reflection",t.advancedOptions,"reflectDir",[{name:"X",value:0},{name:"Y",value:1},{name:"Z",value:2}]),s.add("button",null,t.advancedOptions,"reflectMap","Reflect",null,!0);var o=r.addFolder("Frame");o.add("number","Wall Thickness",t.advancedOptions,"frameThickness","Thickness"),o.add("switch","Has Ceiling",t.advancedOptions,"frameThickness"),o.add("switch","Has Floor",t.advancedOptions,"frameFloor"),o.add("button",null,t.advancedOptions,"frameObject","Frame It",null,!0);var l=r.addFolder("Breakable");l.add("slider","Health",t.advancedOptions,"breakableHealth",[1,500,1]),l.add("switch","Force Collision",t.advancedOptions,"breakableCollision"),l.add("button",null,t.advancedOptions,"breakableMap","Execute",null,!0);var c=r.addFolder("Colorize");c.add("button","Random",t.advancedOptions,"colorizeR","Execute"),c.add("button","Gold",t.advancedOptions,"colorizeG","Execute"),c.add("button","Input",t.advancedOptions,"colorizeI","Execute"),r.addRule(),r.add("button","Drunk Map",t.advancedOptions,"drunkMap","Execute"),this.blueprint=r.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}},optimizations:{show:function(){if(t.resizable.restore(u.panel.right.restore),!u.panel.right.locked||u.panel.state.isActive(this.objKeys)){var e=new n({type:"folder",size:"standard"});e.addPanelButton("Optimizations","right"),e.add("button","Optimize Faces",t.advancedOptions,"optimizeFaces","Execute"),e.addRule();var i=e.addFolder("Color Merging");i.add("slider","Color Range",t.advancedOptions,"colorRange",[500,5e4,100]),i.add("button",null,t.advancedOptions,"mergeColors","Merge Colors",null,!0);var r=e.addFolder("Bake Lighting");r.add("slider","Resolution",t.advancedOptions,"bakeRes",[4,32,1]),r.add("slider","Bounces",t.advancedOptions,"bakeBounces",[1,6,1]),r.add("slider","Falloff",t.advancedOptions,"bakeFalloff",[50,1e3,50]),r.add("slider","Range",t.advancedOptions,"bakeFov",[50,170,10]),r.add("slider","Brightness",t.advancedOptions,"bakeBright",[0,1,.1]),r.add("button",null,t.advancedOptions,"bake","Bake",null,!0);var a=e.addFolder("Subdivision");a.add("slider","Value",t.advancedOptions,"subdivideVal",[0,50,1]),a.add("button",null,t.advancedOptions,"subdivideGroup","Subdivide Group",null,!0),this.blueprint=e.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}}},tools:{show:function(){if(t.resizable.restore(u.panel.right.restore),u.panel.right.locked&&!u.panel.state.isActive(this.objKeys))return;let e={},i=["Space","Dir"];for(let n of i)Object.defineProperty(e,n,{get:()=>t.xyzKeys.map(e=>t.advancedOptions["planner"+e+n]),set:e=>t.xyzKeys.forEach((i,r)=>{t.advancedOptions["planner"+i+n]=e[r]})});var r=new n({type:"folder",size:"standard"});r.addPanelButton("Tools","right"),r.addRule(),r.addFolder("Text Generator").add("button","Enter Text",t.advancedOptions,"textGen","Open");var a=r.addFolder("Image Converter");a.add("number","Size",t.settings,"imageSize",null,(function(e,i){t.setSettings("imageSize",i)})),a.add("number","Depth",t.settings,"imageDepth",null,(function(e,i){t.setSettings("imageDepth",i)})),a.add("switch","Collidable",t.settings,"imageCol",null,(function(e,i){t.setSettings("imageCol",i)})),a.add("button","Convert",t.advancedOptions,"imageConvert","Convert"),a.add("button","Import",t.advancedOptions,"imageImport","Import");var s=r.addFolder("Voxel Manager");s.add("switch","Merge",t.settings,"mergeVoxels",null,(function(e,i){t.setSettings("mergeVoxels",i)})),s.add("number","Size",t.settings,"voxelSize",null,(function(e,i){t.setSettings("voxelSize",i)})),s.add("button","Convert",t.advancedOptions,"voxelConvert","Convert"),s.add("button","Import",t.advancedOptions,"voxelImport","Import");var o=r.addFolder("Layout Planner");o.add("switch","Merge",t.settings,"mergeVoxels",null,(function(e,i){t.setSettings("mergeVoxels",i)})),o.add("number","Size",t.advancedOptions,"plannerSize"),o.add("color","Color",t.advancedOptions,"plannerColor"),o.add("vector3","Cubes in XYZ",e,"Dir"),o.add("vector3","Space in XYZ",e,"Space"),o.add("button",null,t.advancedOptions,"plannerExecute","Execute",null,!0),this.blueprint=r.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}},grouping:{show:function(){if(t.resizable.restore(u.panel.right.restore),u.panel.right.grouping.objKeys,u.panel.right.locked&&!u.panel.state.isActive(this.objKeys))return;let e=[],i=Object.getOwnPropertyDescriptors(ObjectInstance.prototype);for(let t in i)i[t].set&&e.push(t);var r=new n({type:"folder",size:"standard"});r.addPanelButton("Grouping","right"),r.addRule();var a=r.addFolder("Transform").addFolder("Reflect",null,null,null,"small");a.add("button",null,t.advancedOptions,"groupReflect","Execute",null,!0,1),a.add("select","Direction",t.advancedOptions,"groupReflectDir",[{name:"X",value:0},{name:"Y",value:1},{name:"Z",value:2}],null,1);var s=r.addFolder("Style");s.add("select","Texture",t.advancedOptions,"texture",Object.keys(t.textureList).map(e=>({name:e,value:t.textureList[e]})),(function(e,i){t.editGroup("texture",i)})),s.add("button","Color",t.advancedOptions,"editColor","Open");var o=r.addFolder("Custom");o.add("select","Key",t.advancedOptions,"editCustomKey",e.map(e=>({name:e,value:e})),(function(){})),o.add("button",null,t.advancedOptions,"editCustomExec","Execute",null,!0);var l=r.addFolder("Prefab");l.add("switch","Auto Group",t.advancedOptions,"assetAutoGroup",null,(function(e,t){this.setSettings("assetAutoGroup",t)})),l.add("slider","Rotation",t.advancedOptions,"rotation",[0,359,1]);var c=l.addFolder("Import",null,null,null,"small");c.add("button","Json",t.advancedOptions,"json","Import",null,null,1),c.add("button","File",t.advancedOptions,"file","Import",null,null,1),l.add("switch","Object Painter",t.advancedOptions,"objectPainter",null,(function(e,t){objPaint.style.display=t?null:"none"})),l.addDiv("objPaint",null,null,t.advancedOptions.objectPainter).add("text","JSON",t.advancedOptions,"objectPainterJson","JSON",null,null,1),this.blueprint=r.toJSON(),u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}},objectList:{show:function(){if(t.resizable.restore(u.panel.right.restore),!u.panel.right.locked||u.panel.state.isActive(this.objKeys)){this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",label:"Objects"}};let e=[];for(let i in t.objInsts)e[i]={},this.blueprint["Object"+i]={key:i,object:e,name:r.formatConstName(t.objInsts[i].name),type:"button",args:["Focus"],onChange:function(){t.focusObject(i)}};u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}}},scriptList:{show:function(){if(t.resizable.restore(u.panel.right.restore),!u.panel.right.locked||u.panel.state.isActive(this.objKeys)){this.blueprint={panelButtons:{type:"panel_buttons",direction:"right",label:"Scripts"},addScript:{key:"addScript",object:t.advancedOptions,type:"button",line:"wide",args:["Add Script"]}};let e=[];for(let i in t.scripts)e[i]={},this.blueprint["Script"+i]={key:i,object:e,name:r.formatConstName(t.scripts[i].name),type:"dbutton",args:["Edit","Remove"],onChange:function(e){t.editScript(i,e.id)}};u.panel.state.setActive(this.objKeys),u.panel.right.elem.innerHTML=u._build([...this.objKeys,"blueprint"])}}}}},_window:{controls:{default:{gen:function(){return this.blueprint={rule:{type:"rule"}},this.blueprint.movement={name:"Movement",type:"folder",size:"standard",children:{fowardKey:{name:"Fly forward",object:t.settings,key:"fowardKey",type:"key",args:[[u._html.arrow("up")],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i)}},backwardKey:{name:"Fly backwards",object:t.settings,key:"backwardKey",type:"key",args:[[u._html.arrow("down")],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i)}},leftKey:{name:"Fly left",object:t.settings,key:"leftKey",type:"key",args:[[u._html.arrow("left")],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i)}},rightKey:{name:"Fly right",object:t.settings,key:"rightKey",type:"key",args:[[u._html.arrow("right")],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i)}},upKey:{name:"Fly up",object:t.settings,key:"upKey",type:"key",args:[[],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i)}},downKey:{name:"Fly down",object:t.settings,key:"downKey",type:"key",args:[[],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i)}},shiftKey:{name:"Hold to fly faster",object:{val:"Shift"},key:"val",type:"key"},speed:{name:"Speed",type:"folder",size:"small",children:{speedNormal:{name:"Normal",object:t.settings,key:"speedNormal",type:"number",onChange:function(e,i){t.setSettings("speedNormal",Math.abs(i)||t.defaultSettings.speedNormal)},sub:1},speedSprint:{name:"Sprinting",object:t.settings,key:"speedSprint",type:"number",onChange:function(e,i){t.setSettings("speedSprint",Math.abs(i)||t.defaultSettings.speedSprint)},sub:1},speedReset:{name:"Reset Speed",object:t.advancedOptions,key:"speedReset",type:"button",args:["Reset"],sub:1}}}}},this.blueprint.transform={name:"Transform",type:"folder",size:"standard",children:{...[{keys:["1"],name:"Translate"},{keys:["2"],name:"Rotate"},{keys:["3"],name:"Scale"},{keys:["`"],name:"Toggle World / Local space"}].map(e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"}))}},this.blueprint.edit={name:"Edit",type:"folder",size:"standard",children:{...[{keys:["Ctrl + Z"],name:"Undo"},{keys:["Ctrl + Y","Shift + Ctrl + Z"],name:"Redo"}].map(e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"}))}},this.blueprint.object={name:"Object",type:"folder",size:"standard",children:{faceModeKey:{name:"Face Selection Mode",object:t.settings,key:"faceModeKey",type:"key",args:[[],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i),t.updateFaceSelection()}},groupModeKey:{name:"Group Selection Mode",object:t.settings,key:"groupModeKey",type:"key",args:[[],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i),t.updateGroupSelection()}},wireframeKey:{name:"Group Selection Mode",object:t.settings,key:"wireframeKey",type:"key",args:[[],!0],onChange:function(e,i){i=i.toUpperCase(),t.setSettings(t.property,i),t.updateWireframe()}},delElement:{name:"Delete element",object:{val:"Del or Backspace"},key:"val",type:"key"},snapping:{name:"Toggle snapping",object:{val:"Control"},key:"val",type:"key"},collidable:{name:"Toggle collidable",object:{val:"Shift + C"},key:"val",type:"key"},visible:{name:"Toggle visibilty",object:{val:"Shift + V"},key:"val",type:"key"}}},u._build([...this.objKeys,"blueprint"])}},advanced:{gen:function(){return this.blueprint={placeholder:{name:"Create placeholder",object:{val:"P"},key:"val",type:"key"},hitbox:{name:"Hitbox fixer",object:{val:"Shift + F"},key:"val",type:"key"},flipXZ:{name:"Flip x/z size",object:{val:"F"},key:"val",type:"key"},quickAdd:{name:"Quick Add",object:{val:"X"},key:"val",type:"key"},rule:{type:"rule"}},this.blueprint.group={name:"Group",type:"folder",size:"standard",children:{...[{keys:["Shift + Alt + G"],name:"Remove all groups"},{keys:["Shift + G"],name:"Create group / Remove group if exist"},{keys:["Shift + R"],name:"Duplicate Group / Object"},{keys:["Ctrl + C"],name:"Copy group"},{keys:["Ctrl + V"],name:"Paste group"}].map(e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"}))}},this.blueprint.file={name:"File",type:"folder",size:"standard",children:{...[{keys:["Shift + Click + Import"],name:"Import from file"},{keys:["Shift + Click + Export"],name:"Export & copy"}].map(e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"}))}},this.blueprint.file={name:"File",type:"folder",size:"standard",children:{...[{keys:["Shift + Click (w/ Objectpainter)"],name:"Paste preset JSON"}].map(e=>({name:e.name,object:{val:e.keys.join(" or ")},key:"val",type:"key"}))}},u._build([...this.objKeys,"blueprint"])}}},settings:{general:{gen:function(){return this.blueprint={controls:{name:"Controls",object:{},key:"",type:"button",args:["Open Controls"],onChange:function(){showWindow(1)}},autoBackup:{name:"Auto Backup",object:t.settings,key:"autoBackup",type:"slider",args:[0,25,1],onChange:function(e,i){t.setSettings("autoBackup",Math.abs(i)),t.initAutoBackup()}},uiScale:{name:"UI Scale",object:t.settings,key:"uiScale",type:"slider",args:[.5,1.5,.1],onChange:function(e,i){t.setSettings("uiScale",i),t.scaleUI()}},pointerLock:{name:"Pointer Lock",object:t.settings,key:"pointerLock",type:"switch",onChange:function(e,i){t.setSettings("pointerLock",i)}},disableWarnings:{name:"Disable Warnings",object:t.settings,key:"disableWarnings",type:"switch",onChange:function(e,i){t.setSettings("disableWarnings",i),t.clearWarnings()}},rule:{type:"rule"},render:{name:"Render",type:"folder",size:"standard",closed:!0,children:{res:{name:"Resolution",object:t.settings,key:"resMltV",type:"slider",args:[.1,2,.1],onChange:function(e,i){t.setSettings("resMltV",Math.abs(i)),t.setResMlt()}},antiAlias:{name:"Anti-aliasing",object:t.settings,key:"resMltV",type:"switch",onChange:function(e,i){t.setSettings("antiAlias",i),alert("This change will occur after you refresh")}}}},history:{name:"History",type:"folder",size:"standard",closed:!0,children:{disable:{name:"Disable",object:t.settings,key:"disableHistory",type:"switch",onChange:function(e,i){grid.style.display=i?"none":null,t.setSettings("disableHistory",i),t.toggleHistory(i)}},history:{type:"div",id:"grid",show:!t.settings.disableHistory,children:{limit:{name:"Limit",object:t.settings,key:"historyLimit",type:"slider",args:[0,1e3,1],onChange:function(e,i){t.setSettings("historyLimit",i)},sub:1}}}}},game:{name:"Game",type:"folder",size:"standard",closed:!0,children:{showRealHitbox:{name:"Show Real Hitbox",object:t.settings,key:"showRealHitbox",type:"switch",onChange:function(e,i){t.setSettings("showRealHitbox",i),ObjectInstance.showRealHitbox=i}}}}},u._build([...this.objKeys,"blueprint"])}},display:{gen:function(){return this.blueprint={darkMode:{name:"Dark Mode",object:t.settings,key:"darkMode",type:"switch",onChange:function(e,i){t.setSettings("darkMode",i),t.updateTheme()}},rule:{type:"rule"},grid:{name:"Grid",type:"folder",size:"standard",children:{gridVisibility:{name:"Visible",object:t.settings,key:"gridVisibility",type:"switch",onChange:function(e,i){grid.style.display=i?null:"none",t.setSettings("gridVisibility",i),t.updateGridHelper()}},grid:{type:"div",id:"grid",show:t.settings.gridVisibility,children:{gridOpacity:{name:"Opacity",object:t.settings,key:"gridOpacity",type:"slider",args:[.05,1,.05],onChange:function(e,i){t.setSettings("gridOpacity",i),t.updateGridHelper()},sub:1},gridSize:{name:"Size",object:t.settings,key:"gridSize",type:"number",onChange:function(e,i){t.setSettings("gridSize",Math.abs(i)),t.updateGridHelper()},sub:1},gridSpacing:{name:"Spacing",object:t.settings,key:"gridSpacing",type:"number",onChange:function(e,i){t.setSettings("gridSpacing",Math.abs(i)||t.defaultSettings.gridSpacing),t.updateGridHelper()},sub:1}}},gridReset:{name:"Reset Grid",object:t.advancedOptions,key:"gridReset",type:"button",args:["Reset"]}}},deathBarrier:{name:"Death Barrier",type:"folder",size:"standard",children:{dbVisibility:{name:"Visible",object:t.settings,key:"dbVisibility",type:"switch",onChange:function(e,i){deathBarrier.style.display=i?null:"none",t.setSettings("dbVisibility",i),t.updateDeathBarrier()}},deathBarrier:{type:"div",id:"deathBarrier",show:t.settings.dbVisibility,children:{dbOpacity:{name:"Opacity",object:t.settings,key:"dbOpacity",type:"slider",args:[.05,1,.05],onChange:function(e,i){t.setSettings("dbOpacity",i),t.updateDeathBarrier()},sub:1}}},dbReset:{name:"Reset Barrier",object:t.advancedOptions,key:"dbReset",type:"button",args:["Reset"]}}}},u._build([...this.objKeys,"blueprint"])}},object:{gen:function(){return this.blueprint={triggerCons:{name:"Trigger Connections",object:t.settings,key:"triggerCons",type:"switch",onChange:function(e,i){t.setSettings("triggerCons",i),t.checkConnections()}},selectThrough:{name:"Select through invisible objects [ALT]",object:t.settings,key:"selectThroughInvis",type:"switch",onChange:function(e,i){t.setSettings("selectThroughInvis",i)}},borderVisuals:{name:"Object Border Visuals",object:t.settings,key:"borderVisuals",type:"switch",onChange:function(e,i){t.setSettings("borderVisuals",i),t.updateBorderVisuals()}},res:{name:"Highlight",object:t.settings,key:"objectHighlight",type:"switch",onChange:function(e,i){t.setSettings("objectHighlight",i)}},antiAlias:{name:"Create Near",object:t.settings,key:"createObjectNear",type:"switch",onChange:function(e,i){t.setSettings("createObjectNear",i)}},togLightCones:{name:"Lightcone Boundingbox",object:t.advancedOptions,key:"togLightCones",type:"button",args:["Toggle"]},rule:{type:"rule"},config:{name:"Config",type:"folder",size:"standard",children:{degToRad:{name:"Anti Radians",object:t.settings,key:"degToRad",type:"switch",onChange:function(e,i){t.setSettings("degToRad",i)}},preserveFolderState:{name:"Preserve Folders",object:t.settings,key:"preserveFolderState",type:"switch",onChange:function(e,i){t.setSettings("preserveFolderState",i)}}}},snapping:{name:"Snapping",type:"folder",size:"standard",children:{translation:{name:"Translation",object:t.settings,key:"translationSnapping",type:"slider",args:[.001,25,.001],onChange:function(e,i){t.setSettings("translationSnapping",Math.abs(i)||t.defaultSettings.translationSnapping),t.updateSnapping()}},rotation:{name:"Rotation",object:t.settings,key:"rotationSnapping",type:"slider",args:[.001,45,.001],onChange:function(e,i){t.setSettings("rotationSnapping",Math.abs(i)||t.defaultSettings.rotationSnapping),t.updateSnapping()}},scale:{name:"Scale",object:t.settings,key:"scaleSnapping",type:"slider",args:[.001,25,.001],onChange:function(e,i){t.setSettings("scaleSnapping",Math.abs(i)||t.defaultSettings.scaleSnapping),t.updateSnapping()}},reset:{name:"Reset Snapping",object:t.advancedOptions,key:"snappingReset",type:"button",args:["Reset"]}}}},u._build([...this.objKeys,"blueprint"])}},quickgui:{gen:function(){return this.blueprint={enabled:{name:"Enabled",object:t.settings,key:"quickGUI",type:"switch",onChange:function(e,i){quickgui.style.display=i?null:"none",t.setSettings("quickGUI",i)}},quickgui:{type:"div",id:"quickgui",show:t.settings.quickGUI,children:{quickGUIOpen:{name:"Open On",object:t.settings,key:"quickGUIOpen",type:"select",args:[[{name:"Middle Click",value:0},{name:"Right Click",value:1}]],onChange:function(e,i){t.setSettings("quickGUIOpen",parseInt(i))},sub:1}}}},u._build([...this.objKeys,"blueprint"])}}},quickaddcust:{gen:function(){let e=[],t=[],i=[];for(let n in s.prefabs)s.prefabs[n].localOnly&&a.isProd||s.prefabs[n].custom||s.prefabs[n].noExport||""==s.prefabs[n].name||(s.prefabs[n].tool||s.prefabs[n].tool2?t:s.prefabs[n].gen?e:i).push({name:r.formatConstName(s.prefabs[n].name),object:{},key:"",type:"button",args:["Add"],onChange:function(){windows[3].changeButton({name:r.formatConstName(s.prefabs[n].name),desc:"Click to add",item:n})}});return this.blueprint={rule:{type:"rule"},general:{name:"General",type:"folder",size:"standard",children:{customAsset:{name:"Custom Asset",object:{},key:"",type:"button",args:["Add"],onChange:function(){windows[3].changeButton({name:"Custom Asset",desc:"Import community made assets",cust:!0})}},placeholder:{name:"Placeholder",object:{},key:"",type:"button",args:["Add"],onChange:function(){windows[3].changeButton({name:"Placeholder",desc:"Stretch over objects to form a group",place:!0})}}}},basic:{name:"Basic",type:"folder",size:"standard",children:{...i}},models:{name:"Models",type:"folder",size:"standard",children:{...e}},tools:{name:"Tools",type:"folder",size:"standard",children:{...t}}},u._build([...this.objKeys,"blueprint"])}}},_quicksettings:{gen:function(){return this.blueprint={duplicate:{name:"Duplicate",type:"toolbar",pos:"option",onClick:function(){"PLACEHOLDER"==t.quickGUI.obj.objType?t.duplicateGroup(t.quickGUI.obj):t.duplicateObject(t.quickGUI.obj)}},delete:{name:"Delete",type:"toolbar",pos:"option",onClick:function(){"PLACEHOLDER"==t.quickGUI.obj.objType?t.removeGroup(t.quickGUI.obj):t.removeObject({boundingMesh:t.quickGUI.obj})}},rule0:{type:"rule"},group:{name:"Group",type:"toolbar",pos:"menu",children:{form:{name:"Create",type:"toolbar",pos:"option",onClick:function(){t.copyObjects(!1,!0,!1,t.quickGUI.obj)}},separate:{name:"Stop",type:"toolbar",pos:"option",onClick:function(){t.stopGroup(!1,t.quickGUI.obj)}},rule:{type:"rule"},copy:{name:"Copy",type:"toolbar",pos:"option",onClick:function(){t.copyObjects(!1,!1,!1,t.quickGUI.obj)}},paste:{name:"Paste",type:"toolbar",pos:"option",onClick:function(){t.pasteObjects(t.quickGUI.obj)}}}},rule1:{type:"rule"},fixHitbox:{name:"Fix Hitbox",type:"toolbar",pos:"option",onClick:function(){t.fixHitbox(this.quickGUI.obj)}},rule2:{type:"rule"},replace:{name:"Replace",type:"toolbar",pos:"menu",children:{form:{name:"JSON",type:"toolbar",pos:"option",onClick:function(){t.jsonInput(!1,t.quickGUI.obj)}},separate:{name:"File",type:"toolbar",pos:"option",onClick:function(){t.jsonInput(!0,t.quickGUI.obj)}}}},rule3:{type:"rule"},json:{name:"JSON",type:"toolbar",pos:"menu",children:{textArea:{type:"toolbar",pos:"textarea"}}}},u._build([...this.objKeys,"blueprint"])}}};return r.getObjKeys(u,["_html","update","action","_build","state","blueprint","folderStore","show","gen","elem","restore"]).forEach(e=>{let t=u,i=e.split("|");i.forEach(e=>t=t[e]),t.objKeys=i}),window.addEventListener("mousemove",u.update.number.mousemove),window.addEventListener("mouseup",u.update.number.mouseup),window.addEventListener("keydown",u.update.key.keydown),window.addEventListener("mousedown",u.update.key.mousedown),u.update.color.init(),window.GUI=r.removePrivateKeys(u),u}},function(e,t){var i,n;e.exports.events=["onShoot","onMelee","onDamage","onEnter","onDestroy","onRespawn","onTimer","onProjectile","onThrowingMelee","onPunch","onHoldMouse","onCollision","onStorageEquals","onStorageGreater","onStorageLesser","onAIDeath","onInteractKey","onPlayerSpawn","onPlayerKill","onPlayerDie"],e.exports.actions=[{name:"Give Player Score",execute:function(e,t,i,n){i&&e.players.score(i,n.triggerConstant||1)}},{name:"Kill Player",execute:function(e,t,i){i&&(i.godMode||e.players.kill(i))}},{name:"Respawn Player",execute:function(e,t,i){if(i){var n=i?i.checkPoint:null,r=n&&e.map.manager.objects[n]?e.map.manager.objects[n]:e.getSpawnPoint(i.team,i);e.players.changePosition(i,r.x,r.y,r.z,!0)}}},{name:"Change Player Health",execute:function(e,t,i,n){!i||e.players.changeHealth(i,null,-(n.triggerConstant||0),!0)&&e.players.kill(i,null,{})}},{name:"Destroy Interface",execute:function(e,t,i,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)n=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||n.sid!=r.sid)&&(n.health||n.gate||n.canDestroy&&!n.destroyed)&&n.interface!=r.interface&&n.interface==r.interfaceT&&(n.active=!1,n.gate?t.broadcast("game"+e.sid,"gte",n.uid,n.active):(n.health=0,n.destroyedBy=i,n.destroyed=!0,e.map.manager.destObjs.push(n.uid),t.broadcast("game"+e.sid,"do",n.uid)),(n.onDestroy||n.onDamage)&&e.onTrigger(i,n,a))}},{name:"Toggle Interface Gate",execute:function(e,t,i,r){for(var a=0;a<e.map.manager.interfaces.length;++a)n=e.map.manager.objects[e.map.manager.interfaces[a]],(r.isAI||n.sid!=r.sid)&&n.gate&&n.interface!=r.interface&&n.interface==r.interfaceT&&(n.active=!n.active,t.broadcast("game"+e.sid,"gte",n.uid,n.active))}},{name:"Change Interface Health",execute:function(e,t,i,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)n=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||n.sid!=r.sid)&&n.health&&n.interface!=r.interface&&n.interface==r.interfaceT&&(n.health-=-(r.triggerConstant||0),0>=n.health&&(n.active=!1,n.health=0,n.destroyedBy=i,n.destroyed=!0,e.map.manager.destObjs.push(n.uid),t.broadcast("game"+e.sid,"do",n.uid),n&&n.onDestroy&&e.onTrigger(i,n,a)),n&&n.onDamage&&0>(r.triggerConstant||0)&&e.onTrigger(i,n,a))}},{name:"Teleport To Interface",execute:function(e,t,i,r,a){if(i)for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)n=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||n.sid!=r.sid)&&(null==n.interface||n.interface!=r.interface)&&n.interface==r.interfaceT&&e.players.changePosition(i,n.x,n.y-n.height,n.z,!0,!0)}},{name:"Change Interface Deposit Box Amount",execute:function(e,t,i,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)n=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||n.sid!=r.sid)&&n.interface!=r.interface&&n.interface==r.interfaceT&&n.bank&&(n.deposited+=r.triggerConstant||0,t.broadcast("game"+e.sid,"bnk",n.uid,n.deposited))}},{name:"Kill Opposing Team",execute:function(e,t,n){if(n)for(var r=0;r<e.players.list.length;++r)!(i=e.players.list[r]).active||i==n||i.godMode||i.team&&n.team==i.team||e.players.kill(i,null,null,!0)}},{name:"Respawn Opposing Team",execute:function(e,t,n){if(n)for(var r=0;r<e.players.list.length;++r)if((i=e.players.list[r]).active&&i!=n&&(!i.team||n.team!=i.team)){var a=i?i.checkPoint:null,s=a&&e.map.manager.objects[a]?e.map.manager.objects[a]:e.getSpawnPoint(i.team,i);e.players.changePosition(i,s.x,s.y,s.z,!0)}}},{name:"Respawn Destructible Interface",execute:function(e,t,r,a,s){for(var o=0;o<e.map.manager.interfaces.length&&!(0>=e.triggerChains[s]);++o)i=e.map.manager.objects[e.map.manager.interfaces[o]],n=e.map.manager.destObjs.indexOf(i.uid),(a.isAI||i.sid!=a.sid)&&(i.startHealth||i.canDestroy&&i.destroyed)&&i.destroyed&&-1!=n&&i.interface!=a.interface&&i.interface==a.interfaceT&&(i.destroyed=!1,e.map.manager.destObjs.splice(n,1),i.active=!0,i.respawnT=i.respawnR?0:i.respawnTStart,null!=i.health&&(i.health=i.startHealth),t.broadcast("game"+e.sid,"ro",i.uid),i&&i.onRespawn&&e.onTrigger(i.destroyedBy,i,s),i.destroyedBy=null)}},{name:"Toggle Destructible Interface",execute:function(e,t,r,a,s){for(var o=0;o<e.map.manager.interfaces.length&&!(0>=e.triggerChains[s]);++o)i=e.map.manager.objects[e.map.manager.interfaces[o]],n=e.map.manager.destObjs.indexOf(i.uid),(a.isAI||i.sid!=a.sid)&&(i.startHealth||i.canDestroy)&&i.interface!=a.interface&&i.interface==a.interfaceT&&(-1==n?(i.active=!1,i.health=0,i.destroyed=!0,i.destroyedBy=r,e.map.manager.destObjs.push(i.uid),t.broadcast("game"+e.sid,"do",i.uid),(i.onDestroy||i.onDamage)&&e.onTrigger(r,i,s)):(e.map.manager.destObjs.splice(n,1),i.active=!0,i.destroyed=!1,i.respawnT=i.respawnR?0:i.respawnTStart,null!=i.health&&(i.health=i.startHealth),t.broadcast("game"+e.sid,"ro",i.uid),i&&i.onRespawn&&e.onTrigger(i.destroyedBy,i,s),i.destroyedBy=null))}},{name:"Set Player Score",execute:function(e,t,i,n){i&&e.players.score(i,n.triggerConstant||0,!1,!0)}},{name:"Broadcast Sound",custom:!0,execute:function(e,t,i,n){if(2==n.triggerSound[3])t.broadcast("game"+e.sid,"so",n.triggerSound[0],n.triggerSound[1],1,0,0,0,n.triggerSound[2],!!n.triggerSound[4]);else{var r=n.triggerSound[3]&&i,a=r?i:n;e.playSound(n.triggerSound[0],n.triggerSound[1],a.sid,a.x,r?a.y+a.height:a.y,a.z,!0,n.triggerSound[2],!1,!r,!!n.triggerSound[4])}}},{name:"Clear Player Loadout",execute:function(e,t,i){i&&(1!=i.loadout.length||12!=i.loadout[0])&&(i.updateLoadout(e,0,!0,[12]),t.broadcast("game"+e.sid,"inat",i.sid,[12],0,void 0,void 0,!1))}},{name:"Broadcast Message",type:"Text",execute:function(e,t,i,n){n.triggerConstantTxt&&n.triggerConstantTxt.length&&t.broadcast("game"+e.sid,"ch",null,n.triggerConstantTxt,2)}},{name:"Send Message",type:"Text",execute:function(e,t,i,n){i&&n.triggerConstantTxt&&n.triggerConstantTxt.length&&t.send(i.id,"ch",null,n.triggerConstantTxt,2)}},{name:"Swap Player Team",execute:function(e,t,i){if(i){var n=2==i.team?1:2;e.updateTeam(i,n)}}},{name:"Set Player Team",execute:function(e,t,i,n){if(i){var r=n.triggerConstant||0;2<r&&(r=2),1>r&&(r=1),e.updateTeam(i,r)}}},{name:"Round Time",execute:function(e,t,i,n,r,a){if(a.isNumber(e.gameTimer)){var s=n.triggerConstant||0;e.gameTimer+=s,0>=e.gameTimer&&(e.gameTimer="skip")}}},{name:"Reset Interface",execute:function(e,t,r,a,s){for(var o=0;o<e.map.manager.interfaces.length&&!(0>=e.triggerChains[s]);++o)i=e.map.manager.objects[e.map.manager.interfaces[o]],(a.isAI||i.sid!=a.sid)&&i.interface!=a.interface&&i.interface==a.interfaceT&&(-1!=(n=e.map.manager.destObjs.indexOf(i.uid))&&(e.map.manager.destObjs.splice(n,1),i.respawnT=i.respawnR?0:i.respawnTStart,null!=i.health&&(i.health=i.startHealth),t.broadcast("game"+e.sid,"ro",i.uid),i&&i.onRespawn&&e.onTrigger(i.destroyedBy,i,s),i.destroyedBy=null),i.triggerTimer=1e3*(i.triggerConstantEvent||0),i.health=i.startHealth,i.destroyed=!1,i.active=!0,i.triggered=!1,i.uses.length=0)}},{name:"End Round",execute:function(e){"skip"!=e.gameTimer&&(e.gameTimer="skip")}},{name:"Refill Player Knife",execute:function(e,t,i){i&&(i.refillKnife(),t.send(i.id,"rfl"))}},{name:"Destroy Self",execute:function(e,t,i,n,r){(n.health||n.gate||n.canDestroy)&&n.active&&(n.active=!1,n.gate?t.broadcast("game"+e.sid,"gte",n.uid,n.active):(n.health=0,n.destroyed=!0,n.destroyedBy=i,e.map.manager.destObjs.push(n.uid),t.broadcast("game"+e.sid,"do",n.uid)),!n.selfDestruct&&(n.onDestroy||n.onDamage)&&e.onTrigger(i,n,r))}},{name:"Increase Interface Storage",execute:function(e,t,n,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)i=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||i.sid!=r.sid)&&(i.onStorageEquals||i.onStorageGreater||i.onStorageLesser)&&i.interface!=r.interface&&i.interface==r.interfaceT&&(i.storage+=r.triggerConstant||0,i.storage==(i.triggerConstantEvent||0)&&i.onStorageEquals&&e.onTrigger(n,i,a),i.storage>(i.triggerConstantEvent||0)&&i.onStorageGreater&&e.onTrigger(n,i,a),i.storage<(i.triggerConstantEvent||0)&&i.onStorageLesser&&e.onTrigger(n,i,a))}},{name:"Decrease Interface Storage",execute:function(e,t,n,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)i=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||i.sid!=r.sid)&&(i.onStorageEquals||i.onStorageGreater||i.onStorageLesser)&&i.interface!=r.interface&&i.interface==r.interfaceT&&(i.storage-=r.triggerConstant||0,i.storage==(i.triggerConstantEvent||0)&&i.onStorageEquals&&e.onTrigger(n,i,a),i.storage>(i.triggerConstantEvent||0)&&i.onStorageGreater&&e.onTrigger(n,i,a),i.storage<(i.triggerConstantEvent||0)&&i.onStorageLesser&&e.onTrigger(n,i,a))}},{name:"Set Interface Storage",execute:function(e,t,n,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)i=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||i.sid!=r.sid)&&(i.onStorageEquals||i.onStorageGreater||i.onStorageLesser)&&i.interface!=r.interface&&i.interface==r.interfaceT&&(i.storage=r.triggerConstant||0,i.storage==(i.triggerConstantEvent||0)&&i.onStorageEquals&&e.onTrigger(n,i,a),i.storage>(i.triggerConstantEvent||0)&&i.onStorageGreater&&e.onTrigger(n,i,a),i.storage<(i.triggerConstantEvent||0)&&i.onStorageLesser&&e.onTrigger(n,i,a))}},{name:"Reset Interface Storage",execute:function(e,t,n,r,a){for(var s=0;s<e.map.manager.interfaces.length&&!(0>=e.triggerChains[a]);++s)i=e.map.manager.objects[e.map.manager.interfaces[s]],(r.isAI||i.sid!=r.sid)&&(i.onStorageEquals||i.onStorageGreater)&&i.interface!=r.interface&&i.interface==r.interfaceT&&(i.storage=0,i.storage==(i.triggerConstantEvent||0)&&i.onStorageEquals&&e.onTrigger(n,i,a),i.storage>(i.triggerConstantEvent||0)&&i.onStorageGreater&&e.onTrigger(n,i,a),i.storage<(i.triggerConstantEvent||0)&&i.onStorageLesser&&e.onTrigger(n,i,a))}},{name:"Broadcast Popup",type:"Text",execute:function(e,t,i,n){n.triggerConstantTxt&&n.triggerConstantTxt.length&&t.broadcast("game"+e.sid,"am",[n.triggerConstantTxt,null])}},{name:"Send Popup",type:"Text",execute:function(e,t,i,n){i&&n.triggerConstantTxt&&n.triggerConstantTxt.length&&t.send(i.id,"am",[n.triggerConstantTxt,null])}},{name:"Jump Scare",execute:function(e,t,i){i&&t.send(i.id,"scr",0)}},{name:"Reward KR",execute:function(e,t,i,n){i&&e.krRewards&&(n.triggerConstant,e.rewardKR(i,parseInt(n.triggerConstant||0)))}},{name:"Clear Player Checkpoints",execute:function(e,t,i){i&&(i.checkPoint=null,i.checkPointList.length=0,t.send(i.id,"chp",!0))}}]},,,,,,,,,,,,function(e,t,i){const n=i(3);n.BufferGeometryUtils=i(51)(n);const r=i(2),a=i(1),s=i(83),o=i(84).easing;let l="undefined"!=typeof location;const c={GRASS:{ind:0,power:2100,slopeSton:.8,genTer:function(e,t,i,n){let r=e._sample(t,i,300);r=Math.floor(4*r)/4;let a=1*n[this.ind];return 18*r*n[this.ind]*e.sizeMlt+a}},MOUNTAIN:{ind:1,power:1900,genTer:function(e,t,i,n){let r=.4+.3*e._sample(t,i,200),a=1-2*Math.abs(r-e._sample(t,i,500)),s=.4+1.4*e._sample(t,i,400);return Math.abs(a*s*(220*e.mntMlt)*n[this.ind])*e.sizeMlt}},SNOW:{ind:2,forceCol:"SNOW",slopeSton:.75,earthLoc:.8,power:1e3,genTer:function(e,t,i,n){let r=e._sample(t,i,300);r=Math.floor(3*r)/3;let a=90*n[this.ind];return 15*r*n[this.ind]*e.sizeMlt+a}},HILLS:{ind:3,power:2100,slopeSton:.7,forceCol:"GRASS",genTer:function(e,t,i,n){let r=1-2*e._sample(t,i,2e3),a=.4+.4*e._sample(t,i,400);return Math.abs(r*a*(-100*e.mntMlt)*n[this.ind])*e.sizeMlt}}},d=Object.keys(c).length;var p=[];for(var h in c)c.hasOwnProperty(h)&&p.push(h);const u={TREE:{max:2e3,sample:300,maxHeight:230,biomes:["GRASS","SNOW","HILLS"],biomeCols:{SNOW:["#484d35","#4d4b35","#5c5a3c"]},biomeCoats:{SNOW:"#e8fdff"},check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t&&"DIRT"!=e&&"DIRT"!=t&&"SAND"!=e&&"SAND"!=t},rate:function(){return.18}},STUMP:{max:200,sample:300,maxHeight:600,biomes:["GRASS","SNOW","HILLS"],check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t},rate:function(){return.02}},LOOT:{max:50,sample:300,biomes:["GRASS","SNOW","HILLS"],check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t},rate:function(){return.02}},ROCK:{max:500,sample:300,maxHeight:400,biomes:["GRASS","SNOW","HILLS"],biomeCoats:{SNOW:"#e8fdff"},check:function(){return!0},rate:function(){return.075}},BUSH:{sample:400,maxHeight:200,client:!0,biomes:["GRASS","SNOW","HILLS"],biomeCols:{SNOW:["#484d35"]},biomeCoats:{SNOW:"#e8fdff"},check:function(e,t){return"MOUNTAIN"!=e&&"MOUNTAIN"!=t},rate:function(){return.05}},GRASS:{sample:400,maxHeight:200,countM:1,client:!0,biomes:["GRASS","HILLS"],biomeCols:{GRASS:["#4d5928"],HILLS:["#4d5928"]},check:function(e,t){return!1}}},f=e=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,n)=>"#"+t+t+i+i+n+n).substring(1).match(/.{2}/g).map(e=>parseInt(e,16));var m=new n.Vector3,g=new n.Vector3,y=new n.Vector3;class v extends n.Object3D{static fromConfig(e){return new v(e.terrainSeed,e.terrainWidth,e.terrainHeight,e.sizeMlt,e.terrainMntMlt,e.terrainDrtCol,e.terrainGrsCol,e.terrainMntCol,e.terrainSnwCol,e.terrainSndCol,e.terrainTSeed,e.terrainEase)}constructor(e,t,i,d,h,m,g,y,w,b,x,S){function M(e,t,i,n){var r=i+"_"+n;B[r]||(B[r]=[]),B[r].push({i:e,c:t})}for(var T in super(),5.7,this.name="Terrain",this.sizeMlt=5.7,this.sizeX=r.limitMM(t,a.minTerrainSize,a.maxTerrainSize),this.sizeY=r.limitMM(i,a.minTerrainSize,a.maxTerrainSize),this.edgeSize=500,this.mntMlt=r.limitMM(h,a.minMountainMlt,a.maxMountainMlt),this.COLORS={DIRT:f(m||"#8c6835"),GRASS:f(g||"#4a6904"),MOUNTAIN:f(y||"#a0a0a0"),SAND:f(b||"#967f51"),SNOW:f(w||"#e8fdff"),HILLS:f(g||"#4a6904")},this.ease=o[v.EASE_LIST[S]||"easeInOutQuint"],this.MAP_OBJS=u,this.BIOME_INDEXES=p,this.simplex=new s(e),this.simplexObjs=new s(x),this.sampleIndex3D=0,this.genObjs=!!x,this.objPos={},u)u.hasOwnProperty(T)&&(this.objPos[T]=[]);let _=Math.floor(this.sizeX/25),O=Math.floor(this.sizeY/25);this.xSegmentCount=_,this.ySegmentCount=O;let C=this.sizeX/_,E=this.sizeY/O;this.xSegmentSize=C,this.ySegmentSize=E;let A=new n.BufferGeometry,R=_*O*6,k=new n.BufferAttribute(new Float32Array(3*R),3);A.setAttribute("position",k);let L=new n.BufferAttribute(new Uint8Array(3*R),3,!0);A.setAttribute("color",L),this.vertPositions=k,this.terrainPoints=(_+1)*(O+1),this.terrainHeights=new Float32Array(this.terrainPoints),this.biomeSegs={};for(let e=0;e<_+1;e++)for(let t=0;t<O+1;t++){let i=e+t*(_+1),n=this._vertPos(e,C,this.sizeX),r=this._vertPos(t,E,this.sizeY),[a,s]=this.evaluate(n,r);this.terrainHeights[i]=a;var I=0,P=0;for(var D in c)c.hasOwnProperty(D)&&s[c[D].ind]>P&&(P=s[c[D].ind],I=c[D].ind);this.biomeSegs[e+"_"+t]={i:I}}var B={};for(let e=0;e<_;e++)for(let t=0;t<O;t++){let i=6*(e+t*_),n=this._vertPos(e,C,this.sizeX),r=this._vertPos(t,E,this.sizeY),a=[n,r,this.terrainHeight(e,t)],s=[n+C,r,this.terrainHeight(e+1,t)],o=[n+C,r+E,this.terrainHeight(e+1,t+1)],c=[n,r+E,this.terrainHeight(e,t+1)];k.setXYZ(i,...a),k.setXYZ(i+1,...s),k.setXYZ(i+2,...o),k.setXYZ(i+3,...o),k.setXYZ(i+4,...c),k.setXYZ(i+5,...a);var z=this.biomeSegs[e+"_"+t];let d=this._centroid3D(a,s,o),h=this._centroid3D(o,c,a),f=this._normal3D(a,s,o);this._normal3D(o,c,a);z.c=this.evaluateColor(d,f,z.i);var j=Math.max(d[2],h[2]);if(this.genObjs)for(var N in u)u.hasOwnProperty(N)&&0<=u[N].biomes.indexOf(p[z.i])&&!(u[N].maxHeight&&u[N].maxHeight<=j)&&u[N].check(z.c)&&(this.evaluateObj(d,a,s,o,z.i,N,u[N].client&&!l),this.evaluateObj(h,o,c,a,z.i,N,u[N].client&&!l));if(l){let n=this.calcAOWeight(e,t),r=this.calcAOWeight(e+1,t),a=this.calcAOWeight(e+1,t+1),s=this.calcAOWeight(e,t+1);var F=this.COLORS[z.c];M(i,this._weightColor(F,n),e-.5,t-.5),M(i+1,this._weightColor(F,r),e+.5,t-.5),M(i+2,this._weightColor(F,a),e+.5,t+.5),M(i+3,this._weightColor(F,a),e+.5,t+.5),M(i+4,this._weightColor(F,s),e-.5,t+.5),M(i+5,this._weightColor(F,n),e-.5,t-.5)}}if(l)for(var T in B)if(B.hasOwnProperty(T)){F=[0,0,0];for(var H=0;H<B[T].length;++H)L.setXYZ(B[T][H].i,...B[T][H].c)}if(B=null,this.biomeSegs=null,l){A=n.BufferGeometryUtils.mergeVertices(A),A.computeVertexNormals(!0),A.computeFaceNormals();var G=new n.StrippedLambertMaterial({color:9211020,flatShading:!1,vertexColors:n.VertexColors});this.baseMesh=new n.Mesh(A,G),this.baseMesh.receiveShadow=!0,this.baseMesh.scale.set(5.7,5.7,1),this.add(this.baseMesh)}this._raycastRay=new n.Ray,this._raycastTriA=new n.Vector3,this._raycastTriB=new n.Vector3,this._raycastTriC=new n.Vector3,this._raycastTriangle=new n.Triangle,this._raycastNormal=new n.Vector3,this._raycastTarget=new n.Vector3,this._raycastClosestTarget=new n.Vector3}generateTexture(e,t){var i=document.createElement("canvas");i.width=e,i.height=t;var n=i.getContext("2d");return n.fillStyle="#ffffff",n.fillRect(0,0,e,t),n.fillStyle="#000000",n.fillRect(0,0,e/2,t/2),i}evaluateObj(e,t,i,n,r,a,s){if(!(-120>=e[2])){var o=u[a];if(!(o.max&&this.objPos[a].length>=o.max)){let h=this._sample3D(e[0],e[1],o.sample);var l=o.rate?o.rate(r):null;if(null==l||h>1-l||h<l)for(var c,d=Math.floor(h*(o.countM||1))||1,p=0;p<d;p++)c=this.randomInTriangle(t,i,n,e[0],e[1]),s||this.objPos[a].push([c.x*this.sizeMlt,c.z,-c.y*this.sizeMlt,r])}}}randomInTriangle(e,t,i,n,r){e=m.set(...e),t=g.set(...t),i=y.set(...i);var a=this._sample3D(n,r,400),s=Math.sqrt(this._sample3D(n,r,500));return e.clone().multiplyScalar(1-s).add(t.clone().multiplyScalar(s*(1-a))).add(i.clone().multiplyScalar(a*s))}terrainIndex(e,t){let i=e+t*(this.xSegmentCount+1);return 0>i||i>=this.terrainHeights.length?0:i}terrainHeight(e,t){return this.terrainHeights[this.terrainIndex(e,t)]}calcAOWeight(e,t){let i=this._vertPos(e,this.xSegmentSize,this.sizeX),n=this._vertPos(t,this.ySegmentSize,this.sizeY),r=this._topAngleOnTerrain(i-this.xSegmentSize,this.terrainHeight(e-1,t),i,this.terrainHeight(e,t),i+this.xSegmentSize,this.terrainHeight(e+1,t)),a=this._topAngleOnTerrain(n-this.xSegmentSize,this.terrainHeight(e,t-1),n,this.terrainHeight(e,t),n+this.ySegmentSize,this.terrainHeight(e,t+1)),s=Math.PI,o=1-(1-Math.max(s-r,0)/s)*(1-Math.max(s-a,0)/s);return.5<=o?o=.65:.2<=o?o=.3:.1<=o&&(o=.25),o}heightAt(e,t){e/=this.sizeMlt,t/=this.sizeMlt;let i=Math.floor(this._worldToLocal(e,this.sizeX,this.xSegmentSize)),n=Math.floor(this._worldToLocal(t,this.sizeY,this.ySegmentSize)),r=w(this._worldToLocal(e),this.xSegmentSize)/this.xSegmentSize,a=w(this._worldToLocal(t),this.ySegmentSize)/this.ySegmentSize,s=b(this.terrainHeight(i,n),this.terrainHeight(i,n+1),a),o=b(this.terrainHeight(i+1,n),this.terrainHeight(i+1,n+1),a);return b(s,o,r)}_worldToLocal(e,t,i){return(e+t/2)/i}raycast(e,t,i,n,r,a,s=!1){e/=this.sizeMlt,t/=this.sizeMlt,n/=this.sizeMlt,r/=this.sizeMlt;let o=Math.sqrt(n*n+r*r+a*a);this._raycastRay.origin.set(e,t,i),this._raycastRay.direction.set(n,r,a);let l,c,d,p=this._worldToLocal(e,this.sizeX,this.xSegmentSize),h=this._worldToLocal(t,this.sizeY,this.ySegmentSize),u=p+n/this.xSegmentSize,f=h+r/this.ySegmentSize,m=Math.abs(u-p),g=Math.abs(f-h),y=Math.floor(p),v=Math.floor(h),w=1;for(0==m?(l=0,d=Number.POSITIVE_INFINITY):u>p?(l=1,w+=Math.floor(u)-y,d=(Math.floor(p)+1-p)*g):(l=-1,w+=y-Math.floor(u),d=(p-Math.floor(p))*g),0==g?(c=0,d-=Number.POSITIVE_INFINITY):f>h?(c=1,w+=Math.floor(f)-v,d-=(Math.floor(h)+1-h)*m):(c=-1,w+=v-Math.floor(f),d-=(h-Math.floor(h))*m);0<w;w--){if(this._raycastVisit(y,v,e,t,i,n,r,a,o,s)){let e=this._raycastClosestTarget;return e.x*=this.sizeMlt,e.y*=this.sizeMlt,e}0<d?(v+=c,d-=m):(y+=l,d+=g)}}_raycastVisit(e,t,i,n,r,a,s,o,l,c){let d=e+t*this.xSegmentCount,p=Number.POSITIVE_INFINITY,h=!1;for(let e,t=0;2>t;t++){e=6*d+3*t,this._raycastTriA.set(this.vertPositions.getX(e),this.vertPositions.getY(e),this.vertPositions.getZ(e)),this._raycastTriB.set(this.vertPositions.getX(e+1),this.vertPositions.getY(e+1),this.vertPositions.getZ(e+1)),this._raycastTriC.set(this.vertPositions.getX(e+2),this.vertPositions.getY(e+2),this.vertPositions.getZ(e+2));let i=this._raycastRay.intersectTriangle(this._raycastTriA,this._raycastTriB,this._raycastTriC,!0,this._raycastTarget);if(i){let e=i.distanceTo(this._raycastRay.origin);e<p&&e<l&&(p=e,h=!0,this._raycastClosestTarget.copy(i),this._raycastTriangle.set(this._raycastTriA,this._raycastTriB,this._raycastTriC))}}return c&&h&&this._raycastTriangle.getNormal(this._raycastNormal),h}evaluate(e,t){let i=0;this.sampleIndex=0,this.sizeY;let n=[];for(let i=0;i<d;i++){var r=c[p[i]].power||1800;n.push(this._sample(e,t,r))}let a=n.reduce((e,t)=>e+t,0);n=n.map((e,t)=>[t,e/a]),n=n.sort((e,t)=>t[1]-e[1]);let s={},[o,l]=n[0];s[o]=this._easeTerrain(l/(l+n[1][1]));for(let e=1;e<n.length;e++){let[t,i]=n[e];s[t]=this._easeTerrain(i/(l+i))}for(var h in c)c.hasOwnProperty(h)&&(i+=c[h].genTer(this,e,t,s));let u=this._calcEdgeFade(e,this.sizeX)*this._calcEdgeFade(t,this.sizeY);return i*=u,i+=2e3*(u-1),(Math.abs(e)>=this.sizeX/2||Math.abs(t)>=this.sizeY/2)&&(i=-1e3),[i,s]}evaluateColor(e,t,i){let n,r=e[2],a=Math.atan2(Math.abs(t[0]),Math.abs(t[2])),s=Math.atan2(Math.abs(t[1]),Math.abs(t[2])),o=1-a/(2*Math.PI),l=1-s/(2*Math.PI);n=100<r?"MOUNTAIN":5<r?"GRASS":"DIRT";var d=c[p[i]];return d.forceCol&&(n=d.forceCol),950<r&&(n="SNOW"),-10>=r?n="SAND":(250<r||o*l<=(d.slopeSton||.85))&&(n="MOUNTAIN"),n}_sample(e,t,i){return this.sampleIndex++,this.simplex.noise3D(e/i,t/i,1e4*this.sampleIndex)/2+.5}_sample3D(e,t,i){return this.sampleIndex3D++,this.simplexObjs.noise3D(e/i,t/i,1e4*this.sampleIndex3D)/2+.5}_easeTerrain(e){return this.ease(this.ease(e))}_calcEdgeFade(e,t){if(Math.abs(e)>=t/2)return 0;let i=(Math.abs(e)-t/2+this.edgeSize)/this.edgeSize;return i=1-Math.max(i,0),o.easeOutQuint(i)}_vertPos(e,t,i){return e*t-i/2}_avgPos(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}_centroid3D(e,t,i){return[(e[0]+t[0]+i[0])/3,(e[1]+t[1]+i[1])/3,(e[2]+t[2]+i[2])/3]}_normal3D(e,t,i){let n=i[0]-t[0],r=i[1]-t[1],a=i[2]-t[2],s=e[0]-t[0],o=e[1]-t[1],l=e[2]-t[2],c=r*l-a*o,d=a*s-n*l,p=n*o-r*s,h=Math.sqrt(c*c+d*d+p+p);return[c/h,d/h,p/h]}_topAngleOnTerrain(e,t,i,n,r,a){let s=Math.atan2(t-n,e-i),o=Math.atan2(a-n,r-i);return 0>s&&(s+=2*Math.PI),s-o}_weightColor(e,t){return e.map(e=>e*(1-t))}}function w(e,t){return(e%t+t)%t}function b(e,t,i){return e*(1-i)+t*i}v.CONFIG_PROPS=["terrainSeed","terrainTSeed","terrainWidth","terrainHeight","sizeMlt","terrainMntMlt","terrainDrtCol","terrainGrsCol","terrainMntCol","terrainSnwCol","terrainSndCol","terrainEase"],v.EASE_LIST=Object.keys(o),v.BIOME_LIST=Object.keys(c),e.exports=v},function(e,t,i){var n;!function(){"use strict";function r(e){var t;t="function"==typeof e?e:e?s(e):Math.random,this.p=a(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;512>i;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function a(e){var t,i=new Uint8Array(256);for(t=0;256>t;t++)i[t]=t;for(t=0;255>t;t++){var n=t+~~(e()*(256-t)),r=i[t];i[t]=i[n],i[n]=r}return i}function s(){var e=0,t=0,i=0,n=1,r=o();e=r(" "),t=r(" "),i=r(" ");for(var a=0;a<arguments.length;a++)0>(e-=r(arguments[a]))&&(e+=1),0>(t-=r(arguments[a]))&&(t+=1),0>(i-=r(arguments[a]))&&(i+=1);return r=null,function(){var r=2091639*e+2.3283064365386963e-10*n;return e=t,t=i,i=r-(n=0|r)}}function o(){var e=4022871197;return function(t){t=t.toString();for(var i=0;i<t.length;i++){var n=.02519603282416938*(e+=t.charCodeAt(i));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)}}var l=.5*(Math.sqrt(3)-1),c=(3-Math.sqrt(3))/6,d=1/6,p=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var i,n,r=this.permMod12,a=this.perm,s=this.grad3,o=0,d=0,p=0,h=(e+t)*l,u=Math.floor(e+h),f=Math.floor(t+h),m=(u+f)*c,g=e-(u-m),y=t-(f-m);g>y?(i=1,n=0):(i=0,n=1);var v=g-i+c,w=y-n+c,b=g-1+2*c,x=y-1+2*c,S=255&u,M=255&f,T=.5-g*g-y*y;if(0<=T){var _=3*r[S+a[M]];o=(T*=T)*T*(s[_]*g+s[_+1]*y)}var O=.5-v*v-w*w;if(0<=O){var C=3*r[S+i+a[M+n]];d=(O*=O)*O*(s[C]*v+s[C+1]*w)}var E=.5-b*b-x*x;if(0<=E){var A=3*r[S+1+a[M+1]];p=(E*=E)*E*(s[A]*b+s[A+1]*x)}return 70*(o+d+p)},noise3D:function(e,t,i){var n,r,a,s,o,l,c,p,h,u,f=this.permMod12,m=this.perm,g=this.grad3,y=(e+t+i)*(1/3),v=Math.floor(e+y),w=Math.floor(t+y),b=Math.floor(i+y),x=(v+w+b)*d,S=e-(v-x),M=t-(w-x),T=i-(b-x);S>=M?M>=T?(o=1,l=0,c=0,p=1,h=1,u=0):S>=T?(o=1,l=0,c=0,p=1,h=0,u=1):(o=0,l=0,c=1,p=1,h=0,u=1):M<T?(o=0,l=0,c=1,p=0,h=1,u=1):S<T?(o=0,l=1,c=0,p=0,h=1,u=1):(o=0,l=1,c=0,p=1,h=1,u=0);var _=S-o+d,O=M-l+d,C=T-c+d,E=S-p+2*d,A=M-h+2*d,R=T-u+2*d,k=S-1+.5,L=M-1+.5,I=T-1+.5,P=255&v,D=255&w,B=255&b,z=.6-S*S-M*M-T*T;if(0>z)n=0;else{var j=3*f[P+m[D+m[B]]];n=(z*=z)*z*(g[j]*S+g[j+1]*M+g[j+2]*T)}var N=.6-_*_-O*O-C*C;if(0>N)r=0;else{var F=3*f[P+o+m[D+l+m[B+c]]];r=(N*=N)*N*(g[F]*_+g[F+1]*O+g[F+2]*C)}var H=.6-E*E-A*A-R*R;if(0>H)a=0;else{var G=3*f[P+p+m[D+h+m[B+u]]];a=(H*=H)*H*(g[G]*E+g[G+1]*A+g[G+2]*R)}var U=.6-k*k-L*L-I*I;if(0>U)s=0;else{var W=3*f[P+1+m[D+1+m[B+1]]];s=(U*=U)*U*(g[W]*k+g[W+1]*L+g[W+2]*I)}return 32*(n+r+a+s)},noise4D:function(e,t,i,n){var r,a,s,o,l,c,d,u,f,m,g,y,v,w,b,x,S,M=this.perm,T=this.grad4,_=(e+t+i+n)*p,O=Math.floor(e+_),C=Math.floor(t+_),E=Math.floor(i+_),A=Math.floor(n+_),R=(O+C+E+A)*h,k=e-(O-R),L=t-(C-R),I=i-(E-R),P=n-(A-R),D=0,B=0,z=0,j=0;k>L?D++:B++,k>I?D++:z++,k>P?D++:j++,L>I?B++:z++,L>P?B++:j++,I>P?z++:j++;var N=k-(c=3<=D?1:0)+h,F=L-(d=3<=B?1:0)+h,H=I-(u=3<=z?1:0)+h,G=P-(f=3<=j?1:0)+h,U=k-(m=2<=D?1:0)+2*h,W=L-(g=2<=B?1:0)+2*h,V=I-(y=2<=z?1:0)+2*h,K=P-(v=2<=j?1:0)+2*h,Y=k-(w=1<=D?1:0)+3*h,Z=L-(b=1<=B?1:0)+3*h,q=I-(x=1<=z?1:0)+3*h,X=P-(S=1<=j?1:0)+3*h,J=k-1+4*h,$=L-1+4*h,Q=I-1+4*h,ee=P-1+4*h,te=255&O,ie=255&C,ne=255&E,re=255&A,ae=.6-k*k-L*L-I*I-P*P;if(0>ae)r=0;else{var se=M[te+M[ie+M[ne+M[re]]]]%32*4;r=(ae*=ae)*ae*(T[se]*k+T[se+1]*L+T[se+2]*I+T[se+3]*P)}var oe=.6-N*N-F*F-H*H-G*G;if(0>oe)a=0;else{var le=M[te+c+M[ie+d+M[ne+u+M[re+f]]]]%32*4;a=(oe*=oe)*oe*(T[le]*N+T[le+1]*F+T[le+2]*H+T[le+3]*G)}var ce=.6-U*U-W*W-V*V-K*K;if(0>ce)s=0;else{var de=M[te+m+M[ie+g+M[ne+y+M[re+v]]]]%32*4;s=(ce*=ce)*ce*(T[de]*U+T[de+1]*W+T[de+2]*V+T[de+3]*K)}var pe=.6-Y*Y-Z*Z-q*q-X*X;if(0>pe)o=0;else{var he=M[te+w+M[ie+b+M[ne+x+M[re+S]]]]%32*4;o=(pe*=pe)*pe*(T[he]*Y+T[he+1]*Z+T[he+2]*q+T[he+3]*X)}var ue=.6-J*J-$*$-Q*Q-ee*ee;if(0>ue)l=0;else{var fe=M[te+1+M[ie+1+M[ne+1+M[re+1]]]]%32*4;l=(ue*=ue)*ue*(T[fe]*J+T[fe+1]*$+T[fe+2]*Q+T[fe+3]*ee)}return 27*(r+a+s+o+l)}},r._buildPermutationTable=a,void 0!==(n=function(){return r}.call(t,i,t,e))&&(e.exports=n),t.SimplexNoise=r,e.exports=r}()},function(e,t){e.exports.easing={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},function(e,t,i){const n=i(13),r=i(3),a=i(2),s=i(1);var o,l;const c=[{stp:0,col:null},{stp:.5,col:null},{stp:1,col:null}];class d extends r.Object3D{static fromConfig(e,t){return new d(e.zoneSize,e.zoneSpeed,e.zoneRnd,e.zoneCol0,e.zoneCol1,e.zoneCol2,e.zoneHeight,t)}constructor(e,t,i,d,p,h,u,f){if(super(),this.isClient=!!f,this.randomEndPoint=!!i,this._size=a.limitMM(e||50,s.minZoneSize,s.maxZoneSize),this._height=a.limitMM(u||1e3,s.minZoneHeight,s.maxZoneHeight),this.circleSize=new r.Vector3,this.circlePosition=new r.Vector3,this.targetCircleSize=new r.Vector3,this.targetCirclePosition=new r.Vector3,this.circleShrinkSpeed=2.5*a.limitMM(t||1,s.minShrinkSpeed,s.maxShrinkSpeed),f){o||(o=(new r.TextureLoader).load(a.assetsUrl("/textures/zone_0.png"),e=>{e.wrapS=r.RepeatWrapping,e.wrapT=r.RepeatWrapping,e.minFilter=r.NearestFilter,e.magFilter=r.NearestFilter,e.repeat.set(20,20),e.needsUpdate=!0})),l||(l=new r.MeshBasicMaterial({color:"#ffffff",depthWrite:!1,flatShading:!1,map:o,vertexColors:r.VertexColors,side:r.DoubleSide,transparent:!0,opacity:.5})),c[0].col=new r.Color(d||n.zones.BR[0]),c[1].col=new r.Color(p||n.zone.BR[1]),c[2].col=new r.Color(h||n.zone.BR[2]);let e=new r.CylinderGeometry(1,1,1,32,32,!0);e.computeBoundingBox();let t=e.boundingBox,i=(new r.Vector3).subVectors(t.max,t.min),s=["a","b","c"],u=new r.Vector3,f=0;for(let n,r=0;r<c.length-1;r++){n=c[r+1].stp-c[r].stp;for(let a,o=0;o<e.faces.length;o++){a=e.faces[o];for(var m=0;3>m;m++)f=u.subVectors(e.vertices[a[s[m]]],t.min).divide(i).y,f=1-f,f>=c[r].stp&&f<=c[r+1].stp&&(a.vertexColors[m]=c[r].col.clone().lerp(c[r+1].col,(f-c[r].stp)/n))}}e.computeVertexNormals(!0),e.computeFaceNormals(),this.baseMesh=new r.Mesh(e,l)}this.reset(),f&&this.add(this.baseMesh)}animate(e){this.baseMesh&&this.baseMesh.material.map&&(this.baseMesh.material.map.offset.y+=3e-5*e)}update(e,t){if(this.isClient)this.shrinkTween&&this.shrinkTween.stop(),this.shrinkTween=new TWEEN.Tween(this.scale).to({x:t[2],z:t[3]},900).easing(TWEEN.Easing.Linear.None).start(),this.moveTween&&this.moveTween.stop(),this.moveTween=new TWEEN.Tween(this.position).to({x:t[0],z:t[1]},900).easing(TWEEN.Easing.Linear.None).start(),(0>=t[2]||0>=t[3])&&(this.visible=!1);else{if(0>=this.circleSize.x&&0>=this.circleSize.z)return;var i=(new r.Vector3).subVectors(this.targetCircleSize,this.circleSize).normalize(),n=(new r.Vector3).addVectors(this.circleSize,i.multiplyScalar(e*this.circleShrinkSpeed)),a=(new r.Vector3).subVectors(this.targetCirclePosition,this.circlePosition).normalize(),s=(new r.Vector3).addVectors(this.circlePosition,a.multiplyScalar(e*this.circleShrinkSpeed));this.setCircleSize(s,n)}}generateTargetCircle(){if(!this.randomEndPoint)return[0,0];var e=2*Math.random()*Math.PI,t=this._size/2*Math.sqrt(Math.random());return[t*Math.cos(e),t*Math.sin(e)]}setCircleSize(e,t){this.circlePosition=e,this.circleSize=t}setTargetCircle(e,t){this.targetCirclePosition=e,this.targetCircleSize=t}getData(){return[this.circlePosition.x,this.circlePosition.z,this.circleSize.x,this.circleSize.z]}reset(){if(this.isClient)this.scale.set(this._size,this._height,this._size),this.position.set(0,0,0),this.visible=!0;else{this.setCircleSize(new r.Vector3(0,0,0),new r.Vector3(this._size,this._height,this._size));var e=this.generateTargetCircle();this.setTargetCircle(new r.Vector3(e[0],0,e[1]),new r.Vector3(0,0,0))}}isOutside(e){return a.getDistance(e.x,e.z,this.circlePosition.x,this.circlePosition.z)>this.circleSize.x}}d.CONFIG_PROPS=["zoneSize","zoneSpeed","zoneRnd","zoneCol0","zoneCol1","zoneCol2","zoneHeight"],e.exports=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){__webpack_require__(33),console.warn=()=>{},console.info=()=>{};var canStore="undefined"!=typeof Storage;function deleteVal(e){canStore&&localStorage.removeItem(e)}window.saveVal=(e,t)=>{canStore&&localStorage.setItem(e,t)},window.getSavedVal=e=>canStore?localStorage.getItem(e):null;var userName=getSavedVal("krunker_username"),THREE=__webpack_require__(3);THREE.OBJLoader=__webpack_require__(56)(THREE),THREE.GLTFLoader=__webpack_require__(57)(THREE),THREE.GLTFExporter=__webpack_require__(146)(THREE),THREE.OBJExporter=__webpack_require__(147)(THREE),THREE.PointerLockControls=__webpack_require__(148)(THREE),THREE.Shaders=__webpack_require__(58)(THREE),__webpack_require__(149)(THREE);var UTILS=__webpack_require__(2),COLORS=__webpack_require__(13);const config=__webpack_require__(1);var SOUND=window.SOUND=new(__webpack_require__(64))(UTILS,config),API_CLIENT=__webpack_require__(65),ASSETS=new(__webpack_require__(30))(config),RENDER=new(__webpack_require__(54))(THREE,UTILS,COLORS,config,null,null,!0);const{initScene:initScene,regenSky:regenSky}=__webpack_require__(54),Terrain=__webpack_require__(82),SkyDome=__webpack_require__(55),Zone=__webpack_require__(85),WEAPONS=__webpack_require__(28),CLASSES=__webpack_require__(52),MODES=__webpack_require__(50),STORE=__webpack_require__(17),gameTemplates=__webpack_require__(150),Triggers=__webpack_require__(70);ObjectInstance=__webpack_require__(151);const Resizable=__webpack_require__(152);var GUI;const initEditorUI=__webpack_require__(66).init.editor;var tmpObj,account,prefabToPub,MIN_WIDTH=1920,MIN_HEIGHT=937;function toggleBake(e){e?KE.renderer.setClearColor(KE.renderer.oldClearColor):(KE.renderer.oldClearColor=KE.renderer.getClearColor(),KE.renderer.setClearColor("#FFFFFF"));for(var t=0;t<KE.objInsts.length;t++)(KE.objInsts[t].prefab.tool||KE.objInsts[t].prefab.fakeScale||KE.objInsts[t].prefab.noDetail||"BILLBOARD"==KE.objInsts[t].prefab.name||KE.objInsts[t].prefab.noBake)&&(!e&&(KE.objInsts[t].oldVisible=!!KE.objInsts[t].visible),e&&null!=KE.objInsts[t].oldVisible?(KE.objInsts[t].visible=KE.objInsts[t].oldVisible,delete KE.objInsts[t].oldVisible):KE.objInsts[t].visible=e),KE.objInsts[t].realHitbox&&(KE.objInsts[t].realHitbox.visible=e),KE.objInsts[t].arrowHelper&&(KE.objInsts[t].arrowHelper.visible=e),KE.objInsts[t].camHelper&&(KE.objInsts[t].camHelper.visible=e),KE.objInsts[t].boxShape&&(KE.objInsts[t].boxShape.visible=e)}const SimpleGI=function(e,t,i){function n(e,t,i,n){this.renderer=e,this.shader=t,this.orthoScene=new THREE.Scene,this.fbo=new THREE.WebGLRenderTarget(i,n,{wrapS:THREE.RepeatWrapping,wrapT:THREE.RepeatWrapping}),this.orthoCamera=new THREE.OrthographicCamera(i/-2,i/2,n/2,n/-2,1e-5,1e3),this.orthoQuad=new THREE.Mesh(new THREE.PlaneBufferGeometry(i,n),this.shader),this.orthoScene.add(this.orthoQuad),this.texture=this.fbo.texture}function r(n,r,a){const s=n.geometry,o=s.attributes,l=o.position.array,c=o.normal.array;if(void 0===o.color){const e=new Float32Array(l.length);s.setAttribute("color",new THREE.BufferAttribute(e,3))}const d=o.color.array;var p=Math.min(3*(r+a),l.length);if(3*r>=l.length)return!0;n.visible=!1;for(var h=3*r;h<p;h+=3){w.set(l[h],l[h+1],l[h+2]),w.applyMatrix4(n.matrixWorld),b.set(c[h],c[h+1],c[h+2]),b=b.applyMatrix3(n.normMatrix).normalize(),v.position.copy(w),v.lookAt(w.add(b)),t.setRenderTarget(f),t.render(i,v),g.render(),t.readRenderTargetPixels(g.fbo,0,0,1,1,x);var u=(x[0]/255+x[1]/255+x[2]/255)/3;u=Math.min(1,Math.max(e.bakeBright||0,u)).round(2),d[h]=u,d[h+1]=u,d[h+2]=u}return n.visible=!0,n.geometry.attributes.color.needsUpdate=!0,!1}var a=0,s=0,o=e.bakeBounces||2,l=0,c=0,d=[],p=[],h=Date.now();n.prototype.render=function(){this.renderer.setRenderTarget(this.fbo),this.renderer.render(this.orthoScene,this.orthoCamera),this.renderer.setRenderTarget(null)};const u=e.bakeRes||32;var f=new THREE.WebGLRenderTarget(u,u,{wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping,stencilBuffer:!1,depthBuffer:!0}),m=new THREE.RawShaderMaterial({uniforms:{tInput:{type:"t",value:f.texture}},vertexShader:"\n\t\t\tprecision highp float;\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\t\t\tuniform mat4 modelViewMatrix;\n\t\t\tuniform mat4 projectionMatrix;\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1. );\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D tInput;\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvec4 sum = vec4( 0. );\n\t\t\t\tfor( int y = 0; y < 32; y++ ){\n\t\t\t\t\tfor( int x = 0; x < 32; x++ ){\n\t\t\t\t\t\tvec2 uv = vec2( float( x ), float( y ) ) / 32.;\n\t\t\t\t\t\tvec4 c = texture2D( tInput, uv );\n\t\t\t\t\t\tsum += exp( c ) - 1.;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsum /= ( 32. * 32. );\n\t\t\t\tgl_FragColor = sum;\n\t\t\t}\n\t\t"}),g=new n(t,m,1,1);g.fbo.texture.minFilter=THREE.LinearMipMapLinearFilter,i.traverse((function(e){e&&e.visible&&"Object3D"==e.type&&e.defaultMesh&&("BoxBufferGeometry"==e.defaultMesh.geometry.type||"BufferGeometry"==e.defaultMesh.geometry.type)&&(!e.prefab||!(e.prefab.tool||e.prefab.fakeScale||e.prefab.noDetail||"BILLBOARD"==e.prefab.name||e.prefab.noBake))&&p.push(e.mesh?e.mesh:e.defaultMesh)})),p.forEach((function(e){e.updateMatrixWorld(),e.normMatrix=(new THREE.Matrix3).getNormalMatrix(e.matrixWorld);var t=new THREE.Color(10592673);e.orgGeo=e.geometry,e.geometry=e.geometry.clone(),e.orgMat=e.material,e.material=function(e){return e=e||{},new THREE.RawShaderMaterial({uniforms:{uCheck:{type:"f",value:0},uColor:{type:"c",value:e.color}},vertexShader:"\n\t\t\t\tprecision highp float;\n\t\t\t\tattribute vec3 position;\n\t\t\t\tattribute vec3 normal;\n\t\t\t\tattribute vec3 color;\n\t\t\t\tuniform mat4 modelViewMatrix;\n\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\tuniform mat3 normalMatrix;\n\t\t\t\tuniform float uCheck;\n\t\t\t\tvarying vec3 vColor;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1. );\n\t\t\t\t\tfloat d = dot( normalize( normalMatrix * normal ), normalize( -mvPosition.xyz ) );\n\t\t\t\t\tvColor = color;\n\t\t\t\t\tif( uCheck == 1. && d < 0. ) vColor = vec3( 0. );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\tprecision highp float;\n\t\t\t\tuniform vec3 uColor;\n\t\t\t\tvarying vec3 vColor;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = vec4( uColor * vColor, 1. );\n\t\t\t\t}\n\t\t\t",side:THREE.DoubleSide})}({color:t});var i=e.geometry.attributes.position.count;d.push({from:c,to:c+i,length:i,mesh:e}),c+=i}));var y=p.map((function(e){return e.material.uniforms.uColor.value.clone()}));t.autoClear=!0,toggleBake(!1);const v=new THREE.PerspectiveCamera(e.bakeFov||120,1,.1,e.bakeFalloff||500),w=new THREE.Vector3;var b=new THREE.Vector3;const x=new Uint8Array(4);requestAnimationFrame((function e(){if(KE.bakeProgress((l/o*100).round(1),(a/c*100).round(1)),0==l&&p.forEach((function(e){e.material.uniforms.uColor.value.set(0),e.material.uniforms.uCheck.value=1})),d.forEach((function(e){a>=e.from&&a<e.to&&(r(e.mesh,a-e.from,40),a+=Math.min(e.to-a,40))})),a>=c&&(p.forEach((function(e){e.geometry.attributes.color&&(e.geometry.attributes.color.needsUpdate=!0)})),l++,a=0),p.forEach((function(e,t){e.material.uniforms.uColor.value.copy(y[t]),e.material.uniforms.uCheck.value=0})),l>=o){KE.bakeProgress(100,100),t.autoClear=!1;var i={},n=0;p.forEach((function(e){if(e.material=e.orgMat,geo=e.geometry,geo.attributes.color){var t=UTILS.getMeshGroupIndex(e.parent.getMeshIndex())||"default_0";i[t]||(i[t]=[]);var r=geo.attributes.color.array;n+=geo.attributes.color.count;for(var a=0;a<r.length;a+=3){var o=i[t][i[t].length-1];if(tmpV=((r[a]+r[a+1]+r[a+2])/3).round(2),1==tmpV)"string"!=typeof o&&1<=o?i[t][i[t].length-1]++:i[t].push(1);else{s++;var l=o&&"string"==typeof o?i[t][i[t].length-2]:o;if(tmpV!=l)i[t].push(tmpV);else if("string"==typeof o){var c="$"+(parseInt(o.replace("$",""))+1);i[t][i[t].length-1]=c}else i[t].push("$1")}}}})),console.log("Recorded Length "+n),i=(i=(i=(i=JSON.stringify(i)).replaceAll("0.",".")).replaceAll(",.",".")).replaceAll('"$',"$");var u=UTILS.estKBytes(i);window.giInfoPop(u,Date.now()-h,c,s),saveString(i,KE.mapConfig.name+"_lm.txt"),saveVal("lightmap",i),toggleBake(!0),KE.objInsts.length&&KE.attachTransform(KE.objInsts[0].boundingMesh)}else requestAnimationFrame(e)}))};function stopBubbling(e){e.stopPropagation(),e.cancelBubble=!0}function textureListResp(e,t){try{t&&assetTList&&windows[6].assetsLoaded(t.data,t.index||0,t.error)}catch(t){}}function soundListResp(e,t){try{t&&assetSList&&windows[8].assetsLoaded(t.data,t.index||0,t.error)}catch(t){}}function assetListResp(e,t){try{t&&assetList&&windows[1].assetsLoaded(t.data,t.index||0,t.error)}catch(t){}}function modListResp(e,t){try{t&&modList&&windows[4].modsLoaded(t.data,t.index||0,t.error)}catch(t){}}function searchResp(e,t){t&&windows[3==t.index?4:t.index].searchResp(t.data)}function searchRespA(e,t){t&&windows[1].searchResp(t.data)}function searchRespT(e,t){t&&windows[6].searchResp(t.data)}function searchRespS(e,t){t&&windows[8].searchResp(t.data)}function getCardsList(e,t,i){for(var n,r="",a=0;a<e.length;++a){n={};try{n=JSON.parse(e[a].dat)}catch(t){}var s=-1;if(e[a]&&e[a].ini){var o=0,l=new Date(e[a].ini);l&&(o=Date.now()-(l.getTime()||0)),s=o/864e5}t=t||0;var c=parseInt(t);n.d&&(c=3),n.x&&10!=t&&(c=4),n.u&&(c=5);var d=e[a].id+(3>c?Object.keys(n).join(""):"");i&&-1==i.indexOf(c)||(r+=`<div class='mapListItem'>\n            ${0<=s&&7>=s?"<div class='mapAgeD' style='background-color:#E040FB'>NEW</div>":""}\n            ${n.u?"<span class='material-icons testSound' onclick='testSound("+e[a].id+")'>play_arrow</span>":""}\n            <div class='mapListThumbHolder'>\n                <img class='mapListThumb' loading='lazy' src='${n&&n.t?`https://user-assets.krunker.io/${e[a].id}/thumb.png`:"./img/noimg.png"}'\n                    onerror='this.onerror=null;this.src="./img/noimg.png;"' onclick='KE.selectAsset("${d}",${c})'/>\n\t\t\t\t<div class='assetText' style='top:4px'>${n.u?"Sound":n.d?"Prefab":n.x?"Texture":"Model"}</div>\n\t\t\t\t<div class='assetText'>${e[a].siz||0}\n\t\t\t\t\t<span style='color: rgba(255,255,255,0.6);'>kb</span>\n\t\t\t\t</div>\n            </div>\n            <div style='margin-top:1px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;'>\n                <a href='javascript:;' onclick='KE.selectAsset("${d}",${c})'/>${e[a].nm}</a>\n            </div>\n            <div style='margin-top:1px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;font-size: 14px;'>\n\t\t\t\t${config.assetCat[e[a].cat||0]}\n\t\t\t</div>\n\t\t\t<div style='display: flex'>\n                <span style='color:rgba(0,0,0,0.2);font-size:15px'> by\n                    <a target='_blank' class='grey' href='/social.html?p=profile&q=${UTILS.cleanseString(e[a].plrn)}'>${e[a].plrn}</a>\n                </span>\n            </div>\n        </div>`)}return r}function getModsList(e){for(var t,i="",n=0;n<e.length;++n){if(t=-1,e[n]&&e[n].mod_date){var r=0,a=new Date(e[n].mod_date);a&&(r=Date.now()-(a.getTime()||0)),t=r/864e5}var s={};try{s=JSON.parse(e[n].mod_info)}catch(t){}"ua"==e[n].mod_url&&(e[n].mod_url="https://user-assets.krunker.io/md"+e[n].mod_id+"/mod.zip"),i+=`<div class='mapListItem'>\n            ${0<=t&&7>=t?"<div class='mapAgeD' style='background-color:#E040FB'>NEW</div>":""}\n            <div class='mapListThumbHolder'>\n                <img class='mapListThumb' loading='lazy' src='${s&&s.t?"https://user-assets.krunker.io/md"+e[n].mod_id+"/thumb.png?v="+(e[n].mod_updatecounter||0):e[n].mod_image||"./img/noimg.png"}'\n                    onerror='this.onerror=null;this.src="./img/noimg.png;"' onclick='KE.selectMod("${e[n].mod_url}")'/>\n            </div>\n            <div style='margin-top:1px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;'>\n                <a href='javascript:;' onclick='KE.selectMod("${e[n].mod_url}")'/>${e[n].mod_name}</a>\n            </div>\n\t\t\t<div style='display: flex'>\n                <span style='color:rgba(0,0,0,0.2);font-size:15px'> by\n                    <a target='_blank' class='grey' href='/social.html?p=profile&q=${UTILS.cleanseString(e[n].creatorname)}'>${e[n].creatorname}</a>\n                </span>\n            </div>\n        </div>`}return i}window.mergeCols=function(){for(var e=KE.objInsts.filter(e=>e&&"CUBE"==e.prefab.name),t=0;t<e.length;++t){var i=new THREE.Color(e[t].color),n=new THREE.Color(e[t].emissive),r=(i=i.add(n)).getHex();e[t].color=r,e[t].emissive=0}},window.swapCols=function(e,t){UTILS.isNumber(e)&&(e=UTILS.stringifyColor(e)),e=e.toUpperCase(),UTILS.isNumber(t)&&(t=UTILS.stringifyColor(t)),t=t.toUpperCase(),KE.objInsts.forEach(i=>{if(i&&i.color){var n=i.color;UTILS.isNumber(n)&&(n=UTILS.stringifyColor(n)),(n=n.toUpperCase())==e&&(i.color=t)}})},window.openLink=function(e,t="_self"){this.event&&stopBubbling(this.event),window.open(e,t)},window.openPub=function(){this.event&&this.event.preventDefault(),stopBubbling(this.event),openLink("/social.html?p=maps&openPub","_blank")},window.testSound=function(e){this.event&&stopBubbling(this.event),SOUND.stopALL(),SOUND.play(e,1,!1,1,!0)},window.windows=[{header:"Controls",tabIndex:0,tabNames:["Default","Advanced"],width:"600px",switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,showWindow(1))},gen:function(){return`<div style='margin-bottom:15px'>${`<div class="windowHeader">\n                <div style="cursor: pointer; margin-right:5px"onclick="showWindow(3)">\n                    <i class="material-icons" style="font-weight:bold; transform:rotate(-135deg);">call_made</i>\n                </div>\n                <div>Controls</div>\n            </div>\n            <div class='menuTabsNew'>${this.tabNames.map((e,t)=>`<div class="menuTabNew ${this.tabIndex==t?" tabANew":""}" onclick="windows[0].switchTab(${t})">${e}</div>`).join("")}</div>`}</div>\n            <div class="windowBody">${GUI._window.controls[this.tabNames[this.tabIndex].toLowerCase()].gen()}</div>`}},{header:"Assets",tabIndex:0,listData:{},type:null,onlyShow:null,searchAssets:function(){searchResultsA.innerHTML="Loading...",API_CLIENT.searchAsset(asSrch.value,asCat.value,searchRespA)},searchResp:function(e){var t="";e.length?(t+="<div style='height:10px'></div>",t+=getCardsList(e,this.type,this.onlyShow)):t="No Assets found",document.getElementById("searchResultsA")&&(document.getElementById("searchResultsA").innerHTML=t)},assetsLoaded:function(e,t,i){if(assetList)if(this.listData[t].waiting=!1,e&&e.length)if(i)this.listData[t].dat||(assetList.innerHTML=i,this.listData[t]=null);else{var n=getCardsList(e,this.type,this.onlyShow);this.listData[t].dat=(this.listData[t].dat||"")+n,this.tabIndex==t&&showWindow(2)}else this.listData[t].dat||(assetList.innerHTML="No Assets found",this.listData[t]=null)},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,showWindow(2))},gen:function(){let e=`<div class="windowHeader">\n                <div style='display: block;'>Assets <div class='publishAsset' onclick='openPub()'>Publish</div></div>\n            </div>\n            <div class='menuTabsNew'>\n                ${config.assetTabs.map((e,t)=>`<div class="menuTabNew ${this.tabIndex==t?" tabANew":""}" onclick="windows[1].switchTab(${t})">${e.n}</div>`).join("")}\n            </div>`;var t="";if(config.assetTabs[this.tabIndex].search){t="<input type='text' id='asSrch' class='smlInput' placeholder='Asset Name' onkeydown='if(window.event.keyCode==13)windows[1].searchAssets()' />",t+="<select id='asCat'><option value='-1'>All</option>";for(var i=0;i<config.assetCat.length;i++)t+="<option value='"+i+"'>"+config.assetCat[i]+"</option>";t+="</select>",t+="<div class='searchBtn' onclick='windows[1].searchAssets()'>Search</div><div style='color:rgba(0,0,0,0.5);margin-top:10px' id='searchResultsA'></div>"}else this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(t=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting?t+="<div class='loadMoreW'>Loading...</div>":this.listData[this.tabIndex]=null):t="<div class='loadMoreW'>Loading...</div>":(t="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},API_CLIENT.listAssets(this.tabIndex,0,userName,-1,assetListResp));return`<div style='margin-bottom:15px'>${e}</div>\n            <div style='color:rgba(0,0,0,0.3)' id='assetList'>${t}</div>`}},{header:"Settings",tabIndex:0,tabNames:["General","Display","Object","Quick GUI"],width:"600px",switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,showWindow(3))},gen:function(){return`<div style='margin-bottom:15px'>${`<div class="windowHeader"><div>Settings</div>\n            <div style="cursor:pointer;margin-top:5px;font-size:14px;float:right;color:#FFF;user-select:none" onclick="KE.advancedOptions.reset()">Reset All</div>\n            </div><div class='menuTabsNew'>\n            ${this.tabNames.map((e,t)=>`<div class="menuShortTabNew ${this.tabIndex==t?" tabANew":""}" onclick="windows[2].switchTab(${t})">${e}</div>`).join("")}</div>`}</div>\n            <div class="windowBody">${GUI._window.settings[this.tabNames[this.tabIndex].replace(/ /g,"").toLowerCase()].gen()}</div>`}},{header:"Quick Add",hideScroll:!1,editMode:!1,currBtns:null,toggleEditMode:function(){this.editMode=!this.editMode,showWindow(4)},clickButton:function(e){let t=windows[3].currBtns;t[e].cust?showWindow(2):t[e].place?(KE.createPlaceholder(),closeWindow()):(KE.createObjects[t[e].item](),closeWindow())},changeButton:function(e){let t=KE.settings.quickAddButtons;t[this.custButtonIndex]=e,delete this.custButtonIndex,KE.setSettings("quickAddButtons",t),showWindow(4)},deleteButton:function(e){let t=KE.settings.quickAddButtons;t[e].type="blank",KE.setSettings("quickAddButtons",t),showWindow(4)},showCustomize:function(e){this.custButtonIndex=e,showWindow(6)},search:function(){var e=document.getElementById("quickSearch");if(buttonGrid.innerHTML=windows[3].genGrid(e&&""!=e.value?e.value:null),window.event&&13==window.event.keyCode&&windows[3].currBtns.length)return windows[3].clickButton(0)},genGrid:function(e){return windows[3].currBtns=[],e?(e=e.toLowerCase(),ASSETS.prefabs.filter(t=>-1!=UTILS.formatConstName(t.name).toLowerCase().indexOf(e)).sort((e,t)=>e.name.length-t.name.length).forEach(e=>{windows[3].currBtns.push({name:UTILS.formatConstName(e.name),desc:"",item:e.id,size:.5})})):windows[3].currBtns=KE.settings.quickAddButtons,windows[3].currBtns.map((e,t)=>"blank"!=e.type||this.editMode?"<div class='quickAddButton'><div class='previewDesc' onclick='windows[3]."+(this.editMode?`showCustomize(${t})`:`clickButton(${t})`)+"'><div>"+(this.editMode?"Click to change item":e.desc||"Click to add")+"</div></div><div class='previewDeleteIcon'"+(this.editMode&&"blank"!=e.type?"":"style='display:none'")+`onclick='windows[3].deleteButton(${t})'><i class='material-icons'>delete_forever</i></div><div class='previewImg'`+("blank"==e.type?"":`style='background-size:${100*(e.cust?.8:.5)}%;background-image:url(img/${e.name.replace(/ /g,"").toLowerCase()}.png)'`)+"><div "+("blank"==e.type?"style='margin-top:50%;transform:translateY(-50%)'":"")+">"+("blank"==e.type?"<i class='material-icons' style='font-size:65px;color:#FFF'>add</i>":e.name)+"</div></div></div>":"").join("\n")},gen:function(){return"<div class='windowHeader'><div>Quick Add</div><input type='text' id='quickSearch' class='smlInput' placeholder='Search' onkeyup='windows[3].search()'><div style='cursor:pointer;margin-top:5px;font-size:14px;float:right;color:#FFF;user-select:none' onclick='windows[3].toggleEditMode()'>"+(this.editMode?"Done":"Customize")+"</div></div><div class='windowBody'><div id='buttonGrid' class='buttonGrid'>"+windows[3].genGrid()+"</div></div>"}},{header:"Mods",tabIndex:0,listData:{},searchMods:function(){searchResultsM.innerHTML="Loading...",API_CLIENT.searchMod(mSrch.value,searchResp)},searchResp:function(e){var t="";e.length?(t+="<div style='height:10px'></div>",t+=getModsList(e)):t="No Mods found",document.getElementById("searchResultsM")&&(document.getElementById("searchResultsM").innerHTML=t)},loadMore:function(e){this.listData[this.tabIndex].waiting||(e&&(e.className="loadMoreW",e.innerHTML="Loading..."),this.listData[this.tabIndex].waiting=!0,this.listData[this.tabIndex].loadInd+=1,API_CLIENT.listMods(this.tabIndex,this.listData[this.tabIndex].loadInd,account?account.id:null,modListResp))},modsLoaded:function(e,t,i){if(modList)if(this.listData[t].waiting=!1,e&&e.length)if(i)this.listData[t].dat||(modList.innerHTML=i,this.listData[t]=null);else{var n=getModsList(e);this.listData[t].dat=(this.listData[t].dat||"")+n,this.tabIndex==t&&showWindow(5)}else this.listData[t].dat||(modList.innerHTML="No Mods found",this.listData[t]=null)},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,showWindow(5))},gen:function(){let e=`<div class="windowHeader">\n                <div>Mods</div>\n            </div>\n            <div class='menuTabsNew'>\n                ${config.modTabs.map((e,t)=>e.sendID?"":`<div class="menuTabNew ${this.tabIndex==t?" tabANew":""}" onclick="windows[4].switchTab(${t})">${e.n}</div>`).join("")}\n            </div>`;var t="";return config.modTabs[this.tabIndex].search?(t="<input type='text' id='mSrch' style='width: 847px;' class='smlInput' placeholder='Mod Name' onkeydown='if(window.event.keyCode==13)windows[4].searchMods()' />",t+="<div class='searchBtn' onclick='windows[4].searchMods()'>Search</div><div style='color:rgba(0,0,0,0.5);margin-top:10px' id='searchResultsM'></div>"):this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(t=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting?t+="<div class='loadMoreW'>Loading...</div>":this.listData[this.tabIndex]=null):t="<div class='loadMoreW'>Loading...</div>":(t="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},API_CLIENT.listMods(this.tabIndex,0,account?account.id:null,modListResp)),`<div style='margin-bottom:15px'>${e}</div>\n            <div style='color:rgba(0,0,0,0.3)' id='modList'>${t}</div>`}},{header:"Quick Add Customize",width:"600px",gen:function(){return"<div style='margin-bottom:15px'><div class='windowHeader'><div style='cursor: pointer; margin-right:5px'onclick='showWindow(4)'><i class='material-icons' style='font-weight:bold; transform:rotate(-135deg);'>call_made</i></div><div>Quick Add Customize</div></div></div><div class='windowBody'>"+GUI._window.quickaddcust.gen()+"</div>"}},{header:"Textures",tabIndex:0,listData:{},type:null,searchAssets:function(){searchResultsT.innerHTML="Loading...",API_CLIENT.searchAsset(astSrch.value,16,searchRespT)},searchResp:function(e){var t="";e.length?(t+="<div style='height:10px'></div>",t+=getCardsList(e,this.type)):t="No Textures found",document.getElementById("searchResultsT")&&(document.getElementById("searchResultsT").innerHTML=t)},assetsLoaded:function(e,t,i){if(assetTList)if(this.listData[t].waiting=!1,e&&e.length)if(i)this.listData[t].dat||(assetTList.innerHTML=i,this.listData[t]=null);else{var n=getCardsList(e,this.type);this.listData[t].dat=(this.listData[t].dat||"")+n,this.tabIndex==t&&showWindow(7)}else this.listData[t].dat||(assetTList.innerHTML="No Textures found",this.listData[t]=null)},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,showWindow(7))},gen:function(e){this.type=e;let t=`<div class="windowHeader">\n                <div style='display: block;'>Textures <div class='publishAsset' onclick='openPub()'>Publish</div></div>\n            </div>\n            <div class='menuTabsNew'>\n                ${config.assetTabs.map((e,t)=>`<div class="menuTabNew ${this.tabIndex==t?" tabANew":""}" onclick="windows[6].switchTab(${t})">${1==t?"My Textures":e.n}</div>`).join("")}\n            </div>`;var i="";return config.assetTabs[this.tabIndex].search?(i="<input type='text' id='astSrch' class='smlInput' placeholder='Texture Name' onkeydown='if(window.event.keyCode==13)windows[6].searchAssets()' />",i+="<div class='searchBtn' onclick='windows[6].searchAssets()'>Search</div><div style='color:rgba(0,0,0,0.5);margin-top:10px' id='searchResultsT'></div>"):this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(i=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting?i+="<div class='loadMoreW'>Loading...</div>":this.listData[this.tabIndex]=null):i="<div class='loadMoreW'>Loading...</div>":(i="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},API_CLIENT.listAssets(this.tabIndex,0,userName,16,textureListResp)),`<div style='margin-bottom:15px'>${t}</div>\n            <div style='color:rgba(0,0,0,0.3)' id='assetTList'>${i}</div>`}},{header:"Welcome",gen:function(){return"<div style='text-align:center;font-size:30px;color:#fff;margin-bottom:20px'>Welcome to the Krunker Editor</div><div class='editInfoHol'><div class='editInfoI'><span class='material-icons' style='font-size:100px;'>emoji_objects</span><div></div>Concept</div><div class='editInfoI'><span class='material-icons' style='font-size:100px;'>build</span><div></div>Create</div><div class='editInfoI'><span class='material-icons' style='font-size:100px;'>local_atm</span><div></div>Earn</div></div><div id='intoTxt' style='color:rgba(255,255,255,0.7)'>The Krunker Editor allows you to create <b style='color:#fff'>Browser Games</b> quickly and easily to share with <b style='color:#fff'>millions of players</b>. <div style='height:20px'></div>Using Krunker as a Platform to Create & Publish your game, allows you to <b style='color:#fff'>bypass the hassle of hosting servers</b> or worrying about monetization. <div style='height:20px'></div>Publishing your Game is the first step to becoming a Krunker Partner and <b style='color:#fff'>earning money</b> from your Web Game:</div><div style='margin-top:20px;color:rgba(255,255,255,0.6)'>Game Templates<a style='float:right' onclick='showWindow(10);' class='popupLink'>View Templates</a></div><div style='margin-top:20px;color:rgba(255,255,255,0.6)'>Getting Started<a style='float:right' target='_blank' href='https://www.youtube.com/watch?v=Ewtb2rBvg9g' class='popupLink'>Watch Tutorial</a></div><div style='margin-top:20px;color:rgba(255,255,255,0.6)'>Tips & Tricks<a style='float:right' target='_blank' href='https://www.youtube.com/playlist?list=PL1hP2-b0IPSCsWF2BbSjsYR5mvJTUSI6g' class='popupLink'>Watch Video</a></div><div style='margin-top:20px;color:rgba(255,255,255,0.6)'>Game Creation Community<a style='float:right' target='_blank' href='https://discord.gg/Kfypyp5' class='popupLink'>Join Now!</a></div><div style='margin-top:20px;color:rgba(255,255,255,0.6)'>Documentation<a style='float:right' target='_blank' href='' class='popupLink'>Coming Soon</a></div></div>"}},{header:"Sounds",tabIndex:0,listData:{},type:null,searchAssets:function(){searchResultsS.innerHTML="Loading...",API_CLIENT.searchAsset(assSrch.value,17,searchRespS)},searchResp:function(e){var t="";e.length?(t+="<div style='height:10px'></div>",t+=getCardsList(e,this.type)):t="No Sounds found",document.getElementById("searchResultsS")&&(document.getElementById("searchResultsS").innerHTML=t)},assetsLoaded:function(e,t,i){if(assetSList)if(this.listData[t].waiting=!1,e&&e.length)if(i)this.listData[t].dat||(assetTList.innerHTML=i,this.listData[t]=null);else{var n=getCardsList(e,this.type);this.listData[t].dat=(this.listData[t].dat||"")+n,this.tabIndex==t&&showWindow(9,!1,this.type)}else this.listData[t].dat||(assetTList.innerHTML="No Sounds found",this.listData[t]=null)},switchTab:function(e){this.tabIndex!=e&&(this.tabIndex=e,showWindow(9,!1,this.type))},gen:function(e){this.type=e;let t=`<div class="windowHeader">\n                <div style='display: block;'>Sounds <div class='publishAsset' onclick='openPub()'>Publish</div></div>\n            </div>\n            <div class='menuTabsNew'>\n                ${config.assetTabs.map((e,t)=>`<div class="menuTabNew ${this.tabIndex==t?" tabANew":""}" onclick="windows[8].switchTab(${t})">${1==t?"My Sounds":e.n}</div>`).join("")}\n            </div>`;var i="";return config.assetTabs[this.tabIndex].search?(i="<input type='text' id='assSrch' class='smlInput' placeholder='Sound Name' onkeydown='if(window.event.keyCode==13)windows[8].searchAssets()' />",i+="<div class='searchBtn' onclick='windows[8].searchAssets()'>Search</div><div style='color:rgba(0,0,0,0.5);margin-top:10px' id='searchResultsS'></div>"):this.listData[this.tabIndex]?this.listData[this.tabIndex].dat?(i=this.listData[this.tabIndex].dat,this.listData[this.tabIndex].waiting?i+="<div class='loadMoreW'>Loading...</div>":this.listData[this.tabIndex]=null):i="<div class='loadMoreW'>Loading...</div>":(i="<div class='loadMoreW'>Loading...</div>",this.listData[this.tabIndex]={loadInd:0},API_CLIENT.listAssets(this.tabIndex,0,userName,17,soundListResp)),`<div style='margin-bottom:15px'>${t}</div>\n            <div style='color:rgba(0,0,0,0.3)' id='assetSList'>${i}</div>`}},{header:"Templates",gen:function(){var e="<div style='text-align:center;font-size:30px;color:#fff;margin-bottom:20px'>Select an Option to Start your Project</div><div class='editInfoHol'><div class='editInfoI edInfS' onclick='closeWindow();KE.importMap()'><span class='material-icons' style='font-size:100px;'>file_copy</span><div></div>Import</div><div class='editInfoI edInfS' onclick='closeWindow();KE.loadFile(`importMap`)'><span class='material-icons' style='font-size:100px;'>folder_open</span><div></div>Load</div><div class='editInfoI edInfS' onclick='closeWindow()'><span class='material-icons' style='font-size:100px;'>create_new_folder</span><div></div>New</div><div class='editInfoI edInfS' onclick='showWindow(8)'><span class='material-icons' style='font-size:100px;'>menu_book</span><div></div>Guide</div></div><div style='text-align:center;font-size:30px;color:#fff;margin-top:20px'>Basic Game Templates</div><div style='text-align:center;color:rgba(255,255,255,0.4);margin-bottom:20px;'>Use these templates to Quickstart your Project</div>";e+="<div class='editInfoHol'>";for(var t=0;t<gameTemplates.length;++t)e+="<div class='editInfoI' style='height:200px;vertical-align:top;background-size:cover;background-repeat:no-repeat;background-position:center;background-image:url(&quot;/img/templates/"+t+".png&quot;)' onclick='loadQuick("+t+")'><div class='editInfoT'>"+gameTemplates[t].name+"</div></div>";return e+="</div>"}}];var lastWindow=null;function popRes(e,t,i,n){var r;resetPops();var a=n||"center";"INFO"==e&&(popupContent.style.backgroundColor="#595959"),popupContent.style.display="block",popupContent.style.width="INFO"==e?"600px":"300px",t&&"object"==typeof t&&(t=t.join("<br>")),i&&"object"==typeof i&&(i=i.join("<br>")),r="SUCCESS"==e?"<div style='width:100%;text-align:center'><div><i class='material-icons' style='font-size:80px;color:#3be354!important;'>done</i></div><div style='text-align:"+a+";font-size:20px;color:rgba(255,255,255,0.5)'>"+(i||"Success!")+"</div></div>":"INFO"==e?"<div style='width:100%;text-align:center'><div><i class='material-icons' style='font-size:80px;color:rgba(255,255,255,0.9)!important;'>info</i></div><div style='text-align:"+a+";font-size:20px;color:rgba(255,255,255,0.9)'>"+(i||"Warning!")+"</div></div>":"<div style='width:100%;text-align:center'><div><i class='material-icons' style='font-size:80px;color:#e33b3b!important;'>clear</i></div><div style='text-align:"+a+";font-size:20px;color:rgba(255,255,255,0.5)'>"+(t||i18n.get("social.market.failed"))+"</div></div>",popupContent.innerHTML=r}function loadingPopup(e){resetPops(),popupContent.style.width="300px",popupContent.style.display="block",popupContent.innerHTML="<div style='width:100%;text-align:center'><div class='lds-ring sm'><div></div><div></div><div></div><div></div></div><div style='font-size:20px;color:rgba(255,255,255,0.5)'>"+e+"</div></div>"}function Editor(e){this.version=e,versionTxt.innerHTML="Krunker Editor v"+e+" - <span style='color:rgba(255,255,255,0.5)'> Yendis Entertainment</span>",this._listeners={},this.initialize()}Object.defineProperty(window,"showWindow",{writeable:!1,value:function(e,t,...i){!UTILS.isNumber(e)||0>e||(KE.toggleWindow(!1),KE.toggleMenu(!0),KE.toggle(!1),lastWindow=e-1,menuWindow.innerHTML=windows[e-1].gen?windows[e-1].gen(...i):windows[e-1].html,menuWindow.classList.toggle("stickyHeader",!!windows[e-1].sticky),menuWindow.style.overflowY=windows[e-1].hideScroll?"hidden":"auto",menuWindow.style.width=windows[e-1].width?windows[e-1].width:null,windowHeader.innerHTML=windows[e-1].header,KE.toggleWindow(!0))}}),Object.defineProperty(window,"closeWindow",{writeable:!1,value:function(){KE.toggleWindow(!1),KE.toggle(!0)}}),window.resetPops=function(){popupHolder.style.display="block",popupContent.style.display="none",popupContent.style.backgroundColor="rgba(0, 0, 0, 0.75)",alertPop.style.display="none"},window.clearPops=function(){popupHolder.style.display="none",alertPop.style.display="none"},window.giInfoPop=function(e,t,i,n){resetPops(),e=e.round(2),alertPop.style.display="block";var r="<div style='color:#fff;font-size:20px;position:relative;margin-bottom:15px;'>Baking Finished</div>";r+="<div style='font-size:20px;color:rgba(255,255,255,0.5)'>Vertices: <span style='float:right'>"+i+"</span></div>",r+="<div style='font-size:20px;color:rgba(255,255,255,0.5)'>Shaded: <span style='float:right'>"+n+"</span></div>",r+="<div style='font-size:20px;color:rgba(255,255,255,0.5)'>Lightmap size: <span style='float:right'>"+e+"kb</span>"+(500<e?"<span>Recommended size is 500kb or less</span>":"")+"</div>",r+="<div style='font-size:20px;color:rgba(255,255,255,0.5)'>Time: <span style='float:right'>"+UTILS.getReadableTime(t,!0)+"</span></div>",alertPop.innerHTML=r},Editor.prototype.on=function(e,t){(tmpObj=this._listeners[e])||(tmpObj=[]),-1===tmpObj.indexOf(t)&&tmpObj.push(t)},Editor.prototype.off=function(e,t){if(tmpObj=this._listeners[e]){var i=tmpObj.indexOf(t);-1!==i&&tmpObj.splice(i,1)}},Editor.prototype.dispatch=function(e,t){if(tmpObj=this._listeners[e])for(let e=0;e<tmpObj.length;e++)tmpObj[e].call(this,t)},Editor.prototype.initialize=function(){GUI=initEditorUI(this,THREE,UTILS,config,ASSETS,WEAPONS,CLASSES,MODES,Triggers),this.THREE=THREE,this.moveSprint=!1,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.transformOptionIds=["translateOption","rotateOption","scaleOption"],this.spaceOptionId="spaceOption",this.faceOptionId="faceOption",this.groupOptionId="groupOption",this.quickMenuId="canvasAdd",this.deleteOptionId="deleteOption",this.duplicateOptionId="duplicateOption",this.wireframeOptionId="wireframeOption",this.historyInterval=null,this.elemScale=1,this.xyzKeys=["X","Y","Z"],this.wasOpen={},this.stringifiedColors=["color","emissive","fcolor","bcolor"],this.basicConfigVal=["prefab","texturePrefab","texStretch","part","partC","partS","partSP","partG","partSC","partD","partB","boost","bounce","edgeNoise","team","single","weaponId","weaponReplace","randWep","poster","channel","node","momentum","ambient","hidden","closeable","startClosed","event","action","constant","fsize","fcolor","bcolor","text","backVisible","tAlign","cmpSpwn","classIndx","respawnT","respawnR","turnSpd","speed","interfaceId","interfaceT","withdraw","deposit","objectiveId","faces","showAd","wSpeed","wHeight","tilesX","tilesZ","fullcone","snd","vol","dist","roll","rate","emitfrom","mSize","spin","texSmooth","constantTxt","forceDir","constantEvent","dynamic","gravity","itemID","intensity","distance","decay","opn","canShoot","assetID","aiName","assetSound","visDis","deathSound","idleSound","atkSound","agroSound","canHit","xrayVis","frate","projType","rewardType","behaviorType","canDestroy","health","crouch","canTrigger","startDestroyed","canWallJump","chance","singleP","actionCost","spinAxis","actionMethod","selfDestruct","score","method","penetrable","movingSpeed","movingAxis","interfaceIdT","bakeAcc","teamOnly","frameCount","frameSpeed","forceTrans"],this.configVal=["pos","rot","size","texture","collidable","visible","color","emissive","opacity","direction","border","assetTexture","texOffX","texOffY","texRot","fog"].concat(this.basicConfigVal);for(let e of this.basicConfigVal)Object.defineProperty(ObjectInstance.prototype,e,{get(){return this["_"+e]},set(t){return this["_"+e]=t}});for(let e in this.faces=["Right","Left","Top","Bottom","Back","Front"],this.snappingEnabled=!0,this.transformType=0,this.transformSpace=0,this.enabled=!0,this.liquidVal=0,this.signCnt=0,this.aiCnt=0,this.interfaces={},this.undos=[],this.redos=[],this.objHistory=[],this.container=document.getElementById("container"),this.objInsts=[],this.boundingMeshes=[],this.lightConeAbuse=!0,this.objCount=[0,0,0,0],this.faceSelection=!1,this.groupSelection=!1,this.wireframe=!1,this.pendingGroup=[],this.defineDefaults(),this.highlightObject=null,this.backupInterval=null,this.copy=null,this.objGroups=[],this.rgbArrayToHex=e=>"#"+e.map(e=>e.toString(16).padStart(2,"0")).join(""),this.createObjects={},ASSETS.prefabs)this.createObjects[e]=()=>{if("CUSTOM_ASSET"==ASSETS.prefabs[e].name)this.viewAssets(0,[0,3]);else{var t=this.settings.createObjectNear?this.getNearPosition():[0,0,0];this.addObject(ObjectInstance.defaultFromType(e,t))}};this.clock=new THREE.Clock,this.resizable={restore:()=>{}},this.toggleMenu(!1),this.generateLists(),this.initSettings(),this.initRenderer(),this.initScene(),this.initGUI(),this.initQuickGUI(),this.initControls(),this.initHistory(),this.initAutoBackup(),this.registerEvents(),this.setSnapping(!0),this.checkEdit(),this.render()},Editor.prototype.defineDefaults=function(){this.scripts=[],this.mapConfig={name:"New Krunker Map",ambInd:1,ambIndC:0,modURL:"",welMsg:"",terrainSeed:"",terrainTSeed:"",terrainWidth:3e3,terrainHeight:3e3,terrainMntMlt:1,terrainMntCol:"#707070",terrainSnwCol:"#e8fdff",terrainGrsCol:"#5e692f",terrainDrtCol:"#7f6238",terrainSndCol:"#967f51",terrainEase:12,skyDome:!1,skyDomeCol0:COLORS.zones.sky[0],skyDomeCol1:COLORS.zones.sky[1],skyDomeCol2:COLORS.zones.sky[2],skyDomeEmis:"#000000",skyDomeTex:!1,skyDomeMovD:0,skyDomeMovT:0,zone:!1,zoneSize:500,zoneHeight:1e3,zoneSpeed:1,zoneRnd:!1,zoneCol0:COLORS.zones.BR[0],zoneCol1:COLORS.zones.BR[1],zoneCol2:COLORS.zones.BR[2],sizeMlt:2,shadowR:config.shadowRes,shadowD:config.shadowDst,ambient:"#97a0a8",ambientI:config.ambIntensity,light:"#f2f8fc",lightD:config.lightDistance,lightI:config.lightIntensity,sunAngX:config.sunAngleX,sunAngY:config.sunAngleY,sky:"#dce8ed",fog:"#8d9aa0",fogD:2e3,dthY:-100},this.defaultMapConfig={...this.mapConfig},this.serverConfig={modes:{},classes:{},settings:{},weps:{}},this.gameConfig={},this.objConfig={texture:"DEFAULT",color:"#FFFFFF",emissive:"#000000",opacity:1,part:0,collidable:!0,penetrable:!1,boost:0,edgeNoise:0,health:0,team:0,visible:!0}},Editor.prototype.selectPlayerType=function(){1==this.gameConfig.mdl?showWindow(7,!1,10):this.viewAssets(1,[1])},Editor.prototype.viewAssets=function(e,t){windows[1].type=e,windows[1].onlyShow=t,showWindow(2)},Editor.prototype.viewSounds=function(e){showWindow(9,!1,e)},Editor.prototype.getNearPosition=function(){let e=new THREE.Vector3(0,-5,-30);e.applyQuaternion(this.camera.getWorldQuaternion());let t=this.camera.getWorldPosition();return t.add(e.multiplyScalar(1)),[Math.round(t.x),Math.round(t.y),Math.round(t.z)]},Editor.prototype.selectAsset=function(e,t){if(closeWindow(),t)-1==t?this.transformControl.object&&(this.transformControl.object.userData.owner.assetID=e,this.updateObjConfigGUI(),this.transformControl.object.userData.owner.regenM()):3==t?fetch("https://user-assets.krunker.io/"+e+"/data.json",{cache:"no-cache"}).then(e=>e.json()).catch(()=>alert("Error loading Prefab")).then(e=>{if(!e)return alert("Error loading Prefab");if(!Array.isArray(e)&&e.map)return alert("Invalid Prefab");e.objects&&(e=e.objects);var t=this.settings.createObjectNear?this.getNearPosition():[0,0,0];this.replaceObject(this.fakeSelected(...t),JSON.stringify(e),!0,!1,!0)}):4==t?this.transformControl.object&&(this.transformControl.object.userData.owner.assetTexture=parseInt(e)||0,this.updateObjConfigGUI()):5==t?5==windows[8].type?(this.mapConfig.ambIndC=parseInt(e)||0,GUI.panel.right.environment.show()):this.transformControl.object&&(1==windows[8].type?this.transformControl.object.userData.owner.idleSound=parseInt(e)||0:2==windows[8].type?this.transformControl.object.userData.owner.deathSound=parseInt(e)||0:3==windows[8].type?this.transformControl.object.userData.owner.atkSound=parseInt(e)||0:4==windows[8].type?this.transformControl.object.userData.owner.agroSound=parseInt(e)||0:this.transformControl.object.userData.owner.assetSound=parseInt(e)||0,this.updateObjConfigGUI()):(this.gameConfig.aID=e,GUI.panel.state.refresh("panel_left_essential"));else{var i=this.settings.createObjectNear?this.getNearPosition():[0,0,0];this.addObject(new ObjectInstance({i:44,aid:e,p:i},!0))}},Editor.prototype.selectMod=function(e){closeWindow(),this.mapConfig.modURL=e,GUI.panel.state.refresh("panel_left_essential")},Editor.prototype.updateProgress=function(e){progress.style.display="block",progress.innerHTML="Loading "+e+"%",100<=e&&(progress.style.display="none")},Editor.prototype.bakeProgress=function(e,t){progress.style.display="block",progress.innerHTML="Bounces: "+e+"% | Samples: "+t+"%",100<=e&&(progress.style.display="none")},Editor.prototype.generateLists=function(){this.materialList={Default:0,Phong:1,Basic:2,Lambert:3},this.textureList={Default:"DEFAULT"};for(var e=0;e<ASSETS.textures.length;e++)"DEFAULT"!=(tmpObj=ASSETS.textures[e]).name&&(this.textureList[UTILS.formatConstName(tmpObj.name)]=tmpObj.name);this.blendingList={};for(e=0;e<config.particleBlending.length;e++)this.blendingList[UTILS.formatConstName(config.particleBlending[e])]=e;this.particleList={};for(e=0;e<config.particleIDS.length;e++)this.particleList[UTILS.formatConstName(config.particleIDS[e])]=e;this.soundsList={};for(e=0;e<config.emitterSounds.length;e++)this.soundsList[config.emitterSounds[e]]=e;this.EASE_LIST=Terrain.EASE_LIST,this.skinList={};var t;for(e=0;e<STORE.skins.length;e++)(t=STORE.skins[e]).type&&(4==t.type||5==t.type)||(this.skinList[t.name+" ["+this.getItemDesc(t)+"]"]=e)},Editor.prototype.getItemDesc=function(e){return 1==e.type?"Head":2==e.type?"Back":3==e.type?"Melee":6==e.type?"Waist":7==e.type?"Face":8==e.type?"Shoes":WEAPONS[e.weapon-1].name},Editor.prototype.flipXZ=function(e=null){(e=e||this.objectSelected())&&([e.scale.x,e.scale.z]=[e.scale.z,e.scale.x],this.updateObjConfigGUI())},Editor.prototype.initSettings=function(){this.defaultSettings=null,this.settings={degToRad:!1,antiAlias:!1,gridVisibility:!0,gridOpacity:.25,gridSize:250,gridSpacing:10,dbVisibility:!1,dbOpacity:.5,objectHighlight:!1,selectThroughInvis:!0,triggerCons:!0,mergeVoxels:!1,speedNormal:70,speedSprint:180,voxelSize:10,imageSize:1,imageDepth:1,imageCol:!0,assetAutoGroup:!0,preserveFolderState:!0,translationSnapping:1,rotationSnapping:1,scaleSnapping:1,autoBackup:0,quickGUI:!1,quickGUIOpen:1,resMltV:.6,createObjectNear:!1,pointerLock:!0,historyLimit:1e3,disableHistory:!1,disableWarnings:!1,showRealHitbox:!1,uiScale:1,borderVisuals:!0,fowardKey:String.fromCharCode(87),backwardKey:String.fromCharCode(83),leftKey:String.fromCharCode(65),rightKey:String.fromCharCode(68),upKey:String.fromCharCode(69),downKey:String.fromCharCode(81),faceModeKey:String.fromCharCode(77),groupModeKey:String.fromCharCode(78),wireframeKey:String.fromCharCode(188),quickAddButtons:UTILS.padArray([{name:"Cube",desc:"Basic building block",item:0},{name:"Spawn Point",desc:"Allows you to place where the player spawns",item:5},{name:"Custom Asset",desc:"Import community made assets",cust:!0},{name:"Placeholder",desc:"Stretch over objects to form a group",place:!0}],{type:"blank"},8),darkMode:!0},this.defaultSettings=JSON.parse(JSON.stringify(this.settings));let e=window.getSavedVal("kro_editor");if(null!=e){try{JSON.parse(e)}catch(e){return}let t=JSON.parse(e);for(let e in t)this.settings[e]=t[e];ObjectInstance.showRealHitbox=this.settings.showRealHitbox,this.updateFaceSelection(),this.updateGroupSelection(),this.updateTheme(),this.updateBorderVisuals()}},Editor.prototype.updateTheme=function(){[...document.styleSheets].filter(e=>"dark"==e.title).forEach(e=>e.disabled=!this.settings.darkMode)},Editor.prototype.initRenderer=function(){this.renderer=new THREE.WebGLRenderer({precision:"mediump",powerPreference:"high-performance",antialias:!!this.settings.antiAlias,preserveDrawingBuffer:!0,alpha:!0}),this.renderer.setPixelRatio(.6*window.devicePixelRatio),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight),this.renderer.autoClear=!1,this.container.appendChild(this.renderer.domElement),this.raycaster=new THREE.Raycaster,this.mouse=new THREE.Vector2,this.setResMlt()},Editor.prototype.initScene=function(){this.scene=new THREE.Scene,this.backgroundScene=new THREE.Scene,this.backgroundScene.background=new THREE.Color(15790320),this.camera=new THREE.PerspectiveCamera(70,this.container.offsetWidth/this.container.offsetHeight,1,1e4),this.sun=new THREE.Mesh(new THREE.SphereGeometry(5,6,6),new THREE.MeshBasicMaterial({color:16711680,wireframe:!0,transparent:!0})),this.sun.scale.set(4,4,4),this.scene.add(this.sun),initScene.apply(this,[this.mapConfig]),this.updateSun(),this.updateGridHelper(),this.updateDeathBarrier()},Editor.prototype.updateSun=function(){var e=Math.PI*(this.mapConfig.sunAngY/-180),t=Math.PI*(this.mapConfig.sunAngX/-180);this.skyLight.position.x=this.mapConfig.lightD*Math.cos(t),this.skyLight.position.y=this.mapConfig.lightD*Math.sin(t)*Math.sin(e),this.skyLight.position.z=this.mapConfig.lightD*Math.sin(t)*Math.cos(e),this.sun.position.copy(this.skyLight.position),this.sun.material.color.set(this.skyLight.color)};var PARTICLES=null;Editor.prototype.regenTerrain=function(){if(this.scene.remove(this.terrain),this.terrain=null,this.mapConfig.terrainSeed){if(this.terrain=Terrain.fromConfig(this.mapConfig),this.terrain.clutterMesh=new THREE.Mesh,this.terrain.add(this.terrain.clutterMesh),this.terrain.genObjs){for(var e in this.terrain.objPos)if(this.terrain.objPos.hasOwnProperty(e))for(var t=0;t<this.terrain.objPos[e].length;t++)ObjectInstance.addTerrObj(this.terrain.objPos[e][t],e,this.terrain,PARTICLES);this.terrain.objPos=null}this.terrain.rotation.x=-Math.PI/2,this.terrain.clutterMesh.rotation.x=Math.PI/2,this.scene.add(this.terrain)}},Editor.prototype.regenSky=function(){this.backgroundScene.remove(this.skyDome),this.skyDome=null,this.mapConfig.skyDome&&(this.skyDome=SkyDome.fromConfig(RENDER,this.mapConfig),this.backgroundScene.add(this.skyDome)),regenSky.apply(this,[this.mapConfig])},Editor.prototype.regenZone=function(){this.scene.remove(this.zone),this.zone=null,this.mapConfig.zone&&(this.zone=Zone.fromConfig(this.mapConfig,!0),this.scene.add(this.zone))},Editor.prototype.initGUI=function(){this.advancedOptions={rotation:0,json:()=>this.jsonInput(),file:()=>this.jsonInput(!0),textGen:()=>this.textToObjects(),create:()=>this.copyObjects(!1,!0),stop:()=>this.stopGroup(),stopAll:()=>this.stopGroup(!0),exportObj:()=>this.exportGroup(),copy:()=>this.objectSelected(!0)?this.copyGroup():this.copyObjects(),cut:()=>this.copyObjects(!0),paste:()=>this.pasteObjects(),texture:"DEFAULT",scaleMapX:1,scaleMapY:1,scaleMapZ:1,scaleMap:()=>this.scaleMap(),timelapseMS:500,timelapseFollow:!0,timelapseMap:()=>this.timelapseMap(),transformMap:()=>this.transformMap(),colorizeR:()=>this.colorizeMap(!1,!1,!0),colorizeG:()=>this.colorizeMap(!1,!0),colorizeI:()=>{let e=prompt("Input colors. (Seperate using a comma)","");null!=e&&""!=e&&this.colorizeMap(e)},voxelConvert:()=>this.convert(),voxelImport:()=>this.convert(!0),imageConvert:()=>this.convert(!1,!0),imageImport:()=>this.convert(!0,!0),editColor:()=>{let e=prompt("Input color","");null!=e&&""!=e&&this.editGroup("color",e)},editCustomKey:"",editCustomExec:_=>{let prmpt=prompt("Input value","");if(null!=prmpt&&""!=prmpt){try{var val=eval(prmpt)}catch(e){var val=prmpt}this.editGroup(this.advancedOptions.editCustomKey,val)}},reset:()=>{confirm("Are you sure you want to reset All settings?")&&this.resetSettings()},frameObject:()=>this.frameObject(),frameThickness:10,frameCeiling:!1,frameFloor:!1,reflectDir:0,reflectMap:()=>this.reflectObjects(),speedReset:()=>{confirm("Are you sure you want to reset All settings?")&&(this.setSettings(["speedNormal","speedSprint"],[70,180]),showWindow(1))},breakableHealth:1,breakableCollision:!1,breakableMap:()=>this.breakableMap(),plannerXDir:0,plannerYDir:0,plannerZDir:0,plannerXSpace:0,plannerYSpace:0,plannerZSpace:0,plannerSize:10,plannerColor:"#460050",plannerExecute:()=>this.layoutPlanner(),snappingReset:()=>{confirm("Are you sure you want to reset Snapping settings?")&&(this.setSettings(["translationSnapping","rotationSnapping","scaleSnapping"],[1,1,1]),showWindow(3),this.updateSnapping())},gridReset:()=>{confirm("Are you sure you want to reset Grid settings?")&&(this.setSettings(["gridOpacity","gridSize","gridSpacing","gridVisibility"],[this.defaultSettings.gridOpacity,this.defaultSettings.gridSize,this.defaultSettings.gridSpacing,this.defaultSettings.gridVisibility]),showWindow(3),this.updateGridHelper())},dbReset:()=>{confirm("Are you sure you want to reset Barrier settings?")&&(this.setSettings(["dbOpacity","dbVisibility"],[this.defaultSettings.dbOpacity,this.defaultSettings.dbVisibility]),showWindow(3),this.updateDeathBarrier())},objectPainter:!1,objectPainterJson:"",groupReflectDir:0,groupReflect:()=>this.reflectObjects(!0),drunkMap:()=>this.drunkMap(),selectMod:()=>showWindow(5),selectTexture:()=>showWindow(7),selectAudio:()=>showWindow(9),selectIdle:()=>this.viewSounds(1),selectDeath:()=>this.viewSounds(2),selectAttack:()=>this.viewSounds(3),selectAgro:()=>this.viewSounds(4),selectAmb:()=>this.viewSounds(5),selectModel:()=>this.viewAssets(-1,[-1]),selectAsset:()=>this.selectPlayerType(),togLightCones:()=>this.toggleLightCones(),colorRange:1500,mergeColors:()=>this.mergeColors(),bakeRes:32,bakeBounces:3,bakeFov:140,bakeFalloff:500,bakeBright:.3,bake:()=>this.bake(),optimizeFaces:()=>this.optimizeFaces(),subdivideVal:0,subdivideGroup:()=>this.subdivideGroup(),addScript:()=>this.addScript(),editScript:e=>this.editScript(e)},GUI._toolbar.show(),GUI.panel.left.essential.show(),GUI.panel.right.blank.show()};var scriptInd=0;Editor.prototype.addScript=function(){this.scripts.push({name:"Script #"+scriptInd,code:""}),GUI.panel.right.scriptList.show(),scriptInd++},Editor.prototype.editScript=function(e,t){"left"==t||"right"==t&&this.scripts[e]&&this.scripts.splice(e,1),GUI.panel.right.scriptList.show()},Editor.prototype.initQuickGUI=function(){this.quickGUI=QuickSettings.create(0,0,"Menu"),this.quickGUI.setCollapsible(!1),this.quickGUI.hide(),this.quickGUI.obj=null,this.quickGUI.addHTML("",""),this.quickGUI.setGlobalChangeHandler(()=>{}),this.quickGUI.setWidth(150),this.quickGUI._content.children[0].innerHTML=GUI._quicksettings.gen()},Editor.prototype.updateMouse=function(e,t,i){var n=e.getBoundingClientRect();this.mouse.set((t-n.left)/n.width*2-1,-(i-n.top)/n.height*2+1)},Editor.prototype.initControls=function(){if("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document){let e=this.renderer.domElement,t=()=>{this.controls.enabled=document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e},i=e=>{console.error("Pointer lock error.",e)};document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("pointerlockerror",i,!1),document.addEventListener("mozpointerlockerror",i,!1),document.addEventListener("webkitpointerlockerror",i,!1),e.addEventListener("mousedown",t=>{this.enabled?(3===t.which||2===t.button)&&(this.settings.pointerLock?(e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()):this.controls.enabled=!0):this.toggle(!0)},!1),e.addEventListener("mouseup",e=>{(3===e.which||3===e.button)&&(this.settings.pointerLock?document.exitPointerLock():this.controls.enabled=!1)}),e.addEventListener("mouseleave",e=>{(3===e.which||3===e.button)&&(this.controls.enabled=!1)})}else alert("Your browser does not support pointer lock.");document.addEventListener("keydown",e=>{this.isTyping(e)||!this.enabled||(16==e.keyCode&&(this.moveSprint=!0),(e.keyCode==this.settings.fowardKey.charCodeAt(0)||38==e.keyCode)&&(this.moveForward=!0),(e.keyCode==this.settings.backwardKey.charCodeAt(0)||40==e.keyCode)&&(this.moveBackward=!0),(e.keyCode==this.settings.leftKey.charCodeAt(0)||37==e.keyCode)&&(this.moveLeft=!0),(e.keyCode==this.settings.rightKey.charCodeAt(0)||39==e.keyCode)&&(this.moveRight=!0),e.keyCode==this.settings.upKey.charCodeAt(0)&&(this.moveUp=!0),e.keyCode==this.settings.downKey.charCodeAt(0)&&!e.ctrlKey&&(this.moveDown=!0),e.keyCode==this.settings.faceModeKey.charCodeAt(0)&&(this.faceSelection=!this.faceSelection,this.updateFaceSelection()),e.keyCode==this.settings.groupModeKey.charCodeAt(0)&&(this.groupSelection=!this.groupSelection,this.updateGroupSelection()),e.keyCode==this.settings.wireframeKey.charCodeAt(0)&&(this.wireframe=!this.wireframe,this.updateWireframe()))},!1),document.addEventListener("keyup",e=>{this.isTyping(e)||!this.enabled||(16==e.keyCode&&(this.moveSprint=!1),(e.keyCode==this.settings.fowardKey.charCodeAt(0)||38==e.keyCode)&&(this.moveForward=!1),(e.keyCode==this.settings.backwardKey.charCodeAt(0)||40==e.keyCode)&&(this.moveBackward=!1),(e.keyCode==this.settings.leftKey.charCodeAt(0)||37==e.keyCode)&&(this.moveLeft=!1),(e.keyCode==this.settings.rightKey.charCodeAt(0)||39==e.keyCode)&&(this.moveRight=!1),e.keyCode==this.settings.upKey.charCodeAt(0)&&(this.moveUp=!1),e.keyCode==this.settings.downKey.charCodeAt(0)&&!e.ctrlKey&&(this.moveDown=!1))},!1),this.controls=new THREE.PointerLockControls(this.camera),this.scene.add(this.controls.getObject()),this.controls.getObject().position.set(0,50,100),this.transformControl=new THREE.TransformControls(this.camera,this.renderer.domElement),this.transformControl.addEventListener("mouseUp",()=>{this.updateObjConfigGUI()}),this.scene.add(this.transformControl);for(let e=0;e<this.transformOptionIds.length;e++){let t=this.transformOptionIds[e];document.getElementById(t).addEventListener("click",()=>this.setTransformType(e))}this.setTransformType(0),document.getElementById(this.spaceOptionId).addEventListener("click",()=>this.setTransformSpace(0==this.transformSpace?1:0)),this.setTransformSpace(0),document.getElementById(this.faceOptionId).addEventListener("click",()=>{this.faceSelection=!this.faceSelection,this.updateFaceSelection()}),document.getElementById(this.groupOptionId).addEventListener("click",()=>{this.groupSelection=!this.groupSelection,this.updateGroupSelection()}),document.getElementById(this.quickMenuId).addEventListener("click",()=>{showWindow(4)}),document.getElementById(this.deleteOptionId).addEventListener("click",()=>{this.objectSelected(!0)?this.removeGroup():this.removeObject()}),document.getElementById(this.duplicateOptionId).addEventListener("click",()=>{this.objectSelected(!0)?this.duplicateGroup():this.duplicateObject()}),document.getElementById(this.wireframeOptionId).addEventListener("click",()=>{this.wireframe=!this.wireframe,this.updateWireframe()})},Editor.prototype.initAutoBackup=function(){if(this.backupInterval&&(clearInterval(this.backupInterval),this.backupInterval=null),0==this.settings.autoBackup)return;let e=6e4*this.settings.autoBackup,t=this;this.backupInterval=setInterval(()=>{if(0!=t.objInsts.length){let e=t.mapConfig.name;t.mapConfig.name=t.mapConfig.name+"_backup_"+Math.floor(Date.now()/1e3),t.exportMap(),t.mapConfig.name=e}},e)},Editor.prototype.initHistory=function(){if(this.settings.disableHistory)return;let e=this;this.historyInterval=setInterval(()=>{if(0!=e.settings.historyLimit)for(let t of e.objInsts){if(e.objHistory[t.uuid]){JSON.stringify(e.objHistory[t.uuid])!=JSON.stringify(t.serialize())&&e.addToHistory("update",t,e.objHistory[t.uuid])}e.objHistory[t.uuid]=t.serialize()}},1e3)},Editor.prototype.toggleHistory=function(e){e?this.disableHistory():this.initHistory()},Editor.prototype.disableHistory=function(){clearInterval(this.historyInterval),this.historyInterval=null,this.objHistory=[],this.undos.length=0,this.redos.length=0},Editor.prototype.addToHistory=function(e,t,i=null){("add"===e||"remove"===e||"update"===e)&&(this.undos.push({action:e,obj:t,history:i}),this.undos.length>this.settings.historyLimit&&this.undos.pop())},Editor.prototype.executeHistory=function(e="undo"){let t="undo"==e?this.undos.pop():this.redos.pop();if(t){switch(t.action){case"add":if("undo"==e){let e=this.objInsts.filter(e=>e.uuid==t.obj.uuid);delete this.objHistory[t.obj.uuid],this.removeObject(e[0],!1,!1),this.redos.push(t)}else this.addObject(t.obj,!1,!1);break;case"remove":"undo"==e?(this.addObject(t.obj,!1,!1),this.redos.push(t)):(delete this.objHistory[t.obj.uuid],this.removeObject(t.obj,!1,!1));break;case"update":"undo"==e&&this.redos.push(t);let i=this.objInsts.filter(e=>e.uuid==t.obj.uuid)[0],n=t.history;i.pos=n.p,i.size=n.s,i.rotation=n.r||[0,0,0],i.collidable=void 0===n.col&&void 0===n.l,i.penetrable=!!n.pe,i.texture=ASSETS.textures[n.t||0].name||"DEFAULT",i.boost=n.b||0,i.edgeNoise=n.en||0,i.health=n.h||n.hp||0,i.part=n.pr||0,i.team=n.tm||0,i.visible=void 0===n.v,i.terrain=n.ter||!1,i.color=null==n.c?"#FFFFFF":n.c,i.emissive=null==n.e?"#000000":n.e,i.opacity=null==n.o?1:n.o,i.direction=n.d||void 0,this.objHistory[t.obj.uuid]=i.serialize()}this.redos.length>this.settings.historyLimit&&this.redos.pop()}},Editor.prototype.connections={},Editor.prototype.checkConnections=function(){var e=Object.keys(this.connections);if(this.settings.triggerCons){for(var t=this.objInsts.filter(e=>0<e.interfaceId),i=this.objInsts.filter(e=>0<e.interfaceIdT),n=(e=Object.keys(this.connections),0);n<i.length;n++)for(o=0;o<t.length;o++)if(t[o].interfaceId==i[n].interfaceIdT&&t[o].uuid!=i[n].uuid){if(this.connections[t[o].uuid+","+i[n].uuid]){var r=e.indexOf(t[o].uuid+","+i[n].uuid);-1<r&&e.splice(r,1);continue}var a=new THREE.Geometry;a.vertices.push(i[n].boundingMesh.position,t[o].boundingMesh.position);var s=new THREE.Line(a,ObjectInstance.boundingLineBoxMaterial);this.scene.add(s),this.connections[t[o].uuid+","+i[n].uuid]=s}if(e.length)for(o=0;o<e.length;o++)this.scene.remove(this.connections[e[o]]),delete this.connections[e[o]]}else for(var o=0;o<e.length;o++)this.scene.remove(this.connections[e[o]]),delete this.connections[e[o]]},Editor.prototype.registerEvents=function(){window.addEventListener("keydown",e=>{if(27==e.keyCode)return window.closeWindow();if(!this.isTyping(e)&&this.enabled)switch(e.keyCode){case 49:this.setTransformType(0);break;case 50:this.setTransformType(1);break;case 51:this.setTransformType(2);break;case 192:this.setTransformSpace(0==this.transformSpace?1:0);break;case 8:case 46:this.objectSelected(!0)?this.removeGroup():this.removeObject();break;case 80:this.createPlaceholder();break;case 82:e.shiftKey&&(this.objectSelected(!0)?this.duplicateGroup():this.duplicateObject());break;case 67:e.ctrlKey?this.objectSelected(!0)?this.copyGroup():this.copyObjects():e.shiftKey&&(this.objectSelected(!0)?this.togglePropGroup("collidable"):this.toggleProp("collidable"));break;case 86:e.ctrlKey?this.pasteObjects():e.shiftKey&&(this.objectSelected(!0)?this.togglePropGroup("visible"):this.toggleProp("visible"));break;case 70:e.shiftKey?this.fixHitbox():this.flipXZ();break;case 71:if(e.shiftKey){if(e.altKey)return this.stopGroup(!0);this.objectSelected(!0)?this.stopGroup():this.copyObjects(!1,!0)}break;case 89:e.ctrlKey&&this.executeHistory("redo");break;case 90:e.ctrlKey&&this.executeHistory(e.shiftKey?"redo":"undo");break;case 88:window.showWindow(4);break;case 187:case 107:this.transformControl.setSize(this.transformControl.size+.1);break;case 189:case 109:this.transformControl.setSize(Math.max(this.transformControl.size-.1,.1))}}),this.resizable=new Resizable(this),window.addEventListener("resize",()=>{this.scaleUI()}),this.scaleUI();var e=[],t=0;this.container.addEventListener("dblclick",()=>{if(this.enabled&&!this.faceSelection&&!this.groupSelection&&(1===event.which||0===event.button)&&(this.updateMouse(this.container,event.clientX,event.clientY),this.raycaster.setFromCamera(this.mouse,this.camera),0<(e=this.raycaster.intersectObjects(this.getBoundingMeshes(event),!0)).length)){var i=new THREE.Box3,n=new THREE.Vector3,r=new THREE.Vector3,a=new THREE.Sphere;i.setFromObject(e[0].object),i.getCenter(n),t=i.getBoundingSphere(a).radius,r.set(0,0,1),r.applyQuaternion(this.camera.getWorldQuaternion()),r.multiplyScalar(2*t),this.controls.getObject().position.copy(n).add(r)}},!1),this.container.addEventListener("mousedown",()=>{if(this.enabled){this.quickGUI._hidden||this.quickGUI.hide();let n=this.settings.quickGUI&&event.which==this.settings.quickGUIOpen+2&&event.button==this.settings.quickGUIOpen+1;if(n||1===event.which||0===event.button)if(this.updateMouse(this.container,event.clientX,event.clientY),this.raycaster.setFromCamera(this.mouse,this.camera),0<(e=this.raycaster.intersectObjects(this.getBoundingMeshes(event),!0)).length)if(this.faceSelection&&e[0].object.userData.owner.prefab.editFaces){var t=Math.floor(e[0].faceIndex/2);e[0].object.userData.owner.faces[t]=!e[0].object.userData.owner.faces[t],e[0].object.userData.owner.regen(),this.updateObjConfigGUI()}else{if(this.groupSelection){var i=this.pendingGroup.indexOf(e[0].object.userData.owner.boundingMesh.uuid);-1<i?this.pendingGroup.splice(i,1):this.pendingGroup.push(e[0].object.userData.owner.boundingMesh.uuid),e[0].object.userData.owner.highlighted=!(-1<i)}n?this.updateQuickGUI(event,e[0].point.clone(),e[0].object):event.shiftKey&&this.advancedOptions.objectPainter&&0<this.advancedOptions.objectPainterJson.length?this.replaceObject(this.fakeSelected(e[0].point.x,e[0].point.y+.5,e[0].point.z),this.advancedOptions.objectPainterJson,!0,!0,this.settings.assetAutoGroup):this.attachTransform(e[0].object)}else this.hideTransform()}}),this.container.addEventListener("mousemove",()=>this.enabled?this.settings.objectHighlight?(this.updateMouse(this.container,event.clientX,event.clientY),this.raycaster.setFromCamera(this.mouse,this.camera),void(0<(e=this.raycaster.intersectObjects(this.getBoundingMeshes(event),!0)).length?this.setHighlight(e[0].object.userData.owner):(!this.quickGUI._hidden&&this.quickGUI.hide(),this.removeHighlight()))):this.removeHighlight():void 0);let i=this.moveSprint?this.settings.speedSprint:this.settings.speedNormal;var n=e=>{if(this.enabled){e=window.event||e;var t=new THREE.Vector3(0,0,0<e.wheelDelta?-1:1);return t.applyQuaternion(this.camera.getWorldQuaternion()),this.controls.getObject().position.add(t.multiplyScalar(i*(5*this.clock.getDelta()))),!1}};this.container.addEventListener("mousewheel",n,!1),this.container.addEventListener("DOMMouseScroll",n,!1),this.container.addEventListener("drop",()=>{event.preventDefault(),vignette.style.opacity=0;for(let e=0;e<event.dataTransfer.files.length;e++){let t=event.dataTransfer.files[e],i=new FileReader;i.onload=e=>{let t=e.target.result.match(/[^,]*,(.*)/)[1],i=window.atob(t);this.importMap(i)},i.readAsDataURL(t)}},!1),this.container.addEventListener("dragover",()=>{event.preventDefault(),vignette.style.opacity=1},!1),this.container.addEventListener("dragleave",()=>{event.preventDefault(),vignette.style.opacity=0},!1)},Editor.prototype.focusObject=function(e){var t=this.objInsts[e],i=new THREE.Box3,n=new THREE.Vector3,r=new THREE.Vector3,a=new THREE.Sphere;i.setFromObject(t),i.getCenter(n);var s=i.getBoundingSphere(a).radius;r.set(0,0,1),r.applyQuaternion(this.camera.getWorldQuaternion()),r.multiplyScalar(2*s),this.controls.getObject().position.copy(n).add(r)},Editor.prototype.getBoundingMeshes=function(e){return this.boundingMeshes.filter(t=>(!t.userData.owner.boxShape||1==t.userData.owner.boxShape.visible)&&(!(e.altKey&&this.settings.selectThroughInvis)||t.userData.owner.visible&&"PLACEHOLDER"!=t.userData.owner.objType))},Editor.prototype.updateFaceSelection=function(){let e=document.getElementById(this.faceOptionId);e.innerHTML="Face Selection: "+(this.faceSelection?"ON":"OFF"),e.style.backgroundColor=this.faceSelection?"rgba(0, 0, 0, 0.7)":null},Editor.prototype.updateWireframe=function(){let e=document.getElementById(this.wireframeOptionId);e.innerHTML="Wireframe: "+(this.wireframe?"ON":"OFF"),e.style.backgroundColor=this.wireframe?"rgba(0, 0, 0, 0.7)":null,ObjectInstance.forceWire=this.wireframe},Editor.prototype.updateGroupSelection=function(){let e=document.getElementById(this.groupOptionId);if(e.innerHTML="Group Selection: "+(this.groupSelection?"ON":"OFF"),e.style.backgroundColor=this.groupSelection?"rgba(0, 0, 0, 0.7)":null,!this.groupSelection&&this.pendingGroup.length){let e=[];for(let t of this.objInsts)if(-1<this.pendingGroup.indexOf(t.boundingMesh.uuid)){if(t.highlighted=!1,this.isGrouped(t.boundingMesh.uuid))return alert("You cant combine groups");e.push(t)}if(!e.length)return alert("Nothing to Group");this.createGroup(null,e,0,!1)}this.pendingGroup.length=0},Editor.prototype.updateBorderVisuals=function(){ObjectInstance.borderVisuals=this.settings.borderVisuals,this.objInsts.forEach(e=>{e.prefab.hasBorder&&(e.border=e.border)})},Editor.prototype.render=function(){let e=this.clock.getDelta();ObjectInstance.liquidVal+=1e3*e*.003;let t=new THREE.Vector3(0,0,0);if(this.moveForward&&(t.z-=1),this.moveBackward&&(t.z+=1),this.moveLeft&&(t.x-=1),this.moveRight&&(t.x+=1),this.moveUp&&(t.y+=1),this.moveDown&&(t.y-=1),this.moveForward||this.moveBackward||this.moveLeft||this.moveRight||this.moveUp||this.moveDown){let i=this.moveSprint?this.settings.speedSprint:this.settings.speedNormal;t.applyQuaternion(this.camera.getWorldQuaternion()),this.controls.getObject().position.add(t.multiplyScalar(i*e))}if(!this.exporting){for(let t of this.objInsts)t.update(1e3*e);for(let e in this.connections)this.connections[e].geometry.verticesNeedUpdate=!0}this.updateGroups(),RENDER.render(1e3*e,!0),this.renderer.clear(),this.renderer.setRenderTarget(null),this.skyDome&&(this.camera.getWorldPosition(this.skyDome.position),this.renderer.render(this.backgroundScene,this.camera),this.renderer.clearDepth()),this.renderer.render(this.scene,this.camera),this.transformControl.update(),requestAnimationFrame(()=>this.render())},Editor.prototype.warningCheck=function(e,t,i){this.settings.disableWarnings||("AI"==e?(this.aiCnt+=i,this.aiCnt>config.aiLimit?this.doWarning("ai",!0,"AI limit of "+config.aiLimit+" exceeded (Current: "+this.aiCnt+")"):this.doWarning("ai",!1)):"SIGN"==e?(this.signCnt+=i,this.signCnt>config.signLimit?this.doWarning("sign",!0,"Sign limit of "+config.signLimit+" exceeded (Current: "+this.signCnt+")"):this.doWarning("sign",!1)):"interface"==e?(this.interfaces[t.interfaceId]?this.interfaces[t.interfaceId]+=i:this.interfaces[t.interfaceId]=i,this.interfaces[t.interfaceId]>config.interfaceLimit?this.doWarning("interface_"+t.interfaceId,!0,"Interface limit of "+config.interfaceLimit+" exceeded [id:"+t.interfaceId+"] (Current: "+this.interfaces[t.interfaceId]+")"):this.doWarning("interface_"+t.interfaceId,!1)):"objects"==e&&(this.objCount[1]>config.objectColLimit?this.doWarning("objects_col",!0,"Collidable Object limit of "+config.objectColLimit+" exceeded (Current: "+this.objCount[1]+")"):this.doWarning("objects_col",!1),this.objCount[1]>config.objectColLimitF?this.doWarning("objectsF_col",!0,"Verified/Premium Collidable Object limit of "+config.objectColLimitF+" exceeded (Current: "+this.objCount[1]+")"):this.doWarning("objectsF_col",!1),this.objCount[2]>config.spawnLimit?this.doWarning("spawn",!0,"Spawn limit of "+config.spawnLimit+" exceeded (Current: "+this.objCount[2]+")"):this.doWarning("spawn",!1),this.objCount[3]>config.objectLimit?this.doWarning("objects",!0,"Object limit of "+config.objectLimit+" exceeded (Current: "+this.objCount[3]+")"):this.doWarning("objects",!1),this.objCount[3]>config.objectLimitF?this.doWarning("objectsF",!0,"Verified/Premium Object limit of "+config.objectLimitF+" exceeded (Current: "+this.objCount[3]+")"):this.doWarning("objectsF",!1)))},Editor.prototype.doWarning=function(e,t,i){var n=document.getElementById("warning_"+e);n&&!t&&n.parentElement.removeChild(n),!n&&t?chatList.insertAdjacentHTML("beforeend",`<div id='warning_${e}'><div class='chatItem'><i class='material-icons' style='color: #E85656;font-size: 20px;transform: translateY(-2px);'>warning</i><span class='chatMsg'>${i}</span></div></div>`):n&&t&&(n.firstChild.lastChild.innerText=i)},Editor.prototype.clearWarnings=function(){chatList.innerHTML=""},Editor.prototype.cntCheck=function(e){return e.prefab.noCol||!e.collidable?0:"SPAWN_POINT"==e.objType?2:1},Editor.prototype.addObject=function(e,t=!1,i=!0){if(!e.prefab.localOnly||!config.isProd){this.scene.add(e),this.objInsts.push(e);var n=this.cntCheck(e);this.objCount[n]++,2!=n&&this.objCount[3]++,this.updateObjectCount(),i&&this.addToHistory("add",e),"SIGN"==e.objType?this.warningCheck(e.objType,e,1):e.prefab.ai?this.warningCheck("AI",e,1):e.interfaceId&&this.warningCheck("interface",e,1),this.warningCheck("objects"),this.scene.add(e.boundingMesh),e.boxShape&&this.scene.add(e.boxShape),e.realHitbox&&this.scene.add(e.realHitbox),this.boundingMeshes.push(e.boundingMesh),e.arrowHelper&&this.scene.add(e.arrowHelper),e.camHelper&&(this.scene.add(e.camera),this.scene.add(e.camHelper)),this.dispatch("objectAdded",e),t||this.attachTransform(e.boundingMesh),t||this.checkConnections()}},Editor.prototype.removeObject=function(e,t=!1,i=!0){if(e=e?e.boundingMesh:this.transformControl.object){let r=e.userData.owner;this.objInsts.splice(this.objInsts.indexOf(r),1);var n=this.cntCheck(r);this.objCount[n]--,2!=n&&this.objCount[3]--,this.updateObjectCount(),this.scene.remove(r),this.boundingMeshes.splice(this.boundingMeshes.indexOf(e),1),this.scene.remove(e),r.boxShape&&this.scene.remove(r.boxShape),r.realHitbox&&this.scene.remove(r.realHitbox),r.arrowHelper&&this.scene.remove(r.arrowHelper),r.camHelper&&(this.scene.remove(r.camera),this.scene.remove(r.camHelper)),i&&this.addToHistory("remove",r),"SIGN"==r.objType?this.warningCheck(r.objType,r,-1):r.prefab.ai?this.warningCheck("AI",r,-1):r.interfaceId&&this.warningCheck("interface",r,-1),this.warningCheck("objects"),this.dispatch("objectRemoved",r),t||this.hideTransform(),t||this.checkConnections()}},Editor.prototype.duplicateObject=function(e=null){if(e=e||this.transformControl.object){let t=e.userData.owner.clone();this.addObject(t),this.attachTransform(t.boundingMesh)}};var colorIndexs=["e","c"],xyzIndexs=["s"];function save(e,t){var i=document.createElement("a");i.style.display="none",document.body.appendChild(i),i.href=URL.createObjectURL(e),i.download=t,i.click(),document.body.removeChild(i)}function saveString(e,t){save(new Blob([e],{type:"text/plain"}),t)}function saveArrayBuffer(e,t){save(new Blob([e],{type:"application/octet-stream"}),t)}function getBase64Image(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png")}Editor.prototype.getMapExport=function(e){let t=[],i=[],n=null,r=[],a=[],s=[],o=JSON.parse(JSON.stringify(this.serverConfig)),l=JSON.parse(JSON.stringify(this.gameConfig));for(let o of this.objInsts.filter(t=>e||!t.prefab.noExport))if("SPAWN_POINT"!==o.objType||e)if("CAMERA_POSITION"!==o.objType||e){for(var c=o.serialize(e),d=0;d<colorIndexs.length;d++)if(c[colorIndexs[d]]){c[colorIndexs[d]]=UTILS.stringifyColor(c[colorIndexs[d]]),0<=(p=r.indexOf(c[colorIndexs[d]]))?c[colorIndexs[d]+"i"]=p:(c[colorIndexs[d]+"i"]=r.length,r.push(c[colorIndexs[d]])),delete c[colorIndexs[d]]}for(d=0;d<xyzIndexs.length;d++)if(c[xyzIndexs[d]]){var p,h=c[xyzIndexs[d]].join(",");0<=(p=s.indexOf(h))?c[xyzIndexs[d]+"i"]=p:(c[xyzIndexs[d]+"i"]=s.length,s.push(h),a.push(...c[xyzIndexs[d]])),delete c[xyzIndexs[d]]}t.push(c)}else n=o.pos;else{var u=[o.pos[0],o.pos[1],o.pos[2],parseInt(o.team),0,0];o.direction&&(u[4]=parseInt(o.direction)),o.cmpSpwn&&(u[5]=1),o.teamOnly&&(u[6]=1),i.push(u)}for(d=0;d<MODES.length;d++)o.modes[d]=o.modes[d]?1:0,o.modes[d]||delete o.modes[d];o.modes=Object.keys(o.modes).map(e=>parseInt(e)),o.modes.length&&(1!=o.modes.length||0!=o.modes[0])||delete o.modes;for(d=0;d<CLASSES.length;d++)o.classes[d]=o.classes[d]?1:0,0==o.classes[d]&&delete o.classes[d];Object.keys(o.classes).length&&Object.keys(o.classes).length!=CLASSES.length?o.classes=Object.keys(o.classes).map(e=>parseInt(e)):delete o.classes;for(d=0;d<config.serverConfig.length;d++)(tmpObj=config.serverConfig[d]).cost||tmpObj.hideE||(o.settings[tmpObj.varN]=tmpObj.bool?o.settings[tmpObj.varN]?1:0:tmpObj.input?UTILS.sanitizeStr(o.settings[tmpObj.varN]):tmpObj.select?null==tmpObj.options[o.settings[tmpObj.varN]]?tmpObj.def:parseInt(o[tmpObj.varN]):parseFloat(o.settings[tmpObj.varN]),o.settings[tmpObj.varN]==tmpObj.def&&delete o.settings[tmpObj.varN]);Object.keys(o.settings).length||delete o.settings;for(var f=0;f<WEAPONS.length;f++){for(d=0;d<config.weaponConfig.length;d++)tmpObj=config.weaponConfig[d],null==WEAPONS[f][tmpObj.varN]||o.weps[f][tmpObj.varN]!=WEAPONS[f][tmpObj.varN]||delete o.weps[f][tmpObj.varN];Object.keys(o.weps[f]).length||delete o.weps[f]}Object.keys(o.weps).length||delete o.weps;for(d=0;d<config.gameConfig.length;d++)(tmpObj=config.gameConfig[d]).cost||(l[tmpObj.varN]=tmpObj.bool?l[tmpObj.varN]?1:0:tmpObj.input?UTILS.sanitizeStr(l[tmpObj.varN]):tmpObj.select?null==tmpObj.options[l[tmpObj.varN]]?tmpObj.def:parseInt(l[tmpObj.varN]):parseFloat(l[tmpObj.varN]),l[tmpObj.varN]==tmpObj.def&&delete l[tmpObj.varN]);let m={};for(var g in this.mapConfig)g.startsWith("zone")&&!this.mapConfig.zone||"zoneHeight"==g&&1e3==this.mapConfig[g]||(!g.startsWith("terrain")&&"sizeMlt"!=g||this.mapConfig.terrainSeed.length)&&(g.startsWith("skyDome")&&!this.mapConfig.skyDome||g.startsWith("skyDomeEmis")&&!this.mapConfig.skyDome||"skyDomeEmis"==g&&"#000000"==this.mapConfig[g]||"skyDomeMovT"==g&&0==this.mapConfig[g]||"skyDomeMovD"==g&&0==this.mapConfig[g]||("modURL"!=g||this.mapConfig[g].length)&&("welMsg"!=g||this.mapConfig[g].length)&&("shadowR"==g&&this.mapConfig[g]==config.shadowRes||"shadowD"==g&&this.mapConfig[g]==config.shadowDst||"ambInd"==g&&1==this.mapConfig[g]||("ambIndC"!=g||this.mapConfig[g])&&("dthY"==g&&-100==this.mapConfig[g]||"lightD"==g&&this.mapConfig[g]==config.lightDistance||"lightI"==g&&this.mapConfig[g]==config.lightIntensity||"ambientI"==g&&this.mapConfig[g]==config.ambIntensity||"sunAngX"==g&&this.mapConfig[g]==config.sunAngleX||"sunAngY"==g&&this.mapConfig[g]==config.sunAngleY||(("fogD"==g||"shadowD"==g)&&(this.mapConfig[g]=Math.round(this.mapConfig[g])),m[g]=this.mapConfig[g]))));let y={...m,...r.length?{colors:r}:{},...a.length?{xyz:a}:{},objects:t,...Object.keys(o).length?{config:o}:{},...Object.keys(l).length?{game:l}:{},...e?{}:n?{camPos:n}:{},...e?{}:{spawns:i}};return e?y:JSON.stringify(y)},Editor.prototype.exportMap=function(){var e=this.getMapExport();config.isProd&&(e=UTILS.compressKeys(e));var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",this.mapConfig.name+"_export"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},Editor.prototype.exportScene=function(){if(!this.objInsts.length)return alert("Nothing to Export");this.exporting=!0;var e=new THREE.GLTFExporter,t=new THREE.Scene;t.name=this.mapConfig.name;for(var i=0;i<this.objInsts.length;i++)this.objInsts[i].prefab.tool||(this.objInsts[i].prefab.hasBorder&&(this.objInsts[i].oldBorder=this.objInsts[i].border,this.objInsts[i].border=!1),this.objInsts[i].traverse((function(e){e instanceof THREE.Mesh&&e.material&&(e.oldMaterial=e.material,e.material=(new THREE.MeshLambertMaterial).copy(e.material))})),t.children.push(this.objInsts[i]));e.parse(t,(function(e){e instanceof ArrayBuffer?saveArrayBuffer(e,"map.glb"):saveString(JSON.stringify(e,null,2),"map.gltf");for(var t=0;t<KE.objInsts.length;t++)KE.objInsts[t].prefab.hasBorder&&null!=KE.objInsts[t].oldBorder&&(KE.objInsts[t].border=KE.objInsts[t].oldBorder),KE.objInsts[t].traverse((function(e){e instanceof THREE.Mesh&&e.material&&e.oldMaterial&&(e.material=e.oldMaterial,e.oldMaterial=null)}));KE.exporting=!1}),{onlyVisible:!0,trs:!0,embedImages:!0,includeCustomExtensions:!0})},Editor.prototype.exportScene2=function(){if(!this.objInsts.length)return alert("Nothing to Export");alert("Big maps can take a while"),this.exporting=!0;var e=new THREE.OBJExporter,t=new THREE.Scene;t.name=this.mapConfig.name;for(var i=0;i<this.objInsts.length;i++)this.objInsts[i].prefab.tool||this.objInsts[i].visible&&(this.objInsts[i].prefab.hasBorder&&(this.objInsts[i].oldBorder=this.objInsts[i].border,this.objInsts[i].border=!1),this.objInsts[i].traverse((function(e){e instanceof THREE.Mesh&&e.material&&(e.oldMaterial=e.material,e.material=(new THREE.MeshLambertMaterial).copy(e.material))})),t.children.push(this.objInsts[i]));var n=e.parse(t,this.mapConfig.name),r=new JSZip;if(r.file(this.mapConfig.name+".obj",n.obj),r.file(this.mapConfig.name+".mtl",n.mtl),n.img)for(var a in n.img){var s=getBase64Image(n.img[a]).replace("data:image/png;base64,","");r.file(a,s,{base64:!0})}r.generateAsync({type:"blob"}).then((function(e){save(e,KE.mapConfig.name+".zip")}));for(i=0;i<this.objInsts.length;i++)this.objInsts[i].prefab.hasBorder&&null!=this.objInsts[i].oldBorder&&(this.objInsts[i].border=this.objInsts[i].oldBorder),this.objInsts[i].traverse((function(e){e instanceof THREE.Mesh&&e.material&&e.oldMaterial&&(e.material=e.oldMaterial,e.oldMaterial=null)}));this.exporting=!1},Editor.prototype.publishMap=function(){window.saveVal("mapToPub",this.getMapExport()),window.open("/social.html?p=maps&openPub","_blank")},Editor.prototype.timer=function(e){return new Promise(t=>setTimeout(t,e))},Editor.prototype.loadObjects=async function(e,t,i){var n=e.colors||[],r=e.xyz||[];for(let h of e.objects){for(var a=0;a<colorIndexs.length;a++)null!=h[colorIndexs[a]+"i"]&&n[h[colorIndexs[a]+"i"]]&&(h[colorIndexs[a]]=n[h[colorIndexs[a]+"i"]],delete h[colorIndexs[a]+"i"]);var s;for(a=0;a<xyzIndexs.length;a++)s=3*h[xyzIndexs[a]+"i"],null!=h[xyzIndexs[a]+"i"]&&r.length>s&&(h[xyzIndexs[a]]=r.slice(s,s+3),delete h[xyzIndexs[a]+"i"]);var o=ObjectInstance.deserialize(h);if(this.addObject(o,!0),t){if(i){var l=new THREE.Box3,c=new THREE.Vector3,d=new THREE.Vector3,p=new THREE.Sphere;l.setFromObject(o.boundingMesh),l.getCenter(c),distance=l.getBoundingSphere(p).radius,d.set(0,0,1),d.applyQuaternion(this.camera.getWorldQuaternion()),d.multiplyScalar(2*distance),this.controls.getObject().position.copy(c).add(d)}await this.timer(t)}}},Editor.prototype.importMap=function(e=null,t,i){let n=e||prompt("Copy Paste Map Text Here");if(n&&""!=n)try{let e=JSON.parse(UTILS.decompressKeys(n)),d=e.states||e.id||e.map?e.map:e;if(this.dispatch("mapImportStart",d),this.clearMap(),this.loadObjects(d,t,i),delete d.objects,d.camPos&&(this.addObject(new ObjectInstance({id:6,p:d.camPos})),delete d.camPos),d.spawns){for(let e of d.spawns)this.addObject(new ObjectInstance({id:5,p:[e[0],e[1],e[2]],tm:e[3],d:e[4],cp:e[5]}));delete d.spawns}if(d.config){if(d.config.modes&&d.config.modes.length)for(var r=0;r<MODES.length;r++)this.serverConfig.modes[r]=d.config.modes.includes(r);if(d.config.classes&&d.config.classes.length)for(r=0;r<CLASSES.length;r++)this.serverConfig.classes[r]=d.config.classes.includes(r);if(d.config.settings&&Object.keys(d.config.settings).length)for(r=0;r<config.serverConfig.length;r++)(tmpObj=config.serverConfig[r]).hideE||null==d.config.settings[tmpObj.varN]||(this.serverConfig.settings[tmpObj.varN]=d.config.settings[tmpObj.varN]);if(d.config.weps&&Object.keys(d.config.weps).length)for(var a=0;a<WEAPONS.length;a++)if(d.config.weps[a]&&Object.keys(d.config.weps[a]).length)for(r=0;r<config.weaponConfig.length;r++)tmpObj=config.weaponConfig[r],null!=d.config.weps[a][tmpObj.varN]&&(this.serverConfig.weps[a][tmpObj.varN]=d.config.weps[a][tmpObj.varN]);delete d.config}if(d.game&&Object.keys(d.game).length){for(r=0;r<config.gameConfig.length;r++)tmpObj=config.gameConfig[r],null!=d.game[tmpObj.varN]&&(this.gameConfig[tmpObj.varN]=d.game[tmpObj.varN]);delete d.game}if(e.cam&&(this.controls.getObject().position.fromArray(e.cam.p),this.controls.setRotation(e.cam.r[0],e.cam.r[1],e.cam.r[2])),e.selected){var s=this.objInsts.find(t=>t.uuid==e.selected);s&&this.attachTransform(s.boundingMesh)}else this.hideTransform();if(e.groups)for(var o in e.groups){var l=this.objInsts.find(e=>e.boundingMesh.uuid==o);l&&(this.objGroups[l.boundingMesh.uuid]={objects:e.groups[o].ids,owner:l.boundingMesh,pos:{...l.boundingMesh.position},rotY:l.boundingMesh.rotation.y,scale:{...l.boundingMesh.scale}})}for(var c in Object.assign(this.mapConfig,d),this.defaultMapConfig)null!=this.mapConfig[c]&&("name"==c&&/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(this.mapConfig[c])&&(this.mapConfig[c]=this.defaultMapConfig[c]),"modURL"!=c||UTILS.isURL(this.mapConfig[c])||(this.mapConfig[c]=this.defaultMapConfig[c]),"welMsg"==c&&/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(this.mapConfig[c])&&(this.mapConfig[c]=this.defaultMapConfig[c]),"terrainSeed"==c&&/[^\w\_\-\.]+/gim.test(this.mapConfig[c])&&(this.mapConfig[c]=this.defaultMapConfig[c]),"terrainTSeed"==c&&/[^\w\_\-\.]+/gim.test(this.mapConfig[c])&&(this.mapConfig[c]=this.defaultMapConfig[c]),"ambInd"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"ambIndC"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"terrainWidth"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"terrainHeight"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"terrainMntMlt"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"terrainEase"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"skyDomeMovD"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"skyDomeMovT"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"zoneSize"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"zoneHeight"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"zoneSpeed"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseFloat(this.mapConfig[c])),"fogD"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"dthY"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"shadowR"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"shadowD"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"ambientI"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"lightD"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"lightI"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"sunAngX"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"sunAngY"!=c||UTILS.isNumber(this.mapConfig[c])||(this.mapConfig[c]=parseInt(this.mapConfig[c])),"skyDome"==c&&(this.mapConfig[c]=!!this.mapConfig[c]),"skyDomeTex"==c&&(this.mapConfig[c]=!!this.mapConfig[c]),"zone"==c&&(this.mapConfig[c]=!!this.mapConfig[c]),"zoneRnd"==c&&(this.mapConfig[c]=!!this.mapConfig[c]));GUI.panel.state.refreshAll(),this.regenAll(),this.dispatch("mapImportEnded")}catch(t){alert("Failed to import map with error:\n"+t.toString())}},Editor.prototype.regenAll=function(){this.regenTerrain(),this.regenSky(),this.updateSun(),this.updateGridHelper(),this.updateDeathBarrier(),this.regenZone(),this.ambientLight.color.set(this.mapConfig.ambient),this.ambientLight.intensity=this.mapConfig.ambientI,this.backgroundScene.background=new this.THREE.Color(this.mapConfig.sky),this.skyLight.color.set(this.mapConfig.light),this.skyLight.intensity=this.mapConfig.lightI,this.scene.fog.color.set(this.mapConfig.fog),this.scene.fog.far=this.mapConfig.fogD},Editor.prototype.save=function(){let e={};for(var t in this.objGroups)e[t]={ids:this.objGroups[t].objects};let i={};i.map=this.getMapExport(!0),i.groups=e,this.transformControl.object&&(i.selected=this.transformControl.object.userData.owner.uuid),i.cam={p:this.controls.getObject().position.toArray(),r:this.controls.getRotation()},i.history=[],this.download(JSON.stringify(i),this.mapConfig.name+"_save.txt","text/plain")},Editor.prototype.setHighlight=function(e){this.highlightObject==e||(this.highlightObject&&this.highlightObject.defaultMaterial.emissive.setHex(this.highlightObject.currentHex),this.highlightObject=e,this.highlightObject.currentHex=this.highlightObject.defaultMaterial.emissive.getHex(),this.highlightObject.defaultMaterial.emissive.setHex(267386880*Math.random()-267386880))},Editor.prototype.removeHighlight=function(){this.highlightObject&&(this.highlightObject.defaultMaterial.emissive.setHex(this.highlightObject.currentHex),this.highlightObject=null)},Editor.prototype.attachTransform=function(e){this.transformControl.fakeScale=!1,this.transformControl.object&&this.transformControl.object.userData.owner.unselect(),e instanceof ObjectInstance&&(e=e.boundingMesh),e.userData.owner.select(),e.userData.owner.prefab.fakeScale&&(this.transformControl.fakeScale=!0),this.transformControl.attach(e),this.updateObjConfigGUI(),this.dispatch("objectSelected",e.userData.owner)},Editor.prototype.hideTransform=function(){this.transformControl.object&&this.transformControl.object.userData.owner.unselect(),this.transformControl.detach(),this.updateObjConfigGUI(),this.dispatch("objectDeSelected")},Editor.prototype.setTransformType=function(e){let t;this.transformType=e,0===e?t="translate":1===e?t="rotate":2===e&&(t="scale"),this.transformControl.setMode(t);for(let t=0;t<this.transformOptionIds.length;t++){let i=this.transformOptionIds[t],n=document.getElementById(i);t===e?n.classList.add("selected"):n.classList.remove("selected")}},Editor.prototype.setTransformSpace=function(e){let t;this.transformSpace=e,0===e?t="world":1===e&&(t="local"),this.transformControl.setSpace(t),document.getElementById(this.spaceOptionId).innerHTML=t[0].toUpperCase()+t.substring(1)},Editor.prototype.setSnapping=function(e){this.snappingEnabled=e,this.updateSnapping()},Editor.prototype.updateSnapping=function(){this.transformControl.setTranslationSnap(this.snappingEnabled?this.settings.translationSnapping:null),this.transformControl.setRotationSnap(this.snappingEnabled?THREE.Math.degToRad(this.settings.rotationSnapping):null),this.transformControl.setScaleSnap(this.snappingEnabled&&this.settings.scaleSnapping||null),this.updateGridHelper()},Editor.prototype.updateGridHelper=function(){if(this.gridHelper&&this.scene.remove(this.gridHelper),this.settings.gridVisibility){this.gridHelper=new THREE.GridHelper(this.settings.gridSize,this.settings.gridSize/this.settings.gridSpacing),this.gridHelper.visible=this.settings.gridVisibility,this.gridHelper.material.opacity=this.settings.gridOpacity,this.gridHelper.material.transparent=!0,this.scene.add(this.gridHelper);for(var e=this.gridHelper.geometry.attributes.color.array,t=0;t<e.length;t+=60)for(var i=0;12>i;i++)e[t+i]=.26}},Editor.prototype.updateDeathBarrier=function(){this.deathBarrier&&this.scene.remove(this.deathBarrier),this.settings.dbVisibility&&(this.deathBarrier=new THREE.Mesh(new THREE.PlaneGeometry(1e4,1e4),new THREE.StrippedLambertMaterial({color:16711680})),this.deathBarrier.position.set(0,this.mapConfig.dthY,0),this.deathBarrier.rotation.x=-Math.PI/2,this.deathBarrier.receiveShadow=!1,this.deathBarrier.castShadow=!1,this.deathBarrier.visible=this.settings.dbVisibility,this.deathBarrier.material.opacity=this.settings.dbOpacity,this.deathBarrier.material.transparent=!0,this.deathBarrier.material.depthWrite=!1,this.deathBarrier.material.side=THREE.DoubleSide,this.deathBarrier.material.fog=!1,this.scene.add(this.deathBarrier))},Editor.prototype.clearMap=function(){for(;0<this.objInsts.length;)this.removeObject(this.objInsts[0],!0);this.objCount=[0,0,0,0],this.updateObjectCount(),this.hideTransform(),this.checkConnections(),this.controls.getObject().position.set(0,50,100),this.objGroups={},this.objHistory=[],this.undos.length=0,this.redos.length=0,this.copy=null,this.defineDefaults(),GUI.panel.state.refresh("panel_left_essential"),this.regenAll()},Editor.prototype.updateObjConfigGUI=function(){GUI.panel.right.object.show()},Editor.prototype.updateQuickGUI=function(e,t,i){if(this.settings.quickGUI){this.camera.updateMatrixWorld(),t.project(this.camera),this.quickGUI._titleBar.innerHTML=i.userData.owner.name,this.quickGUI.obj=i,this.quickGUI._content.getElementsByTagName("textarea")[0].innerHTML=this.getJSON(i);let n=window.innerHeight-e.clientY<this.quickGUI._panel.offsetHeight?e.clientY-this.quickGUI._panel.offsetHeight:e.clientY;this.quickGUI.setPosition(e.clientX,n),this.quickGUI.show()}},Editor.prototype.getJSON=function(e){let t=!("PLACEHOLDER"!=e.userData.owner.objType)&&this.objGroups[e.uuid],i=[],n=t?this.objInsts.filter(e=>t.objects.includes(e.boundingMesh.uuid)):[e.userData.owner];for(let e of n)i.push(e.serialize());return JSON.stringify(i)},Editor.prototype.isTyping=function(e){let t=e.target.getAttribute("type")||e.target.tagName.toLowerCase();return["text","number","textarea"].includes(t)},Editor.prototype.shorten=function(e){return parseFloat(Math.round(e))},Editor.prototype.replaceObject=function(e,t,i=!1,n=!1,r=!1){if(e){n||r||this.removeObject(e);let a=JSON.parse(UTILS.decompressKeys(t));a=a.objects?a.objects:a.states||a.id?a.map.objects:a;let s=parseInt(this.advancedOptions.rotation),o=new THREE.Vector3(0,1,0);n&&["VEHICLE","CONTAINER","CONTAINERR","TREE"].includes(n)&&(s=360-THREE.Math.radToDeg(e.rotation.y),this.objConfig.visible=!1,GUI.panel.state.refresh("panel_right_object")),[90,180,270].includes(s)&&(a=this.rotateObjects(a,s));let l=[],c=this.findCenter(a);for(let t of a){t.p[0]+=e.userData.owner.position.x-c[0],t.p[1]+=e.userData.owner.position.y-e.scale.y/2-c[1]-("RAMP"==n?2:0),t.p[2]+=e.userData.owner.position.z-c[2]-("VEHICLE"==n?.5:0);let a=ObjectInstance.deserialize(t);0<s&&![90,180,270].includes(s)&&this.rotateAroundPoint(a.boundingMesh,e.position,o,THREE.Math.degToRad(s)),r&&l.push(a),this.addObject(a,i)}r&&this.createGroup(e,l,[90,180,270].includes(s)?0:THREE.Math.degToRad(s)),i&&!r&&this.hideTransform(),this.advancedOptions.rotation=0,GUI.panel.state.refresh("panel_right_grouping")}else alert("You must select a object first")},Editor.prototype.fakeSelected=function(e,t,i){return{userData:{owner:{position:{x:e,y:t,z:i}}},position:{x:e,y:t,z:i},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}}},Editor.prototype.createBoundingBox=function(e,t,i,n,r,a,s){return ObjectInstance.deserialize({p:[e,t-1,i],s:[n+1,r+2,a+1],r:[0,s,0],id:35})},Editor.prototype.rotateObjects=function(e,t){return 90===t?this.changeAngle(e):180===t?this.reflectAngle(e):270===t?this.reflectAngle(this.changeAngle(e)):e},Editor.prototype.findCenter=function(e,t=!1){let i=t?e[0].position.y:e[0].p[1]||0,n=t?e[0].position.y+e[0].scale.y:(e[0].p[1]||0)+(e[0].s[1]||0),r=t?e[0].position.x-e[0].scale.x/2:(e[0].p[0]||0)-(e[0].s[0]||0)/2,a=t?e[0].position.x+e[0].scale.x/2:(e[0].p[0]||0)+(e[0].s[0]||0)/2,s=t?e[0].position.z-e[0].scale.z/2:(e[0].p[2]||0)-(e[0].s[2]||0)/2,o=t?e[0].position.z+e[0].scale.z/2:(e[0].p[2]||0)+(e[0].s[2]||0)/2;for(let l of e){let e=t?l.position.toArray():l.p,c=t?l.scale.toArray():l.s;e[1]<i&&(i=e[1]),e[1]+c[1]>n&&(n=e[1]+c[1]),e[0]-c[0]/2<r&&(r=e[0]-c[0]/2),e[0]+c[0]/2>a&&(a=e[0]+c[0]/2),e[2]-c[2]/2<s&&(s=e[2]-c[2]/2),e[2]+c[2]/2>o&&(o=e[2]+c[2]/2)}let l=Math.round((r+a)/2),c=Math.round((s+o)/2);return[l,i,c,2*(a-l),n-i,2*(o-c)]},Editor.prototype.applyCenter=function(e){let t=this.findCenter(e);for(let i of e)i.p[0]-=t[0],i.p[1]-=t[1],i.p[2]-=t[2];return e},Editor.prototype.changeAngle=function(e){for(let t of e){let e=t.s[0],i=t.s[2];t.s[0]=i,t.s[2]=e;let n=t.p[0],r=t.p[2];t.p[0]=r,t.p[2]=n}return e},Editor.prototype.reflectAngle=function(e){for(let t of e)t.p[0]=-1*t.p[0],t.p[2]=-1*t.p[2];return e},Editor.prototype.reflect=function(e,t,i=!0){let n=e.objects?e.objects:e.states||e.id?e.map.objects:e,r=this.findCenter(n);for(let e of n)e.p[t],e.p[t]+=2*(r[t]-e.p[t]),"d"in e&&(0==t&&(0==e.d||null==e.d||2==e.d)||2==t&&(1==e.d||3==e.d))&&0!=Math.abs(t+2-e.d)&&(e.d=Math.abs(t+2-e.d));if("spawns"in e)for(let i of e.spawns)i[t],i[t]+=2*(r[t]-i[t]);return"camPos"in e&&(e.camPos[t],e.camPos[t]+=2*(r[t]-e.camPos[t])),i&&this.download(JSON.stringify(e),"reflect.txt","text/plain"),e},Editor.prototype.reflectObjects=function(e=!1){let t=[],i=0,n=0,r=null;if(e){if(i=parseInt(this.advancedOptions.groupReflectDir),r=this.objectSelected(!0),!r)return alert("You cant reflect a group that doesnt exist");e=this.objGroups[r.uuid],t=this.objInsts.filter(t=>e.objects.includes(t.boundingMesh.uuid))}else i=parseInt(this.advancedOptions.reflectDir),t=this.objInsts;n=this.findCenter(t,!0);for(let e of t){let t=e.pos;t[i],t[i]+=2*(n[i]-t[i]),e.pos=t,null!=e.direction&&(0==i&&(0==e.direction||null==e.direction||2==e.direction)||2==i&&(1==e.direction||3==e.direction))&&(e.direction=Math.abs(i+2-e.direction))}e?(this.advancedOptions.groupReflectDir=0,GUI.panel.state.refresh("panel_right_grouping")):(this.advancedOptions.reflectDir=0,GUI.panel.state.refresh("panel_right_customize")),t.forEach(e=>{[e.faces[2*i],e.faces[2*i+1]]=[e.faces[2*i+1],e.faces[2*i]],e.faces.some(e=>!e)&&e.regen()})},Editor.prototype.copyObjects=function(e=!1,t=!1,i=!1,n=null){if(!(n=n||this.objectSelected()))return alert("Stretch a cube over your objects then try again");if(t&&this.objGroups&&Object.keys(this.objGroups).includes(n.uuid))return alert("You cant combine groups");let r=[],a=[];for(let e of this.objInsts)if(e.boundingMesh.uuid!=n.uuid&&this.detectCollisionCubes(e.boundingMesh,n)){if(t&&this.isGrouped(e.boundingMesh.uuid))return alert("You cant combine groups");a.push(e),r.push(e.serialize())}if(t)this.createGroup(n,a);else{if(e&&a.length&&!t)for(let e=0;e<a.length;e++)this.removeObject(a[e]);if(i)return r;this.copy=JSON.stringify(r)}},Editor.prototype.copyGroup=function(e=null){if(0==Object.keys(this.objGroups).length)return;if(!(e=e||this.objectSelected(!0)))return;let t=[],i=this.objGroups[e.uuid];for(let e of this.objInsts.filter(e=>i.objects.includes(e.boundingMesh.uuid)))t.push(e.serialize());return this.copy=JSON.stringify(t),t},Editor.prototype.togglePropGroup=function(e,t=null){if(0==Object.keys(this.objGroups).length)return;if(!(t=t||this.objectSelected(!0)))return;let i=this.objGroups[t.uuid];for(let t of this.objInsts.filter(e=>i.objects.includes(e.boundingMesh.uuid)))t[e]=!t[e]},Editor.prototype.toggleProp=function(e,t=null){(t=t||this.objectSelected())&&(t.userData.owner[e]=!t.userData.owner[e],this.objConfig[e]=t.userData.owner[e],this.updateObjConfigGUI())},Editor.prototype.isGrouped=function(e){let t=[],i=this.objGroups;return Object.keys(i).forEach(e=>{t=t.concat(i[e].objects),t.push(e)}),t.includes(e)},Editor.prototype.exportGroup=function(e=!1){let t=this.copyGroup(),i=null;if(!e){if(0==t.length)return alert("There was nothing to save");if(i=prompt("Name your Prefab",""),null==i||""==i)return alert("Please name your Prefab")}return t=this.applyCenter(t),e?JSON.stringify(t):void this.download(JSON.stringify(t),"prefab_"+i.replace(/ /g,"_")+".txt","text/plain")},Editor.prototype.pasteObjects=function(e=null){return e=e||this.objectSelected(),this.copy?e?void this.replaceObject(e,this.copy,!0,!1,!0):alert("Select a object you would like to replace with your copied objects"):alert("Please copy objects first")},Editor.prototype.createGroup=function(e,t,i=0,n=!0){if(1>t.length)return alert("There is nothing to group");let r=[],a=[];for(let e of t)r.push(e.boundingMesh.uuid),a.push(e.serialize());let s=this.findCenter(a),o=this.createBoundingBox(...s,i);n&&this.removeObject(e.userData.owner),this.addObject(o),this.objGroups[o.boundingMesh.uuid]={owner:o.boundingMesh,pos:{...o.boundingMesh.position},scale:{...o.boundingMesh.scale},rotY:o.boundingMesh.rotation.y,objects:r}},Editor.prototype.removeGroup=function(e=null){if(0!=Object.keys(this.objGroups).length&&(e=e||this.objectSelected(!0))){this.objGroups[e.uuid].objects.push(e.uuid);let t=this.objInsts.filter(t=>this.objGroups[e.uuid].objects.includes(t.boundingMesh.uuid));for(let e=0;e<t.length;e++)this.removeObject(t[e]);delete this.objGroups[e.uuid]}},Editor.prototype.duplicateGroup=function(e=null){if(0==Object.keys(this.objGroups).length)return;if(!(e=e||this.objectSelected(!0)))return alert("You cant duplicate a group that doesnt exist");let t=this.objGroups[e.uuid],i=this.objInsts.filter(e=>t.objects.includes(e.boundingMesh.uuid)),n=[];for(let e of i)tmpObj=ObjectInstance.deserialize(e.serialize()),n.push(tmpObj),this.addObject(tmpObj,!0);this.duplicateObject(e),this.createGroup(this.objectSelected(),n)},Editor.prototype.updateGroups=function(){if(0!=Object.keys(this.objGroups).length)for(let e in this.objGroups){let t=this.objGroups[e],i=t.owner.position,n=t.pos,r=[i.x-n.x,i.y-n.y,i.z-n.z],a=0!==r[0]||0!==r[1]||0!==r[2],s=t.owner.scale,o=t.scale,l=(s.x,o.x,s.y,o.y,s.z,o.z,t.owner.rotation.clone().reorder("YXZ")),c=t.rotY,d=l.y-c,p=0!=d;if(!a&&!p)continue;let h=this.objInsts.filter(e=>t.objects.includes(e.boundingMesh.uuid));for(let e of h)p&&this.rotateAroundPoint(e.boundingMesh,i,new THREE.Vector3(0,1,0),d,!0),a&&(e.boundingMesh.position.x+=r[0],e.boundingMesh.position.y+=r[1],e.boundingMesh.position.z+=r[2]);this.objGroups[t.owner.uuid].pos={...i},this.objGroups[t.owner.uuid].scale={...s},this.objGroups[t.owner.uuid].rotY=l.y}},Editor.prototype.stopGroup=function(e=!1){if(0==Object.keys(this.objGroups).length)return alert("You cant stop a group that doesnt exist");if(!e){let e=this.objectSelected(!0);return e?(delete this.objGroups[e.uuid],this.removeObject(e.userData.owner)):alert("You cant stop a group that doesnt exist")}{let e=this.objInsts.filter(e=>Object.keys(this.objGroups).includes(e.boundingMesh.uuid));for(let t of e)this.removeObject(t);this.objGroups=[]}},Editor.prototype.editGroup=function(e="texture",t=null,i){if(0==Object.keys(this.objGroups).length)return alert("Please select a Group first");let n=this.objectSelected(!0);if(!n)return alert("Please select a Group first");let r=this.objGroups[n.uuid],a=this.objInsts.filter(e=>r.objects.includes(e.boundingMesh.uuid));for(let n of a)n[e]=t,i&&n.regen()},Editor.prototype.fixHitbox=function(e=null){if(e=e||this.objectSelected())switch(e.userData.owner.objType){case"VEHICLE":this.replaceObject(e,'[{"p":[0,0,0],"s":[47,9,17],"v":1},{"p":[5,9,0],"s":[26,6,17],"v":1}]',!0,e.userData.owner.objType);break;case"TREE":this.replaceObject(e,'[{"p":[313,10,-44],"s":[10,55,10],"v":1},{"p":[292,68,-37],"s":[22,16,19],"v":1},{"p":[329,74,-54],"s":[28,16,23],"v":1},{"p":[313,65,-45],"s":[22,16,19],"v":1},{"p":[315,81,-45],"s":[60,35,49],"v":1}]',!0,e.userData.owner.objType);break;case"CONTAINERR":this.replaceObject(e,'[{"p":[0,0,0],"s":[57,1,25],"c":11739168},{"p":[0,24,0],"s":[57,2,25],"pe":1,"v":1},{"p":[0,0,-12],"s":[57,25,1],"pe":1,"v":1},{"p":[0,0,12],"s":[57,25,1],"pe":1,"v":1}]',!0,e.userData.owner.objType);break;case"RAMP":let t,i,n,r,a=e.userData.owner.serialize(),s=a.d||0,o=a.p[1],l=a.s[1]+a.p[1];0!==s&&2!==s&&(a=this.changeAngle([a])[0]),t=a.p[0],i=a.p[2],n=a.s[0]+t,r=a.s[2];let c=this.mergeObjects(this.plotLine(t,o,n,l,i,r));2===s&&(c=this.reflect(c,0,!1)),(1===s||3===s)&&(c=this.changeAngle(c)),3===s&&(c=this.reflect(c,2,!1)),this.replaceObject(e,JSON.stringify(c),!0,e.userData.owner.objType)}},Editor.prototype.plotLine=function(e,t,i,n,r,a){let s=i-e,o=n-t,l=2*o-s,c=t,d=[];for(let t=e;t<i;t++)d.push({p:[t,c,r],s:[1,1,0==d.length%5?a:a-2]}),0<l&&(++c,l-=2*s),l+=2*o;return d},Editor.prototype.toggleLightCones=function(){this.lightConeAbuse=!this.lightConeAbuse,this.objInsts.forEach(e=>{"LIGHT_CONE"==e.objType&&(e.boxShape.visible=this.lightConeAbuse,e.children[0].visible=this.lightConeAbuse)}),this.lightConeAbuse?this.doWarning("lightconeabuse",!1):this.doWarning("lightconeabuse",!0,"Light Cones are hidden")},Editor.prototype.createPlaceholder=function(){let e=this.camera.getWorldPosition();this.addObject(ObjectInstance.deserialize({p:[e.x,e.y-10,e.z],s:[10,10,10],id:35}))},Editor.prototype.colorizeMap=function(e=!1,t=!1,i=!1){if(0!=e&&(null==e||""==e))return alert("Please input colors (ex: #000000,#ffffff)");e&&(e=e.trim().split(","));for(let t of this.objInsts)e&&(t.color=1<e.length?e[Math.floor(Math.random()*e.length)]:e[0]),i&&(t.color="#"+Math.random().toString(16).slice(2,8))},Editor.prototype.scaleMap=function(){let e=this.advancedOptions.scaleMapX,t=this.advancedOptions.scaleMapY,i=this.advancedOptions.scaleMapZ;for(let n of this.objInsts){let r=n.pos,a=n.size;r[0]*=e,r[1]*=t,r[2]*=i,a[0]*=e,a[1]*=t,a[2]*=i,n.size=a,n.pos=r}},Editor.prototype.timelapseMap=function(){let e=this.advancedOptions.timelapseMS,t=this.advancedOptions.timelapseFollow,i=this.getMapExport();this.clearMap(),this.importMap(i,e,t)},Editor.prototype.breakableMap=function(){if(confirm("Are you sure you want to make the whole map breakable?")){let e=this.advancedOptions.breakableHealth,t=this.advancedOptions.breakableCollision;for(let i of this.objInsts)i.health=e,t&&(i.collidable=!0)}},Editor.prototype.drunkMap=function(){if(confirm("Are you sure you want to make the whole map move?"))for(let e of this.objInsts)e.movingSpeed=UTILS.getRandom([-20,20]),e.movingAxis=UTILS.getRandom([0,1])},Editor.prototype.layoutPlanner=function(){let e=parseInt(this.advancedOptions.plannerXDir),t=parseInt(this.advancedOptions.plannerXSpace),i=parseInt(this.advancedOptions.plannerYDir),n=parseInt(this.advancedOptions.plannerYSpace),r=parseInt(this.advancedOptions.plannerZDir),a=parseInt(this.advancedOptions.plannerZSpace),s=this.advancedOptions.plannerSize,o=[{p:[0,0,0],s:[s,s,s],c:this.advancedOptions.plannerColor}];o=this.replicateMulti(o,e,t,0),o=this.replicateMulti(o,i,n,1),o=this.replicateMulti(o,r,a,2),o=this.applyCenter(o);for(let e of o)this.addObject(ObjectInstance.deserialize(e),!0)},Editor.prototype.replicateMulti=function(e,t,i,n){let r=JSON.parse(JSON.stringify(e)),a=r;for(let e=0;e<t;e++)a=this.replicate(a,i,n),r=r.concat(a);return r},Editor.prototype.replicate=function(e,t,i){let n=JSON.parse(JSON.stringify(e)),r=e[i].p[i]+e[i].s[i],a=e[i].p[i];for(let t of e)t.p[i]+t.s[i]>r&&(r=t.p[i]+t.s[i]),t.p[i]<a&&(a=t.p[i]);for(let e of n)e.p[i]+=r-a+t;return n},Editor.prototype.convertVoxel=function(e,t,i=!1){if(i&&!this.objectSelected())return alert("Select a object to replace first");let n=JSON.parse(t),r={name:"modmap",modURL:"",ambient:9937064,light:15923452,sky:14477549,fog:9280160,fogD:900,camPos:[0,0,0],spawns:[],objects:[]};for(let e of n.voxels)r.objects.push(this.voxelToObject([parseInt(e.x),parseInt(e.y),parseInt(e.z)]));this.settings.mergeVoxels&&(r.objects=this.mergeObjects(r.objects)),i&&this.replaceObject(e,JSON.stringify(r.objects),!0),i||this.download(JSON.stringify(r),"convertedVoxels.txt","text/plain")},Editor.prototype.convertImage=function(e,t,i=!1){if(i&&!e)return alert("Select a object to replace first");let n=document.createElement("canvas"),r=n.getContext("2d");n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height);let a=r.getImageData(0,0,n.width,n.height).data,s=[],o=[];for(let e=0;e<a.length;e+=4){let t=this.rgbArrayToHex([a[e],a[e+1],a[e+2]]),i=Math.round(a[e+3]/255*100)/100;s.push([t,i])}let l=0,c=0;for(let e=0;e<s.length;e++){if(c+=1,0==e%n.width&&(l++,c=0),0==s[e][1])continue;let t={p:[c*this.settings.imageSize,l*this.settings.imageSize*-1,0],s:[this.settings.imageSize,this.settings.imageSize,this.settings.imageDepth],c:s[e][0],c:s[e][0]};1!=s[e][1]&&(t.o=s[e][1]),this.settings.imageCol||(t.l=1),o.push(t)}o=this.applyCenter(this.mergeObjects(o));let d={name:"New Krunker Map",modURL:"",ambient:9937064,light:15923452,sky:14477549,fog:9280160,fogD:900,camPos:[0,0,0],spawns:[],objects:[]};d.objects=o,i&&this.replaceObject(e,JSON.stringify(d.objects),!0,!1,!0),i||this.download(JSON.stringify(d),"convertedImage.txt","text/plain")},Editor.prototype.convert=function(e=!1,t=!1){this.loadFile(t?"convertImage":"convertVoxel",t,null,[e])},Editor.prototype.voxelToObject=function(e){return{p:[parseInt(e[0])*this.settings.voxelSize,parseInt(e[1])*this.settings.voxelSize,parseInt(e[2])*this.settings.voxelSize],s:[this.settings.voxelSize,this.settings.voxelSize,this.settings.voxelSize]}},Editor.prototype.mergeObjects=function(e){if(2>e.length)return e;let t=0;for(let i=0;3>i;i++){let n=(i+1)%3,r=(i+2)%3;for(let a=0;a<e.length-1;a++){for(let s=a+1;s<e.length;s++){let o=i%2?e[a].p[i]+e[a].s[i]/2:e[a].p[i],l=i%2?e[s].p[i]+e[s].s[i]/2:e[s].p[i];if(e[s].s[n]==e[a].s[n]&&e[s].s[r]==e[a].s[r]&&e[s].p[n]==e[a].p[n]&&e[s].p[r]==e[a].p[r]&&Math.abs(l-o)<=Math.abs(e[s].s[i]/2+e[a].s[i]/2)&&e[s].c==e[a].c&&e[s].e==e[a].e&&e[s].o==e[a].o&&e[s].t==e[a].t&&e[s].l==e[a].l&&e[s].pe==e[a].pe&&e[s].hp==e[a].hp&&e[s].v==e[a].v&&e[s].a==e[a].a){let n=Math.abs(l-o)+Math.abs(e[s].s[i]/2+e[a].s[i]/2),r=(l+(t+1)*o)/(t+2);1==i&&(r=Math.min(e[a].p[i],e[s].p[i])),e[a].p[i]=r,e[a].s[i]=n,e.splice(s,1),t++,s--}}t=0}}return e},Editor.prototype.textToObjects=function(){let e=prompt("Input text","");if(0!=e&&(null==e||""==e))return alert("Please input proper text");e=e.toLowerCase();let t={a:[{p:[-3,0,0],s:[1,8,1]},{p:[3,0,0],s:[1,8,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,4,0],s:[5,1,1]}],b:[{p:[-3,0,0],s:[1,9,1]},{p:[3,5,0],s:[1,3,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,4,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]},{p:[3,1,0],s:[1,3,1]}],c:[{p:[-3,1,0],s:[1,7,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]},{p:[3,8,0],s:[1,1,1]},{p:[3,0,0],s:[1,1,1]}],d:[{p:[-3,0,0],s:[1,9,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]},{p:[3,1,0],s:[1,7,1]}],e:[{p:[-3,0,0],s:[1,9,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]},{p:[0,4,0],s:[5,1,1]},{p:[3,8,0],s:[1,1,1]},{p:[3,4,0],s:[1,1,1]},{p:[3,0,0],s:[1,1,1]}],f:[{p:[-3,0,0],s:[1,9,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,4,0],s:[5,1,1]},{p:[3,8,0],s:[1,1,1]},{p:[3,4,0],s:[1,1,1]}],g:[{p:[-3,1,0],s:[1,7,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]},{p:[3,8,0],s:[1,1,1]},{p:[3,0,0],s:[1,4,1]},{p:[1,3,0],s:[3,1,1]}],h:[{p:[-3,0,0],s:[1,9,1]},{p:[0,4,0],s:[5,1,1]},{p:[3,0,0],s:[1,9,1]}],i:[{p:[0,8,0],s:[7,1,1]},{p:[0,1,0],s:[1,7,1]},{p:[0,0,0],s:[7,1,1]}],j:[{p:[0,8,0],s:[5,1,1]},{p:[3,1,0],s:[1,8,1]},{p:[1,0,0],s:[3,1,1]},{p:[-2,2,0],s:[1,1,1]},{p:[-1,1,0],s:[1,1,1]},{p:[-3,8,0],s:[1,1,1]}],k:[{p:[-1,5,0],s:[3,1,1]},{p:[-3,0,0],s:[1,9,1]},{p:[1,4,0],s:[3,1,1]},{p:[1,6,0],s:[1,2,1]},{p:[2,8,0],s:[1,1,1]},{p:[3,8,0],s:[1,1,1]},{p:[3,0,0],s:[1,4,1]}],l:[{p:[-3,0,0],s:[1,9,1]},{p:[0,0,0],s:[5,1,1]},{p:[3,0,0],s:[1,1,1]}],m:[{p:[-3,0,0],s:[1,8,1]},{p:[0,0,0],s:[1,6,1]},{p:[3,0,0],s:[1,8,1]},{p:[-2,8,0],s:[1,1,1]},{p:[2,8,0],s:[1,1,1]},{p:[-1,6,0],s:[1,2,1]},{p:[1,6,0],s:[1,2,1]}],n:[{p:[-3,0,0],s:[1,9,1]},{p:[3,0,0],s:[1,9,1]},{p:[-2,7,0],s:[1,1,1]},{p:[-1,5,0],s:[1,2,1]},{p:[0,4,0],s:[1,1,1]},{p:[1,2,0],s:[1,2,1]},{p:[2,1,0],s:[1,1,1]}],o:[{p:[-3,1,0],s:[1,7,1]},{p:[3,1,0],s:[1,7,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]}],p:[{p:[-3,0,0],s:[1,8,1]},{p:[3,5,0],s:[1,3,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,4,0],s:[5,1,1]}],q:[{p:[-3,1,0],s:[1,7,1]},{p:[3,1,0],s:[1,7,1]},{p:[0,8,0],s:[5,1,1]},{p:[0,0,0],s:[5,1,1]},{p:[2,1,0],s:[1,1,1]},{p:[1,1,0],s:[1,2,1]},{p:[0,2,0],s:[1,3,1]}],r:[{p:[-3,0,0],s:[1,8,1]},{p:[3,6,0],s:[1,2,1]},{p:[0,8,0],s:[5,1,1]},{p:[2,5,0],s:[1,1,1]},{p:[3,5,0],s:[1,1,1]},{p:[-1,4,0],s:[3,1,1]},{p:[1,4,0],s:[1,1,1]},{p:[2,3,0],s:[1,1,1]},{p:[3,0,0],s:[1,3,1]}],s:[{p:[-3,5,0],s:[1,3,1]},{p:[0,8,0],s:[5,1,1]},{p:[3,8,0],s:[1,1,1]},{p:[0,4,0],s:[5,1,1]},{p:[3,1,0],s:[1,3,1]},{p:[0,0,0],s:[5,1,1]},{p:[-3,0,0],s:[1,1,1]}],t:[{p:[0,0,0],s:[1,8,1]},{p:[0,8,0],s:[7,1,1]}],u:[{p:[3,1,0],s:[1,8,1]},{p:[0,0,0],s:[5,1,1]},{p:[-3,1,0],s:[1,8,1]}],v:[{p:[0,0,0],s:[1,1,1]},{p:[1,1,0],s:[1,2,1]},{p:[2,3,0],s:[1,3,1]},{p:[3,6,0],s:[1,3,1]},{p:[-1,1,0],s:[1,2,1]},{p:[-2,3,0],s:[1,3,1]},{p:[-3,6,0],s:[1,3,1]}],w:[{p:[2,0,0],s:[1,1,1]},{p:[1,1,0],s:[1,2,1]},{p:[0,3,0],s:[1,6,1]},{p:[3,1,0],s:[1,8,1]},{p:[-1,1,0],s:[1,2,1]},{p:[-3,1,0],s:[1,8,1]},{p:[-2,0,0],s:[1,1,1]}],x:[{p:[2,2,0],s:[1,1,1]},{p:[1,3,0],s:[1,1,1]},{p:[0,4,0],s:[1,1,1]},{p:[3,0,0],s:[1,2,1]},{p:[-1,3,0],s:[1,1,1]},{p:[-3,0,0],s:[1,2,1]},{p:[-2,2,0],s:[1,1,1]},{p:[1,5,0],s:[1,1,1]},{p:[-1,5,0],s:[1,1,1]},{p:[2,6,0],s:[1,1,1]},{p:[-2,6,0],s:[1,1,1]},{p:[3,7,0],s:[1,2,1]},{p:[-3,7,0],s:[1,2,1]}],y:[{p:[0,0,0],s:[1,5,1]},{p:[1,5,0],s:[1,1,1]},{p:[-1,5,0],s:[1,1,1]},{p:[2,6,0],s:[1,1,1]},{p:[-2,6,0],s:[1,1,1]},{p:[3,7,0],s:[1,2,1]},{p:[-3,7,0],s:[1,2,1]}],z:[{p:[0,0,0],s:[7,1,1]},{p:[-3,1,0],s:[1,1,1]},{p:[-2,2,0],s:[1,1,1]},{p:[-1,3,0],s:[1,1,1]},{p:[0,4,0],s:[1,1,1]},{p:[1,5,0],s:[1,1,1]},{p:[2,6,0],s:[1,1,1]},{p:[3,7,0],s:[1,1,1]},{p:[0,8,0],s:[7,1,1]}]},i=0,n=0,r=[];for(let a of e)if(" "==a&&(i+=5),"."==a&&(i=0,n-=11),a in t){let e=JSON.parse(JSON.stringify(t[a]));for(let t of e)t.p[0]+=i,t.p[1]+=n,r.push(t);i+=9}this.replaceObject(this.objectSelected(),JSON.stringify(r),!0,!1,!0)},Editor.prototype.frameObject=function(){let e=this.objectSelected();if(!e)return alert("Please Select a object");let t=this.advancedOptions.frameThickness,i=this.advancedOptions.frameCeiling,n=this.advancedOptions.frameFloor;if(1>t)return alert("Wall Thickness must be 1 or greator");let r=e.position,a=e.scale,s={p:[r.x,r.y,r.z-a.z/2-t/2],s:[a.x+2*t,a.y,t]};this.addObject(ObjectInstance.deserialize(s),!0);let o={p:[r.x,r.y,r.z+a.z/2+t/2],s:[a.x+2*t,a.y,t]};this.addObject(ObjectInstance.deserialize(o),!0);let l={p:[r.x-a.x/2-t/2,r.y,r.z],s:[t,a.y,a.z]};this.addObject(ObjectInstance.deserialize(l),!0);let c={p:[r.x+a.x/2+t/2,r.y,r.z],s:[t,a.y,a.z]};this.addObject(ObjectInstance.deserialize(c),!0);let d={p:[r.x,r.y+a.y,r.z],s:[a.x+2*t,t,a.z+2*t]};i&&this.addObject(ObjectInstance.deserialize(d),!0);let p={p:[r.x,r.y-t,r.z],s:[a.x+2*t,t,a.z+2*t]};n&&this.addObject(ObjectInstance.deserialize(p),!0),this.advancedOptions.frameThickness=0,this.advancedOptions.frameCeiling=!1,this.advancedOptions.frameFloor=!1,GUI.panel.state.refresh("panel_right_customize")},Editor.prototype.objectSelected=function(e=!1){let t=this.transformControl.object;return!!t&&(e?!!Object.keys(this.objGroups).includes(t.uuid)&&t:t)},Editor.prototype.jsonInput=function(e=!1,t=null){if(t=t||this.objectSelected(),e)return this.loadFile("replaceObject",!1,t,[!0,!1,this.settings.assetAutoGroup]);let i=prompt("Import Object Json","");null!=i&&""!=i&&t&&this.replaceObject(t,i,!0,!1,this.settings.assetAutoGroup)},Editor.prototype.setSettings=function(e,t){Array.isArray(e)||(e=[e],t=[t]);for(let i=0;i<e.length;i++)this.settings[e[i]]=t[i];window.saveVal("kro_editor",JSON.stringify(this.settings))},Editor.prototype.resetSettings=function(){for(let e in this.settings)this.setSettings(e,this.defaultSettings[e]);showWindow(3),alert("Some settings require a refresh take effect")},Editor.prototype.degToRad=function(e){return this.settings.degToRad?e.map(e=>e*(Math.PI/180)):e},Editor.prototype.rotateAroundPoint=function(e,t,i,n,r){(r=void 0!==r&&r)&&e.parent.localToWorld(e.position),e.position.sub(t),e.position.applyAxisAngle(i,n),e.position.add(t),r&&e.parent.worldToLocal(e.position),e.rotateOnWorldAxis(i,n)},Editor.prototype.intersect=function(e,t){return e.minX<=t.maxX&&e.maxX>=t.minX&&e.minY<=t.maxY&&e.maxY>=t.minY&&e.minZ<=t.maxZ&&e.maxZ>=t.minZ},Editor.prototype.detectCollisionCubes=function(e,t){e.geometry.computeBoundingBox(),t.geometry.computeBoundingBox(),e.updateMatrixWorld(),t.updateMatrixWorld();var i=e.geometry.boundingBox.clone();i.applyMatrix4(e.matrixWorld);var n=t.geometry.boundingBox.clone();return n.applyMatrix4(t.matrixWorld),i.intersectsBox(n)},Editor.prototype.copyToClipboard=function(e){const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},Editor.prototype.download=function(e,t,i){let n=document.createElement("a"),r=new Blob([e],{type:i});n.href=URL.createObjectURL(r),n.download=t,n.click()},Editor.prototype.loadFile=function(e,t=!1,i=null,n=[]){i=i||this.objectSelected();let r=document.createElement("input");r.type="file",r.id="jsonInput";let a=this;return r.addEventListener("change",r=>{if(1!=r.target.files.length)return alert("Please select 1 file");let s=r.target.files[0],o=new FileReader;o.onload=r=>{if(t){let t=new Image;t.onload=()=>{n.unshift(t),n.unshift(i),a[e](...n)},t.src=r.target.result}else n.unshift(r.target.result),"importMap"!=e&&n.unshift(i),a[e](...n)},t?o.readAsDataURL(s):o.readAsText(s)},!1),r.type="file",r.id="jsonInput",void r.click()},Editor.prototype.toggle=function(e){this.enabled=e,this.enabled&&this.toggleMenu(!1)},Editor.prototype.toggleWindow=function(e){windowHolder.style.display=e?"block":"none"},Editor.prototype.toggleMenu=function(e){menuHolder.style.display=e?"block":"none",menuHider.style.display=e?"block":"none",instructionHolder.style.display=e?"block":"none"},Editor.prototype.setResMlt=function(){this.renderer.setPixelRatio(window.devicePixelRatio*(this.settings.resMltV||.6)),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight)},Editor.prototype.resize=function(){this.camera.aspect=this.container.offsetWidth/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight)},Editor.prototype.scaleUI=function(){var e=window.innerHeight,t=window.innerWidth;this.elemScale=Math.min(e/MIN_HEIGHT,t/MIN_WIDTH).toFixed(3)*this.settings.uiScale,uiBase.style.transform="scale("+this.elemScale+")",uiBase.style.width=(t/this.elemScale).toFixed(3)+"px",uiBase.style.height=(e/this.elemScale).toFixed(3)+"px",this.resize(),this.setResMlt(),this.resizable.forceResize()},Editor.prototype.checkEdit=function(){var e=getSavedVal("mapToEdit");deleteVal("mapToEdit"),e&&this.importMap(e)},Editor.prototype.updateObjectCount=function(){objectColCount.innerText=this.objCount[1],objectNoColCount.innerText=this.objCount[0],objectCount.innerText=this.objCount[3],spawnCount.innerText=this.objCount[2]+" / "+config.spawnLimit},Editor.prototype.testMap=function(e){var t=this.getMapExport();window.saveVal(e?"custToLoad":"custMap",t),window.open("/","_blank")},window.loadQuick=function(e){gameTemplates[e].data&&(closeWindow(),KE.importMap(gameTemplates[e].data))},Editor.prototype.quickStart=function(){window.loadQuick(0)},Editor.prototype.showTempls=function(){showWindow(10)},Editor.prototype.mergeColors=function(){if(confirm("Are you sure you want to merge similar colors? (This will effect the entire map)")){for(var e=this.objInsts.length-1,t=["#FFFFFF","#000000"],i=0,n=parseInt(this.advancedOptions.colorRange)||1500,r=0;r<this.objInsts.length;r++){if(this.updateProgress(Math.round(100*r/e)),"#FFFFFF"!=(tmpObj=this.objInsts[r]).color&&null!=tmpObj.color&&null!=tmpObj.color){var a=!1;if(UTILS.isNumber(tmpObj.color)&&(tmpObj.color=UTILS.stringifyColor(tmpObj.color)),tmpObj.color=tmpObj.color.toUpperCase(),-1==t.indexOf(tmpObj.color)){var s=parseInt(tmpObj.color.slice(1),16);for(r=0;r<t.length;r++)if(o=parseInt(t[r].slice(1),16),Math.abs(s-o)<=n){i++,tmpObj.color=t[r],a=!0;break}a||t.push(tmpObj.color)}}if("#000000"!=tmpObj.emissive&&null!=tmpObj.emissive&&null!=tmpObj.emissive){a=!1;if(UTILS.isNumber(tmpObj.emissive)&&(tmpObj.emissive=UTILS.stringifyColor(tmpObj.emissive)),tmpObj.emissive=tmpObj.emissive.toUpperCase(),-1==t.indexOf(tmpObj.emissive)){var o;for(s=parseInt(tmpObj.emissive.slice(1),16),r=0;r<t.length;r++)if(o=parseInt(t[r].slice(1),16),Math.abs(s-o)<=n){i++,tmpObj.emissive=t[r],a=!0;break}a||t.push(tmpObj.emissive)}}}alert(i+" Colors Merged")}},Editor.prototype.bake=function(){this.bakeProgress(0,0),new SimpleGI(this.advancedOptions,this.renderer,this.scene)},Editor.prototype.subdivideGroup=function(){this.editGroup("bakeAcc",this.advancedOptions.subdivideVal,!0),alert("Group Subdivision Finished")},Editor.prototype.optimizeFaces=function(e){function t(e,t,i){return e.pos[i]+e.size[i]/2>=t.pos[i]-t.size[i]/2&&t.pos[i]+t.size[i]/2>e.pos[i]+e.size[i]/2}function i(e,t,i){return e.pos[i]-e.size[i]/2<=t.pos[i]+t.size[i]/2&&t.pos[i]-t.size[i]/2<e.pos[i]-e.size[i]/2}function n(e,t,i,n){return e.size[i]<=t.size[i]&&e.size[n]<=t.size[n]&&Math.abs(e.pos[i]-t.pos[i])+e.size[i]/2<=t.size[i]/2&&Math.abs(e.pos[n]-t.pos[n])+e.size[n]/2<=t.size[n]/2}function r(e){let t=0;return e.forEach(e=>{t+="CUBE"==e.objType?e.faces.reduce((e,t)=>e+t,0):0}),t}this.hideTransform();var a=this.objInsts;try{for(let e of a){let t=e.pos,i=e.size;t[1]+=i[1]/2,e.pos=t}var s=r(a);for(let e=0;e<a.length;e++){tmpObj=a[e];for(let r=0;r<a.length;r++)tmpObj2=a[r],e==r||"CUBE"!=tmpObj.objType||"CUBE"!=tmpObj2.objType||!tmpObj.visible||!tmpObj2.visible||1!=tmpObj2.opacity||tmpObj2.texturePrefab&&("FLAG"==tmpObj2.texturePrefab.name||"LINK"==tmpObj2.texturePrefab.name)||"0,0,0"!=tmpObj.rot.join(",")||"0,0,0"!=tmpObj2.rot.join(",")||(n(tmpObj,tmpObj2,1,2)&&(t(tmpObj,tmpObj2,0)&&(tmpObj.faces[0]=0,tmpObj.regen()),i(tmpObj,tmpObj2,0)&&(tmpObj.faces[1]=0,tmpObj.regen())),n(tmpObj,tmpObj2,0,2)&&(t(tmpObj,tmpObj2,1)&&(tmpObj.faces[2]=0,tmpObj.regen()),i(tmpObj,tmpObj2,1)&&(tmpObj.faces[3]=0,tmpObj.regen())),n(tmpObj,tmpObj2,1,0)&&(t(tmpObj,tmpObj2,2)&&(tmpObj.faces[4]=0,tmpObj.regen()),i(tmpObj,tmpObj2,2)&&(tmpObj.faces[5]=0,tmpObj.regen())))}for(let e of a){let t=e.pos,i=e.size;t[1]-=i[1]/2,e.pos=t}var o=r(a);e||alert(UTILS.getPercentDiff(o,s)+"% Face Reduction")}catch(e){console.log(e)}},KE=new Editor(config.editorVersion),getSavedVal("has_used")?showWindow(10):(saveVal("has_used"),showWindow(8))},function(e,t){e.exports=function(e){return function(){var t=0,i=1,n=2,r=3,a=4,s=5121,o=5123,l=5126,c=5125,d=34962,p=34963,h=9728,u=9729,f=9984,m=9985,g=9986,y=9987,v=33071,w=33648,b=10497,x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],S={};S[e.NearestFilter]=h,S[e.NearestMipmapNearestFilter]=f,S[e.NearestMipmapLinearFilter]=g,S[e.LinearFilter]=u,S[e.LinearMipmapNearestFilter]=m,S[e.LinearMipmapLinearFilter]=y,S[e.ClampToEdgeWrapping]=v,S[e.RepeatWrapping]=b,S[e.MirroredRepeatWrapping]=w;var M={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};return GLTFExporter=function(){},GLTFExporter.prototype={constructor:GLTFExporter,parse:function(h,u,f){function m(e){return Y.has(e)||Y.set(e,Z++),Y.get(e)}function g(e,t){return e.length===t.length&&e.every((function(e,i){return e===t[i]}))}function y(e){return g(e.elements,x)}function v(e){return 4*Math.ceil(e/4)}function w(e,t){t=t||0;var i=v(e.byteLength);if(i!==e.byteLength){var n=new Uint8Array(i);if(n.set(new Uint8Array(e)),0!==t)for(var r=e.byteLength;r<i;r++)n[r]=t;return n.buffer}return e}function b(e,t){if(0!==Object.keys(e.userData).length)try{var i=JSON.parse(JSON.stringify(e.userData));if(f.includeCustomExtensions&&i.gltfExtensions){for(var n in void 0===t.extensions&&(t.extensions={}),i.gltfExtensions)t.extensions[n]=i.gltfExtensions[n],V[n]=!0;delete i.gltfExtensions}0<Object.keys(i).length&&(t.extras=i)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}function T(e,t){var i=!1,n={};(0!==t.offset.x||0!==t.offset.y)&&(n.offset=t.offset.toArray(),i=!0),0!==t.rotation&&(n.rotation=t.rotation,i=!0),(1!==t.repeat.x||1!==t.repeat.y)&&(n.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=n,V.KHR_texture_transform=!0)}function _(e){return N.buffers||(N.buffers=[{byteLength:0}]),H.push(e),0}function O(e,t,i,n){var r;if(e.array.constructor===Float32Array)r=l;else if(e.array.constructor===Uint32Array)r=c;else if(e.array.constructor===Uint16Array)r=o;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");r=s}if(void 0===i&&(i=0),void 0===n&&(n=e.count),f.truncateDrawRange&&void 0!==t&&null===t.index){var a=i+n,h=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;i=Math.max(i,t.drawRange.start),0>(n=Math.min(a,h)-i)&&(n=0)}if(0===n)return null;var u,m=function(e,t,i){for(var n={min:Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},r=t;r<t+i;r++)for(var a=0;a<e.itemSize;a++){var s;4<e.itemSize?s=e.array[r*e.itemSize+a]:0==a?s=e.getX(r):1==a?s=e.getY(r):2==a?s=e.getZ(r):3==a&&(s=e.getW(r)),n.min[a]=Math.min(n.min[a],s),n.max[a]=Math.max(n.max[a],s)}return n}(e,i,n);void 0!==t&&(u=e===t.index?p:d);var g=function(e,t,i,n,r){N.bufferViews||(N.bufferViews=[]);for(var a=t===s?1:t===o?2:4,p=v(n*e.itemSize*a),h=new DataView(new ArrayBuffer(p)),u=0,f=i;f<i+n;f++)for(var m=0;m<e.itemSize;m++){var g;4<e.itemSize?g=e.array[f*e.itemSize+m]:0==m?g=e.getX(f):1==m?g=e.getY(f):2==m?g=e.getZ(f):3==m&&(g=e.getW(f)),t===l?h.setFloat32(u,g,!0):t===c?h.setUint32(u,g,!0):t===o?h.setUint16(u,g,!0):t===s&&h.setUint8(u,g),u+=a}var y={buffer:_(h.buffer),byteOffset:F,byteLength:p};return void 0!==r&&(y.target=r),r===d&&(y.byteStride=e.itemSize*a),F+=p,N.bufferViews.push(y),{id:N.bufferViews.length-1,byteLength:0}}(e,r,i,n,u),y={bufferView:g.id,byteOffset:g.byteOffset,componentType:r,count:n,max:m.max,min:m.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(y.normalized=!0),N.accessors||(N.accessors=[]),N.accessors.push(y),N.accessors.length-1}function C(t,i,n){K.images.has(t)||K.images.set(t,{});var r=K.images.get(t),a=i===e.RGBAFormat?"image/png":"image/jpeg",s=a+":flipY/"+n.toString();if(void 0!==r[s])return r[s];N.images||(N.images=[]);var o={mimeType:a};if(f.embedImages){var l=j=j||document.createElement("canvas");l.width=Math.min(t.width,f.maxTextureSize),l.height=Math.min(t.height,f.maxTextureSize);var c=l.getContext("2d");if(!0===n&&(c.translate(0,l.height),c.scale(1,-1)),"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)c.drawImage(t,0,0,l.width,l.height);else{i!==e.RGBAFormat&&i!==e.RGBFormat&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(t.width>f.maxTextureSize||t.height>f.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",t);let n=t.data;if(i===e.RGBFormat){n=new Uint8ClampedArray(t.height*t.width*4);for(var d=0,p=0;d<n.length;d+=4,p+=3)n[d+0]=t.data[p+0],n[d+1]=t.data[p+1],n[d+2]=t.data[p+2],n[d+3]=255}c.putImageData(new ImageData(n,t.width,t.height),0,0)}!0===f.binary?G.push(new Promise((function(e){l.toBlob((function(t){(function(e){return N.bufferViews||(N.bufferViews=[]),new Promise((function(t){var i=new window.FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){var e=w(i.result),n={buffer:_(e),byteOffset:F,byteLength:e.byteLength};F+=e.byteLength,N.bufferViews.push(n),t(N.bufferViews.length-1)}}))})(t).then((function(t){o.bufferView=t,e()}))}),a)}))):o.uri=l.toDataURL(a)}else o.uri=t.src;N.images.push(o);var h=N.images.length-1;return r[s]=h,h}function E(e){N.samplers||(N.samplers=[]);var t={magFilter:S[e.magFilter],minFilter:S[e.minFilter],wrapS:S[e.wrapS],wrapT:S[e.wrapT]};return N.samplers.push(t),N.samplers.length-1}function A(e){if(K.textures.has(e))return K.textures.get(e);N.textures||(N.textures=[]);var t={sampler:E(e),source:C(e.image,e.format,e.flipY)};e.name&&(t.name=e.name),N.textures.push(t);var i=N.textures.length-1;return K.textures.set(e,i),i}function R(t){if(K.materials.has(t))return K.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;N.materials||(N.materials=[]);var i={pbrMetallicRoughness:{}};t.isMeshBasicMaterial?(i.extensions={KHR_materials_unlit:{}},V.KHR_materials_unlit=!0):t.isGLTFSpecularGlossinessMaterial?(i.extensions={KHR_materials_pbrSpecularGlossiness:{}},V.KHR_materials_pbrSpecularGlossiness=!0):!t.isMeshStandardMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var n=t.color.toArray().concat([t.opacity]);if(g(n,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=n),t.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=t.metalness,i.pbrMetallicRoughness.roughnessFactor=t.roughness):t.isMeshBasicMaterial?(i.pbrMetallicRoughness.metallicFactor=0,i.pbrMetallicRoughness.roughnessFactor=.9):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),t.isGLTFSpecularGlossinessMaterial){i.pbrMetallicRoughness.baseColorFactor&&(i.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor=i.pbrMetallicRoughness.baseColorFactor);var r=[1,1,1];t.specular.toArray(r,0),i.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor=r,i.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor=t.glossiness}if(t.metalnessMap||t.roughnessMap)if(t.metalnessMap===t.roughnessMap){var a={index:A(t.metalnessMap)};T(a,t.metalnessMap),i.pbrMetallicRoughness.metallicRoughnessTexture=a}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(t.map){var s={index:A(t.map)};T(s,t.map),t.isGLTFSpecularGlossinessMaterial&&(i.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture=s),i.pbrMetallicRoughness.baseColorTexture=s}if(t.isGLTFSpecularGlossinessMaterial&&t.specularMap){var o={index:A(t.specularMap)};T(o,t.specularMap),i.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture=o}if(t.emissive){var l=t.emissive.clone().multiplyScalar(t.emissiveIntensity).toArray();if(g(l,[0,0,0])||(i.emissiveFactor=l),t.emissiveMap){var c={index:A(t.emissiveMap)};T(c,t.emissiveMap),i.emissiveTexture=c}}if(t.normalMap){var d={index:A(t.normalMap)};t.normalScale&&-1!==t.normalScale.x&&(t.normalScale.x!==t.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),d.scale=t.normalScale.x),T(d,t.normalMap),i.normalTexture=d}if(t.aoMap){var p={index:A(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(p.strength=t.aoMapIntensity),T(p,t.aoMap),i.occlusionTexture=p}t.transparent?i.alphaMode="BLEND":0<t.alphaTest&&(i.alphaMode="MASK",i.alphaCutoff=t.alphaTest),t.side===e.DoubleSide&&(i.doubleSided=!0),""!==t.name&&(i.name=t.name),b(t,i),N.materials.push(i);var h=N.materials.length-1;return K.materials.set(t,h),h}function k(s){var o=[s.geometry.uuid];if(Array.isArray(s.material))for(var l=0,c=s.material.length;l<c;l++)o.push(s.material[l].uuid);else o.push(s.material.uuid);var d=o.join(":");if(K.meshes.has(d))return K.meshes.get(d);var p,h=s.geometry;p=s.isLineSegments?i:s.isLineLoop?n:s.isLine?r:s.isPoints?t:s.material.wireframe?i:a,h.isBufferGeometry||(console.warn("GLTFExporter: Exporting THREE.Geometry will increase file size. Use THREE.BufferGeometry instead."),h=(new e.BufferGeometry).setFromObject(s));var u={},f={},g=[],y=[],v={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},w=h.getAttribute("normal");void 0===w||function(t){if(K.attributesNormalized.has(t))return!1;for(var i=new e.Vector3,n=0,r=t.count;n<r;n++)if(5e-4<Math.abs(i.fromBufferAttribute(t,n).length()-1))return!1;return!0}(w)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),h.setAttribute("normal",function(t){if(K.attributesNormalized.has(t))return K.attributesNormalized.get(t);for(var i=t.clone(),n=new e.Vector3,r=0,a=i.count;r<a;r++)n.fromBufferAttribute(i,r),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),i.setXYZ(r,n.x,n.y,n.z);return K.attributesNormalized.set(t,i),i}(w)));var x=null;for(var S in h.attributes)if("morph"!==S.substr(0,5)){var M=h.attributes[S];S=v[S]||S.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(S)||(S="_"+S),K.attributes.has(m(M))){f[S]=K.attributes.get(m(M));continue}x=null;var T=M.array;"JOINTS_0"!==S||T instanceof Uint16Array||T instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),x=new e.BufferAttribute(new Uint16Array(T),M.itemSize,M.normalized));var _=O(x||M,h);null!==_&&(f[S]=_,K.attributes.set(m(M),_))}if(void 0!==w&&h.setAttribute("normal",w),0===Object.keys(f).length)return null;if(void 0!==s.morphTargetInfluences&&0<s.morphTargetInfluences.length){var C=[],E=[],A={};if(void 0!==s.morphTargetDictionary)for(var k in s.morphTargetDictionary)A[s.morphTargetDictionary[k]]=k;for(l=0;l<s.morphTargetInfluences.length;++l){var L={},I=!1;for(var S in h.morphAttributes)if("position"===S||"normal"===S){M=h.morphAttributes[S][l];var P=S.toUpperCase(),D=h.attributes[S];if(K.attributes.has(m(M)))L[P]=K.attributes.get(m(M));else{var B=M.clone();if(!h.morphTargetsRelative)for(var z=0,j=M.count;z<j;z++)B.setXYZ(z,M.getX(z)-D.getX(z),M.getY(z)-D.getY(z),M.getZ(z)-D.getZ(z));L[P]=O(B,h),K.attributes.set(m(D),L[P])}}else I||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),I=!0);y.push(L),C.push(s.morphTargetInfluences[l]),void 0!==s.morphTargetDictionary&&E.push(A[l])}u.weights=C,0<E.length&&(u.extras={},u.extras.targetNames=E)}var F=Array.isArray(s.material);if(F&&0===h.groups.length)return null;for(var H,G=F?s.material:[s.material],U=F?h.groups:[{materialIndex:0,start:void 0,count:void 0}],W=(l=0,U.length);l<W;l++){if(b(h,H={mode:p,attributes:f}),0<y.length&&(H.targets=y),null!==h.index){var V=m(h.index);(void 0!==U[l].start||void 0!==U[l].count)&&(V+=":"+U[l].start+":"+U[l].count),K.attributes.has(V)?H.indices=K.attributes.get(V):(H.indices=O(h.index,h,U[l].start,U[l].count),K.attributes.set(V,H.indices)),null===H.indices&&delete H.indices}var Y=R(G[U[l].materialIndex]);null!==Y&&(H.material=Y),g.push(H)}u.primitives=g,N.meshes||(N.meshes=[]),N.meshes.push(u);var Z=N.meshes.length-1;return K.meshes.set(d,Z),Z}function L(t){N.cameras||(N.cameras=[]);var i=t.isOrthographicCamera,n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:0>=t.far?.001:t.far,znear:0>t.near?0:t.near}:n.perspective={aspectRatio:t.aspect,yfov:e.MathUtils.degToRad(t.fov),zfar:0>=t.far?.001:t.far,znear:0>t.near?0:t.near},""!==t.name&&(n.name=t.type),N.cameras.push(n),N.cameras.length-1}function I(t,i){N.animations||(N.animations=[]);for(var n=(t=GLTFExporter.Utils.mergeMorphTargetTracks(t.clone(),i)).tracks,r=[],a=[],s=0;s<n.length;++s){var o=n[s],l=e.PropertyBinding.parseTrackName(o.name),c=e.PropertyBinding.findNode(i,l.nodeName),d=M[l.propertyName];if("bones"===l.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(l.objectIndex):void 0),!c||!d)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',o.name),null;var p,h=o.values.length/o.times.length;d===M.morphTargetInfluences&&(h/=c.morphTargetInfluences.length),!0===o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(p="CUBICSPLINE",h/=3):p=o.getInterpolation()===e.InterpolateDiscrete?"STEP":"LINEAR",a.push({input:O(new e.BufferAttribute(o.times,1)),output:O(new e.BufferAttribute(o.values,h)),interpolation:p}),r.push({sampler:a.length-1,target:{node:U.get(c),path:d}})}return N.animations.push({name:t.name||"clip_"+N.animations.length,samplers:a,channels:r}),N.animations.length-1}function P(t){var i=N.nodes[U.get(t)],n=t.skeleton;if(void 0===n)return null;var r=t.skeleton.bones[0];if(void 0===r)return null;for(var a=[],s=new Float32Array(16*n.bones.length),o=0;o<n.bones.length;++o)a.push(U.get(n.bones[o])),n.boneInverses[o].toArray(s,16*o);return void 0===N.skins&&(N.skins=[]),N.skins.push({inverseBindMatrices:O(new e.BufferAttribute(s,16)),joints:a,skeleton:U.get(r)}),i.skin=N.skins.length-1}function D(e){var t={};e.name&&(t.name=e.name),t.color=e.color.toArray(),t.intensity=e.intensity,e.isDirectionalLight?t.type="directional":e.isPointLight?(t.type="point",0<e.distance&&(t.range=e.distance)):e.isSpotLight&&(t.type="spot",0<e.distance&&(t.range=e.distance),t.spot={},t.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,t.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||0!==e.target.position.x||0!==e.target.position.y||-1!==e.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");var i=N.extensions.KHR_lights_punctual.lights;return i.push(t),i.length-1}function B(e){N.nodes||(N.nodes=[]);var t={};if(f.trs){var i=e.quaternion.toArray(),n=e.position.toArray(),r=e.scale.toArray();g(i,[0,0,0,1])||(t.rotation=i),g(n,[0,0,0])||(t.translation=n),g(r,[1,1,1])||(t.scale=r)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===y(e.matrix)&&(t.matrix=e.matrix.elements);if(""!==e.name&&(t.name=e.name+""),b(e,t),e.isMesh||e.isLine||e.isPoints){var a=k(e);null!==a&&(t.mesh=a)}else if(e.isCamera)t.camera=L(e);else if(e.isDirectionalLight||e.isPointLight||e.isSpotLight)V.KHR_lights_punctual||(N.extensions=N.extensions||{},N.extensions.KHR_lights_punctual={lights:[]},V.KHR_lights_punctual=!0),t.extensions=t.extensions||{},t.extensions.KHR_lights_punctual={light:D(e)};else if(e.isLight)return console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e),null;if(e.isSkinnedMesh&&W.push(e),0<e.children.length){for(var s,o=[],l=0,c=e.children.length;l<c;l++)if((s=e.children[l]).visible||!1===f.onlyVisible){var d=B(s);null!==d&&o.push(d)}0<o.length&&(t.children=o)}N.nodes.push(t);var p=N.nodes.length-1;return U.set(e,p),p}function z(e){N.scenes||(N.scenes=[],N.scene=0);var t={};""!==e.name&&(t.name=e.name),N.scenes.push(t);for(var i,n=[],r=0,a=e.children.length;r<a;r++)if((i=e.children[r]).visible||!1===f.onlyVisible){var s=B(i);null!==s&&n.push(s)}0<n.length&&(t.nodes=n),b(e,t)}0<(f=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},f)).animations.length&&(f.trs=!0);var j,N={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},F=0,H=[],G=[],U=new Map,W=[],V={},K={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},Y=new Map,Z=0;(function(t){t=t instanceof Array?t:[t];for(var i=[],n=0;n<t.length;n++)t[n]instanceof e.Scene?z(t[n]):i.push(t[n]);for(0<i.length&&function(t){var i=new e.Scene;i.name="AuxScene";for(var n=0;n<t.length;n++)i.children.push(t[n]);z(i)}(i),n=0;n<W.length;++n)P(W[n]);for(n=0;n<f.animations.length;++n)I(f.animations[n],t[0])})(h),Promise.all(G).then((function(){var e=new Blob(H,{type:"application/octet-stream"}),t=Object.keys(V);if(0<t.length&&(N.extensionsUsed=t),N.buffers&&0<N.buffers.length&&(N.buffers[0].byteLength=e.size),!0===f.binary){(i=new window.FileReader).readAsArrayBuffer(e),i.onloadend=function(){var e=w(i.result),t=new DataView(new ArrayBuffer(8));t.setUint32(0,e.byteLength,!0),t.setUint32(4,5130562,!0);var n=w(function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t,i=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++)t=e.charCodeAt(n),i[n]=255<t?32:t;return i.buffer}(JSON.stringify(N)),32),r=new DataView(new ArrayBuffer(8));r.setUint32(0,n.byteLength,!0),r.setUint32(4,1313821514,!0);var a=new ArrayBuffer(12),s=new DataView(a);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0);var o=12+r.byteLength+n.byteLength+t.byteLength+e.byteLength;s.setUint32(8,o,!0);var l=new Blob([a,r,n,t,e],{type:"application/octet-stream"}),c=new window.FileReader;c.readAsArrayBuffer(l),c.onloadend=function(){u(c.result)}}}else if(N.buffers&&0<N.buffers.length){var i;(i=new window.FileReader).readAsDataURL(e),i.onloadend=function(){var e=i.result;N.buffers[0].uri=e,u(N)}}else u(N)}))}},GLTFExporter.Utils={insertKeyframe:function(e,t){var i,n=.001,r=e.getValueSize(),a=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+r),o=e.createInterpolant(new e.ValueBufferType(r));if(0===e.times.length){a[0]=t;for(var l=0;l<r;l++)s[l]=0;i=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<n)return 0;a[0]=t,a.set(e.times,1),s.set(o.evaluate(t),0),s.set(e.values,r),i=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<n)return e.times.length-1;a[a.length-1]=t,a.set(e.times,0),s.set(e.values,0),s.set(o.evaluate(t),e.values.length),i=a.length-1}else for(l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<n)return l;if(e.times[l]<t&&e.times[l+1]>t){a.set(e.times.slice(0,l+1),0),a[l+1]=t,a.set(e.times.slice(l+1),l+2),s.set(e.values.slice(0,(l+1)*r),0),s.set(o.evaluate(t),(l+1)*r),s.set(e.values.slice((l+1)*r),(l+2)*r),i=l+1;break}}return e.times=a,e.values=s,i},mergeMorphTargetTracks:function(t,i){for(var n=[],r={},a=t.tracks,s=0;s<a.length;++s){var o=a[s],l=e.PropertyBinding.parseTrackName(o.name),c=e.PropertyBinding.findNode(i,l.nodeName);if("morphTargetInfluences"===l.propertyName&&void 0!==l.propertyIndex){if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(e.InterpolateLinear)}var d,p=c.morphTargetInfluences.length,h=c.morphTargetDictionary[l.propertyIndex];if(void 0===h)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);if(void 0!==r[c.uuid]){var u=o.createInterpolant(new o.ValueBufferType(1));d=r[c.uuid];for(g=0;g<d.times.length;g++)d.values[g*p+h]=u.evaluate(d.times[g]);var f;for(g=0;g<o.times.length;g++)f=this.insertKeyframe(d,o.times[g]),d.values[f*p+h]=o.values[g]}else{for(var m=new((d=o.clone()).ValueBufferType)(p*d.times.length),g=0;g<d.times.length;g++)m[g*p+h]=d.values[g];d.name=l.nodeName+".morphTargetInfluences",d.values=m,r[c.uuid]=d,n.push(d)}}else n.push(o)}return t.tracks=n,t}},GLTFExporter}()}},function(e,t){e.exports=function(e){return(t=function(){}).prototype={constructor:t,parse:function(t,i){var n,r,a,s,o,l="",c=0,d=0,p=0,h=new e.Vector3,u=new e.Color,f=new e.Vector3,m=new e.Vector2,g=[],y={};l+="mtllib "+(i=i||"map")+".mtl\n",t.traverse((function(t){t instanceof e.Mesh&&function(t){var i=0,a=0,u=0,v=t.geometry,w=t.material,b=new e.Matrix3;if(v instanceof e.Geometry&&(v=(new e.BufferGeometry).setFromObject(t)),v instanceof e.BufferGeometry){var x=v.getAttribute("position"),S=v.getAttribute("normal"),M=v.getAttribute("uv"),T=v.getIndex();if(l+="o "+t.name+"\n",t.material&&t.material.name&&(l+="usemtl "+t.material.name+"\n"),void 0!==x)for(n=0,s=x.count;n<s;n++,i++)h.x=x.getX(n),h.y=x.getY(n),h.z=x.getZ(n),h.applyMatrix4(t.matrixWorld),l+="v "+h.x+" "+h.y+" "+h.z+"\n";if(void 0!==M)for(n=0,s=M.count;n<s;n++,u++)m.x=M.getX(n),m.y=M.getY(n),l+="vt "+m.x+" "+m.y+"\n";if(void 0!==S)for(b.getNormalMatrix(t.matrixWorld),n=0,s=S.count;n<s;n++,a++)f.x=S.getX(n),f.y=S.getY(n),f.z=S.getZ(n),f.applyMatrix3(b).normalize(),l+="vn "+f.x+" "+f.y+" "+f.z+"\n";if(l+=""===w.name?"usemtl material"+w.id+"\n":"usemtl "+w.name+"\n",y[w.id]=w,null!==T)for(n=0,s=T.count;n<s;n+=3){for(o=0;3>o;o++)r=T.getX(n+o)+1,g[o]=c+r+(S||M?"/"+(M?d+r:"")+(S?"/"+(p+r):""):"");l+="f "+g.join(" ")+"\n"}else for(n=0,s=x.count;n<s;n+=3){for(o=0;3>o;o++)r=n+o+1,g[o]=c+r+(S||M?"/"+(M?d+r:"")+(S?"/"+(p+r):""):"");l+="f "+g.join(" ")+"\n"}}else console.warn("THREE.OBJExporter.parseMesh(): geometry type unsupported",v);c+=i,d+=u,p+=a}(t),t instanceof e.Line&&function(t){var i=0,o=t.geometry,d=t.type;if(o instanceof e.Geometry&&(o=(new e.BufferGeometry).setFromObject(t)),o instanceof e.BufferGeometry){var p=o.getAttribute("position");if(l+="o "+t.name+"\n",void 0!==p)for(n=0,s=p.count;n<s;n++,i++)h.x=p.getX(n),h.y=p.getY(n),h.z=p.getZ(n),h.applyMatrix4(t.matrixWorld),l+="v "+h.x+" "+h.y+" "+h.z+"\n";if("Line"===d){for(l+="l ",r=1,s=p.count;r<=s;r++)l+=c+r+" ";l+="\n"}if("LineSegments"===d)for(a=1+(r=1),s=p.count;r<s;a=(r+=2)+1)l+="l "+(c+r)+" "+(c+a)+"\n"}else console.warn("THREE.OBJExporter.parseLine(): geometry type unsupported",o);c+=i}(t),t instanceof e.Points&&function(t){var i=0,a=t.geometry;if(a instanceof e.Geometry&&(a=(new e.BufferGeometry).setFromObject(t)),a instanceof e.BufferGeometry){var o=a.getAttribute("position"),d=a.getAttribute("color");if(l+="o "+t.name+"\n",void 0!==o)for(n=0,s=o.count;n<s;n++,i++)h.fromBufferAttribute(o,n),h.applyMatrix4(t.matrixWorld),l+="v "+h.x+" "+h.y+" "+h.z,void 0!==d&&(u.fromBufferAttribute(d,n),l+=" "+u.r+" "+u.g+" "+u.b),l+="\n";for(l+="p ",r=1,s=o.count;r<=s;r++)l+=c+r+" ";l+="\n"}else console.warn("THREE.OBJExporter.parsePoints(): geometry type unsupported",a);c+=i}(t)}));var v="",w={};for(var b in y){var x=y[b];if(v+=""===x.name?"newmtl material"+x.id+"\n":"newmtl "+x.name+"\n",v+="Ns 10.0000\n",v+="Ni 1.5000\n",v+="d 1.0000\n",v+="Tr 0.0000\n",v+="Tf 1.0000 1.0000 1.0000\n",v+="illum 2\n",v+="Ka "+x.color.r+" "+x.color.g+" "+x.color.b+" \n",v+="Kd "+x.color.r+" "+x.color.g+" "+x.color.b+" \n",v+="Ks 0.0000 0.0000 0.0000\n",v+="Ke 0.0000 0.0000 0.0000\n",x.map&&x.map instanceof e.Texture)try{var S=x.map.image.currentSrc.slice(x.map.image.currentSrc.lastIndexOf("/"),x.map.image.currentSrc.length-1).split("?build=")[0];w[S.replace("/","")]||(w[S.replace("/","")]=x.map.image),v+="map_Ka "+S+"\n",v+="map_Kd "+S+"\n"}catch(e){console.log(e)}}return{obj:l,mtl:v,img:w}}},t;var t}},function(e,t){e.exports=function(e){return function(t){var i=this;t.rotation.set(0,0,0);var n=new e.Object3D;n.add(t);var r=new e.Object3D;r.position.y=10,r.add(n);var a=Math.PI/2,s=function(e){if(!1!==i.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,s=e.movementY||e.mozMovementY||e.webkitMovementY||0;r.rotation.y-=.002*t,n.rotation.x-=.002*s,n.rotation.x=Math.max(-a,Math.min(a,n.rotation.x))}},o=function(){i.enabled=!1};this.dispose=function(){document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",o,!1)},document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",o,!1),this.enabled=!1,this.getObject=function(){return r},this.getRotation=function(){return[r.rotation.y,n.rotation.x,0]},this.setRotation=function(e,t){r.rotation.y=e,n.rotation.x=t,n.rotation.x=Math.max(-a,Math.min(a,n.rotation.x))},this.getDir=function(){var t=new e.Vector3(0,0,-1),i=new e.Euler(0,0,0,"YXZ");return function(e){return i.set(n.rotation.x,r.rotation.y,0),e.copy(t).applyEuler(i),e}}()}}},function(e,t){e.exports=function(e){return function(){var t=function(t){e.MeshBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.fog=!1,this.side=e.FrontSide,this.transparent=!0,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(e){e?(this.color.setRGB(1,1,0),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};(t.prototype=Object.create(e.MeshBasicMaterial.prototype)).constructor=t;var i=function(t){e.LineBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.fog=!1,this.transparent=!0,this.linewidth=1,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(e){e?(this.color.setRGB(1,1,0),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};(i.prototype=Object.create(e.LineBasicMaterial.prototype)).constructor=i;var n=new t({visible:!1,transparent:!1});e.TransformGizmo=function(){this.init=function(){e.Object3D.call(this),this.handles=new e.Object3D,this.pickers=new e.Object3D,this.planes=new e.Object3D,this.add(this.handles),this.add(this.pickers),this.add(this.planes);var t=new e.PlaneBufferGeometry(50,50,2,2),i=new e.MeshBasicMaterial({visible:!1,side:e.DoubleSide}),n={XY:new e.Mesh(t,i),YZ:new e.Mesh(t,i),XZ:new e.Mesh(t,i),XYZE:new e.Mesh(t,i)};for(var r in this.activePlane=n.XYZE,n.YZ.rotation.set(0,Math.PI/2,0),n.XZ.rotation.set(-Math.PI/2,0,0),n)n[r].name=r,this.planes.add(n[r]),this.planes[r]=n[r];var a=function(e,t){for(var i in e)for(r=e[i].length;r--;){var n=e[i][r][0],a=e[i][r][1],s=e[i][r][2];n.name=i,n.renderOrder=1/0,a&&n.position.set(a[0],a[1],a[2]),s&&n.rotation.set(s[0],s[1],s[2]),t.add(n)}};a(this.handleGizmos,this.handles),a(this.pickerGizmos,this.pickers),this.traverse((function(t){if(t instanceof e.Mesh){t.updateMatrix();var i=t.geometry.clone();i.applyMatrix4(t.matrix),t.geometry=i,t.position.set(0,0,0),t.rotation.set(0,0,0),t.scale.set(1,1,1)}}))},this.highlight=function(e){this.traverse((function(t){t.material&&t.material.highlight&&(t.name===e?t.material.highlight(!0):t.material.highlight(!1))}))}},e.TransformGizmo.prototype=Object.create(e.Object3D.prototype),e.TransformGizmo.prototype.constructor=e.TransformGizmo,e.TransformGizmo.prototype.update=function(t,i){var n=new e.Vector3(0,0,0),r=new e.Vector3(0,1,0),a=new e.Matrix4;this.traverse((function(e){-1===e.name.search("E")?(-1!==e.name.search("X")||-1!==e.name.search("Y")||-1!==e.name.search("Z"))&&e.quaternion.setFromEuler(t):e.quaternion.setFromRotationMatrix(a.lookAt(i,n,r))}))},e.TransformGizmoTranslate=function(){e.TransformGizmo.call(this);var r=new e.ConeBufferGeometry(.05,.2,12,1,!1);r.translate(0,.5,0);var a=new e.BufferGeometry;a.setAttribute("position",new e.Float32BufferAttribute([0,0,0,1,0,0],3));var s=new e.BufferGeometry;s.setAttribute("position",new e.Float32BufferAttribute([0,0,0,0,1,0],3));var o=new e.BufferGeometry;o.setAttribute("position",new e.Float32BufferAttribute([0,0,0,0,0,1],3)),this.handleGizmos={X:[[new e.Mesh(r,new t({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new e.Line(a,new i({color:16711680}))]],Y:[[new e.Mesh(r,new t({color:65280})),[0,.5,0]],[new e.Line(s,new i({color:65280}))]],Z:[[new e.Mesh(r,new t({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new e.Line(o,new i({color:255}))]],XYZ:[[new e.Mesh(new e.OctahedronGeometry(.1,0),new t({color:16777215,opacity:.25})),[0,0,0],[0,0,0]]],XY:[[new e.Mesh(new e.PlaneBufferGeometry(.29,.29),new t({color:16776960,opacity:.25})),[.15,.15,0]]],YZ:[[new e.Mesh(new e.PlaneBufferGeometry(.29,.29),new t({color:65535,opacity:.25})),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new e.Mesh(new e.PlaneBufferGeometry(.29,.29),new t({color:16711935,opacity:.25})),[.15,0,.15],[-Math.PI/2,0,0]]]},this.pickerGizmos={X:[[new e.Mesh(new e.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new e.Mesh(new e.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new e.Mesh(new e.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new e.Mesh(new e.OctahedronGeometry(.2,0),n)]],XY:[[new e.Mesh(new e.PlaneBufferGeometry(.4,.4),n),[.2,.2,0]]],YZ:[[new e.Mesh(new e.PlaneBufferGeometry(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new e.Mesh(new e.PlaneBufferGeometry(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},this.setActivePlane=function(t,i){var n=new e.Matrix4;i.applyMatrix4(n.copy(n.extractRotation(this.planes.XY.matrixWorld)).invert()),"X"===t&&(this.activePlane=this.planes.XY,Math.abs(i.y)>Math.abs(i.z)&&(this.activePlane=this.planes.XZ)),"Y"===t&&(this.activePlane=this.planes.XY,Math.abs(i.x)>Math.abs(i.z)&&(this.activePlane=this.planes.YZ)),"Z"===t&&(this.activePlane=this.planes.XZ,Math.abs(i.x)>Math.abs(i.y)&&(this.activePlane=this.planes.YZ)),"XYZ"===t&&(this.activePlane=this.planes.XYZE),"XY"===t&&(this.activePlane=this.planes.XY),"YZ"===t&&(this.activePlane=this.planes.YZ),"XZ"===t&&(this.activePlane=this.planes.XZ)},this.init()},e.TransformGizmoTranslate.prototype=Object.create(e.TransformGizmo.prototype),e.TransformGizmoTranslate.prototype.constructor=e.TransformGizmoTranslate,e.TransformGizmoRotate=function(){e.TransformGizmo.call(this);var t=function(t,i,n){var r=new e.BufferGeometry,a=[];n=n||1;for(var s=0;s<=64*n;++s)"x"===i&&a.push(0,Math.cos(s/32*Math.PI)*t,Math.sin(s/32*Math.PI)*t),"y"===i&&a.push(Math.cos(s/32*Math.PI)*t,0,Math.sin(s/32*Math.PI)*t),"z"===i&&a.push(Math.sin(s/32*Math.PI)*t,Math.cos(s/32*Math.PI)*t,0);return r.setAttribute("position",new e.Float32BufferAttribute(a,3)),r};this.handleGizmos={X:[[new e.Line(new t(1,"x",.5),new i({color:16711680}))]],Y:[[new e.Line(new t(1,"y",.5),new i({color:65280}))]],Z:[[new e.Line(new t(1,"z",.5),new i({color:255}))]],E:[[new e.Line(new t(1.25,"z",1),new i({color:13421568}))]],XYZE:[[new e.Line(new t(1,"z",1),new i({color:7895160}))]]},this.pickerGizmos={X:[[new e.Mesh(new e.TorusBufferGeometry(1,.12,4,12,Math.PI),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new e.Mesh(new e.TorusBufferGeometry(1,.12,4,12,Math.PI),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new e.Mesh(new e.TorusBufferGeometry(1,.12,4,12,Math.PI),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new e.Mesh(new e.TorusBufferGeometry(1.25,.12,2,24),n)]],XYZE:[[new e.Mesh(new e.TorusBufferGeometry(1,.12,2,24),n)]]},this.pickerGizmos.XYZE[0][0].visible=!1,this.setActivePlane=function(e){"E"===e&&(this.activePlane=this.planes.XYZE),"X"===e&&(this.activePlane=this.planes.YZ),"Y"===e&&(this.activePlane=this.planes.XZ),"Z"===e&&(this.activePlane=this.planes.XY)},this.update=function(t,i){e.TransformGizmo.prototype.update.apply(this,arguments);var n=new e.Matrix4,r=new e.Euler(0,0,1),a=new e.Quaternion,s=new e.Vector3(1,0,0),o=new e.Vector3(0,1,0),l=new e.Vector3(0,0,1),c=new e.Quaternion,d=new e.Quaternion,p=new e.Quaternion,h=i.clone();r.copy(this.planes.XY.rotation),a.setFromEuler(r),n.makeRotationFromQuaternion(a).copy(n).invert(),h.applyMatrix4(n),this.traverse((function(e){a.setFromEuler(r),"X"===e.name&&(c.setFromAxisAngle(s,Math.atan2(-h.y,h.z)),a.multiplyQuaternions(a,c),e.quaternion.copy(a)),"Y"===e.name&&(d.setFromAxisAngle(o,Math.atan2(h.x,h.z)),a.multiplyQuaternions(a,d),e.quaternion.copy(a)),"Z"===e.name&&(p.setFromAxisAngle(l,Math.atan2(h.y,h.x)),a.multiplyQuaternions(a,p),e.quaternion.copy(a))}))},this.init()},e.TransformGizmoRotate.prototype=Object.create(e.TransformGizmo.prototype),e.TransformGizmoRotate.prototype.constructor=e.TransformGizmoRotate,e.TransformGizmoScale=function(){e.TransformGizmo.call(this);var r=new e.BoxBufferGeometry(.125,.125,.125);r.translate(0,.5,0);var a=new e.BufferGeometry;a.setAttribute("position",new e.Float32BufferAttribute([0,0,0,1,0,0],3));var s=new e.BufferGeometry;s.setAttribute("position",new e.Float32BufferAttribute([0,0,0,0,1,0],3));var o=new e.BufferGeometry;o.setAttribute("position",new e.Float32BufferAttribute([0,0,0,0,0,1],3)),this.handleGizmos={X:[[new e.Mesh(r,new t({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new e.Line(a,new i({color:16711680}))]],Y:[[new e.Mesh(r,new t({color:65280})),[0,.5,0]],[new e.Line(s,new i({color:65280}))]],Z:[[new e.Mesh(r,new t({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new e.Line(o,new i({color:255}))]],XYZ:[[new e.Mesh(new e.BoxBufferGeometry(.125,.125,.125),new t({color:16777215,opacity:.25}))]]},this.pickerGizmos={X:[[new e.Mesh(new e.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new e.Mesh(new e.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new e.Mesh(new e.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new e.Mesh(new e.BoxBufferGeometry(.4,.4,.4),n)]]},this.setActivePlane=function(t,i){var n=new e.Matrix4;i.applyMatrix4(n.copy(n.extractRotation(this.planes.XY.matrixWorld)).invert()),"X"===t&&(this.activePlane=this.planes.XY,Math.abs(i.y)>Math.abs(i.z)&&(this.activePlane=this.planes.XZ)),"Y"===t&&(this.activePlane=this.planes.XY,Math.abs(i.x)>Math.abs(i.z)&&(this.activePlane=this.planes.YZ)),"Z"===t&&(this.activePlane=this.planes.XZ,Math.abs(i.x)>Math.abs(i.y)&&(this.activePlane=this.planes.YZ)),"XYZ"===t&&(this.activePlane=this.planes.XYZE)},this.init()},e.TransformGizmoScale.prototype=Object.create(e.TransformGizmo.prototype),e.TransformGizmoScale.prototype.constructor=e.TransformGizmoScale,e.TransformControls=function(t,i){function n(e){if(void 0!==l.object&&!0!==d&&(void 0===e.button||0===e.button)){var t=o(e.changedTouches?e.changedTouches[0]:e,p[c].pickers.children),i=null;t&&(i=t.object.name,e.preventDefault()),l.axis!==i&&(l.axis=i,l.update(),l.dispatchEvent(f))}}function r(e){if(void 0!==l.object&&!0!==d&&(void 0===e.button||0===e.button)){var t=e.changedTouches?e.changedTouches[0]:e;if(0===t.button||void 0===t.button){var i=o(t,p[c].pickers.children);if(i){e.preventDefault(),e.stopPropagation(),l.axis=i.object.name,l.dispatchEvent(m),l.update(),O.copy(K).sub(U).normalize(),p[c].setActivePlane(l.axis,O);var n=o(t,[p[c].activePlane]);n&&(j.copy(l.object.position),N.copy(l.object.scale),F.extractRotation(l.object.matrix),V.extractRotation(l.object.matrixWorld),H.extractRotation(l.object.parent.matrixWorld),G.setFromMatrixScale(C.copy(l.object.parent.matrixWorld).invert()),x.copy(n.point))}}d=!0}}function a(e){if(void 0!==l.object&&null!==l.axis&&0!=d&&(void 0===e.button||0===e.button)){var t=o(e.changedTouches?e.changedTouches[0]:e,[p[c].activePlane]);!1===t||(e.preventDefault(),e.stopPropagation(),b.copy(t.point),"translate"===c?(b.sub(x),b.multiply(G),"local"===l.space&&(b.applyMatrix4(C.copy(V).invert()),-1===l.axis.search("X")&&(b.x=0),-1===l.axis.search("Y")&&(b.y=0),-1===l.axis.search("Z")&&(b.z=0),b.applyMatrix4(F),l.object.position.copy(j),l.object.position.add(b)),("world"===l.space||-1!==l.axis.search("XYZ"))&&(-1===l.axis.search("X")&&(b.x=0),-1===l.axis.search("Y")&&(b.y=0),-1===l.axis.search("Z")&&(b.z=0),b.applyMatrix4(C.copy(H).invert()),l.object.position.copy(j),l.object.position.add(b)),null!==l.translationSnap&&("local"===l.space&&l.object.position.applyMatrix4(C.copy(V).invert()),-1!==l.axis.search("X")&&(l.object.position.x=Math.round(l.object.position.x/l.translationSnap)*l.translationSnap),-1!==l.axis.search("Y")&&(l.object.position.y=Math.round(l.object.position.y/l.translationSnap)*l.translationSnap),-1!==l.axis.search("Z")&&(l.object.position.z=Math.round(l.object.position.z/l.translationSnap)*l.translationSnap),"local"===l.space&&l.object.position.applyMatrix4(V))):"scale"===c?(b.sub(x),b.multiply(G),"local"===l.space&&("XYZ"===l.axis?(T=1+b.y/Math.max(N.x,N.y,N.z),l.object.scale.x=N.x*T,l.object.scale.y=N.y*T,l.object.scale.z=N.z*T):(b.applyMatrix4(C.copy(V).invert()),l.fakeScale?("X"===l.axis&&(l.object.scale.x=N.x*(1+b.x/N.x),l.object.scale.z=N.x*(1+b.x/N.x)),"Y"===l.axis&&(l.object.scale.y=N.y*(1+b.y/N.y)),"Z"===l.axis&&(l.object.scale.x=N.z*(1+b.z/N.z),l.object.scale.z=N.z*(1+b.z/N.z))):("X"===l.axis&&(l.object.scale.x=N.x*(1+b.x/N.x)),"Y"===l.axis&&(l.object.scale.y=N.y*(1+b.y/N.y)),"Z"===l.axis&&(l.object.scale.z=N.z*(1+b.z/N.z))))),null!==l.scaleSnap&&("X"===l.axis&&(l.object.scale.x=Math.round(l.object.scale.x/l.scaleSnap)*l.scaleSnap),"Y"===l.axis&&(l.object.scale.y=Math.round(l.object.scale.y/l.scaleSnap)*l.scaleSnap),"Z"===l.axis&&(l.object.scale.z=Math.round(l.object.scale.z/l.scaleSnap)*l.scaleSnap))):"rotate"===c&&(b.sub(U),b.multiply(G),E.copy(x).sub(U),E.multiply(G),"E"===l.axis?(b.applyMatrix4(C.copy(_).invert()),E.applyMatrix4(C.copy(_).invert()),S.set(Math.atan2(b.z,b.y),Math.atan2(b.x,b.z),Math.atan2(b.y,b.x)),M.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),A.setFromRotationMatrix(C.copy(H).invert()),z.setFromAxisAngle(O,S.z-M.z),I.setFromRotationMatrix(V),A.multiplyQuaternions(A,z),A.multiplyQuaternions(A,I),l.object.quaternion.copy(A)):"XYZE"===l.axis?(z.setFromEuler(b.clone().cross(E).normalize()),A.setFromRotationMatrix(C.copy(H).invert()),P.setFromAxisAngle(z,-b.clone().angleTo(E)),I.setFromRotationMatrix(V),A.multiplyQuaternions(A,P),A.multiplyQuaternions(A,I),l.object.quaternion.copy(A)):"local"===l.space?(b.applyMatrix4(C.copy(V).invert()),E.applyMatrix4(C.copy(V).invert()),S.set(Math.atan2(b.z,b.y),Math.atan2(b.x,b.z),Math.atan2(b.y,b.x)),M.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),I.setFromRotationMatrix(F),null===l.rotationSnap?(P.setFromAxisAngle(R,S.x-M.x),D.setFromAxisAngle(k,S.y-M.y),B.setFromAxisAngle(L,S.z-M.z)):(P.setFromAxisAngle(R,Math.round((S.x-M.x)/l.rotationSnap)*l.rotationSnap),D.setFromAxisAngle(k,Math.round((S.y-M.y)/l.rotationSnap)*l.rotationSnap),B.setFromAxisAngle(L,Math.round((S.z-M.z)/l.rotationSnap)*l.rotationSnap)),"X"===l.axis&&I.multiplyQuaternions(I,P),"Y"===l.axis&&I.multiplyQuaternions(I,D),"Z"===l.axis&&I.multiplyQuaternions(I,B),l.object.quaternion.copy(I)):"world"===l.space&&(S.set(Math.atan2(b.z,b.y),Math.atan2(b.x,b.z),Math.atan2(b.y,b.x)),M.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),A.setFromRotationMatrix(C.copy(H).invert()),null===l.rotationSnap?(P.setFromAxisAngle(R,S.x-M.x),D.setFromAxisAngle(k,S.y-M.y),B.setFromAxisAngle(L,S.z-M.z)):(P.setFromAxisAngle(R,Math.round((S.x-M.x)/l.rotationSnap)*l.rotationSnap),D.setFromAxisAngle(k,Math.round((S.y-M.y)/l.rotationSnap)*l.rotationSnap),B.setFromAxisAngle(L,Math.round((S.z-M.z)/l.rotationSnap)*l.rotationSnap)),I.setFromRotationMatrix(V),"X"===l.axis&&A.multiplyQuaternions(A,P),"Y"===l.axis&&A.multiplyQuaternions(A,D),"Z"===l.axis&&A.multiplyQuaternions(A,B),A.multiplyQuaternions(A,I),l.object.quaternion.copy(A))),l.update(),l.dispatchEvent(f),l.dispatchEvent(y))}}function s(e){e.preventDefault(),void 0!==e.button&&0!==e.button||(d&&null!==l.axis&&(g.mode=c,l.dispatchEvent(g)),d=!1,"TouchEvent"in window&&e instanceof TouchEvent?(l.axis=null,l.update(),l.dispatchEvent(f)):n(e))}function o(e,n){var r=i.getBoundingClientRect(),a=(e.clientX-r.left)/r.width,s=(e.clientY-r.top)/r.height;w.set(2*a-1,-2*s+1),v.setFromCamera(w,t);var o=v.intersectObjects(n,!0);return!!o[0]&&o[0]}e.Object3D.call(this),i=void 0===i?document:i,this.object=void 0,this.visible=!1,this.translationSnap=null,this.rotationSnap=null,this.scaleSnap=null,this.fakeScale=null,this.space="world",this.size=1,this.axis=null;var l=this,c="translate",d=!1,p={translate:new e.TransformGizmoTranslate,rotate:new e.TransformGizmoRotate,scale:new e.TransformGizmoScale};for(var h in p){var u=p[h];u.visible=h===c,this.add(u)}var f={type:"change"},m={type:"mouseDown"},g={type:"mouseUp",mode:c},y={type:"objectChange"},v=new e.Raycaster,w=new e.Vector2,b=new e.Vector3,x=new e.Vector3,S=new e.Vector3,M=new e.Vector3,T=1,_=new e.Matrix4,O=new e.Vector3,C=new e.Matrix4,E=new e.Vector3,A=new e.Quaternion,R=new e.Vector3(1,0,0),k=new e.Vector3(0,1,0),L=new e.Vector3(0,0,1),I=new e.Quaternion,P=new e.Quaternion,D=new e.Quaternion,B=new e.Quaternion,z=new e.Quaternion,j=new e.Vector3,N=new e.Vector3,F=new e.Matrix4,H=new e.Matrix4,G=new e.Vector3,U=new e.Vector3,W=new e.Euler,V=new e.Matrix4,K=new e.Vector3,Y=new e.Euler;i.addEventListener("mousedown",r,!1),i.addEventListener("touchstart",r,!1),i.addEventListener("mousemove",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("mousemove",a,!1),i.addEventListener("touchmove",a,!1),i.addEventListener("mouseup",s,!1),i.addEventListener("mouseout",s,!1),i.addEventListener("touchend",s,!1),i.addEventListener("touchcancel",s,!1),i.addEventListener("touchleave",s,!1),this.dispose=function(){i.removeEventListener("mousedown",r),i.removeEventListener("touchstart",r),i.removeEventListener("mousemove",n),i.removeEventListener("touchmove",n),i.removeEventListener("mousemove",a),i.removeEventListener("touchmove",a),i.removeEventListener("mouseup",s),i.removeEventListener("mouseout",s),i.removeEventListener("touchend",s),i.removeEventListener("touchcancel",s),i.removeEventListener("touchleave",s)},this.attach=function(e){return this.object=e,this.visible=!0,this.update(),this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.getMode=function(){return c},this.setMode=function(e){for(var t in"scale"===(c=e||c)&&(l.space="local"),p)p[t].visible=t===c;this.update(),l.dispatchEvent(f)},this.setTranslationSnap=function(e){l.translationSnap=e},this.setRotationSnap=function(e){l.rotationSnap=e},this.setScaleSnap=function(e){l.scaleSnap=e},this.setSize=function(e){l.size=e,this.update(),l.dispatchEvent(f)},this.setSpace=function(e){l.space=e,this.update(),l.dispatchEvent(f)},this.update=function(){void 0===l.object||(l.object.updateMatrixWorld(),U.setFromMatrixPosition(l.object.matrixWorld),W.setFromRotationMatrix(C.extractRotation(l.object.matrixWorld)),t.updateMatrixWorld(),K.setFromMatrixPosition(t.matrixWorld),Y.setFromRotationMatrix(C.extractRotation(t.matrixWorld)),T=U.distanceTo(K)/6*l.size,this.position.copy(U),this.scale.set(T,T,T),O.copy(K).sub(U).normalize(),"local"===l.space?p[c].update(W,O):"world"===l.space&&p[c].update(new e.Euler,O),p[c].highlight(l.axis))}},e.TransformControls.prototype=Object.create(e.Object3D.prototype),e.TransformControls.prototype.constructor=e.TransformControls}()}},function(e,t){e.exports=[{name:"Quickstart",icon:"",data:'{"name":"Test","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"objects":[{"p":[0,-10,0],"s":[100,10,100]}],"spawns":[[0,0,0,0,0,0]]}'},{name:"Parkour",icon:"",data:'{"name":"Parkour Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"dthY":0,"colors":["#9F9F9F","#0C0C0C","#FF0000","#00FF1E","#00FF12","#505050"],"xyz":[90,15,90,270,15,2,2,15,94,89,7,89,0.1,1,89,30,3,30,31,1,31,6,69,90],"objects":[{"p":[0,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[90,0,46],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":1},{"p":[90,0,-46],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":1},{"p":[-46,0,0],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":2},{"p":[180,15,0],"i":25,"tm":0,"si":3},{"p":[180,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[137,16,0],"l":1,"t":5,"ei":3,"ci":4,"si":4},{"p":[137,15,0],"l":1,"t":9,"ei":5,"si":4},{"p":[90,12,0],"t":9,"ei":0,"ci":1,"si":5},{"p":[90,13,0],"l":1,"t":5,"ei":2,"ci":2,"si":6},{"p":[139,15,0],"i":10,"si":7}],"config":{"modes":[4]},"spawns":[[0,15,0,0,0,0]]}'},{name:"Battle Royale",icon:"",data:'{"name":"BR Template","terrainSeed":"696969","terrainTSeed":"7s123jmco","terrainWidth":1000,"terrainHeight":1000,"terrainMntMlt":0,"terrainMntCol":"#707070","terrainSnwCol":"#e8fdff","terrainGrsCol":"#5E692F","terrainDrtCol":"#7F6238","terrainSndCol":"#967F51","terrainEase":1,"skyDome":true,"skyDomeCol0":"#74a4b9","skyDomeCol1":"#dce8ed","skyDomeCol2":"#dce8ed","skyDomeTex":false,"zone":true,"zoneSize":1770,"zoneSpeed":5,"zoneRnd":true,"zoneCol0":"#c542d9","zoneCol1":"#c542d9","zoneCol2":"#c542d9","sizeMlt":2,"ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#FFCB00","#00C9FF"],"xyz":[15,60,15,15,45,15,15,30,15,45,27,2,2,27,45,2,27,60,30,27,2,15,6,6,15,6,7,7,6,13,12,2,4,4000,10,4000,4000,0.01,4000],"objects":[{"p":[-7.5,0,-8],"t":9,"ei":0,"ci":1,"si":0},{"p":[37.5,0,-23],"t":9,"ei":0,"ci":1,"si":1},{"p":[37.5,0,52],"t":9,"ei":0,"ci":1,"si":1},{"p":[82.5,0,7],"t":9,"ei":0,"ci":1,"si":1},{"p":[-67.5,0,52],"t":9,"ei":0,"ci":1,"si":2},{"p":[-150.5,0,266.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-210.5,0,266.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-180.5,0,266.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[-150.5,0,296.5],"t":9,"ei":2,"ci":1,"si":4},{"p":[-150.5,0,326.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[410,0,-95],"t":9,"ei":0,"ci":1,"si":2},{"p":[440,0,-95],"t":9,"ei":2,"ci":1,"si":3},{"p":[470,0,-95],"t":9,"ei":0,"ci":1,"si":2},{"p":[-82.5,0,-67.5],"t":9,"ei":0,"ci":1,"si":1},{"p":[-82.5,0,-37.5],"t":9,"ei":2,"ci":1,"si":4},{"p":[-82.5,0,-7.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[112.5,0,82.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-82.5,0,-112.5],"t":9,"ei":0,"ci":1,"si":1},{"p":[-82.5,0,-150],"t":9,"ei":2,"ci":1,"si":5},{"p":[-82.5,0,-187.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-112.5,0,-7.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[-142.5,0,-7.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[142.5,0,187.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[187.5,0,142.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[142.5,0,142.5],"t":9,"ei":0,"ci":1,"si":1},{"p":[-83,0,172.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-187.5,0,-7.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-187.5,0,112.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-142.5,0,112.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-165,0,112.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[-7.5,0,-112.5],"t":9,"ei":0,"ci":1,"si":1},{"p":[289,0,-187.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[127.5,0,-127.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[127.5,0,-187.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[157.5,0,22.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[440,0,-99],"t":5,"ci":3,"si":7},{"p":[-112.5,0,-12],"t":5,"ci":3,"si":7},{"p":[-180.5,0,270.5],"t":5,"ci":3,"si":8},{"p":[123.5,0,82.5],"t":5,"ci":3,"si":9},{"p":[-182,6,271],"i":26,"tm":0,"si":10},{"p":[-112.5,6,-12],"i":26,"r":[0,3.1416,0],"tm":0,"w":1,"si":10},{"p":[439.5,6,-99],"i":26,"r":[0,3.1416,0],"tm":0,"w":3,"si":10},{"p":[123.5,6,82],"i":26,"r":[0,1.5708,0],"tm":0,"w":7,"si":10},{"p":[0,-41.5,0],"i":29,"t":13,"tm":0,"ts":1,"td":1,"te":3,"ta":1,"ci":4,"si":11},{"p":[0,-27.5,0],"i":38,"l":1,"o":0.7,"t":13,"ts":1,"td":1,"wh":1,"ws":2,"tx":32,"tz":32,"ci":4,"si":12},{"p":[203,0,-397],"t":9,"ei":0,"ci":1,"si":2},{"p":[-329,0,-93],"t":9,"ei":0,"ci":1,"si":2},{"p":[-88.5,0,-461.5],"t":9,"ei":0,"ci":1,"si":1},{"p":[-88.5,0,-431.5],"t":9,"ei":2,"ci":1,"si":4},{"p":[-88.5,0,-401.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-118.5,0,-401.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[-118.5,0,-406],"t":5,"ci":3,"si":7},{"p":[-118.5,6,-406],"i":26,"r":[0,3.1416,0],"tm":0,"w":1,"si":10},{"p":[-148.5,0,-401.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[361.5,0,530],"t":9,"ei":0,"ci":1,"si":1},{"p":[361.5,0,560],"t":9,"ei":2,"ci":1,"si":4},{"p":[361.5,0,590],"t":9,"ei":0,"ci":1,"si":2},{"p":[331.5,0,590],"t":9,"ei":2,"ci":1,"si":3},{"p":[331.5,0,585.5],"t":5,"ci":3,"si":7},{"p":[331.5,6,585.5],"i":26,"r":[0,3.1416,0],"tm":0,"w":1,"si":10},{"p":[301.5,0,590],"t":9,"ei":0,"ci":1,"si":2},{"p":[-404.5,0,4.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-359.5,0,4.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-382,0,4.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[278.5,0,100.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[323.5,0,100.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[301,0,100.5],"t":9,"ei":2,"ci":1,"si":6}],"config":{"modes":[8],"classes":[9],"settings":{"maxPlayers":16},"weps":{"18":{"spdMlt":3}}},"spawns":[[448,0,396,0,2,0],[-327.5,0,486.5,0,0,0],[-416,0,-403,0,0,0],[389,0,-373.5,0,2,0]]}'},{name:"Zombie Infected",icon:"",data:'{"name":"Infect Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#6E6E6E","#848484","#FF0000","#4C4C4C","#505050","#0D0D0D"],"xyz":[270,15,105,15,45,30,15,15,45,2,15,30,13,29,43,16,1,45,16,29,1,270,15,3,2,15,111,6,2,27,15,2,105,2,47,4,12,2,4,2,6,30],"objects":[{"p":[21,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[67.5,15,-37.5],"t":9,"ei":2,"ci":1,"si":1},{"p":[67.5,15,37.5],"t":9,"ei":2,"ci":1,"si":1},{"p":[67.5,45,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[-74,15,37.5],"o":0.6,"t":9,"ei":3,"ci":1,"si":3},{"p":[-44,15,-22.5],"o":0.6,"t":9,"ei":3,"ci":1,"si":3},{"p":[-14,15,-7.5],"o":0.6,"t":9,"ei":3,"ci":1,"si":3},{"p":[16,15,22.5],"o":0.6,"t":9,"ei":3,"ci":1,"si":3},{"p":[67.5,15,0],"h":420,"o":0.9,"t":12,"si":4},{"p":[67.5,44,0],"l":1,"t":5,"ci":4,"si":5},{"p":[67.5,15,-22],"l":1,"t":5,"ci":4,"si":6},{"p":[67.5,15,22],"l":1,"t":5,"ci":4,"si":6},{"p":[21,0,-54],"t":5,"bo":1,"ei":5,"ci":5,"si":7},{"p":[21,0,54],"t":5,"bo":1,"ei":5,"ci":5,"si":7},{"p":[-115,0,0],"t":5,"bo":1,"ei":5,"ci":5,"si":8},{"p":[157,0,0],"t":5,"bo":1,"ei":5,"ci":5,"si":8},{"p":[78,20,-37.5],"t":5,"ci":6,"si":9},{"p":[67.5,60,0],"t":9,"ei":7,"ci":8,"si":10},{"p":[75,15,37],"i":3,"t":5,"ci":3,"si":11},{"p":[78,22,-30],"i":26,"r":[-3.1416,1.5708,-3.1416],"tm":0,"sp":300,"wr":1,"si":12},{"p":[78,22,-44],"i":26,"r":[-3.1416,1.5708,-3.1416],"tm":0,"w":2,"wr":1,"si":12},{"p":[61,62,0],"t":9,"ei":7,"ci":8,"si":13},{"p":[61,62,-37.5],"t":9,"ei":7,"ci":8,"si":13},{"p":[61,62,37.5],"t":9,"ei":7,"ci":8,"si":13}],"config":{"modes":[6]},"spawns":[[-106,15,0,2,0,0],[126,15,0,1,2,0]]}'},{name:"Flappy Bird",icon:"",data:'{"name":"Test","ambient":16777215,"ambientI":0.1,"light":0,"lightI":0.1,"sky":7587542,"fog":"#8d9aa0","fogD":2000,"xyz":[1000,74,1,1000,2,1,1000,1,1,11,93,2,13,93,1,13,6,2,15,8,1,11,29,2,13,27,1,133,1,46,159,2,1,133,1,28,13,37,4,1,33,1,1,34,1,20,26,27,11,11,2,13,9,1,11,39,2,13,37,1,11,7,2,13,5,1,13,59,4,13,17,4,13,45,4,13,13,4,13,35,4],"colors":["#E3DB9D","#ACEB54","#000000","#BDB481","#73C00E","#FF0000","#FFFFFF"],"objects":[{"p":[100,-76,0],"t":5,"ei":0,"ci":0,"si":0},{"p":[100,0,0],"t":5,"ei":1,"ci":1,"si":1},{"p":[100,2,0],"l":1,"t":5,"ci":2,"si":2},{"p":[100,-2,0],"l":1,"t":5,"ei":3,"ci":0,"si":1},{"p":[15,76,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[15,77,0],"l":1,"t":5,"ci":2,"si":4},{"p":[15,70,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[15,69,0],"l":1,"t":5,"ci":2,"si":6},{"p":[15,2,0],"t":5,"ei":4,"ci":4,"si":7},{"p":[15,31,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[15,3,0],"l":1,"t":5,"ci":2,"si":8},{"p":[15,30,0],"l":1,"t":5,"ci":2,"si":6},{"p":[-281,83,0],"i":30,"r":[1.57,0,0],"st":"Press [SPACE] to Jump","bv":1,"sf":81,"sa":1,"si":9},{"p":[-209,40,0],"v":1,"si":10},{"p":[404,34,0.04],"i":30,"r":[1.57,0,0],"st":"End of Template","bv":1,"sf":81,"sa":1,"si":11},{"p":[15,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":12},{"p":[15,37,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":13},{"p":[67,19,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":13},{"p":[115,47,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":13},{"p":[166,15,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":14},{"p":[216,47,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":13},{"p":[267,37,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":13},{"p":[318,15,0],"i":29,"v":1,"tm":0,"te":3,"tc":1,"ei":6,"si":14},{"p":[-281,37,0],"i":29,"v":1,"tm":0,"te":3,"ta":13,"ei":6,"si":15},{"p":[67,2,0],"t":5,"ei":4,"ci":4,"si":16},{"p":[67,13,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[67,3,0],"l":1,"t":5,"ci":2,"si":17},{"p":[67,12,0],"l":1,"t":5,"ci":2,"si":6},{"p":[115,2,0],"t":5,"ei":4,"ci":4,"si":18},{"p":[115,41,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[115,3,0],"l":1,"t":5,"ci":2,"si":19},{"p":[115,40,0],"l":1,"t":5,"ci":2,"si":6},{"p":[166,2,0],"t":5,"ei":4,"ci":4,"si":20},{"p":[166,9,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[166,3,0],"l":1,"t":5,"ci":2,"si":21},{"p":[166,8,0],"l":1,"t":5,"ci":2,"si":6},{"p":[216,2,0],"t":5,"ei":4,"ci":4,"si":18},{"p":[216,41,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[216,3,0],"l":1,"t":5,"ci":2,"si":19},{"p":[216,40,0],"l":1,"t":5,"ci":2,"si":6},{"p":[267,2,0],"t":5,"ei":4,"ci":4,"si":7},{"p":[267,31,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[267,3,0],"l":1,"t":5,"ci":2,"si":8},{"p":[267,30,0],"l":1,"t":5,"ci":2,"si":6},{"p":[318,2,0],"t":5,"ei":4,"ci":4,"si":20},{"p":[318,9,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[318,3,0],"l":1,"t":5,"ci":2,"si":21},{"p":[318,8,0],"l":1,"t":5,"ci":2,"si":6},{"p":[67,58,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[67,59,0],"l":1,"t":5,"ci":2,"si":4},{"p":[67,52,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[67,51,0],"l":1,"t":5,"ci":2,"si":6},{"p":[115,86,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[115,87,0],"l":1,"t":5,"ci":2,"si":4},{"p":[115,80,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[115,79,0],"l":1,"t":5,"ci":2,"si":6},{"p":[166,55,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[166,56,0],"l":1,"t":5,"ci":2,"si":4},{"p":[166,49,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[166,48,0],"l":1,"t":5,"ci":2,"si":6},{"p":[216,86,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[216,87,0],"l":1,"t":5,"ci":2,"si":4},{"p":[216,80,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[216,79,0],"l":1,"t":5,"ci":2,"si":6},{"p":[267,76,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[267,77,0],"l":1,"t":5,"ci":2,"si":4},{"p":[267,70,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[267,69,0],"l":1,"t":5,"ci":2,"si":6},{"p":[318,55,0],"t":5,"ei":4,"ci":4,"si":3},{"p":[318,56,0],"l":1,"t":5,"ci":2,"si":4},{"p":[318,49,0],"t":5,"ei":4,"ci":4,"si":5},{"p":[318,48,0],"l":1,"t":5,"ci":2,"si":6},{"p":[15,70,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[67,52,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[115,80,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[166,49,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[216,80,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[267,70,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[318,49,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":22},{"p":[67,2,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":23},{"p":[115,2,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":24},{"p":[166,2,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":25},{"p":[216,2,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":24},{"p":[267,2,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":26},{"p":[318,2,0],"i":29,"v":1,"tm":0,"te":3,"ta":2,"ei":5,"si":25}],"config":{"modes":[4],"classes":[9],"settings":{"gravMlt":0,"jumpMlt":3}},"game":{"camType":2,"camOffX":50,"camRot":0,"movSch":2,"speedX":3.6,"speedY":1.3,"trnSp":0.6,"infJ":1,"ovrJump":1,"mdl":1,"aID":"5980"},"spawns":[[-281,42,0,0,0,0]]}'},{name:"Top Down Game",icon:"",data:'{"name":"Top Down Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"dthY":0,"colors":["#9F9F9F","#0C0C0C","#757575","#333333","#494949"],"xyz":[242,15,212,60,15,15,90,14,15,242,15,2,2,15,208,59,15,58,15,15,15,75,15,15,15,14,120,2,15,15,15,14,2,2,14,15,2,2,212,238,2,2,2,2,56,59,2,2],"objects":[{"p":[0,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[0,15,-21.5],"t":9,"bo":1,"ei":2,"ci":1,"si":1},{"p":[-15,15,53.5],"t":9,"bo":1,"ei":2,"ci":1,"si":2},{"p":[0,15,105],"t":9,"bo":1,"ei":2,"ci":1,"si":3},{"p":[0,15,-105],"t":9,"bo":1,"ei":2,"ci":1,"si":3},{"p":[120,15,0],"t":9,"bo":1,"ei":2,"ci":1,"si":4},{"p":[89.5,15,75],"t":9,"bo":1,"ei":2,"ci":1,"si":5},{"p":[22.5,15,-36.5],"t":9,"bo":1,"ei":2,"ci":1,"si":6},{"p":[52.5,15,-51.5],"t":9,"bo":1,"ei":2,"ci":1,"si":7},{"p":[-67.5,15,1],"t":9,"bo":1,"ei":2,"ci":1,"si":8},{"p":[-120,15,0],"t":9,"bo":1,"ei":2,"ci":1,"si":4},{"p":[91,15,-51.5],"t":5,"bo":1,"ci":3,"si":9},{"p":[-31,15,-21.5],"t":5,"bo":1,"ci":3,"si":9},{"p":[-67.5,15,-60],"t":5,"bo":1,"ci":3,"si":10},{"p":[31,15,53.5],"t":5,"bo":1,"ci":3,"si":11},{"p":[120,30,0],"l":1,"t":5,"bo":1,"ab":1,"ci":4,"si":12},{"p":[-120,30,0],"l":1,"t":5,"bo":1,"ab":1,"ci":4,"si":12},{"p":[0,30,-105],"l":1,"t":5,"bo":1,"ab":1,"ci":4,"si":13},{"p":[0,30,105],"l":1,"t":5,"bo":1,"ab":1,"ci":4,"si":13},{"p":[61,30,76],"l":1,"t":5,"bo":1,"ab":1,"ci":4,"si":14},{"p":[89.5,30,47],"l":1,"t":5,"bo":1,"ab":1,"ci":4,"si":15}],"config":{"classes":[9],"settings":{"maxPlayers":20,"gameTime":0,"jumpMlt":1.4}},"game":{"camType":1,"camOffY":50,"camRot":0},"spawns":[[0,15,0,0,0,0]]}'},{name:"Trading",icon:"",data:'{"name":"Trade Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#FFA900","#FFB500","#001AFF","#009EFF","#000000","#FF0000","#281300","#FFB400","#FF00EE","#0057FF"],"xyz":[150,15,210,45,33,30,2,33,2,2,2,26,41,2,2,30,3,30,35,0.01,10],"objects":[{"p":[-45,60,-19],"t":9,"ei":0,"ci":1,"si":0},{"p":[7.5,75,71],"i":42,"bo":1,"si":1},{"p":[29,75,57],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":2},{"p":[-14,75,57],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":2},{"p":[-14,75,85],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":2},{"p":[29,75,85],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":2},{"p":[-14,75,71],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":3},{"p":[7.5,75,57],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":4},{"p":[29,75,71],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":3},{"p":[7.5,75,85],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":4},{"p":[7.5,106,85],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":4},{"p":[7.5,106,57],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":4},{"p":[29,106,71],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":3},{"p":[-14,106,71],"l":1,"wj":1,"t":5,"ab":1,"ei":2,"ci":3,"si":3},{"p":[-119,75,85],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":2},{"p":[-97.5,75,71],"i":43,"bo":1,"si":1},{"p":[-119,75,57],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":2},{"p":[-76,75,57],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":2},{"p":[-76,75,85],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":2},{"p":[-76,75,71],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":3},{"p":[-119,75,71],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":3},{"p":[-97.5,75,57],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":4},{"p":[-97.5,106,57],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":4},{"p":[-97.5,106,85],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":4},{"p":[-76,106,71],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":3},{"p":[-119,106,71],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":3},{"p":[-97.5,75,85],"l":1,"wj":1,"t":5,"ab":1,"ei":4,"ci":5,"si":4},{"p":[-105,75,-109],"l":1,"f":"33","at":5810,"tsr":1,"ts":9.5,"si":5},{"p":[-105,75,-64],"l":1,"f":"33","t":5,"tsr":1,"ci":6,"si":5},{"p":[-105,75,-19],"l":1,"f":"33","t":5,"tsr":1,"ci":7,"si":5},{"p":[15,75,-109],"l":1,"f":"33","t":5,"tsr":1,"ei":8,"ci":9,"si":5},{"p":[15,75,-64],"l":1,"f":"33","t":5,"tsr":1,"ci":10,"si":5},{"p":[15,75,-19],"l":1,"f":"33","t":5,"tsr":1,"ci":11,"si":5},{"p":[-97.5,101,56],"i":30,"r":[1.5708,0,3.1416],"st":"Verified Only","sc":"#009CB2","bv":1,"sf":79,"sa":1,"si":6},{"p":[7.5,101,56],"i":30,"r":[1.5708,0,3.1416],"st":"Premium Only","sc":"#ADB200","bv":1,"sf":79,"sa":1,"si":6}],"config":{"modes":[18],"classes":[9],"settings":{"maxPlayers":20,"gameTime":0,"jumpMlt":1.4}},"game":{"camType":1,"camOffY":31,"camRot":0,"speedZ":0},"spawns":[[-45,75,-49,0,0,0]]}'},{name:"Defuse",icon:"",data:'{"name":"Defuse Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#0F0F0F"],"xyz":[210,15,135,29,25,29,29,25,37,90,45,7,6,45,45,39,45,7,30,45,30,30,15,30,60,15,15,210,45,7,6,45,38,8,45,149,15,15,7,12,12,12],"objects":[{"p":[-15,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[-30,30,22.5],"i":45,"si":1},{"p":[-75,15,-18.5],"i":45,"si":2},{"p":[-60,15,4],"t":9,"bo":1,"ei":2,"ci":3,"si":3},{"p":[-12,15,-15],"t":9,"bo":1,"ei":2,"ci":3,"si":4},{"p":[10.5,15,-34],"t":9,"bo":1,"ei":2,"ci":3,"si":5},{"p":[45,15,7.5],"t":9,"bo":1,"ei":2,"ci":3,"si":6},{"p":[-12,15,30],"t":9,"bo":1,"ei":2,"ci":3,"si":4},{"p":[-30,15,22.5],"t":9,"ei":0,"ci":1,"si":7},{"p":[-45,15,45],"t":9,"ei":0,"ci":1,"si":8},{"p":[-60,15,22.5],"i":9,"t":9,"ei":0,"ci":1,"si":7},{"p":[-15,15,71],"t":9,"bo":1,"ei":2,"ci":3,"si":9},{"p":[-15,15,-71],"t":9,"bo":1,"ei":2,"ci":3,"si":9},{"p":[-93,15,-18.5],"t":9,"bo":1,"ei":2,"ci":3,"si":10},{"p":[-124,15,0],"t":9,"bo":1,"ei":2,"ci":3,"si":11},{"p":[-112.5,45,4],"t":9,"bo":1,"ei":2,"ci":3,"si":12},{"p":[94,15,0],"t":9,"bo":1,"ei":2,"ci":3,"si":11},{"p":[-21,15,-6],"i":1,"si":13},{"p":[-33,15,-6],"i":1,"si":13},{"p":[-21,27,-6],"i":1,"si":13},{"p":[-21,30,46],"i":1,"si":13},{"p":[-98,15,14],"i":1,"si":13},{"p":[-98,27,14],"i":1,"si":13}],"config":{"modes":[20]},"spawns":[[82,16,8,1,2,0],[-103,16,-14,2,2,0]]}'},{name:"Spleef",icon:"",data:'{"name":"Spleef template","skyDome":true,"skyDomeCol0":"#74a4b9","skyDomeCol1":"#dce8ed","skyDomeCol2":"#dce8ed","skyDomeTex":false,"ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"dthY":0,"colors":["#9F9F9F","#0C0C0C","#7E7E7E","#FF0000"],"xyz":[30,2,30,2,2,180,184,2,2],"objects":[{"p":[55,22,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[25,22,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[25,22,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[55,22,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[55,22,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[25,22,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[25,22,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[55,22,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-5,22,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-35,22,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-35,22,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-5,22,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-5,22,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-35,22,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-35,22,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-5,22,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-65,22,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-95,22,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-95,22,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-65,22,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-65,22,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-95,22,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-95,22,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-65,22,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-65,22,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-95,22,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-95,22,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-65,22,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-5,22,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-35,22,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-35,22,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-5,22,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[55,22,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[25,22,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[25,22,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[55,22,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-111,22,14],"wj":1,"bo":1,"ei":3,"ci":3,"si":1},{"p":[71,22,14],"wj":1,"bo":1,"ei":3,"ci":3,"si":1},{"p":[-20,22,105],"wj":1,"bo":1,"ei":3,"ci":3,"si":2},{"p":[-20,22,-77],"wj":1,"bo":1,"ei":3,"ci":3,"si":2},{"p":[55,103,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[25,103,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[25,103,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[55,103,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[55,103,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[25,103,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[25,103,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[55,103,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-5,103,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-35,103,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-35,103,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-5,103,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-5,103,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-35,103,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-35,103,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-5,103,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-65,103,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-95,103,-61],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-95,103,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-65,103,-31],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-65,103,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-95,103,-1],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-95,103,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-65,103,29],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-65,103,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-95,103,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-95,103,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-65,103,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-5,103,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-35,103,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-35,103,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[-5,103,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[55,103,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[25,103,59],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[25,103,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":0,"ci":1,"si":0},{"p":[55,103,89],"wj":1,"h":50,"cdy":1,"t":5,"ei":2,"ci":1,"si":0},{"p":[-111,103,14],"wj":1,"bo":1,"ei":3,"ci":3,"si":1},{"p":[71,103,14],"wj":1,"bo":1,"ei":3,"ci":3,"si":1},{"p":[-20,103,105],"wj":1,"bo":1,"ei":3,"ci":3,"si":2},{"p":[-20,103,-77],"wj":1,"bo":1,"ei":3,"ci":3,"si":2}],"config":{"classes":[9],"settings":{"maxPlayers":20,"gameTime":0,"jumpMlt":1.4}},"game":{"speedZ":0},"spawns":[[-20,105,14,0,0,0]]}'},{name:"2D Platformer",icon:"",data:'{"name":"2d_Plat_template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"dthY":-10,"colors":["#9F9F9F","#0C0C0C","#AEAEAE","#151515","#171717","#7B7B7B","#5C5C5C","#FF0000","#FF7800","#802A2A"],"xyz":[180,60,33,60,15,15,30,11,15,60,30,3,30,30,3,10,7,10,12,1,12,10,1,10,2,60,33,10,0.5,10,60,45,33],"objects":[{"p":[56,-60,-9],"t":9,"ei":0,"ci":1,"si":0},{"p":[11,0,-15],"l":1,"t":9,"ei":2,"ci":1,"si":1},{"p":[101,0,-15],"l":1,"t":9,"ei":2,"ci":1,"si":1},{"p":[58,19,0],"t":9,"ei":3,"ci":4,"si":2},{"p":[-4,0,-24],"l":1,"t":9,"ei":5,"ci":1,"si":3},{"p":[131,0,-24],"l":1,"t":9,"ei":5,"ci":1,"si":4},{"p":[139,0,0],"t":5,"ci":6,"si":5},{"p":[139,7,0],"t":5,"ci":6,"si":6},{"p":[139,8,0],"l":1,"t":5,"ci":1,"si":7},{"p":[-35,-60,-9],"wj":1,"t":5,"bo":1,"ei":7,"ci":7,"si":8},{"p":[387,-60,-9],"wj":1,"t":5,"bo":1,"ei":7,"ci":7,"si":8},{"p":[139,8.5,0],"i":46,"v":1,"si":9},{"p":[296,-60,-9],"t":9,"ei":0,"ci":1,"si":0},{"p":[176,-60,-9],"t":9,"ei":8,"ci":9,"si":10},{"p":[238,0,-15],"l":1,"t":9,"ei":2,"ci":1,"si":1},{"p":[355.5,0,-15],"l":1,"t":9,"ei":2,"ci":1,"si":1},{"p":[331,0,-24],"l":1,"t":9,"ei":5,"ci":1,"si":4}],"config":{"modes":[4],"classes":[9],"settings":{"maxPlayers":20,"gameTime":0,"jumpMlt":1.5},"weps":{"18":{"spdMlt":3}}},"game":{"camType":2,"camOffX":30,"camRot":0,"movSch":4,"speedZ":0},"spawns":[[0,0,0,0,0,0]]}'},{name:"Basic .io Game",icon:"",data:'{"name":"Test","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#CECECE","#FFF700","#00FF0C","#FF0000","#0014FF"],"xyz":[600,10,600,392,10,1110,390,10,1110,600,10,310,5,5,5],"objects":[{"p":[0,-10,0],"t":16,"si":0},{"p":[496,-10,0],"t":16,"bo":1,"ci":0,"si":1},{"p":[-495,-10,0],"t":16,"bo":1,"ci":0,"si":2},{"p":[0,-10,-455],"t":16,"bo":1,"ci":0,"si":3},{"p":[0,-10,455],"t":16,"bo":1,"ci":0,"si":3},{"p":[25,0,-26],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":1,"si":4},{"p":[-21,0,89],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":2,"si":4},{"p":[94,0,124],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":3,"si":4},{"p":[123,0,-79],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":4,"si":4},{"p":[-104,0,-59],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":4,"si":4},{"p":[-110,0,-179],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":1,"si":4},{"p":[-37,0,-83],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":2,"si":4},{"p":[-236,0,102],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":3,"si":4},{"p":[78,0,19],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":4,"si":4},{"p":[-178,0,4],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":2,"si":4},{"p":[-208,0,-112],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":2,"si":4},{"p":[-107,0,152],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":4,"si":4},{"p":[198,0,101],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":1,"si":4},{"p":[202,0,-175],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":3,"si":4},{"p":[45,0,-184],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":1,"si":4},{"p":[243,0,15],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":4,"si":4},{"p":[201,0,-87],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":2,"si":4},{"p":[55,0,-98],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":3,"si":4},{"p":[-192,0,-224],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":3,"si":4},{"p":[261,0,-269],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":1,"si":4},{"p":[-173,0,254],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":2,"si":4},{"p":[197,0,241],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":1,"si":4},{"p":[15,0,226],"i":29,"cdy":1,"t":5,"tm":0,"te":3,"tc":10,"sfd":1,"rt":1,"ci":4,"si":4}],"config":{"modes":[4],"classes":[9]},"game":{"camType":1,"camOffY":50,"camRot":0,"movSch":1,"mdl":1,"aID":"5687t"},"spawns":[[0,0,0,0,0,0]]}'},{name:"Racing",icon:"",data:'{"name":"Race Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#FF0000"],"xyz":[90,15,270,90,15,90,90,15,540,90,1,15,270,15,90,90,63,3,90,63,1,2,15,630,362,15,2,2,15,182,88,15,2,2,15,272,182,15,2,2,15,178,274,15,2,90,15,2,2,15,86,176,15,2,2,15,448],"objects":[{"p":[-174,0,-90],"t":9,"ei":0,"ci":1,"si":0},{"p":[-84,0,-180],"t":9,"ei":0,"ci":1,"si":1},{"p":[6,0,-270],"t":9,"ei":0,"ci":1,"si":0},{"p":[96,0,-360],"t":9,"ei":0,"ci":1,"si":1},{"p":[186,0,-135],"t":9,"ei":0,"ci":1,"si":2},{"p":[186,15,-128],"l":1,"f":"8","t":9,"tox":0.25,"si":3},{"p":[96,0,180],"t":9,"ei":0,"ci":1,"si":4},{"p":[-84,0,90],"t":9,"ei":0,"ci":1,"si":0},{"p":[186,15,-133],"wj":1,"v":1,"bo":1,"si":5},{"p":[186,15,-135],"i":27,"tm":0,"ch":1,"si":6},{"p":[186,15,-131],"i":27,"tm":0,"ch":1,"n":1,"si":6},{"p":[186,15,-135],"i":29,"v":1,"tm":0,"te":3,"tc":1,"si":6},{"p":[232,0,-90],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":7},{"p":[52,0,226],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":8},{"p":[-38,0,44],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":9},{"p":[-130,0,136],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":9},{"p":[-175,0,46],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":10},{"p":[-220,0,-89],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":11},{"p":[-130,0,-226],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":12},{"p":[-40,0,-316],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":13},{"p":[96,0,-406],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":14},{"p":[96,0,-314],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":15},{"p":[52,0,-224],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":13},{"p":[-38,0,-134],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":12},{"p":[-84,0,-46],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":15},{"p":[-128,0,-90],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":16},{"p":[51,0,134],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":17},{"p":[140,0,-89],"wj":1,"t":5,"bo":1,"ei":2,"ci":2,"si":18}],"config":{"modes":[4]},"spawns":[[193,15,-150,0,2,0]]}'},{name:"Mining",icon:"",data:'{"name":"Mining Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#FF7800","#E000FF","#505050","#9A9A9A","#FF9000","#FF6D00","#FFA800","#C800FF","#D400FF","#00AAFF","#0057FF","#545454","#230000","#FF0000"],"xyz":[90,15,135,45,30,15,15,30,30,10,6,10,10,3,10,2,2,2,1,1,1,15,12,15,45,2,7,12,2,4,15,13,15],"objects":[{"p":[40,0,-93],"t":9,"ei":0,"ci":1,"si":0},{"p":[62.5,15,-108],"t":9,"ei":2,"ci":1,"si":1},{"p":[32.5,15,-115.5],"t":9,"ei":2,"ci":1,"si":2},{"p":[47.5,15,-33],"i":29,"v":1,"cdy":1,"t":5,"tm":0,"te":1,"tc":5,"ci":3,"si":3},{"p":[17.5,15,-33],"i":29,"v":1,"cdy":1,"o":0.6,"t":5,"tm":0,"te":1,"tc":10,"ci":4,"si":3},{"p":[77.5,15,-33],"i":29,"v":1,"cdy":1,"t":5,"tm":0,"te":1,"tc":1,"ci":5,"si":3},{"p":[77.5,15,-33],"l":1,"ci":6,"si":4},{"p":[75,18,-31],"l":1,"ci":7,"si":5},{"p":[80,18,-34],"l":1,"ci":7,"si":6},{"p":[77,18,-35],"l":1,"ci":7,"si":5},{"p":[47.5,15,-33],"l":1,"ci":6,"si":4},{"p":[45,18,-31],"l":1,"ei":8,"ci":9,"si":5},{"p":[50,18,-34],"l":1,"ei":8,"ci":9,"si":6},{"p":[47,18,-35],"l":1,"ei":8,"ci":9,"si":5},{"p":[17.5,15,-33],"l":1,"ci":6,"si":4},{"p":[15,18,-31],"l":1,"o":0.6,"ei":10,"ci":11,"si":5},{"p":[20,18,-33],"l":1,"o":0.6,"ei":12,"ci":13,"si":6},{"p":[16,18,-36],"l":1,"o":0.6,"ei":12,"ci":13,"si":5},{"p":[40,0,143],"t":9,"ei":0,"ci":1,"si":0},{"p":[62.5,15,158],"t":9,"ei":2,"ci":1,"si":1},{"p":[32.5,15,165.5],"t":9,"ei":2,"ci":1,"si":2},{"p":[77.5,15,83],"i":29,"v":1,"cdy":1,"t":5,"tm":0,"te":1,"tc":1,"ci":5,"si":7},{"p":[77.5,15,83],"l":1,"ci":6,"si":4},{"p":[75,18,85],"l":1,"ci":7,"si":5},{"p":[80,18,82],"l":1,"ci":7,"si":6},{"p":[77,18,81],"l":1,"ci":7,"si":5},{"p":[47.5,15,83],"i":29,"v":1,"cdy":1,"t":5,"tm":0,"te":1,"tc":5,"ci":3,"si":7},{"p":[47.5,15,83],"l":1,"ci":6,"si":4},{"p":[45,18,85],"l":1,"ei":8,"ci":9,"si":5},{"p":[50,18,82],"l":1,"ei":8,"ci":9,"si":6},{"p":[47,18,81],"l":1,"ei":8,"ci":9,"si":5},{"p":[17.5,15,83],"i":29,"v":1,"cdy":1,"o":0.6,"t":5,"tm":0,"te":1,"tc":10,"ci":4,"si":7},{"p":[17.5,15,83],"l":1,"ci":6,"si":4},{"p":[15,18,85],"l":1,"o":0.6,"ei":10,"ci":11,"si":5},{"p":[20,18,83],"l":1,"o":0.6,"ei":12,"ci":13,"si":6},{"p":[16,18,80],"l":1,"o":0.6,"ei":12,"ci":13,"si":5},{"p":[62.5,19,-119],"t":5,"ci":14,"si":8},{"p":[63,21,-120],"i":26,"tm":0,"sp":50,"w":8,"wr":1,"si":9},{"p":[79,21,-120],"i":26,"tm":0,"sp":20,"w":2,"wr":1,"si":9},{"p":[47,21,-120],"i":26,"tm":0,"sp":100,"wr":1,"si":9},{"p":[47.5,15,-33],"i":24,"o":0.4,"t":10,"tm":0,"ts":0.7,"td":1,"sp":10,"ei":15,"ci":16,"si":10},{"p":[17.5,15,-33],"i":24,"o":0.4,"t":10,"tm":0,"ts":0.7,"td":1,"sp":50,"ei":15,"ci":16,"si":10},{"p":[47.5,15,83],"i":24,"o":0.4,"t":10,"tm":0,"ts":0.7,"td":1,"sp":10,"ei":15,"ci":16,"si":10},{"p":[17.5,15,83],"i":24,"o":0.4,"t":10,"tm":0,"ts":0.7,"td":1,"sp":50,"ei":15,"ci":16,"si":10}],"config":{"modes":[1]},"spawns":[[77,15,-153,2,1,0],[77,15,203,1,3,0]]}'},{name:"Moba",icon:"",data:'{"name":"Moba Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"dthY":0,"colors":["#9F9F9F","#0C0C0C","#717171","#757575"],"xyz":[240,15,210,240,15,15,150,15,45,15,15,180,1,15,30,24,36,24,15,8.5,15],"objects":[{"p":[0,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[0,15,-97.5],"t":9,"bo":1,"ei":2,"ci":1,"si":1},{"p":[0,15,97.5],"t":9,"bo":1,"ei":2,"ci":1,"si":1},{"p":[0,15,37.5],"t":9,"bo":1,"ei":2,"ci":1,"si":2},{"p":[0,15,-37.5],"t":9,"bo":1,"ei":2,"ci":1,"si":2},{"p":[-112.5,15,0],"t":9,"bo":1,"ei":2,"ci":1,"si":3},{"p":[112.5,15,0],"t":9,"bo":1,"ei":2,"ci":1,"si":3},{"p":[89.5,15,0],"t":9,"bo":1,"ei":3,"ci":1,"si":4},{"p":[-89.5,15,0],"t":9,"bo":1,"ei":3,"ci":1,"si":4},{"p":[-76.5,15,0],"i":23,"tm":1,"si":5},{"p":[76.5,15,0],"i":23,"tm":0,"si":5},{"p":[22.5,15,7.5],"l":1,"wj":1,"t":8,"si":6},{"p":[-22.5,15,-7.5],"l":1,"wj":1,"t":8,"si":6},{"p":[52.5,15,67.5],"l":1,"wj":1,"t":8,"si":6},{"p":[7.5,15,82.5],"l":1,"wj":1,"t":8,"si":6},{"p":[-37.5,15,67.5],"l":1,"wj":1,"t":8,"si":6},{"p":[-67.5,15,-82.5],"l":1,"wj":1,"t":8,"si":6},{"p":[7.5,15,-67.5],"l":1,"wj":1,"t":8,"si":6},{"p":[82.5,15,-82.5],"l":1,"wj":1,"t":8,"si":6}],"config":{"modes":[3]},"game":{"camType":1,"camOffY":31,"camRot":0},"spawns":[[98.5,15,0.5,1,0,0],[-97.5,15,0.5,2,0,0]]}'},{name:"Aim Trainer",icon:"",data:'{"name":"Aim Trainer Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#FF0000"],"xyz":[120,10,120,60,28,2,15,30,15,120,45,2,2,45,180,2,45,120,240,45,2,12,2,4,240,10,120,120,10,180,1,10,10,10,10,1,120,10,1,1,10,120],"objects":[{"p":[0,-10,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[-150,-10,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[0,0,58],"t":9,"ei":2,"ci":1,"si":1},{"p":[37.5,0,52.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-37.5,0,52.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[0,0,-271],"t":9,"ei":2,"ci":1,"si":3},{"p":[-61,0,-180],"t":9,"ei":2,"ci":1,"si":4},{"p":[-150,0,-61],"t":9,"ei":2,"ci":1,"si":3},{"p":[-150,0,61],"t":9,"ei":2,"ci":1,"si":3},{"p":[-211,0,0],"t":9,"ei":2,"ci":1,"si":5},{"p":[330.5,0,0],"t":9,"ei":2,"ci":1,"si":5},{"p":[209.5,0,61],"t":9,"ei":2,"ci":1,"si":6},{"p":[209.5,0,-61],"t":9,"ei":2,"ci":1,"si":6},{"p":[21.5,8.5,56],"i":26,"r":[1.5708,0,0],"tm":0,"wr":1,"si":7},{"p":[210,-10,0],"t":9,"ei":0,"ci":1,"si":8},{"p":[8,8.5,56],"i":26,"r":[1.5708,0,0],"tm":0,"w":1,"wr":1,"si":7},{"p":[-4,8.5,56],"i":26,"r":[1.5708,0,0],"tm":0,"w":3,"wr":1,"si":7},{"p":[-16,8.5,56],"i":26,"r":[1.5708,0,0],"tm":0,"w":10,"wr":1,"si":7},{"p":[-24,8.5,56],"i":26,"r":[1.5708,0,0],"tm":0,"w":2,"wr":1,"si":7},{"p":[0,-10,-180],"t":9,"ei":0,"ci":1,"si":9},{"p":[61,0,-180],"t":9,"ei":2,"ci":1,"si":4},{"p":[318,8,-43.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[303,31,-18.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[320.5,23.5,19.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[276.5,7.5,45],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[316,4,2.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[-207.5,7,-12],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[-207.5,22.5,46.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[-207.5,21.5,-44.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[-179,2.5,27],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[-208,30.5,8.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":10},{"p":[-45.5,30.5,-265.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":11},{"p":[-19,3.5,-265.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":11},{"p":[43.5,31.5,-265.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":11},{"p":[10,22,-246.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":11},{"p":[-47,6,-235.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":11},{"p":[46.5,7.5,-252.5],"i":29,"h":10,"t":5,"tm":0,"te":4,"tc":10,"rt":5,"ci":3,"si":11},{"p":[0,-10,-60.5],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":12},{"p":[0,-10,60.5],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":12},{"p":[60.5,-10,0],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":13},{"p":[-60.5,-10,0],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":13}],"config":{"modes":[4],"classes":[9],"settings":{"maxPlayers":20,"gameTime":0}},"spawns":[[0,0,0,0,1,0]]}'},{name:"Dog Fight",icon:"",data:'{"name":"Flight Template","skyDome":true,"skyDomeCol0":"#74a4b9","skyDomeCol1":"#dce8ed","skyDomeCol2":"#dce8ed","skyDomeTex":false,"ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":49919,"fogD":4017,"dthY":0,"colors":["#9F9F9F","#0C0C0C","#101010","#006FFF"],"xyz":[330,15,15,330,15,60,15,60,90,15,15,90,360,1,90,60,45,15,60,15,60,75,1,90,5000,10,5000,32,820,3000,3000,820,32],"objects":[{"p":[-522,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[-522,0,37.5],"t":9,"ei":2,"ci":1,"si":1},{"p":[-522,0,75],"t":9,"ei":0,"ci":1,"si":0},{"p":[-694.5,0,37.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[-349.5,0,37.5],"t":9,"ei":0,"ci":1,"si":3},{"p":[418.5,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[418.5,0,37.5],"t":9,"ei":2,"ci":1,"si":1},{"p":[418.5,0,75],"t":9,"ei":0,"ci":1,"si":0},{"p":[246,0,37.5],"t":9,"ei":0,"ci":1,"si":3},{"p":[591,0,37.5],"t":9,"ei":0,"ci":1,"si":2},{"p":[418.5,15,37.5],"i":9,"v":1,"b":0.1,"d":2,"si":4},{"p":[-522,15,37.5],"i":9,"v":1,"b":0.1,"si":4},{"p":[-657,15,75],"t":9,"ei":0,"ci":1,"si":5},{"p":[-657,15,0],"t":9,"ei":0,"ci":1,"si":5},{"p":[-657,45,37.5],"t":9,"ei":0,"ci":1,"si":6},{"p":[-664.5,60,37.5],"i":9,"v":1,"b":0.1,"d":2,"si":7},{"p":[553.5,15,75],"t":9,"ei":0,"ci":1,"si":5},{"p":[553.5,15,0],"t":9,"ei":0,"ci":1,"si":5},{"p":[553.5,45,37.5],"t":9,"ei":0,"ci":1,"si":6},{"p":[561,60,37.5],"i":9,"v":1,"b":0.1,"si":7},{"p":[0,0,-77],"l":1,"wj":1,"t":5,"ci":3,"si":8},{"p":[-1598.5,0,54],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":9},{"p":[-84,0,1538],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":10},{"p":[1399.5,0,54],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":9},{"p":[-84,0,-1432],"v":1,"t":9,"bo":1,"ei":0,"ci":1,"si":10}],"game":{"arA":3,"infJ":1,"camType":1,"camOffY":10,"camOffZ":100,"movSch":1,"trnSp":0.2},"spawns":[[-672,16,37.5,1,0,0],[564,16,37.5,2,2,0]]}'},{name:"Trivia Game",icon:"",data:'{"name":"Trivia_Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#20FF00"],"xyz":[60,10,60,30,10,30,1,30,30,32,30,1,1,30,60,62,30,1,32,1,32,62,1,62,40,0.01,10,21,0.01,5,1,5,5,30,0.01,10,30,0.01,5,30,0.01,12,6,1,6],"objects":[{"p":[-9,-10,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[40,-10,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[55.5,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[24.5,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[40,0,15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[40,0,-15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[21.5,0,0],"t":9,"ei":2,"ci":1,"si":4},{"p":[-39.5,0,0],"t":9,"ei":2,"ci":1,"si":4},{"p":[-9,0,30.5],"t":9,"ei":2,"ci":1,"si":5},{"p":[-9,0,-30.5],"t":9,"ei":2,"ci":1,"si":5},{"p":[40,30,0],"t":9,"ei":2,"ci":1,"si":6},{"p":[-9,30,0],"t":9,"ei":2,"ci":1,"si":7},{"p":[20.5,14.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"Krunker Trivia!","bv":1,"sf":79,"sa":1,"si":8},{"p":[20.5,10.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"Start","bv":1,"sf":77,"sa":1,"si":9},{"p":[21,3.5,0],"i":29,"t":5,"tm":0,"te":1,"ta":7,"tin":1,"ci":3,"si":10},{"p":[54.5,14.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"How many classes are there?","bv":1,"sf":75,"sa":1,"si":11},{"p":[54,8.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"13            14","bv":1,"sf":75,"sa":1,"si":12},{"p":[55,5.5,6.5],"i":29,"t":5,"tm":0,"te":1,"ta":7,"tin":2,"ci":3,"si":10},{"p":[55,5.5,-6.5],"i":29,"t":5,"tm":0,"te":1,"ta":1,"ci":3,"si":10},{"p":[74,-10,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[89.5,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[58.5,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[74,0,15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[74,0,-15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[74,30,0],"t":9,"ei":2,"ci":1,"si":6},{"p":[88.5,17,0],"i":30,"r":[1.5708,0,1.5708],"st":"How many types of objects are in the editor?","bv":1,"sf":75,"sa":1,"si":13},{"p":[88,8.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"32            53","bv":1,"sf":75,"sa":1,"si":12},{"p":[89,5.5,6.5],"i":29,"t":5,"tm":0,"te":1,"ta":7,"tin":3,"ci":3,"si":10},{"p":[89,5.5,-6.5],"i":29,"t":5,"tm":0,"te":1,"ta":1,"ci":3,"si":10},{"p":[107.5,-10,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[123,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[92,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[107.5,0,15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[107.5,0,-15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[107.5,30,0],"t":9,"ei":2,"ci":1,"si":6},{"p":[122,13,0],"i":30,"r":[1.5708,0,1.5708],"st":"When was krunker released?","bv":1,"sf":75,"sa":1,"si":13},{"p":[121.5,6.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"May 2018                                Nov. 2018","bv":1,"sf":25,"sa":1,"si":12},{"p":[122.5,5.5,6.5],"i":29,"t":5,"tm":0,"te":1,"ta":1,"ci":3,"si":10},{"p":[122.5,5.5,-6.5],"i":29,"t":5,"tm":0,"te":1,"ta":7,"tin":4,"ci":3,"si":10},{"p":[141,-10,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[156.5,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[125.5,0,0],"t":9,"ei":2,"ci":1,"si":2},{"p":[141,0,15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[141,0,-15.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[141,30,0],"t":9,"ei":2,"ci":1,"si":6},{"p":[155.5,14.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"How many bullets does run n gun have?","bv":1,"sf":69,"sa":1,"si":11},{"p":[155,8.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"28            34","bv":1,"sf":75,"sa":1,"si":12},{"p":[156,5.5,6.5],"i":29,"t":5,"tm":0,"te":1,"ta":7,"tin":5,"ci":3,"si":10},{"p":[156,5.5,-6.5],"i":29,"t":5,"tm":0,"te":1,"ta":1,"ci":3,"si":10},{"p":[189.5,-10,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[220,0,0],"t":9,"ei":2,"ci":1,"si":4},{"p":[159,0,0],"t":9,"ei":2,"ci":1,"si":4},{"p":[189.5,0,30.5],"t":9,"ei":2,"ci":1,"si":5},{"p":[189.5,0,-30.5],"t":9,"ei":2,"ci":1,"si":5},{"p":[189.5,30,0],"t":9,"ei":2,"ci":1,"si":7},{"p":[219,14.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"You finished yay!","bv":1,"sf":79,"sa":1,"si":8},{"p":[219,10.5,0],"i":30,"r":[1.5708,0,1.5708],"st":"Restart","bv":1,"sf":77,"sa":1,"si":9},{"p":[219.5,3.5,0],"i":29,"t":5,"tm":0,"te":1,"ta":7,"tin":6,"ci":3,"si":10},{"p":[6,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":8,"in":6,"si":14},{"p":[40,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":8,"in":1,"si":14},{"p":[74,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":8,"in":2,"si":14},{"p":[107.5,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":8,"in":3,"si":14},{"p":[141,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":8,"in":4,"si":14},{"p":[204.5,0,0],"i":29,"v":1,"tm":0,"te":3,"ta":8,"in":5,"si":14}],"config":{"settings":{"maxPlayers":20,"gameTime":0,"throwMel":0},"weps":{"12":{"range":100}}},"spawns":[[6,0,0,0,0,0]]}'},{name:"Sniper VS Runner",icon:"",data:'{"name":"Sniper Versus Runner","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#000000","#FF0000","#717171"],"xyz":[91,10,300,90,10,502,90,10,450,90,120,1,1,10,502,2,60,300,1,10,302,91,10,1,10,10,10,90,20,10,90,10,10,45,10,10,45,50,52,10,0.5,10,10,10,25,45,23,9,25,10,10,90,26,10,15,50,15,90,60,3,30,27,9],"objects":[{"p":[-177.5,110,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[175,-10,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[175,50,-25],"t":9,"ei":0,"ci":1,"si":2},{"p":[175,0,-250.5],"t":12,"bo":1,"ci":2,"si":3},{"p":[175,0,250.5],"t":12,"bo":1,"ci":2,"si":3},{"p":[129.5,-10,0],"t":5,"bo":1,"ei":3,"ci":3,"si":4},{"p":[220.5,-10,0],"t":5,"bo":1,"ei":3,"ci":3,"si":4},{"p":[-224,120,0],"t":9,"bo":1,"ei":4,"ci":1,"si":5},{"p":[-131.5,110,0],"t":5,"bo":1,"ei":3,"ci":3,"si":6},{"p":[-177.5,110,-150.5],"t":9,"bo":1,"ei":3,"ci":3,"si":7},{"p":[-177.5,110,150.5],"t":5,"bo":1,"ei":3,"ci":3,"si":7},{"p":[-215,123,0.5],"i":27,"tm":0,"ch":1,"n":1,"si":8},{"p":[175,0.5,-63.5],"t":9,"ei":4,"ci":1,"si":9},{"p":[175,0,-119],"t":9,"ei":0,"ci":1,"si":10},{"p":[175,40,-13],"t":9,"ei":0,"ci":1,"si":10},{"p":[175,0,-13],"t":9,"ei":4,"ci":1,"si":10},{"p":[152.5,0,38.5],"t":9,"ei":0,"ci":1,"si":11},{"p":[197.5,0,59],"t":9,"ei":4,"ci":1,"si":12},{"p":[152.5,10,79],"t":9,"ei":0,"ci":1,"si":11},{"p":[152.5,0,142],"t":9,"ei":4,"ci":1,"si":12},{"p":[175,0.5,211],"i":46,"bm":2,"cr":1,"si":13},{"p":[181,10,97.5],"t":9,"ei":0,"ci":1,"si":14},{"p":[215.5,17,97.5],"t":9,"ei":0,"ci":1,"si":14},{"p":[197.5,0,158.5],"t":9,"tox":0.14,"ei":4,"ci":1,"si":15},{"p":[152.5,60,142],"t":9,"ei":4,"ci":1,"si":12},{"p":[187.5,60,161],"t":9,"ei":0,"ci":1,"si":16},{"p":[187.5,69.5,122],"t":9,"ei":0,"ci":1,"si":16},{"p":[175,60,74.5],"t":9,"ei":4,"ci":1,"si":17},{"p":[175,81.5,23],"t":9,"ei":0,"ci":1,"si":10},{"p":[175,69,-31],"t":9,"ei":0,"ci":1,"si":10},{"p":[182.5,59.5,-77.5],"t":9,"ei":4,"ci":1,"si":18},{"p":[212.5,59.5,-107.5],"t":9,"ei":4,"ci":1,"si":18},{"p":[152.5,59.5,-107.5],"t":9,"ei":4,"ci":1,"si":18},{"p":[168,59.5,-152.5],"t":9,"ei":4,"ci":1,"si":18},{"p":[197.5,59.5,-182],"t":9,"ei":4,"ci":1,"si":18},{"p":[175,60,-248.5],"i":27,"tm":0,"ch":1,"si":19},{"p":[175,59.5,-248.5],"o":0.5,"t":9,"ts":1,"td":1,"si":19},{"p":[182.5,23,158.5],"t":9,"tox":0.14,"toy":0.14,"ei":4,"ci":1,"si":20}],"config":{"modes":[6],"classes":[1],"settings":{"maxPlayers":20,"gameTime":8,"noSecondary":1,"throwMel":0}},"spawns":[[-179,120,0,0,0,0],[175,0,-237,2,1,0]]}'},{name:"Puzzle Game",icon:"",data:'{"name":"Puzzle Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#13FF00","#00FF59","#333333","#FF0000","#919191","#515151"],"xyz":[90,15,90,30,15,30,180,15,180,30,30,15,15,30,30,90,30,15,15,30,45,60,30,15,15,30,15,45,30,15,15,30,45.5,2,30,90,2,30,60,182,30,2,2,30,77,28,30,2,2,30,28,90,30,2,90,1.5,90,180,1.5,180,30,1.5,30,2,30,1,2,1,28,2,30,30,32,0.1,8.5,31,8,2,2,2,1,31,0.01,4.5,2,2,2,2,28.5,31.5,3,28.5,1.5,3,1.5,34.5,30,15,34.5,28,1.5,34,2,1,32],"objects":[{"p":[0,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[60,0,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[165,0,0],"t":9,"ei":0,"ci":1,"si":2},{"p":[90,15,-22.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[127.5,15,-30],"t":9,"ei":2,"ci":1,"si":4},{"p":[120,15,-52.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[120,15,-82.5],"t":9,"ei":2,"ci":1,"si":5},{"p":[157.5,15,-37.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[150,15,-7.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[105,15,22.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[142.5,15,22.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[120,15,52.5],"t":9,"ei":2,"ci":1,"si":7},{"p":[97.5,15,37.5],"t":9,"ei":2,"ci":1,"si":8},{"p":[120,15,82.5],"t":9,"ei":2,"ci":1,"si":5},{"p":[172.5,15,67.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[187.5,15,22.5],"t":9,"ei":2,"ci":1,"si":9},{"p":[202.5,15,52.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[172.5,15,-7.5],"t":9,"ei":2,"ci":1,"si":8},{"p":[202.5,15,-7.5],"t":9,"ei":2,"ci":1,"si":6},{"p":[195,15,-37.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[195,15,-67.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[217.5,15,-67.5],"t":9,"ei":2,"ci":1,"si":8},{"p":[232.5,15,-52.5],"t":9,"ei":2,"ci":1,"si":10},{"p":[232.5,15,-7.5],"t":9,"ei":2,"ci":1,"si":9},{"p":[240,15,67.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[240,15,37.5],"t":9,"ei":2,"ci":1,"si":3},{"p":[247.5,15,52.5],"t":9,"ei":2,"ci":1,"si":8},{"p":[256,15,-45],"t":9,"ei":2,"ci":1,"si":11},{"p":[256,15,60],"t":9,"ei":2,"ci":1,"si":12},{"p":[166,15,-91],"t":9,"ei":2,"ci":1,"si":13},{"p":[166,15,91],"t":9,"ei":2,"ci":1,"si":13},{"p":[74,15,53.5],"t":9,"ei":2,"ci":1,"si":14},{"p":[74,15,-53.5],"t":9,"ei":2,"ci":1,"si":14},{"p":[59,15,16],"t":9,"ei":2,"ci":1,"si":15},{"p":[59,15,-16],"t":9,"ei":2,"ci":1,"si":15},{"p":[46,15,31],"t":9,"ei":2,"ci":1,"si":16},{"p":[46,15,-31],"t":9,"ei":2,"ci":1,"si":16},{"p":[0,15,-46],"t":9,"ei":2,"ci":1,"si":17},{"p":[0,15,46],"t":9,"ei":2,"ci":1,"si":17},{"p":[-46,15,0],"t":9,"ei":2,"ci":1,"si":11},{"p":[0,45,0],"f":"4","t":9,"ei":2,"ci":1,"si":18},{"p":[165,45,0],"f":"4","t":9,"ei":2,"ci":1,"si":19},{"p":[60,0,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[60,45,0],"f":"4","t":9,"ei":2,"ci":1,"si":20},{"p":[46,15,-14.5],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":21},{"p":[46,15,14.5],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":21},{"p":[46,44,0],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":22},{"p":[46,15,0],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":22},{"p":[284,15,0.5],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":21},{"p":[284,15,29.5],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":21},{"p":[284,44,15],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":22},{"p":[284,15,15],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":22},{"p":[284,15,15],"i":10,"si":23},{"p":[270,0,15],"t":9,"ei":0,"ci":1,"si":1},{"p":[271,15,31],"t":9,"ei":2,"ci":1,"si":15},{"p":[271,15,-1],"t":9,"ei":2,"ci":1,"si":15},{"p":[270,45,15],"f":"4","t":9,"ei":2,"ci":1,"si":20},{"p":[254.5,28.5,82.5],"i":30,"r":[1.5708,0,1.5708],"st":"8","sc":"#FF0000","bv":1,"sf":120,"sa":1,"si":24},{"p":[241.5,28.5,-52.5],"i":30,"r":[1.5708,0,-1.5708],"st":"3","sc":"#0700FF","bv":1,"sf":120,"sa":1,"si":24},{"p":[105.5,28.5,37.5],"i":30,"r":[1.5708,0,-1.5708],"st":"7","sc":"#00FF63","bv":1,"sf":120,"sa":1,"si":24},{"p":[330,0,15],"t":9,"ei":0,"ci":1,"si":0},{"p":[284,15,46],"t":9,"ei":2,"ci":1,"si":16},{"p":[284,15,-16],"t":9,"ei":2,"ci":1,"si":16},{"p":[330,15,-31],"t":9,"ei":2,"ci":1,"si":17},{"p":[330,15,61],"t":9,"ei":2,"ci":1,"si":17},{"p":[376,15,46],"t":9,"ei":2,"ci":1,"si":16},{"p":[376,15,-16],"t":9,"ei":2,"ci":1,"si":16},{"p":[329.5,19.5,59],"l":1,"wj":1,"t":5,"ci":5,"si":25},{"p":[343,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[340,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[337,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":6,"tc":-10,"in":2,"tin":3,"si":26},{"p":[329.5,25,57.5],"i":30,"r":[1.5708,0,-3.1416],"st":"1   2  3   4   5  6  7   8  9  10","sc":"#FFFFFF","bv":1,"sf":59,"si":27},{"p":[334,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[331,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[328,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[319,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[316,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":4,"rt":1,"tin":1,"si":26},{"p":[343,20.5,67],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":11,"rt":1,"in":1,"tin":2,"ei":6,"ci":6,"si":28},{"p":[346,20.5,67],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":21,"rt":1,"in":1,"tin":3,"ei":6,"ci":6,"si":28},{"p":[349,20.5,67],"i":29,"h":30,"cdy":1,"tm":0,"te":4,"ta":4,"tce":1,"rt":1,"in":3,"tin":4,"ei":6,"ci":6,"si":28},{"p":[376,15,15],"i":29,"cdy":1,"t":16,"tm":0,"te":13,"ta":27,"in":4,"ci":7,"si":29},{"p":[325,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":6,"tc":-10,"in":2,"tin":3,"si":26},{"p":[322,20.5,57.5],"i":29,"h":10,"cdy":1,"tm":0,"te":4,"ta":6,"tc":-10,"in":2,"tin":3,"si":26},{"p":[376,15,31.5],"t":5,"ci":8,"si":30},{"p":[376,15,-1.5],"t":5,"ci":8,"si":30},{"p":[376,43.5,15],"t":5,"ab":1,"ci":8,"si":31},{"p":[330,45,15],"f":"4","t":9,"ei":2,"ci":1,"si":18},{"p":[378,15,15],"i":10,"si":29},{"p":[390,0,15],"t":9,"ei":0,"ci":1,"si":32},{"p":[391,15,-3],"t":9,"ei":2,"ci":1,"si":15},{"p":[391,15,33],"t":9,"ei":2,"ci":1,"si":15},{"p":[391,45,15],"f":"4","t":9,"ei":2,"ci":1,"si":33},{"p":[378.5,15,-1.5],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":21},{"p":[378.5,15,31.5],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":21},{"p":[378.5,15,15],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":34},{"p":[378.5,44,15],"l":1,"wj":1,"t":5,"ab":1,"ei":3,"ci":4,"si":34}],"config":{"modes":[1]},"spawns":[[0,15,0,0,0,0]]}'},{name:"Sniper Arena",icon:"",data:'{"name":"Arena Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#717171","#757575","#FF0000","#000FFF","#0003FF"],"xyz":[450,15,240,30,45,120,30,15,120,2,45,240,15,25,30,2,30,30,450,15,2,2,15,244,1.34,1.34,240],"objects":[{"p":[0,0,10],"t":9,"ei":0,"ci":1,"si":0},{"p":[-150,15,10],"t":9,"ei":2,"ci":1,"si":1},{"p":[-180,45,10],"t":9,"ei":2,"ci":1,"si":2},{"p":[150,15,10],"t":9,"ei":2,"ci":1,"si":1},{"p":[180,45,10],"t":9,"ei":2,"ci":1,"si":2},{"p":[-136,15,10],"i":47,"tm":2,"bo":1,"si":3},{"p":[136,15,10],"i":47,"tm":1,"bo":1,"si":3},{"p":[112.5,15,100],"i":9,"b":1,"t":9,"d":2,"ei":0,"ci":1,"si":4},{"p":[112.5,15,-80],"i":9,"b":1,"t":9,"d":2,"ei":0,"ci":1,"si":4},{"p":[120,14,100],"l":1,"wj":1,"r":[0,0,0.5236],"t":9,"ei":3,"ci":1,"si":5},{"p":[120,14,-80],"l":1,"wj":1,"r":[0,0,0.5236],"t":9,"ei":3,"ci":1,"si":5},{"p":[-112.5,15,-80],"i":9,"b":1,"t":9,"ei":0,"ci":1,"si":4},{"p":[-112.5,15,100],"i":9,"b":1,"t":9,"ei":0,"ci":1,"si":4},{"p":[-120,14,100],"l":1,"wj":1,"r":[0,0,-0.5236],"t":9,"ei":3,"ci":1,"si":5},{"p":[-120,14,-80],"l":1,"wj":1,"r":[0,0,-0.5236],"t":9,"ei":3,"ci":1,"si":5},{"p":[0,0,-111],"wj":1,"t":5,"bo":1,"ab":1,"ei":4,"ci":4,"si":6},{"p":[0,0,131],"wj":1,"t":5,"bo":1,"ab":1,"ei":4,"ci":4,"si":6},{"p":[-226,0,10],"wj":1,"t":5,"bo":1,"ab":1,"ei":4,"ci":4,"si":7},{"p":[226,0,10],"wj":1,"t":5,"bo":1,"ab":1,"ei":4,"ci":4,"si":7},{"p":[-136,15,10],"l":1,"f":"8","o":0.4,"t":9,"ei":4,"ci":4,"si":8},{"p":[136,15,10],"l":1,"f":"8","o":0.4,"t":9,"ei":5,"ci":6,"si":8}],"config":{"modes":[1]},"spawns":[[173,15,11,1,0,0],[-180,15,11,2,2,0]]}'},{name:"Raid",icon:"",data:'{"name":"Raid Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"colors":["#9F9F9F","#0C0C0C","#FF0000","#585858","#717171"],"xyz":[90,15,90,30,15,30,90,15,150,150,15,150,27,30,30,9.32,10.23,8.87,30,15,90,34.25,37.6,32.59,30,30,8,12,2,4,15,5,8,90,30,2,2,30,94,2,30,32,26,30,2,2,30,60,94,30,2,2,30,90,2,30,30,58,30,2,2,30,92,88,30,2,28,30,2,2,60,152,154,60,2,150,30,2,154,2,154,34,2,91,28,2,34,90,2,150,30,2,30,90,2,90],"objects":[{"p":[21,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[81,0,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[141,0,0],"t":9,"ei":0,"ci":1,"si":2},{"p":[201,0,-30],"t":9,"ei":0,"ci":1,"si":1},{"p":[261,0,-180],"t":9,"ei":0,"ci":1,"si":3},{"p":[81,15,0],"i":24,"o":0.4,"t":5,"tm":0,"ei":2,"ci":2,"si":4},{"p":[135,15,-45],"i":55,"h":100,"te":15,"ms":4,"tsd":1,"spd":1,"vd":90,"idl":0,"dth":0,"atk":0,"agr":0,"fr":2000,"grv":0,"pj":0,"rew":"","bh":0,"ain":"Angry Lad","si":5},{"p":[231,0,-60],"t":9,"ei":0,"ci":1,"si":6},{"p":[169,15,13],"i":55,"h":100,"te":15,"ms":4,"tsd":1,"spd":1,"vd":90,"idl":0,"dth":0,"atk":0,"agr":0,"fr":2000,"grv":0,"pj":0,"rew":"","bh":0,"ain":"Angry Lad","si":5},{"p":[121,15,48],"i":55,"h":100,"te":15,"ms":4,"tsd":1,"spd":1,"vd":90,"idl":0,"dth":0,"atk":0,"agr":0,"fr":2000,"grv":0,"pj":0,"rew":"","bh":0,"ain":"Angry Lad","si":5},{"p":[289,15,-209],"i":55,"h":3000,"te":15,"ms":14.7,"tsd":1,"spd":1,"vd":150,"idl":0,"dth":0,"atk":0,"agr":0,"fr":2000,"grv":0,"pj":0,"rew":"","bh":2,"ain":"Very Angry Lad","si":7},{"p":[231,15,-100],"i":29,"wj":1,"v":1,"tm":0,"te":3,"ta":5,"si":8},{"p":[29,20,-41],"i":26,"tm":0,"w":2,"wr":1,"si":9},{"p":[28.5,15,-41],"t":5,"ci":3,"si":10},{"p":[21,15,-46],"t":9,"ei":4,"ci":1,"si":11},{"p":[21,15,46],"t":9,"ei":4,"ci":1,"si":11},{"p":[-25,15,0],"t":9,"ei":4,"ci":1,"si":12},{"p":[67,15,31],"t":9,"ei":4,"ci":1,"si":13},{"p":[67,15,-31],"t":9,"ei":4,"ci":1,"si":13},{"p":[81,15,-16],"t":9,"ei":4,"ci":1,"si":14},{"p":[95,15,-45],"t":9,"ei":4,"ci":1,"si":15},{"p":[95,15,45],"t":9,"ei":4,"ci":1,"si":15},{"p":[81,15,16],"t":9,"ei":4,"ci":1,"si":14},{"p":[141,15,76],"t":9,"ei":4,"ci":1,"si":16},{"p":[141,15,-76],"t":9,"ei":4,"ci":1,"si":16},{"p":[187,15,30],"t":9,"ei":4,"ci":1,"si":17},{"p":[187,15,-60],"t":9,"ei":4,"ci":1,"si":18},{"p":[201,15,-46],"t":9,"ei":4,"ci":1,"si":14},{"p":[217,15,-14],"t":9,"ei":4,"ci":1,"si":19},{"p":[247,15,-59],"t":9,"ei":4,"ci":1,"si":20},{"p":[215,15,-75],"t":9,"ei":4,"ci":1,"si":15},{"p":[292,15,-104],"t":9,"ei":4,"ci":1,"si":21},{"p":[200,15,-104],"t":9,"ei":4,"ci":1,"si":22},{"p":[185,15,-179],"t":9,"ei":4,"ci":1,"si":23},{"p":[337,15,-179],"t":9,"ei":4,"ci":1,"si":23},{"p":[261,15,-256],"t":9,"ei":4,"ci":1,"si":24},{"p":[261,45,-104],"t":9,"ei":4,"ci":1,"si":25},{"p":[261,75,-180],"f":"4","t":9,"ei":4,"ci":1,"si":26},{"p":[231,45,-58.5],"f":"4","t":9,"ei":4,"ci":1,"si":27},{"p":[200,45,-30],"f":"4","t":9,"ei":4,"ci":1,"si":28},{"p":[141,45,0],"f":"4","t":9,"ei":4,"ci":1,"si":29},{"p":[81,45,0],"f":"4","t":9,"ei":4,"ci":1,"si":30},{"p":[21,45,0],"f":"4","t":9,"ei":4,"ci":1,"si":31}],"config":{"modes":[23]},"spawns":[[20,15,0,0,0,0]]}'},{name:"Brawl",icon:"",data:'{"name":"Brawl Template","ambient":"#97a0a8","light":"#f2f8fc","sky":"#dce8ed","fog":"#8d9aa0","fogD":2000,"dthY":0,"colors":["#9F9F9F","#0C0C0C","#7B7B7B","#FF7800","#802A2A","#FF0000","#2E00FF"],"xyz":[90,15,90,30,10.5,30,15,10.5,30,30,10.5,15,15,10.5,15,250,5,250,250,4.5,250,250,5.5,250,2,2,2,90,55,90],"objects":[{"p":[0,0,0],"t":9,"ei":0,"ci":1,"si":0},{"p":[0,15,0],"t":9,"ei":0,"ci":1,"si":1},{"p":[-22.5,15,0],"i":9,"t":9,"ei":0,"ci":1,"si":2},{"p":[0,15,-22.5],"i":9,"t":9,"d":1,"ei":0,"ci":1,"si":3},{"p":[22.5,15,0],"i":9,"t":9,"d":2,"ei":0,"ci":1,"si":2},{"p":[0,15,22.5],"i":9,"t":9,"d":3,"ei":0,"ci":1,"si":3},{"p":[-22.5,15,22.5],"t":5,"ei":2,"ci":1,"si":4},{"p":[-22.5,15,-22.5],"t":5,"ei":2,"ci":1,"si":4},{"p":[22.5,15,-22.5],"t":5,"ei":2,"ci":1,"si":4},{"p":[22.5,15,22.5],"t":5,"ei":2,"ci":1,"si":4},{"p":[0,0,0],"i":29,"cdy":1,"t":9,"tm":0,"te":3,"ta":1,"sd":1,"in":1,"ei":3,"ci":4,"si":5},{"p":[0,5,0],"i":29,"cdy":1,"t":9,"tm":0,"te":3,"ta":1,"sd":1,"in":2,"ei":3,"ci":4,"si":5},{"p":[0,10,0],"i":29,"cdy":1,"t":9,"tm":0,"te":3,"ta":1,"sd":1,"in":3,"ei":3,"ci":4,"si":6},{"p":[0,14.5,0],"i":29,"cdy":1,"t":9,"tm":0,"te":3,"ta":1,"sd":1,"in":4,"ei":3,"ci":4,"si":7},{"p":[0,20,0],"i":29,"cdy":1,"t":9,"tm":0,"te":3,"ta":1,"sd":1,"in":5,"ei":3,"ci":4,"si":5},{"p":[-1,-9.5,3.5],"i":29,"h":20,"cdy":1,"t":5,"tm":0,"te":5,"ta":11,"rt":30,"in":6,"tin":1,"ei":5,"ci":5,"si":8},{"p":[-1,-9.5,1],"i":29,"h":20,"cdy":1,"t":5,"tm":0,"te":5,"ta":11,"rt":40,"in":6,"tin":2,"ei":5,"ci":5,"si":8},{"p":[-1,-9.5,-1.5],"i":29,"h":20,"cdy":1,"t":5,"tm":0,"te":5,"ta":11,"rt":50,"in":6,"tin":3,"ei":5,"ci":5,"si":8},{"p":[-1,-9.5,-4],"i":29,"h":20,"cdy":1,"t":5,"tm":0,"te":5,"ta":11,"rt":60,"in":6,"tin":4,"ei":5,"ci":5,"si":8},{"p":[-1,-9.5,-6.5],"i":29,"h":20,"cdy":1,"t":5,"tm":0,"te":5,"ta":11,"rt":70,"in":6,"tin":5,"ei":5,"ci":5,"si":8},{"p":[0,-5,0],"i":29,"t":9,"tm":0,"te":3,"ta":1,"ei":3,"ci":4,"si":5},{"p":[0,15,0],"i":29,"v":1,"cdy":1,"tm":0,"sup":1,"te":3,"ta":6,"tc":-10,"in":7,"tin":6,"si":9},{"p":[-1,-9.5,12],"i":29,"h":20,"cdy":1,"t":5,"tm":0,"te":4,"ta":4,"in":6,"tin":7,"ei":6,"ci":5,"si":8}],"config":{"modes":[8],"classes":[9],"settings":{"maxPlayers":4,"gameTime":0,"lives":1,"healthMlt":2,"killRewards":0,"throwMel":0,"t1Dmg":0.3,"t2Dmg":0.3}},"spawns":[[-23,25.5,-22,0,0,0],[-23,25.5,22.5,0,0,0],[22.5,25.5,22.5,0,2,0],[22.5,25.5,-22.5,0,2,0]]}'},{name:"More Soon",icon:""}]},function(e,t,i){var n=i(3);const r=i(31),a=i(2),s=i(1);var o=new(i(30))(s,a,n,r);const l=o.loadTexturePrefab;class c extends n.Object3D{get pos(){return this.boundingMesh.position.toArray()}set pos(e){this.boundingMesh.position.fromArray(e)}get rot(){return this.boundingMesh.rotation.toArray().slice(0,3)}set rot(e){this.boundingMesh.rotation.copy(new n.Euler(...e))}get size(){return this.boundingMesh.scale.toArray()}set size(e){this.boundingMesh.scale.fromArray(e)}get assetTexture(){return this._assetTexture}set assetTexture(e){this._assetTexture=e,!this.prefab.assetTextures||e&&(this.defaultMaterial.transparent=!0,l(e,this),this.prefab.doubleSide&&(this.defaultMaterial.side=n.DoubleSide),this.prefab.alphaTest&&(this.defaultMaterial.alphaTest=this.prefab.alphaTest),this.texturePrefab&&"LINK"==this.texturePrefab.name&&(this.defaultMaterial.depthWrite=!0,this.defaultMaterial.alphaTest=.02),this.prefab.blending&&(this.defaultMaterial.blending=this.prefab.blending),this.prefab.wireframe&&(this.defaultMaterial.wireframe=!0),this.defaultMaterial.needsUpdate=!0)}get texture(){return this._texture}set texture(e){if(!this.prefab.noTexture){if(this.texturePrefab=o.getTextureByName(e),!this.texturePrefab)throw"Invalid texture id.";this._texture=e,this.defaultMaterial.transparent=!0,l(e,this),this.prefab.doubleSide&&(this.defaultMaterial.side=n.DoubleSide),this.prefab.alphaTest&&(this.defaultMaterial.alphaTest=this.prefab.alphaTest),this.texturePrefab&&"LINK"==this.texturePrefab.name&&(this.defaultMaterial.depthWrite=!0,this.defaultMaterial.alphaTest=.02),this.prefab.blending&&(this.defaultMaterial.blending=this.prefab.blending),this.prefab.wireframe&&(this.defaultMaterial.wireframe=!0),this.defaultMaterial.needsUpdate=!0}}get collidable(){return this._collidable}set collidable(e){this.prefab.forceCollision&&(e=!0),this.prefab.noCollision&&(e=!1),this._collidable=e,!this.prefab.tool&&this.boxShape&&(this.boxShape.material=e?c.boundingCollidableBoxMaterial:c.boundingNoncollidableBoxMaterial)}get visible(){return this._visible}set visible(e){this._visible=e,this.defaultMaterial&&(this.defaultMaterial.opacity=e?this.prefab.opacity||this.opacity||1:0)}get color(){return this._color}set color(e){this.prefab.editColor&&(this._color=e,this.prefab.gen?this.traverse(t=>{t instanceof n.Mesh&&t.material.color.set(r.getColor(e))}):this.defaultMaterial.color.set(this.prefab.hasBorder&&c.borderVisuals&&this._border?"#ff0000":r.getColor(e)))}get emissive(){return this._emissive}set emissive(e){this.prefab.editEmissive&&(this._emissive=e,this.defaultMaterial.emissive.set(r.getColor(e)))}get opacity(){return this._opacity}set opacity(e){this.prefab.editOpac&&(this._opacity=e,this.defaultMaterial.opacity=e,this.defaultMaterial.transparent=1!=e,this.mesh&&(this.mesh.material.opacity=e?this.prefab.opacity||this.opacity||1:.5,this.mesh.material.transparent=1!=e))}get direction(){return this._direction}set direction(e){if(this._direction=e,this.prefab.customDirection){let t=(e||0)*Math.PI/2;this.arrowHelper.setDirection(new n.Vector3(Math.cos(t),0,Math.sin(t))),this.regen()}}get border(){return this._border}set border(e){this._border=e,this.defaultMaterial.color.set(this.prefab.hasBorder&&e&&c.borderVisuals?"#ff0000":r.getColor(this.color))}get highlighted(){return this._highlighted}set highlighted(e){this._highlighted=e,this.prefab.gen?this.traverse(t=>{t instanceof n.Mesh&&t.material.emissive.set(e?"#ffffff":"#000000")}):this.defaultMaterial.emissive.set(e?"#ffffff":r.getColor(this.emissive))}get fog(){return this._fog}set fog(e){this._fog=e,this.defaultMaterial&&(this.defaultMaterial.fog=e)}get texOffX(){return this._texOffX}set texOffX(e){this._texOffX=e,this.defaultMaterial&&this.defaultMaterial.map&&(this.defaultMaterial.map.needsUpdate=!0,this.defaultMaterial.map.offset.x=e||0)}get texOffY(){return this._texOffY}set texOffY(e){this._texOffY=e,this.defaultMaterial&&this.defaultMaterial.map&&(this.defaultMaterial.map.needsUpdate=!0,this.defaultMaterial.map.offset.y=e||0)}get texRot(){return this._texRot}set texRot(e){this._texRot=e,this.defaultMaterial&&this.defaultMaterial.map&&(this.defaultMaterial.map.needsUpdate=!0,this.defaultMaterial.map.rotation=e||0)}constructor(e,t){if(super(),e.objUUID&&(this.uuid=e.objUUID),e.i=e.i||e.id||0,!o.prefabs[e.i])throw"Invalid Object: "+e.i;if(this.prefab=o.prefabs[e.i],e.i=this.prefab.name,this.objType=e.i,this.assetID=e.aid||"",this.name=a.formatConstName(this.prefab.name),this.defaultSize=this.prefab.defaultSize||[1,1,1],this.boundingMesh=new n.Mesh(c.boundingMeshGeometry,c.boundingMeshMaterial),this.boundingMesh.userData.owner=this,e.meshUUID&&(this.boundingMesh.uuid=e.meshUUID),this.prefab.hideBoundingBox||(this.boxShape=new n.LineSegments(c.boundingBoxGeometry,c.getLineMaterial(this.prefab))),this.realHitbox=new n.Mesh(c.boundingMeshGeometry,c.hitBoxMaterial),this.prefab.isCam&&(this.camera=new n.PerspectiveCamera(70,16/9,.1,50),this.camHelper=new n.CameraHelper(this.camera),this.camHelper.visible=!1),this.prefab.customDirection&&(this.arrowHelper=new n.ArrowHelper(new n.Vector3,new n.Vector3,10,16711935,5,4)),this.defaultMaterial=new n.StrippedLambertMaterial,this.defaultMaterial.opacity=null==this.prefab.opacity?1:this.prefab.opacity,this.defaultMaterial.vertexColors=n.VertexColors,this.defaultMaterial.transparent=!0,this.defaultMaterial.specular=2697513,this.defaultMaterial.shininess=60,this.prefab.wireframe&&(this.defaultMaterial.wireframe=!0),this.defaultMesh=new n.Mesh(new n["LIQUID"==this.objType?"Geometry":"BufferGeometry"],this.defaultMaterial),this.add(this.defaultMesh),this.pos=e.p,this.rot=a.fixRotations(e.r||[0,0,0]),e.f&&"string"==typeof e.f)try{e.f=a.convertFaces(e.f)}catch(t){e.f=null}this.cmpSpwn=!!e.cp,this.teamOnly=!!e.to,this.fog=void 0===e.nf,this.faces=(e.f||[1,1,1,1,1,1]).map(e=>!!e),this.size=e.s||this.defaultSize,this.poster=parseInt(e.bb||0),this.fsize=parseInt(e.sf||10),this.text=e.st&&!/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(e.st)?e.st:"",this.fcolor=null==e.sc?"#000000":e.sc,this.bcolor=null==e.sb?"#FFFFFF":e.sb,this.backVisible=void 0===e.bv,this.tAlign=parseInt(e.sa||0),this.fullcone=null!=e.fc,this.texOffX=parseFloat(e.tox||0),this.texOffY=parseFloat(e.toy||0),this.texRot=parseFloat(e.tr||0),this.texSmooth=void 0===e.txs,this.texStretch=null!=e.tsr,this.frameCount=parseInt(e.fct||0),this.frameSpeed=parseFloat(e.fs||0),this.frameDur=100*this.frameSpeed,this.frameCur=0,this.forceTrans=null!=e.ft,this.texture=a.isString(e.t)?e.t||("LADDER"==this.objType?"FLOOR":"DEFAULT"):o.textures[e.t||("LADDER"==this.objType?2:0)].name||"DEFAULT",this.assetTexture=parseInt(e.at||0),this.collidable=void 0===e.col&&void 0===e.l,this.canWallJump=void 0===e.wj,this.penetrable=!!e.pe,this.boost=parseFloat(e.b||0),!0===this.boost&&(this.boost=1),this.bounce=parseFloat(e.bm||1),this.crouch=null==e.cr,this.edgeNoise=parseFloat(e.en||0),this.health=parseInt(e.h||e.hp||0),this.canDestroy=!(null==e.cdy),this.startDestroyed=!(null==e.sd),this.part=parseInt(e.pr||0),this.partC=parseInt(e.pc||0),this.partS=parseFloat(e.ps||0),this.partSP=parseFloat(e.psp||0),this.partG=parseFloat(e.pg||0),this.partD=parseFloat(e.pd||0),this.partSC=parseFloat(e.psc||0),this.partB=parseInt(e.pb||0),this.team=parseInt(e.tm||0),this.visible=void 0===e.v,this.terrain=!!e.ter,this.color=null==e.c?"#FFFFFF":e.c,this.emissive=null==e.e?"#000000":e.e,this.opacity=parseFloat(null==e.o?1:parseFloat(e.o)),this.direction=parseInt(e.d||0),this.forceDir=!(null==e.fd),this.movingSpeed=parseFloat(e.ts||0),this.movingAxis=parseFloat(e.td||0),this.score=parseInt(e.sp||(this.prefab.interact||this.prefab.ai?0:1)),this.single=!(void 0===e.su),this.singleP=!(void 0===e.sup),this.weaponId=parseInt(e.wid||e.w||0),this.weaponReplace=void 0===e.wr,this.randWep=!(null==e.rw),this.border=!(void 0===e.bo),this.spin=parseInt(e.spn||0),this.spinAxis=parseInt(e.spa||0),this.channel=parseInt(e.ch||0),this.node=parseInt(e.n||0),this.momentum=!(null==e.m),this.ambient=void 0===e.ab,this.hidden=!(null==e.nm),this.closeable=!(null==e.cl),this.startClosed=!(null==e.stc),this.method=parseInt(e.md||0),this.canTrigger=!(null==e.ct),this.event=parseInt(e.te||(this.prefab.ai?15:0)),this.action=parseInt(e.ta||0),this.actionCost=parseInt(e.tac||0),this.actionMethod=parseInt(e.tam||0),this.selfDestruct=!(null==e.sfd),this.constant=parseInt(e.tc||0),this.constantEvent=parseInt(e.tce||0),this.constantTxt=e.tct&&!/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(e.tct)?e.tct:"",this.chance=parseInt(e.cha||0),this.classIndx=parseInt(e.ci||0),this.respawnT=parseFloat(e.rt||0),this.respawnR=!(null==e.rr),this.turnSpd=parseInt(null==e.tsd?1:e.tsd||0),this.visDis=parseInt(e.vd||10),this.canShoot=!(null==e.cs),this.canHit=!(null==e.cnh),this.xrayVis=!(null==e.xv),this.speed=parseFloat(null==e.spd?1:e.spd||0),this.frate=parseInt(e.fr||2e3),this.projType=parseInt(e.pj||0),this.behaviorType=parseInt(e.bh||0),this.rewardType=e.rew&&!/[^\d\,]+/gim.test(e.rew)?e.rew:"",this.aiName=e.ain&&!/[^\w\:\;\(\)\?\,\.\|\[\] \-\+*\$\@\=\^!{}]+/gim.test(e.ain)?e.ain:"",this.interfaceId=parseInt(e.in||0),this.interfaceIdT=parseInt(e.tin||0),this.withdraw=parseInt(null==e.wd?1e3:e.wd),this.deposit=parseInt(null==e.dp?1e3:e.dp),this.objectiveId=parseInt(e.obi||0),this.showAd=!(void 0===e.sad),this.wSpeed=parseFloat(e.ws||10),this.wHeight=parseFloat(e.wh||.5),this.tilesX=parseFloat(e.tx||10),this.tilesZ=parseFloat(e.tz||10),this.snd=parseInt(e.es||0),this.assetSound=parseInt(e.esa||0),this.idleSound=parseInt(e.idl||0),this.deathSound=parseInt(e.dth||0),this.atkSound=parseInt(e.atk||0),this.agroSound=parseInt(e.agr||0),this.vol=parseFloat(e.ev||1),this.dist=parseFloat(e.ed||0),this.roll=parseFloat(e.ero||0),this.rate=parseFloat(e.er||1),this.emitfrom=parseInt(e.ef||0),this.mSize=parseFloat(e.ms||this.prefab.scale),this.dynamic=!(null==e.dyn),this.gravity=parseFloat(e.grv||0),this.intensity=parseFloat(e.li||1),this.distance=parseFloat(e.lds||0),this.decay=parseFloat(e.ld||1),this.openEnded=!(null==e.opn),this.itemID=parseInt(e.skin||0),this.bakeAcc=parseInt(e.ba||0);let i=[];this.prefab.editorGen?i.push(this.prefab.editorGen(this,this.defaultMaterial)):this.prefab.gen&&i.push(this.prefab.gen(this,this.defaultMaterial)),Promise.all(i).then(()=>this.promises(e)),this.previousScale=new n.Vector3}promises(e){if(e=e||{},this.traverse(e=>{e.castShadow=!!this.prefab.castShadow,e.receiveShadow=!!this.prefab.receiveShadow}),this.prefab.defaultSize)this.defaultSize=this.prefab.defaultSize;else{let e=this.rotation.clone();this.rotation.set(0,0,0);let t=c.tmpBox3.setFromObject(this);this.rotation.copy(e),this.defaultSize=[t.max.x-t.min.x,t.max.y-t.min.y,t.max.z-t.min.z]}this.size=e.s||this.defaultSize}static defaultFromType(e,t){return new c({i:e,p:t||[0,0,0]},!0)}update(e){if(this.defaultMaterial&&this.defaultMaterial.wireframe!=c.forceWire&&(this.defaultMaterial.wireframe=this.prefab.wireframe||c.forceWire),this.prefab.dontRound){const e=1e-5;this.boundingMesh.scale.x=Math.max(e,this.boundingMesh.scale.x),this.boundingMesh.scale.y=Math.max(e,this.boundingMesh.scale.y),this.boundingMesh.scale.z=Math.max(e,this.boundingMesh.scale.z)}else this.boundingMesh.scale.x=Math.max(1,this.boundingMesh.scale.x).roundToNearest(1),this.boundingMesh.scale.y=Math.max(1,this.boundingMesh.scale.y).roundToNearest(1),this.boundingMesh.scale.z=Math.max(1,this.boundingMesh.scale.z).roundToNearest(1);if(this.position.set(0,this.boundingMesh.scale.y/2,0),this.position.applyQuaternion(this.boundingMesh.quaternion),this.position.add(this.boundingMesh.position),this.quaternion.copy(this.boundingMesh.quaternion),this.boxShape){this.boxShape.position.copy(this.boundingMesh.position),this.boxShape.scale.copy(this.boundingMesh.scale),this.boxShape.rotation.copy(this.boundingMesh.rotation),this.realHitbox.scale.copy(this.boundingMesh.scale),this.realHitbox.position.copy(this.boundingMesh.position);let e=c.tmpVector3.set(0,this.boundingMesh.scale.y/2,0);e.applyEuler(this.boundingMesh.rotation),this.boxShape.position.add(e)}if(this.realHitbox&&(this.realHitbox.visible=c.showRealHitbox&&this.collidable&&(0!=this.rot[0].round(2)||0!=this.rot[1].round(2)||0!=this.rot[2].round(2))&&!["PLACEHOLDER","SIGN"].includes(this.objType)),this.arrowHelper&&(this.arrowHelper.position.copy(this.boundingMesh.position),this.arrowHelper.position.y+=this.boundingMesh.scale.y+5),this.camHelper){this.camera.position.copy(this.boundingMesh.position),this.camera.rotation.copy(this.boundingMesh.rotation);let e=c.tmpVector3.set(0,this.boundingMesh.scale.y/2,0);e.applyEuler(this.boundingMesh.rotation),this.camera.position.add(e),this.camera.updateProjectionMatrix(),this.camHelper.update()}let t=this.boundingMesh.scale;if(this.previousScale.equals(t)||(this.prefab.genGeo?(this.regen(),this.prefab.hasText&&this.regen(!0)):this.prefab.scaleWithSize&&this.scale.copy(t),this.previousScale.copy(t)),this.prefab.scalable||(this.size=this.defaultSize),this.prefab.movingTexture&&this.defaultMaterial.map&&(this.defaultMaterial.map.offset[0==(this.movingAxis||0)?"x":"y"]+=this.movingSpeed/1e4*e),"LIQUID"==this.objType&&this.defaultMesh.geometry){for(var i=0;i<this.defaultMesh.geometry.vertices.length;i++)this.defaultMesh.geometry.vertices[i].y=this.wHeight*Math.sin(i/5+c.liquidVal*this.wSpeed/4);this.defaultMesh.geometry.verticesNeedUpdate=!0,this.defaultMesh.geometry.computeVertexNormals()}this.prefab.frameTexture&&this.defaultMaterial.map&&this.frameCount&&0<this.frameSpeed&&(this.frameDur-=e,0>=this.frameDur&&(this.frameDur=100*this.frameSpeed,this.frameCur++,this.frameCur>=this.frameCount&&(this.frameCur=0),this.defaultMaterial.map.offset.x=this.frameCur%this.frameCount/this.frameCount)),this.prefab.hasSpin&&0!=this.spin&&(this.defaultMesh&&this.defaultMesh["rotate"+(this.spinAxis?"X":"Y")]((this.spin||0)*s.diskSpin*e),this.mesh&&this.mesh["rotate"+(this.spinAxis?"X":"Y")]((this.spin||0)*s.diskSpin*e))}select(){this.camHelper&&(this.camHelper.visible=!0)}unselect(){this.camHelper&&(this.camHelper.visible=!1)}regen(e=!1){e?l(0,this):this.prefab.genGeo&&this.prefab.genGeo(this,1).then(e=>{this.defaultMesh.geometry=e})}regenM(){Promise.all([this.prefab.gen(this,this.defaultMaterial)]).then(()=>this.promises()),this.previousScale=new n.Vector3}clone(){return c.deserialize(this.serialize())}getMeshIndex(){var e={src:"default_0",opacity:this.opacity,showAd:"BILLBOARD"==this.objType&&this.showAd,movT:void 0,movD:void 0};return"#000000"!=this.emissive&&(e.emissive=this.emissive),"CUSTOM_ASSET"==this.objType&&this.assetID?(e.src=(this.assetID||"").replace(/[^\d]/g,"")+"/model",e.asset=this.assetID,e.emissive=this.assetID.includes("e")?"#ffffff":null,e.normal=this.assetID.includes("n"),e.shadowsR=!0):this.prefab.gen?(this.prefab.emiss&&(e.emissive="#ffffff"),e.src=this.prefab.src,e.shadowsR=this.prefab.receiveShadow):this.prefab.texturable&&(this.assetTexture?(e.asset=!0,e.src=parseInt(this.assetTexture||0)+"/texture"):e.src=this.texturePrefab.src||"default",0<this.texOffX&&(e.texOffX=parseFloat(this.texOffX.round(1))||0),0<this.texOffY&&(e.texOffY=parseFloat(this.texOffY.round(1))||0),0!=this.texRot&&(e.texRot=parseFloat(this.texORot.round(1))||0)),this.prefab.movingTexture&&0!=this.movingSpeed&&void 0!==this.movingSpeed&&(e.movT=parseFloat(this.movingSpeed.round(1))/1e4,0!=this.movingAxis&&(e.movD=parseInt(this.movingAxis))),"SHOWCASE"==this.objType&&this.itemID&&(e.itemID=parseInt(this.itemID)||0,e.shadowsR=!0,e.specular=2697513),("PLANE"==this.prefab.name||"RAMP"==this.prefab.name)&&(e.shadowsR=!0),"default"==e.src&&(e.src="default_0"),e}serialize(e){let t={p:this.pos,s:this.size};e&&(t.meshUUID=this.boundingMesh.uuid,t.objUUID=this.uuid);var i=o.getPrefabIdByName(this.objType);i&&(t.i=i),-1===t.i&&alert("WARNING: No prefab id for type "+this.objType+"."),t.p=t.p.map(e=>(parseFloat(e)||0).round(2)),t.s=t.s.map(e=>(parseFloat(e)||0).round(2)),this.collidable||(t.l=this.collidable?0:1),this.prefab.canWallJump&&!this.canWallJump&&(t.wj=1),this.penetrable&&this.prefab.editPen&&(t.pe=1),this.visible||(t.v=1),this.boost&&(t.b=parseFloat(this.boost.round(2))),1!=this.bounce&&(t.bm=parseFloat(this.bounce.round(2))),this.crouch||(t.cr=1),this.edgeNoise&&(t.en=parseFloat(this.edgeNoise.round(1))),this.health&&(t.h=parseInt(this.health)),this.canDestroy&&(t.cdy=1),"PARTICLES"==this.objType&&(this.part&&0!=this.part&&(t.pr=parseInt(this.part)),this.partC&&0<this.partC&&(t.pc=parseInt(this.partC)),this.partS&&1!=this.partS&&(t.ps=parseFloat(this.partS.round(1))),this.partSC&&1!=this.partSC&&(t.psc=parseFloat(this.partSC.round(1))),this.partSP&&1!=this.partSP&&(t.psp=parseFloat(this.partSP.round(1))),this.partG&&1!=this.partG&&(t.pg=parseFloat(this.partG.round(1))),this.partD&&1!=this.partD&&(t.pd=parseFloat(this.partD.round(1))),this.partB&&0!=this.partB&&(t.pb=parseInt(this.partB)));let n=a.fixRotations(this.rot);(n[0]||n[1]||n[2])&&(t.r=n.map(e=>e.round(2)));let r=this.faces;if(this.prefab.editFaces&&!r.every(Boolean)&&(t.f=a.convertFaces(r.map(e=>~~e),1)),"#FFFFFF"!=this.color&&(t.c=this.color),"#000000"!=this.emissive&&(t.e=this.emissive),1!=this.opacity&&void 0!==this.opacity&&(t.o=parseFloat(this.opacity.round(1))),this.prefab.texturable){if(this.assetTexture)t.at=parseInt(this.assetTexture);else{var s=o.getTextureIdByName(this.texture);s&&(t.t=s)}0<this.texOffX&&(t.tox=parseFloat(this.texOffX.round(1))),0<this.texOffY&&(t.toy=parseFloat(this.texOffY.round(1))),0!=this.texRot&&(t.tr=parseFloat(this.texRot.round(1)))}return this.prefab.customDirection&&0<this.direction&&(t.d=this.direction),this.prefab.optionalDirection&&this.forceDir&&(t.fd=1),this.prefab.canStretch&&this.texStretch&&(t.tsr=1),this.prefab.teamable&&(t.tm=this.team),this.prefab.movingTexture&&0!=this.movingSpeed&&void 0!==this.movingSpeed&&(t.ts=parseFloat(this.movingSpeed.round(1)),0!=this.movingAxis&&(t.td=parseInt(this.movingAxis))),this.prefab.frameTexture&&0!=this.frameCount&&void 0!==this.frameCount&&(t.fct=parseInt(this.frameCount),t.fs=parseFloat(this.frameSpeed.round(1))),this.prefab.customScore&&this.score>(this.prefab.interact||this.prefab.ai?0:1)&&(t.sp=this.score),("CHECK_POINT"==this.objType||"TRIGGER"==this.objType||this.prefab.ai)&&this.single&&(t.su=1),"TRIGGER"==this.objType&&this.singleP&&(t.sup=1),"TRIGGER"==this.objType&&16==this.event&&0<this.actionCost&&(t.tac=parseInt(this.actionCost)),"TRIGGER"==this.objType&&16==this.event&&0<this.actionMethod&&(t.tam=parseInt(this.actionMethod)),"WEAPON_PICKUP"==this.objType&&void 0!==this.weaponId&&(0<this.weaponId&&(t.w=parseInt(this.weaponId)),!this.weaponReplace&&(t.wr=1),this.randWep&&(t.rw=1)),"BILLBOARD"==this.objType&&0<this.poster&&(t.bb=parseInt(this.poster)),"BILLBOARD"==this.objType&&this.showAd&&(t.sad=1),this.prefab.hasBorder&&this.border&&(t.bo=1),this.prefab.hasSpin&&0!=this.spin&&(t.spn=parseInt(this.spin),this.prefab.hasSpinDir&&this.spinAxis&&(t.spa=1)),"TELEPORTER"==this.prefab.name&&(0<this.channel&&(t.ch=parseInt(this.channel)),0<this.node&&(t.n=parseInt(this.node)),this.momentum&&(t.m=1)),this.prefab.complex||this.prefab.tool||this.ambient||(t.ab=1),this.prefab.editFog&&!this.fog&&(t.nf=1),(this.prefab.interact||this.prefab.interact2)&&(this.hidden&&(t.nm=1),this.prefab.interact&&(this.method&&(t.md=parseInt(this.method)),this.prefab.canUndo&&this.closeable&&(t.cl=1,this.startClosed&&(t.stc=1)))),("TRIGGER"==this.objType||this.prefab.ai)&&(this.canTrigger&&this.prefab.ai&&(t.ct=1),this.event&&(t.te=parseInt(this.event)),this.action&&(t.ta=parseInt(this.action)),this.chance&&(t.cha=parseInt(this.chance)),this.constant&&(t.tc=parseInt(this.constant)),this.constantEvent&&(t.tce=parseInt(this.constantEvent)),this.constantTxt.length&&(t.tct=this.constantTxt),this.selfDestruct&&(t.sfd=1)),this.prefab.hasText&&this.text.length&&(t.st=this.text,"#000000"!=this.fcolor&&(t.sc=this.fcolor),"#FFFFFF"!=this.bcolor&&(t.sb=this.bcolor),!this.backVisible&&(t.bv=1),this.fsize&&10!=this.fsize&&(t.sf=parseInt(this.fsize)),this.tAlign&&0!=this.tAlign&&(t.sa=parseInt(this.tAlign))),(this.health||this.canDestroy)&&(this.respawnT&&(t.rt=parseFloat(this.respawnT)),this.respawnR&&(t.rr=1),this.startDestroyed&&(t.sd=1)),this.prefab.canInterface&&this.interfaceId&&(t.in=parseInt(this.interfaceId)),this.prefab.canTargetInterface&&this.interfaceIdT&&(t.tin=parseInt(this.interfaceIdT)),"DEPOSIT_BOX"==this.objType&&(1e3!=this.withdraw&&(t.wd=parseInt(this.withdraw)),1e3!=this.deposit&&(t.dp=parseInt(this.deposit))),this.prefab.objectiveLink&&this.objectiveId&&(t.obi=parseInt(this.objectiveId)),"LIQUID"==this.objType&&(.5!=this.wHeight&&(t.wh=parseInt(this.wHeight)),10!=this.wSpeed&&(t.ws=parseInt(this.wSpeed)),10!=this.tilesX&&(t.tx=parseInt(this.tilesX)),10!=this.tilesZ&&(t.tz=parseInt(this.tilesZ))),"LIGHT_CONE"==this.objType&&this.fullcone&&(t.fc=1),("SOUND_EMITTER"==this.objType||("TRIGGER"==this.objType||this.prefab.ai)&&14==this.action)&&(this.assetSound?t.esa=parseInt(this.assetSound):t.es=parseInt(this.snd),t.ev=parseFloat(this.vol.round(2)),t.er=parseFloat(this.rate.round(1)),"SOUND_EMITTER"==this.objType?(t.ed=parseInt(this.dist),t.ero=parseFloat(this.roll.round(2))):this.emitfrom&&(t.ef=parseInt(this.emitfrom))),this.prefab.gen&&(this.prefab.ai||this.mSize!=this.prefab.scale)&&(t.ms=parseFloat(this.mSize)),("CUSTOM_ASSET"==this.objType||this.prefab.ai)&&this.assetID&&(t.aid=this.assetID),"SPAWN_POINT"==this.objType&&this.cmpSpwn&&(t.cp=1),"SPAWN_POINT"==this.objType&&this.teamOnly&&(t.to=1),this.texSmooth||(t.txs=1),this.prefab.canBeDynamic&&this.dynamic&&(t.dyn=1,this.gravity&&(t.grv=parseFloat(this.gravity.round(1)))),"SHOWCASE"==this.objType&&this.itemID&&(t.skin=parseInt(this.itemID)||0),this.prefab.light&&(1!=this.intensity&&(t.li=parseFloat(this.intensity.round(1))),this.distance&&(t.lds=parseFloat(this.distance.round(1))),1!=this.decay&&(t.ld=parseFloat(this.decay.round(1)))),"CYLINDER"==this.objType&&this.openEnded&&(t.opn=1),this.prefab.ai&&(t.tsd=parseFloat(this.turnSpd.round(1)),t.spd=parseFloat(this.speed.round(1)),t.vd=parseInt(this.visDis),t.idl=parseInt(this.idleSound)||0,t.dth=parseInt(this.deathSound)||0,t.atk=parseInt(this.atkSound)||0,t.agr=parseInt(this.agroSound)||0,t.fr=parseInt(this.frate)||0,t.grv=parseFloat(this.gravity)||0,t.pj=parseInt(this.projType)||0,t.rew=this.rewardType,t.bh=parseInt(this.behaviorType)||0,this.xrayVis&&(t.xv=1),this.canShoot&&(t.cs=1),this.canHit&&(t.cnh=1),this.aiName.length&&(t.ain=this.aiName)),!(this.prefab.tool||this.prefab.fakeScale||this.prefab.noDetail||this.prefab.noBake||"BILLBOARD"==this.prefab.name)&&this.bakeAcc&&(t.ba=parseInt(this.bakeAcc)),this.prefab.canTrans&&this.forceTrans&&(t.ft=1),t}static deserialize(e){return new c(e)}}c.borderVisuals=!0,c.liquidVal=0,c.tmpBox3=new n.Box3,c.tmpVector3=new n.Vector3,c.boundingMeshGeometry=new n.BoxBufferGeometry(1,1,1),c.boundingMeshGeometry.translate(0,.5,0),c.boundingMeshMaterial=new n.StrippedLambertMaterial({color:16711680,visible:!1}),c.boundingBoxGeometry=(()=>{const e=.5;let t=new n.Geometry;return t.vertices.push(new n.Vector3(-e,-e,-e),new n.Vector3(e,-e,-e),new n.Vector3(-e,e,-e),new n.Vector3(e,e,-e),new n.Vector3(-e,e,e),new n.Vector3(e,e,e),new n.Vector3(-e,-e,e),new n.Vector3(e,-e,e),new n.Vector3(-e,-e,-e),new n.Vector3(-e,e,-e),new n.Vector3(-e,-e,e),new n.Vector3(-e,e,e),new n.Vector3(e,-e,e),new n.Vector3(e,e,e),new n.Vector3(e,-e,-e),new n.Vector3(e,e,-e),new n.Vector3(-e,-e,-e),new n.Vector3(-e,-e,e),new n.Vector3(-e,e,-e),new n.Vector3(-e,e,e),new n.Vector3(e,e,-e),new n.Vector3(e,e,e),new n.Vector3(e,-e,-e),new n.Vector3(e,-e,e)),t})(),c.boundingCollidableBoxMaterial=new n.LineBasicMaterial({color:65280}),c.boundingNoncollidableBoxMaterial=new n.LineBasicMaterial({color:255}),c.boundingLineBoxMaterial=new n.LineBasicMaterial({color:16711680,linewidth:5}),c.hitBoxMaterial=new n.StrippedLambertMaterial({color:16711680,opacity:.2,transparent:!0}),c.showRealHitbox=!1;var d=[];c.getLineMaterial=function(e){if(null!=e.lineCol){var t=d[e.lineCol];return t||(t=new n.LineBasicMaterial({color:e.lineCol}),d[e.lineCol]=t),t}return c.boundingCollidableBoxMaterial},c.addTerrObj=o.addTerrObj,c.forceWire=!1,e.exports=c},function(e,t){e.exports=class{constructor(e){this.Editor=e,this.bounds={min:220,max:600},this.panels={left:{ui:document.getElementById("canvasUI"),handle:document.getElementsByClassName("resize")[0],body:document.getElementsByClassName("panel")[0]},right:{ui:document.getElementById("canvasInfo"),handle:document.getElementsByClassName("resize")[1],body:document.getElementsByClassName("panel")[1]}},this.center=document.getElementById("center"),this.body=document.getElementById("uiBase"),Object.keys(this.panels).forEach(e=>{this.bind(this.panels[e].handle,this.panels[e].body,e)})}centerCallback(){let e=this.panels.left.body.offsetWidth,t=this.panels.right.body.offsetWidth,i="none"==this.panels.left.body.style.display,n="none"==this.panels.right.body.style.display;this.center.style.left=(i?0:e)+"px",this.center.style.width=this.body.clientWidth-(i?0:e)-(n?0:t)+"px"}leftCallback(e,t,i){let n=e.pageX/this.Editor.elemScale-i.clientLeft+t.clientWidth/2;i.style.width=Math.min(Math.max(n,this.bounds.min),this.bounds.max)+"px"}rightCallback(e,t,i){let n=this.body.clientWidth-e.pageX/this.Editor.elemScale+t.clientWidth/2;i.style.width=Math.min(Math.max(n,this.bounds.min),this.bounds.max)+"px";let r=i.offsetWidth;i.style.left=this.body.clientWidth-r+"px"}bind(e,t,i){function n(n){(n=n||window.event).preventDefault(),s[i+"Callback"](n,e,t),s.centerCallback(),s.Editor.resize(),a=n}function r(){document.all[0].style.cursor=null,window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r)}let a,s=this;e.addEventListener("mousedown",e=>{(e=e||window.event).preventDefault(),document.all[0].style.cursor="col-resize",window.addEventListener("mousemove",n),window.addEventListener("mouseup",r)}),s.forceResize=function(){a&&n(a)}}restore(e){(e=e.parentElement.children[[...e.parentElement.children].indexOf(e)+1]).style.display=null,this.centerCallback(),this.Editor.resize();let t=e.className.includes("left")?"left":"right";this.panels[t].ui.style[t]="0px"}hide(e){[,,,].fill(1).forEach(()=>e=e.parentElement),e.style.display="none",this.centerCallback(),this.Editor.resize();let t=e.className.includes("left")?"left":"right";this.panels[t].ui.style[t]="43px"}}}]);</script></body>
</html>
